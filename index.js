/*! For license information please see index.js.LICENSE.txt */
(()=>{var __webpack_modules__={998:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),i=n(645),o=n.n(i)()(a());o.push([e.id,'html,\r\nbody,\r\n#app {\r\n    padding: 0;\r\n    position: absolute !important;\r\n    top: 0px;\r\n    left: 0px;\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 0px;\r\n    overflow: hidden;\r\n    user-select: none;\r\n    scroll-behavior: smooth;\r\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial,\r\n        sans-serif, "Apple Color Emoji", "Segoe UI Emoji";\r\n    color: aliceblue;\r\n    background-color: #222;\r\n    touch-action: none;\r\n}\r\n\r\n#app {\r\n    display: flex;\r\n}\r\n\r\n#mobile-select {\r\n    position: absolute;\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: center;\r\n    top: -50px;\r\n    transition: top 0.25s linear;\r\n}\r\n\r\n#mobile-select > select {\r\n    text-align: center;\r\n    background-color: #222;\r\n    color: #eee;\r\n    appearance: none;\r\n    outline: none;\r\n    padding: 8px;\r\n    border: solid 1px rgba(238, 238, 238, 0.5);\r\n}\r\n\r\n#mobile-select > select > option {\r\n    background-color: #222;\r\n    color: #eee;\r\n}\r\n\r\n#mobile-select > select > option:focus {\r\n    background-color: #222;\r\n    color: cornflowerblue;\r\n}\r\n\r\nh1 {\r\n    text-align: center;\r\n}\r\n\r\n.left-column {\r\n    width: 25%;\r\n    min-width: 225px;\r\n    max-width: 300px;\r\n    overflow-x: hidden;\r\n    overflow-y: hidden;\r\n    transition: all 0.25s linear;\r\n}\r\n\r\n.model-list {\r\n    max-height: calc(100% - 120px);\r\n    overflow-x: hidden;\r\n    overflow-y: scroll;\r\n    padding: 15px;\r\n    transition: all 0.25s linear;\r\n}\r\n\r\n.model-list div {\r\n    padding: 5px;\r\n    cursor: pointer;\r\n}\r\n\r\n.model-list div[data-selected="true"] {\r\n    font-weight: bold;\r\n    background-color: rgb(45, 50, 58);\r\n}\r\n\r\n.model-list div:hover {\r\n    color: cornflowerblue;\r\n}\r\n\r\n#model-select {\r\n    opacity: 1;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n#canvas-container {\r\n    padding-top: 150px;\r\n    padding-bottom: 50px;\r\n    width: 75%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transition: width 0.25s linear;\r\n}\r\n\r\n#canvas-container canvas {\r\n    min-width: 50%;\r\n    min-height: 50%;\r\n    max-width: 75%;\r\n    max-height: 75%;\r\n    object-fit: contain;\r\n}\r\n\r\n.controls {\r\n    position: absolute;\r\n    top: 0;\r\n    text-align: center;\r\n\r\n    background-color: rgba(34, 34, 34, 0.5);\r\n    padding-bottom: 20px;\r\n    transition: top 0.25s linear;\r\n}\r\n\r\n.control-buttons {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n.control-buttons > button:not(:first-child) {\r\n    margin-left: 20px;\r\n}\r\n\r\nbutton {\r\n    padding: 5px 10px;\r\n    background-color: transparent;\r\n    outline: none;\r\n    border: solid 1px rgba(238, 238, 238, 0.5);\r\n    color: #eee;\r\n    cursor: pointer;\r\n    transition: border 0.25s linear, color 0.25s linear;\r\n}\r\n\r\nbutton:disabled {\r\n    color: gray;\r\n    border: solid 1px gray;\r\n}\r\n\r\nbutton:disabled:hover {\r\n    cursor: not-allowed;\r\n}\r\n\r\nbutton:hover:not(:disabled) {\r\n    color: #fff;\r\n    border: solid 1px #fff;\r\n    filter: drop-shadow(0 0 5px #eee) contrast(2) brightness(2);\r\n}\r\n\r\nbutton.danger {\r\n    color: crimson;\r\n    border: solid 1px rgba(220, 20, 60, 0.5);\r\n}\r\n\r\nbutton.danger:hover {\r\n    color: red;\r\n    border: solid 1px red;\r\n    filter: drop-shadow(0 0 5px red) contrast(2) brightness(2);\r\n}\r\n\r\n#speed {\r\n    position: absolute;\r\n    bottom: 30px;\r\n    display: flex;\r\n    align-items: center;\r\n    transition: bottom 0.25s linear;\r\n}\r\n\r\n#speed label {\r\n    position: absolute;\r\n    left: 0;\r\n    transform: translate(-20px, -20px);\r\n}\r\n\r\n#speed-bar {\r\n    width: 60vw;\r\n    max-width: 400px;\r\n    height: 15px;\r\n    -webkit-appearance: none;\r\n    background: #111;\r\n    outline: none;\r\n    border-radius: 15px;\r\n    overflow: hidden;\r\n    box-shadow: inset 0 0 5px rgba(0, 0, 0, 1);\r\n}\r\n\r\n#speed-bar::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    width: 15px;\r\n    height: 15px;\r\n    border-radius: 50%;\r\n    background: #414141;\r\n    cursor: pointer;\r\n    border: 4px solid #aaa;\r\n    box-shadow: -407px 0 0 400px #3f3f3f;\r\n    transition: border 0.25s ease-in-out, box-shadow 0.25s ease-in-out;\r\n}\r\n\r\n#speed-bar::-webkit-slider-thumb:hover {\r\n    border: 4px solid #fff;\r\n    box-shadow: -407px 0 0 400px #828282;\r\n}\r\n\r\n::-webkit-scrollbar {\r\n    width: 5px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n    background-color: #ffffff;\r\n    border-radius: 20px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n    background-color: #2b2b2b;\r\n    border-radius: 20px;\r\n    margin: 5px;\r\n}\r\n\r\n@media only screen and (max-width: 700px) {\r\n    button {\r\n        padding: 5px 5px;\r\n        max-width: 35vw;\r\n        min-width: 50px;\r\n    }\r\n\r\n    .left-column {\r\n        width: 0;\r\n        min-width: 0;\r\n    }\r\n\r\n    #vox-download,\r\n    #debug {\r\n        display: none;\r\n    }\r\n\r\n    #canvas-container {\r\n        width: 100%;\r\n    }\r\n\r\n    #canvas-container canvas {\r\n        min-width: 100px;\r\n        min-height: 100px;\r\n        max-width: 90%;\r\n        max-height: 90%;\r\n        object-fit: contain;\r\n    }\r\n\r\n    #model-select {\r\n        opacity: 0;\r\n    }\r\n\r\n    #mobile-select {\r\n        top: 25px;\r\n    }\r\n\r\n    #speed {\r\n        bottom: clamp(15px, calc(25vh - 25vw - 25px), 25px);\r\n    }\r\n}\r\n\r\n#title {\r\n    overflow-y: hidden;\r\n    transition: all 0.25s linear;\r\n}\r\n\r\n@media only screen and (max-height: 500px) {\r\n    #title {\r\n        max-height: 0px;\r\n        margin: 0px;\r\n    }\r\n\r\n    #canvas-container {\r\n        padding-top: 125px;\r\n    }\r\n\r\n    #speed {\r\n        bottom: 20px;\r\n    }\r\n\r\n    .model-list {\r\n        max-height: 95vh;\r\n    }\r\n}\r\n',""]);const s=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&o[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},162:function(e,t,n){var r;void 0===(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,n,o){var s=i.URL||i.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?a(l):r(l.href)?t(e,n,o):a(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){a(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(r(e))t(e,n,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){a(o)}))}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},c.readAsDataURL(e)}else{var f=i.URL||i.webkitURL,d=f.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});i.saveAs=s.saveAs=s,e.exports=s}.apply(t,[]))||(e.exports=r)},448:(e,t,n)=>{"use strict";var r=n(294),a=n(840);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),O=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function R(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=I&&e[I]||e["@@iterator"])?e:null}var j,L=Object.assign;function N(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function U(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return B(e.type,!1);case 11:return B(e.type.render,!1);case 1:return B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case M:return"Fragment";case x:return"Portal";case k:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case T:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return V(e(t))}catch(e){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function K(e,t){Q(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ie(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Me=null,Se=null;function ke(e){if(e=ya(e)){if("function"!=typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=wa(t),xe(e.stateNode,e.type,t))}}function Ae(e){Me?Se?Se.push(e):Se=[e]:Me=e}function Oe(){if(Me){var e=Me,t=Se;if(Se=Me=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Ce(){}var Te=!1;function Pe(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ee(e,t,n)}finally{Te=!1,(null!==Me||null!==Se)&&(Ce(),Oe())}}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){De=!1}function Re(e,t,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var je=!1,Le=null,Ne=!1,Fe=null,Be={onError:function(e){je=!0,Le=e}};function Ue(e,t,n,r,a,i,o,s,l){je=!1,Le=null,Re.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ye(e){if(Ve(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ye(a),e;if(o===r)return Ye(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=o;break}if(l===r){s=!0,r=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=a;break}if(l===r){s=!0,r=o,n=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var $e=a.unstable_scheduleCallback,He=a.unstable_cancelCallback,Ge=a.unstable_shouldYield,Ze=a.unstable_requestPaint,Qe=a.unstable_now,Ke=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ut=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ft(s):0!=(i&=o)&&(r=ft(i))}else 0!=(o=n&~a)?r=ft(o):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!=(4194240&i)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0==(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var yt=0;function _t(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,xt,Mt,St,kt,At=!1,Ot=[],Et=null,Ct=null,Tt=null,Pt=new Map,zt=new Map,Dt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function jt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&null!==(t=ya(t))&&xt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ba(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){Mt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ya(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ft(e,t,n){Nt(e)&&n.delete(t)}function Bt(){At=!1,null!==Et&&Nt(Et)&&(Et=null),null!==Ct&&Nt(Ct)&&(Ct=null),null!==Tt&&Nt(Tt)&&(Tt=null),Pt.forEach(Ft),zt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Ot.length){Ut(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Ut(Et,e),null!==Ct&&Ut(Ct,e),null!==Tt&&Ut(Tt,e),Pt.forEach(t),zt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var qt=_.ReactCurrentBatchConfig,Yt=!0;function Wt(e,t,n,r){var a=yt,i=qt.transition;qt.transition=null;try{yt=1,$t(e,t,n,r)}finally{yt=a,qt.transition=i}}function Xt(e,t,n,r){var a=yt,i=qt.transition;qt.transition=null;try{yt=4,$t(e,t,n,r)}finally{yt=a,qt.transition=i}}function $t(e,t,n,r){if(Yt){var a=Gt(e,t,n,r);if(null===a)Yr(e,t,r,Ht,n),Rt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Et=jt(Et,e,t,n,r,a),!0;case"dragenter":return Ct=jt(Ct,e,t,n,r,a),!0;case"mouseover":return Tt=jt(Tt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Pt.set(i,jt(Pt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,zt.set(i,jt(zt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==a;){var i=ya(a);if(null!==i&&wt(i),null===(i=Gt(e,t,n,r))&&Yr(e,t,r,Ht,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Yr(e,t,r,null,n)}}var Ht=null;function Gt(e,t,n,r){if(Ht=null,null!==(e=ba(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Kt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Kt,r=n.length,a="value"in Qt?Qt.value:Qt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),fn=L({},un,{view:0,detail:0}),dn=an(fn),hn=L({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),mn=an(L({},hn,{dataTransfer:0})),vn=an(L({},fn,{relatedTarget:0})),gn=an(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),_n=an(L({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function kn(){return Sn}var An=L({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=an(An),En=an(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(L({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Tn=an(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zn=an(Pn),Dn=[9,13,27,32],In=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var jn=c&&"TextEvent"in window&&!Rn,Ln=c&&(!In||Rn&&8<Rn&&11>=Rn),Nn=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1,qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ae(r),0<(t=Xr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,$n=null;function Hn(e){Nr(e,0)}function Gn(e){if($(_a(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Kn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"==typeof er.oninput}Kn=Jn}else Kn=!1;Qn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),$n=Xn=null)}function nr(e){if("value"===e.propertyName&&Gn($n)){var t=[];Wn(t,$n,e,we(e)),Pe(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn($n)}function ir(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,br=null,yr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==H(r)||(r="selectionStart"in(r=vr)&&hr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Xr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Mr={},Sr={};function kr(e){if(Mr[e])return Mr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Mr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ar=kr("animationend"),Or=kr("animationiteration"),Er=kr("animationstart"),Cr=kr("transitionend"),Tr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(e,t){Tr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Ir=Pr[Dr];zr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}zr(Ar,"onAnimationEnd"),zr(Or,"onAnimationIteration"),zr(Er,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Cr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,l,u){if(Ue.apply(this,arguments),je){if(!je)throw Error(i(198));var c=Le;je=!1,Le=null,Ne||(Ne=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;Lr(a,s,u),i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;Lr(a,s,u),i=l}}}if(Ne)throw e=Fe,Ne=!1,Fe=null,e}function Fr(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Zt(t)){case 1:var a=Wt;break;case 4:a=Xt;break;default:a=$t}n=a.bind(null,t,n,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Yr(e,t,n,r,a){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ba(s)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=i,a=we(n),o=[];e:{var s=Tr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=On;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Cn;break;case Ar:case Or:case Er:l=gn;break;case Cr:l=Tn;break;case"scroll":l=dn;break;case"wheel":l=zn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&null!=(m=ze(p,d))&&c.push(Wr(p,m,h))),f)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,a),o.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(u=n.relatedTarget||n.fromElement)||!ba(u)&&!u[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ba(u):null)&&(u!==(f=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=En,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==l?s:_a(l),h=null==u?s:_a(u),(s=new c(m,p+"leave",l,n,a)).target=f,s.relatedTarget=h,m=null,ba(a)===r&&((c=new c(d,p+"enter",u,n,a)).target=h,c.relatedTarget=f,m=c),f=m,l&&u)e:{for(d=u,p=0,h=c=l;h;h=$r(h))p++;for(h=0,m=d;m;m=$r(m))h++;for(;0<p-h;)c=$r(c),p--;for(;0<h-p;)d=$r(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=$r(c),d=$r(d)}c=null}else c=null;null!==l&&Hr(o,s,l,c,!1),null!==u&&null!==f&&Hr(o,f,u,c,!0)}if("select"===(l=(s=r?_a(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Zn;else if(Yn(s))if(Qn)v=or;else{v=ar;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Wn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?_a(r):window,e){case"focusin":(Yn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,br=null);break;case"focusout":br=gr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,_r(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(o,n,a)}var b;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Vn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Vn&&(b=en()):(Kt="value"in(Qt=a)?Qt.value:Qt.textContent,Vn=!0)),0<(g=Xr(r,y)).length&&(y=new _n(y,e,null,n,a),o.push({event:y,listeners:g}),(b||null!==(b=Un(n)))&&(y.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!In&&Bn(e,t)?(e=en(),Jt=Kt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Xr(r,"onBeforeInput")).length&&(a=new _n("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=b)}Nr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=ze(e,n))&&r.unshift(Wr(e,i,a)),null!=(i=ze(e,t))&&r.push(Wr(e,i,a))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(l=ze(n,i))&&o.unshift(Wr(n,l,s)):a||null!=(l=ze(n,i))&&o.push(Wr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Qr(e){return("string"==typeof e?e:""+e).replace(Gr,"\n").replace(Zr,"")}function Kr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,ia="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function ua(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),da="__reactFiber$"+fa,ha="__reactProps$"+fa,pa="__reactContainer$"+fa,ma="__reactEvents$"+fa,va="__reactListeners$"+fa,ga="__reactHandles$"+fa;function ba(e){var t=e[da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[da]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[da])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ya(e){return!(e=e[da]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _a(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function wa(e){return e[ha]||null}var xa=[],Ma=-1;function Sa(e){return{current:e}}function ka(e){0>Ma||(e.current=xa[Ma],xa[Ma]=null,Ma--)}function Aa(e,t){Ma++,xa[Ma]=e.current,e.current=t}var Oa={},Ea=Sa(Oa),Ca=Sa(!1),Ta=Oa;function Pa(e,t){var n=e.type.contextTypes;if(!n)return Oa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function za(e){return null!=e.childContextTypes}function Da(){ka(Ca),ka(Ea)}function Ia(e,t,n){if(Ea.current!==Oa)throw Error(i(168));Aa(Ea,t),Aa(Ca,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,q(e)||"Unknown",a));return L({},n,r)}function ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oa,Ta=Ea.current,Aa(Ea,e),Aa(Ca,Ca.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ra(e,t,Ta),r.__reactInternalMemoizedMergedChildContext=e,ka(Ca),ka(Ea),Aa(Ea,e)):ka(Ca),Aa(Ca,n)}var Na=null,Fa=!1,Ba=!1;function Ua(e){null===Na?Na=[e]:Na.push(e)}function Va(){if(!Ba&&null!==Na){Ba=!0;var e=0,t=yt;try{var n=Na;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Na=null,Fa=!1}catch(t){throw null!==Na&&(Na=Na.slice(e+1)),$e(Je,Va),t}finally{yt=t,Ba=!1}}return null}var qa=[],Ya=0,Wa=null,Xa=0,$a=[],Ha=0,Ga=null,Za=1,Qa="";function Ka(e,t){qa[Ya++]=Xa,qa[Ya++]=Wa,Wa=e,Xa=t}function Ja(e,t,n){$a[Ha++]=Za,$a[Ha++]=Qa,$a[Ha++]=Ga,Ga=e;var r=Za;e=Qa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Za=1<<32-ot(t)+a|n<<a|r,Qa=i+e}else Za=1<<i|n<<a|r,Qa=e}function ei(e){null!==e.return&&(Ka(e,1),Ja(e,1,0))}function ti(e){for(;e===Wa;)Wa=qa[--Ya],qa[Ya]=null,Xa=qa[--Ya],qa[Ya]=null;for(;e===Ga;)Ga=$a[--Ha],$a[Ha]=null,Qa=$a[--Ha],$a[Ha]=null,Za=$a[--Ha],$a[Ha]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ua(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ga?{id:Za,overflow:Qa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ui(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(li(e))throw Error(i(418));t=ua(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ci(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function fi(e){if(e!==ni)return!1;if(!ai)return ci(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw di(),Error(i(418));for(;t;)oi(e,t),t=ua(t.nextSibling)}if(ci(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ua(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ua(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=ua(e.nextSibling)}function hi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=_.ReactCurrentBatchConfig;function vi(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var gi=Sa(null),bi=null,yi=null,_i=null;function wi(){_i=yi=bi=null}function xi(e){var t=gi.current;ka(gi),e._currentValue=t}function Mi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Si(e,t){bi=e,_i=yi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_s=!0),e.firstContext=null)}function ki(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===yi){if(null===bi)throw Error(i(308));yi=e,bi.dependencies={lanes:0,firstContext:e}}else yi=yi.next=e;return t}var Ai=null;function Oi(e){null===Ai?Ai=[e]:Ai.push(e)}function Ei(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Oi(t)):(n.next=a.next,a.next=n),t.interleaved=n,Ci(e,r)}function Ci(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ti=!1;function Pi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&El)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Ci(e,n)}return null===(a=r.interleaved)?(t.next=t,Oi(r)):(t.next=a.next,a.next=t),r.interleaved=t,Ci(e,n)}function Ri(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function ji(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Li(e,t,n,r){var a=e.updateQueue;Ti=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?i=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==i){var f=a.baseState;for(o=0,c=u=l=null,s=i;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(h,f,d):p))break e;f=L({},f,d);break e;case 2:Ti=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=f):c=c.next=h,o|=d;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(d=s).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===c&&(l=f),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=f}}function Ni(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(i(191,a));a.call(r)}}}var Fi=(new r.Component).refs;function Bi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ui={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),a=tu(e),i=Di(r,a);i.payload=t,null!=n&&(i.callback=n),null!==(t=Ii(e,i,a))&&(nu(t,e,a,r),Ri(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),a=tu(e),i=Di(r,a);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=Ii(e,i,a))&&(nu(t,e,a,r),Ri(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),a=Di(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=Ii(e,a,r))&&(nu(t,e,r,n),Ri(t,e,r))}};function Vi(e,t,n,r,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(a,i))}function qi(e,t,n){var r=!1,a=Oa,i=t.contextType;return"object"==typeof i&&null!==i?i=ki(i):(a=za(t)?Ta:Ea.current,i=(r=null!=(r=t.contextTypes))?Pa(e,a):Oa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ui,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Yi(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ui.enqueueReplaceState(t,t.state,null)}function Wi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Fi,Pi(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=ki(i):(i=za(t)?Ta:Ea.current,a.context=Pa(e,i)),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(Bi(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&Ui.enqueueReplaceState(a,a.state,null),Li(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function Xi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===Fi&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function $i(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hi(e){return(0,e._init)(e._payload)}function Gi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===M?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===z&&Hi(i)===t.type)?((r=a(t,n.props)).ref=Xi(e,t,n),r.return=e,r):((r=Iu(n.type,n.key,n.props,null,e.mode,r)).ref=Xi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Iu(t.type,t.key,t.props,null,e.mode,n)).ref=Xi(e,null,t),n.return=e,n;case x:return(t=Nu(t,e.mode,n)).return=e,t;case z:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ru(t,e.mode,n,null)).return=e,t;$i(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?u(e,t,n,r):null;case x:return n.key===a?c(e,t,n,r):null;case z:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||R(n))return null!==a?null:f(e,t,n,r,null);$i(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case z:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,a,null);$i(t,r)}return null}function m(a,i,s,l){for(var u=null,c=null,f=i,m=i=0,v=null;null!==f&&m<s.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var g=h(a,f,s[m],l);if(null===g){null===f&&(f=v);break}e&&f&&null===g.alternate&&t(a,f),i=o(g,i,m),null===c?u=g:c.sibling=g,c=g,f=v}if(m===s.length)return n(a,f),ai&&Ka(a,m),u;if(null===f){for(;m<s.length;m++)null!==(f=d(a,s[m],l))&&(i=o(f,i,m),null===c?u=f:c.sibling=f,c=f);return ai&&Ka(a,m),u}for(f=r(a,f);m<s.length;m++)null!==(v=p(f,a,m,s[m],l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),i=o(v,i,m),null===c?u=v:c.sibling=v,c=v);return e&&f.forEach((function(e){return t(a,e)})),ai&&Ka(a,m),u}function v(a,s,l,u){var c=R(l);if("function"!=typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var f=c=null,m=s,v=s=0,g=null,b=l.next();null!==m&&!b.done;v++,b=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var y=h(a,m,b.value,u);if(null===y){null===m&&(m=g);break}e&&m&&null===y.alternate&&t(a,m),s=o(y,s,v),null===f?c=y:f.sibling=y,f=y,m=g}if(b.done)return n(a,m),ai&&Ka(a,v),c;if(null===m){for(;!b.done;v++,b=l.next())null!==(b=d(a,b.value,u))&&(s=o(b,s,v),null===f?c=b:f.sibling=b,f=b);return ai&&Ka(a,v),c}for(m=r(a,m);!b.done;v++,b=l.next())null!==(b=p(m,a,v,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?v:b.key),s=o(b,s,v),null===f?c=b:f.sibling=b,f=b);return e&&m.forEach((function(e){return t(a,e)})),ai&&Ka(a,v),c}return function e(r,i,o,l){if("object"==typeof o&&null!==o&&o.type===M&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=i;null!==c;){if(c.key===u){if((u=o.type)===M){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===z&&Hi(u)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Xi(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===M?((i=Ru(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Iu(o.type,o.key,o.props,null,r.mode,l)).ref=Xi(r,i,o),l.return=r,r=l)}return s(r);case x:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Nu(o,r.mode,l)).return=r,r=i}return s(r);case z:return e(r,i,(c=o._init)(o._payload),l)}if(te(o))return m(r,i,o,l);if(R(o))return v(r,i,o,l);$i(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Lu(o,r.mode,l)).return=r,r=i),s(r)):n(r,i)}}var Zi=Gi(!0),Qi=Gi(!1),Ki={},Ji=Sa(Ki),eo=Sa(Ki),to=Sa(Ki);function no(e){if(e===Ki)throw Error(i(174));return e}function ro(e,t){switch(Aa(to,t),Aa(eo,e),Aa(Ji,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ka(Ji),Aa(Ji,t)}function ao(){ka(Ji),ka(eo),ka(to)}function io(e){no(to.current);var t=no(Ji.current),n=le(t,e.type);t!==n&&(Aa(eo,e),Aa(Ji,n))}function oo(e){eo.current===e&&(ka(Ji),ka(eo))}var so=Sa(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var fo=_.ReactCurrentDispatcher,ho=_.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,bo=!1,yo=!1,_o=0,wo=0;function xo(){throw Error(i(321))}function Mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,a,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:ls,e=n(r,a),yo){o=0;do{if(yo=!1,_o=0,25<=o)throw Error(i(301));o+=1,go=vo=null,t.updateQueue=null,fo.current=us,e=n(r,a)}while(yo)}if(fo.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,bo=!1,t)throw Error(i(300));return e}function ko(){var e=0!==_o;return _o=0,e}function Ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function Oo(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Eo(e,t){return"function"==typeof t?t(e):t}function Co(e){var t=Oo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=vo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((po&f)===f)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,mo.lanes|=f,jl|=f}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,jl|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=Oo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function zo(e,t){var n=mo,r=Oo(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,_s=!0),r=r.queue,Yo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Fo(9,Io.bind(null,n,r,a,t),void 0,null),null===Cl)throw Error(i(349));0!=(30&po)||Do(n,t,a)}return a}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Lo(e)}function Ro(e,t,n){return n((function(){jo(t)&&Lo(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Lo(e){var t=Ci(e,1);null!==t&&nu(t,e,1,-1)}function No(e){var t=Ao();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Oo().memoizedState}function Uo(e,t,n,r){var a=Ao();mo.flags|=e,a.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var a=Oo();r=void 0===r?null:r;var i=void 0;if(null!==vo){var o=vo.memoizedState;if(i=o.destroy,null!==r&&Mo(r,o.deps))return void(a.memoizedState=Fo(t,n,i,r))}mo.flags|=e,a.memoizedState=Fo(1|t,n,i,r)}function qo(e,t){return Uo(8390656,8,e,t)}function Yo(e,t){return Vo(2048,8,e,t)}function Wo(e,t){return Vo(4,2,e,t)}function Xo(e,t){return Vo(4,4,e,t)}function $o(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!=n?n.concat([e]):null,Vo(4,4,$o.bind(null,t,e),n)}function Go(){}function Zo(e,t){var n=Oo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Oo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,jl|=n,e.baseState=!0),t)}function Jo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{yt=n,ho.transition=r}}function es(){return Oo().memoizedState}function ts(e,t,n){var r=tu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e)?as(t,n):null!==(n=Ei(e,t,n,r))&&(nu(n,e,r,eu()),is(n,t,r))}function ns(e,t,n){var r=tu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(a.next=a,Oi(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(e){}null!==(n=Ei(e,t,a,r))&&(nu(n,e,r,a=eu()),is(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function as(e,t){yo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function is(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var os={readContext:ki,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},ss={readContext:ki,useCallback:function(e,t){return Ao().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Uo(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ao().memoizedState=e},useState:No,useDebugValue:Go,useDeferredValue:function(e){return Ao().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Jo.bind(null,e[1]),Ao().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,a=Ao();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Cl)throw Error(i(349));0!=(30&po)||Do(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,qo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ao(),t=Cl.identifierPrefix;if(ai){var n=Qa;t=":"+t+"R"+(n=(Za&~(1<<32-ot(Za)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:ki,useCallback:Zo,useContext:ki,useEffect:Yo,useImperativeHandle:Ho,useInsertionEffect:Wo,useLayoutEffect:Xo,useMemo:Qo,useReducer:Co,useRef:Bo,useState:function(){return Co(Eo)},useDebugValue:Go,useDeferredValue:function(e){return Ko(Oo(),vo.memoizedState,e)},useTransition:function(){return[Co(Eo)[0],Oo().memoizedState]},useMutableSource:Po,useSyncExternalStore:zo,useId:es,unstable_isNewReconciler:!1},us={readContext:ki,useCallback:Zo,useContext:ki,useEffect:Yo,useImperativeHandle:Ho,useInsertionEffect:Wo,useLayoutEffect:Xo,useMemo:Qo,useReducer:To,useRef:Bo,useState:function(){return To(Eo)},useDebugValue:Go,useDeferredValue:function(e){var t=Oo();return null===vo?t.memoizedState=e:Ko(t,vo.memoizedState,e)},useTransition:function(){return[To(Eo)[0],Oo().memoizedState]},useMutableSource:Po,useSyncExternalStore:zo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var hs="function"==typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Di(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,Wl=r),ds(0,t)},n}function ms(e,t,n){(n=Di(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,a){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Di(-1,1)).tag=2,Ii(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var ys=_.ReactCurrentOwner,_s=!1;function ws(e,t,n,r){t.child=null===e?Qi(t,null,n,r):Zi(t,e.child,n,r)}function xs(e,t,n,r,a){n=n.render;var i=t.ref;return Si(t,a),r=So(e,t,n,r,i,a),n=ko(),null===e||_s?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ys(e,t,a))}function Ms(e,t,n,r,a){if(null===e){var i=n.type;return"function"!=typeof i||zu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Iu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,a))}if(i=e.child,0==(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ys(e,t,a)}return t.flags|=1,(e=Du(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=i,0==(e.lanes&a))return t.lanes=e.lanes,Ys(e,t,a);0!=(131072&e.flags)&&(_s=!0)}}return Os(e,t,n,r,a)}function ks(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Dl,zl),zl|=n;else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Aa(Dl,zl),zl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Aa(Dl,zl),zl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Aa(Dl,zl),zl|=r;return ws(e,t,a,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Os(e,t,n,r,a){var i=za(n)?Ta:Ea.current;return i=Pa(t,i),Si(t,a),n=So(e,t,n,r,i,a),r=ko(),null===e||_s?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ys(e,t,a))}function Es(e,t,n,r,a){if(za(n)){var i=!0;ja(t)}else i=!1;if(Si(t,a),null===t.stateNode)qs(e,t),qi(t,n,r),Wi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?ki(u):Pa(t,u=za(n)?Ta:Ea.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Yi(t,o,r,u),Ti=!1;var d=t.memoizedState;o.state=d,Li(t,r,o,a),l=t.memoizedState,s!==r||d!==l||Ca.current||Ti?("function"==typeof c&&(Bi(t,n,c,r),l=t.memoizedState),(s=Ti||Vi(t,n,s,r,d,l,u))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zi(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:vi(t.type,s),o.props=u,f=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?ki(l):Pa(t,l=za(n)?Ta:Ea.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==f||d!==l)&&Yi(t,o,r,l),Ti=!1,d=t.memoizedState,o.state=d,Li(t,r,o,a);var p=t.memoizedState;s!==f||d!==p||Ca.current||Ti?("function"==typeof h&&(Bi(t,n,h,r),p=t.memoizedState),(u=Ti||Vi(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,i,a)}function Cs(e,t,n,r,a,i){As(e,t);var o=0!=(128&t.flags);if(!r&&!o)return a&&La(t,n,!1),Ys(e,t,i);r=t.stateNode,ys.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Zi(t,e.child,null,i),t.child=Zi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Ts(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,a){return hi(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var zs,Ds,Is,Rs={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,a=t.pendingProps,o=so.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Aa(so,1&o),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},0==(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=ju(l,a,0,null),e=Ru(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Rs,e):Ns(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=fs(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=ju({mode:"visible",children:r.children},a,0,null),(o=Ru(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Zi(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Rs,o);if(0==(1&t.mode))return Fs(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=fs(o=Error(i(419)),r,void 0))}if(l=0!=(s&e.childLanes),_s||l){if(null!==(r=Cl)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!=(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Ci(e,a),nu(r,e,a,-1))}return mu(),Fs(e,t,s,r=fs(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ou.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=ua(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&($a[Ha++]=Za,$a[Ha++]=Qa,$a[Ha++]=Ga,Za=e.id,Qa=e.overflow,Ga=t),(t=Ns(t,r.children)).flags|=4096,t)}(e,t,l,a,r,o,n);if(s){s=a.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:a.children};return 0==(1&l)&&t.child!==o?((a=t.child).childLanes=0,a.pendingProps=u,t.deletions=null):(a=Du(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Du(r,s):(s=Ru(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,a}return e=(s=e.child).sibling,a=Du(s,{mode:"visible",children:a.children}),0==(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Ns(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&pi(r),Zi(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Mi(e.return,t,n)}function Us(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!=(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Aa(so,r),0==(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===lo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $s(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return za(t.type)&&Da(),Xs(t),null;case 3:return r=t.stateNode,ao(),ka(Ca),ka(Ea),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ii&&(ou(ii),ii=null))),Xs(t),null;case 5:oo(t);var a=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Xs(t),null}if(e=no(Ji.current),fi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[da]=t,r[ha]=o,e=0!=(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Fr(Rr[a],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Z(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ae(r,o),Fr("invalid",r)}for(var l in be(n,o),a=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),a=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),a=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":X(r),J(r,o,!0);break;case"textarea":X(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[da]=t,e[ha]=r,zs(e,t),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),a=r;break;case"iframe":case"object":case"embed":Fr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Fr(Rr[a],e);a=r;break;case"source":Fr("error",e),a=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),a=r;break;case"details":Fr("toggle",e),a=r;break;case"input":Z(e,r),a=G(e,r),Fr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Fr("invalid",e)}for(o in be(n,a),u=a)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":X(e),J(e,r,!1);break;case"textarea":X(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Is(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(n=no(to.current),no(Ji.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[da]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Kr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[da]=t,t.stateNode=r}return Xs(t),null;case 13:if(ka(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!=(1&t.mode)&&0==(128&t.flags))di(),hi(),t.flags|=98560,o=!1;else if(o=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[da]=t}else hi(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),o=!1}else null!==ii&&(ou(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&so.current)?0===Il&&(Il=3):mu())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return ao(),null===e&&Vr(t.stateNode.containerInfo),Xs(t),null;case 10:return xi(t.type._context),Xs(t),null;case 19:if(ka(so),null===(o=t.memoizedState))return Xs(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)Ws(o,!1);else{if(0!==Il||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Aa(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vl&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ai)return Xs(t),null}else 2*Qe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=so.current,Aa(so,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&zl)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Hs(e,t){switch(ti(t),t.tag){case 1:return za(t.type)&&Da(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ao(),ka(Ca),ka(Ea),co(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(ka(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ka(so),null;case 4:return ao(),null;case 10:return xi(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}zs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,no(Ji.current);var i,o=null;switch(n){case"input":a=G(e,a),r=G(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(c in be(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Zs=!1,Qs="function"==typeof WeakSet?WeakSet:Set,Ks=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Su(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Su(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&el(t,n,i)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[da],delete t[ha],delete t[ma],delete t[va],delete t[ga]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,fl=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(e){}switch(n.tag){case 5:Zs||Js(n,t);case 6:var r=cl,a=fl;cl=null,dl(e,t,n),fl=a,null!==(cl=r)&&(fl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(fl?(e=cl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Vt(e)):la(cl,n.stateNode));break;case 4:r=cl,a=fl,cl=n.stateNode.containerInfo,fl=!0,dl(e,t,n),cl=r,fl=a;break;case 0:case 11:case 14:case 15:if(!Zs&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!=(2&i)||0!=(4&i))&&el(n,t,o),a=a.next}while(a!==r)}dl(e,t,n);break;case 1:if(!Zs&&(Js(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Su(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,dl(e,t,n),Zs=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Eu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,fl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===cl)throw Error(i(160));hl(o,s,a),cl=null,fl=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(e){Su(a,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){Su(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Su(e,e.return,t)}}break;case 1:ml(t,e),gl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),gl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(t){Su(e,e.return,t)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(a,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];"style"===f?ve(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):y(a,f,d,c)}switch(l){case"input":K(a,o);break;case"textarea":ie(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(t){Su(e,e.return,t)}}break;case 6:if(ml(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(t){Su(e,e.return,t)}}break;case 3:if(ml(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(t){Su(e,e.return,t)}break;case 4:default:ml(t,e),gl(e);break;case 13:ml(t,e),gl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Ul=Qe())),4&r&&pl(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(c=Zs)||f,ml(t,e),Zs=c):ml(t,e),gl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!=(1&e.mode))for(Ks=e,f=e.child;null!==f;){for(d=Ks=f;null!==Ks;){switch(p=(h=Ks).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Js(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Su(r,n,e)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){wl(d);continue}}null!==p?(p.return=h,Ks=p):wl(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,c?"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=null!=(u=d.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(t){Su(e,e.return,t)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){Su(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),ul(e,sl(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(i(161))}}catch(t){Su(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ks=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!=(1&e.mode);null!==Ks;){var a=Ks,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Gs;if(!o){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=Gs;var u=Zs;if(Gs=o,(Zs=l)&&!u)for(Ks=a;null!==Ks;)l=(o=Ks).child,22===o.tag&&null!==o.memoizedState?xl(a):null!==l?(l.return=o,Ks=l):xl(a);for(;null!==i;)Ks=i,yl(i,t,n),i=i.sibling;Ks=a,Gs=s,Zs=u}_l(e)}else 0!=(8772&a.subtreeFlags)&&null!==i?(i.return=a,Ks=i):_l(e)}}function _l(e){for(;null!==Ks;){var t=Ks;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ni(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ni(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(i(163))}Zs||512&t.flags&&al(t)}catch(e){Su(t,t.return,e)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function wl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function xl(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Su(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(e){Su(t,a,e)}}var i=t.return;try{al(t)}catch(e){Su(t,i,e)}break;case 5:var o=t.return;try{al(t)}catch(e){Su(t,o,e)}}}catch(e){Su(t,t.return,e)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var Ml,Sl=Math.ceil,kl=_.ReactCurrentDispatcher,Al=_.ReactCurrentOwner,Ol=_.ReactCurrentBatchConfig,El=0,Cl=null,Tl=null,Pl=0,zl=0,Dl=Sa(0),Il=0,Rl=null,jl=0,Ll=0,Nl=0,Fl=null,Bl=null,Ul=0,Vl=1/0,ql=null,Yl=!1,Wl=null,Xl=null,$l=!1,Hl=null,Gl=0,Zl=0,Ql=null,Kl=-1,Jl=0;function eu(){return 0!=(6&El)?Qe():-1!==Kl?Kl:Kl=Qe()}function tu(e){return 0==(1&e.mode)?1:0!=(2&El)&&0!==Pl?Pl&-Pl:null!==mi.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nu(e,t,n,r){if(50<Zl)throw Zl=0,Ql=null,Error(i(185));gt(e,n,r),0!=(2&El)&&e===Cl||(e===Cl&&(0==(2&El)&&(Ll|=n),4===Il&&su(e,Pl)),ru(e,r),1===n&&0===El&&0==(1&t.mode)&&(Vl=Qe()+500,Fa&&Va()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,l=a[o];-1===l?0!=(s&n)&&0==(s&r)||(a[o]=ht(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=dt(e,e===Cl?Pl:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Fa=!0,Ua(e)}(lu.bind(null,e)):Ua(lu.bind(null,e)),oa((function(){0==(6&El)&&Va()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Kl=-1,Jl=0,0!=(6&El))throw Error(i(327));var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=dt(e,e===Cl?Pl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var a=El;El|=2;var o=pu();for(Cl===e&&Pl===t||(ql=null,Vl=Qe()+500,du(e,t));;)try{bu();break}catch(t){hu(e,t)}wi(),kl.current=o,El=a,null!==Tl?t=0:(Cl=null,Pl=0,t=Il)}if(0!==t){if(2===t&&0!==(a=pt(e))&&(r=a,t=iu(e,a)),1===t)throw n=Rl,du(e,0),su(e,r),ru(e,Qe()),n;if(6===t)su(e,r);else{if(a=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vu(e,r))&&0!==(o=pt(e))&&(r=o,t=iu(e,o)),1===t))throw n=Rl,du(e,0),su(e,r),ru(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:wu(e,Bl,ql);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Ul+500-Qe())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wu.bind(null,e,Bl,ql),t);break}wu(e,Bl,ql);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ra(wu.bind(null,e,Bl,ql),r);break}wu(e,Bl,ql);break;default:throw Error(i(329))}}}return ru(e,Qe()),e.callbackNode===n?au.bind(null,e):null}function iu(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Bl,Bl=n,null!==t&&ou(t)),e}function ou(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function su(e,t){for(t&=~Nl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!=(6&El))throw Error(i(327));xu();var t=dt(e,0);if(0==(1&t))return ru(e,Qe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=iu(e,r))}if(1===n)throw n=Rl,du(e,0),su(e,t),ru(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Bl,ql),ru(e,Qe()),null}function uu(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Vl=Qe()+500,Fa&&Va())}}function cu(e){null!==Hl&&0===Hl.tag&&0==(6&El)&&xu();var t=El;El|=1;var n=Ol.transition,r=yt;try{if(Ol.transition=null,yt=1,e)return e()}finally{yt=r,Ol.transition=n,0==(6&(El=t))&&Va()}}function fu(){zl=Dl.current,ka(Dl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Da();break;case 3:ao(),ka(Ca),ka(Ea),co();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:ka(so);break;case 10:xi(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Cl=e,Tl=e=Du(e.current,null),Pl=zl=t,Il=0,Rl=null,Nl=Ll=jl=0,Bl=Fl=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Ai=null}return e}function hu(e,t){for(;;){var n=Tl;try{if(wi(),fo.current=os,bo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}bo=!1}if(po=0,go=vo=mo=null,yo=!1,_o=0,Al.current=null,null===n||null===n.return){Il=1,Rl=t,Tl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,f=l,d=f.tag;if(0==(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,bs(p,s,l,0,t),1&p.mode&&vs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0==(1&t)){vs(o,c,t),mu();break e}u=Error(i(426))}else if(ai&&1&l.mode){var g=gs(s);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),bs(g,s,l,0,t),pi(cs(u,l));break e}}o=u=cs(u,l),4!==Il&&(Il=2),null===Fl?Fl=[o]:Fl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ji(o,ps(0,u,t));break e;case 1:l=u;var b=o.type,y=o.stateNode;if(0==(128&o.flags)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Xl||!Xl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,ji(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}_u(n)}catch(e){t=e,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function pu(){var e=kl.current;return kl.current=os,null===e?os:e}function mu(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Cl||0==(268435455&jl)&&0==(268435455&Ll)||su(Cl,Pl)}function vu(e,t){var n=El;El|=2;var r=pu();for(Cl===e&&Pl===t||(ql=null,du(e,t));;)try{gu();break}catch(t){hu(e,t)}if(wi(),El=n,kl.current=r,null!==Tl)throw Error(i(261));return Cl=null,Pl=0,Il}function gu(){for(;null!==Tl;)yu(Tl)}function bu(){for(;null!==Tl&&!Ge();)yu(Tl)}function yu(e){var t=Ml(e.alternate,e,zl);e.memoizedProps=e.pendingProps,null===t?_u(e):Tl=t,Al.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=$s(n,t,zl)))return void(Tl=n)}else{if(null!==(n=Hs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return Il=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===Il&&(Il=5)}function wu(e,t,n){var r=yt,a=Ol.transition;try{Ol.transition=null,yt=1,function(e,t,n,r){do{xu()}while(null!==Hl);if(0!=(6&El))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Cl&&(Tl=Cl=null,Pl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||$l||($l=!0,Cu(tt,(function(){return xu(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Ol.transition,Ol.transition=null;var s=yt;yt=1;var l=El;El|=4,Al.current=null,function(e,t){if(ea=Yt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(l=s+a),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===a&&(l=s),h===o&&++f===r&&(u=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Yt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?v:vi(t.type,v),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(i(163))}}catch(e){Su(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}m=tl,tl=!1}(e,n),vl(n,e),pr(ta),Yt=!!ea,ta=ea=null,e.current=n,bl(n,e,a),Ze(),El=l,yt=s,Ol.transition=o}else e.current=n;if($l&&($l=!1,Hl=e,Gl=a),0===(o=e.pendingLanes)&&(Xl=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ru(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(Yl)throw Yl=!1,e=Wl,Wl=null,e;0!=(1&Gl)&&0!==e.tag&&xu(),0!=(1&(o=e.pendingLanes))?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,Va()}(e,t,n,r)}finally{Ol.transition=a,yt=r}return null}function xu(){if(null!==Hl){var e=_t(Gl),t=Ol.transition,n=yt;try{if(Ol.transition=null,yt=16>e?16:e,null===Hl)var r=!1;else{if(e=Hl,Hl=null,Gl=0,0!=(6&El))throw Error(i(331));var a=El;for(El|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!=(16&Ks.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ks=c;null!==Ks;){var f=Ks;switch(f.tag){case 0:case 11:case 15:nl(8,f,o)}var d=f.child;if(null!==d)d.return=f,Ks=d;else for(;null!==Ks;){var h=(f=Ks).sibling,p=f.return;if(il(f),f===c){Ks=null;break}if(null!==h){h.return=p,Ks=h;break}Ks=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Ks=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!=(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Ks=b;break e}Ks=o.return}}var y=e.current;for(Ks=y;null!==Ks;){var _=(s=Ks).child;if(0!=(2064&s.subtreeFlags)&&null!==_)_.return=s,Ks=_;else e:for(s=y;null!==Ks;){if(0!=(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Su(l,l.return,e)}if(l===s){Ks=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ks=w;break e}Ks=l.return}}if(El=a,Va(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(e){}r=!0}return r}finally{yt=n,Ol.transition=t}}return!1}function Mu(e,t,n){e=Ii(e,t=ps(0,t=cs(n,t),1),1),t=eu(),null!==e&&(gt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)Mu(e,e,n);else for(;null!==t;){if(3===t.tag){Mu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Ii(t,e=ms(t,e=cs(n,e),1),1),e=eu(),null!==t&&(gt(t,1,e),ru(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(Pl&n)===n&&(4===Il||3===Il&&(130023424&Pl)===Pl&&500>Qe()-Ul?du(e,0):Nl|=n),ru(e,t)}function Au(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ct,0==(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ci(e,t))&&(gt(e,t,n),ru(e,n))}function Ou(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Eu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Au(e,n)}function Cu(e,t){return $e(e,t)}function Tu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Tu(e,t,n,r)}function zu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iu(e,t,n,r,a,o){var s=2;if(r=e,"function"==typeof e)zu(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case M:return Ru(n.children,a,o,t);case S:s=8,a|=8;break;case k:return(e=Pu(12,n,t,2|a)).elementType=k,e.lanes=o,e;case C:return(e=Pu(13,n,t,a)).elementType=C,e.lanes=o,e;case T:return(e=Pu(19,n,t,a)).elementType=T,e.lanes=o,e;case D:return ju(n,a,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case O:s=9;break e;case E:s=11;break e;case P:s=14;break e;case z:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pu(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Ru(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Nu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,a,i,o,s,l){return e=new Fu(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pu(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pi(i),e}function Uu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vu(e){if(!e)return Oa;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(za(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(za(n))return Ra(e,n,t)}return t}function qu(e,t,n,r,a,i,o,s,l){return(e=Bu(n,r,!0,e,0,i,0,s,l)).context=Vu(null),n=e.current,(i=Di(r=eu(),a=tu(n))).callback=null!=t?t:null,Ii(n,i,a),e.current.lanes=a,gt(e,a,r),ru(e,r),e}function Yu(e,t,n,r){var a=t.current,i=eu(),o=tu(a);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Di(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ii(a,t,o))&&(nu(e,a,o,i),Ri(e,a,o)),o}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function $u(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}Ml=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)_s=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ts(t),hi();break;case 5:io(t);break;case 1:za(t.type)&&ja(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Aa(gi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Aa(so,1&so.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ls(e,t,n):(Aa(so,1&so.current),null!==(e=Ys(e,t,n))?e.sibling:null);Aa(so,1&so.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,ks(e,t,n)}return Ys(e,t,n)}(e,t,n);_s=0!=(131072&e.flags)}else _s=!1,ai&&0!=(1048576&t.flags)&&Ja(t,Xa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var a=Pa(t,Ea.current);Si(t,n),a=So(null,t,r,e,a,n);var o=ko();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,za(r)?(o=!0,ja(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Pi(t),a.updater=Ui,t.stateNode=a,a._reactInternals=t,Wi(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return zu(e)?1:0;if(null!=e){if((e=e.$$typeof)===E)return 11;if(e===P)return 14}return 2}(r),e=vi(r,e),a){case 0:t=Os(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Ms(null,t,r,vi(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Os(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 1:return r=t.type,a=t.pendingProps,Es(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 3:e:{if(Ts(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,zi(e,t),Li(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,a=cs(Error(i(423)),t));break e}if(r!==a){t=Ps(e,t,r,n,a=cs(Error(i(424)),t));break e}for(ri=ua(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=Qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===a){t=Ys(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return io(t),null===e&&ui(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),As(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Ls(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xs(e,t,r,a=t.elementType===r?a:vi(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Aa(gi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ca.current){t=Ys(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Di(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Mi(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Mi(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Si(t,n),r=r(a=ki(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=vi(r=t.type,t.pendingProps),Ms(e,t,r,a=vi(r.type,a),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vi(r,a),qs(e,t),t.tag=1,za(r)?(e=!0,ja(t)):e=!1,Si(t,n),qi(t,r,a),Wi(t,r,a,n),Cs(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return ks(e,t,n)}throw Error(i(156,t.tag))};var Hu="function"==typeof reportError?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"==typeof a){var s=a;a=function(){var e=Wu(o);s.call(e)}}Yu(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"==typeof r){var i=r;r=function(){var e=Wu(o);i.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[pa]=o.current,Vr(8===e.nodeType?e.parentNode:e),cu(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var s=r;r=function(){var e=Wu(l);s.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[pa]=l.current,Vr(8===e.nodeType?e.parentNode:e),cu((function(){Yu(t,l,n,r)})),l}(n,t,e,a,r);return Wu(o)}Zu.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Yu(e,t,null,null)},Zu.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Yu(null,e,null,null)})),t[pa]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(bt(t,1|n),ru(t,Qe()),0==(6&El)&&(Vl=Qe()+500,Va()))}break;case 13:cu((function(){var t=Ci(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),$u(e,1)}},xt=function(e){if(13===e.tag){var t=Ci(e,134217728);null!==t&&nu(t,e,134217728,eu()),$u(e,134217728)}},Mt=function(e){if(13===e.tag){var t=tu(e),n=Ci(e,t);null!==n&&nu(n,e,t,eu()),$u(e,t)}},St=function(){return yt},kt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},xe=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(i(90));$(r),K(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=uu,Ce=cu;var tc={usingClientEntryPoint:!1,Events:[ya,_a,wa,Ae,Oe,uu]},nc={findFiberByHostInstance:ba,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(rc),it=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(i(200));return Uu(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(i(299));var n=!1,r="",a=Hu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Gu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Ku(t))throw Error(i(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Hu;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Zu(t)},t.render=function(e,t,n){if(!Ku(t))throw Error(i(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ku(e))throw Error(i(40));return!!e._reactRootContainer&&(cu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ku(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var r=n(935);t.s=r.createRoot,r.hydrateRoot},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},251:(e,t,n)=>{"use strict";var r=n(294),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:u,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var _=y.prototype=new b;_.constructor=y,m(_,g.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,M={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:M.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function E(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+E(l,0):i,w(o)?(a="",null!=e&&(a=e.replace(O,"$&/")+"/"),C(o,t,a,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(O,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",w(e))for(var u=0;u<e.length;u++){var c=i+E(s=e[u],u);l+=C(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=C(s=s.value,t,a,c=i+E(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},D={transition:null},I={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:D,ReactCurrentOwner:M};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=y,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=M.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!S.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return z.current.useCallback(e,t)},t.useContext=function(e){return z.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return z.current.useDeferredValue(e)},t.useEffect=function(e,t){return z.current.useEffect(e,t)},t.useId=function(){return z.current.useId()},t.useImperativeHandle=function(e,t,n){return z.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return z.current.useMemo(e,t)},t.useReducer=function(e,t,n){return z.current.useReducer(e,t,n)},t.useRef=function(e){return z.current.useRef(e)},t.useState=function(e){return z.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return z.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return z.current.useTransition()},t.version="18.2.0"},294:(e,t,n)=>{"use strict";e.exports=n(408)},893:(e,t,n)=>{"use strict";e.exports=n(251)},452:e=>{e.exports=function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return a(t[o][1][e]||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var i=void 0,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";const r=e("glslify"),a=e("primitive-cube"),i=e("unindex-mesh"),o=e("regl-render-envmap");t.exports=function(e){const t=i(a(1)),n=e({vert:r(["\n      precision highp float;\n#define GLSLIFY 1\n\n\n      attribute vec3 position;\n\n      uniform mat4 view, projection;\n\n      varying vec3 pos;\n\n      void main() {\n        gl_Position = projection * view * vec4(position, 1);\n        pos = position;\n      }\n    "]),frag:r(["\n      precision highp float;\n#define GLSLIFY 1\n\n\n      uniform vec3 sundir;\n\n      varying vec3 pos;\n\n      #define PI 3.141592\n#define iSteps 16\n#define jSteps 8\n\nvec2 rsi(vec3 r0, vec3 rd, float sr) {\n    // ray-sphere intersection that assumes\n    // the sphere is centered at the origin.\n    // No intersection when result.x > result.y\n    float a = dot(rd, rd);\n    float b = 2.0 * dot(rd, r0);\n    float c = dot(r0, r0) - (sr * sr);\n    float d = (b*b) - 4.0*a*c;\n    if (d < 0.0) return vec2(1e5,-1e5);\n    return vec2(\n        (-b - sqrt(d))/(2.0*a),\n        (-b + sqrt(d))/(2.0*a)\n    );\n}\n\nvec3 atmosphere(vec3 r, vec3 r0, vec3 pSun, float iSun, float rPlanet, float rAtmos, vec3 kRlh, float kMie, float shRlh, float shMie, float g) {\n    // Normalize the sun and view directions.\n    pSun = normalize(pSun);\n    r = normalize(r);\n\n    // Calculate the step size of the primary ray.\n    vec2 p = rsi(r0, r, rAtmos);\n    if (p.x > p.y) return vec3(0,0,0);\n    p.y = min(p.y, rsi(r0, r, rPlanet).x);\n    float iStepSize = (p.y - p.x) / float(iSteps);\n\n    // Initialize the primary ray time.\n    float iTime = 0.0;\n\n    // Initialize accumulators for Rayleigh and Mie scattering.\n    vec3 totalRlh = vec3(0,0,0);\n    vec3 totalMie = vec3(0,0,0);\n\n    // Initialize optical depth accumulators for the primary ray.\n    float iOdRlh = 0.0;\n    float iOdMie = 0.0;\n\n    // Calculate the Rayleigh and Mie phases.\n    float mu = dot(r, pSun);\n    float mumu = mu * mu;\n    float gg = g * g;\n    float pRlh = 3.0 / (16.0 * PI) * (1.0 + mumu);\n    float pMie = 3.0 / (8.0 * PI) * ((1.0 - gg) * (mumu + 1.0)) / (pow(1.0 + gg - 2.0 * mu * g, 1.5) * (2.0 + gg));\n\n    // Sample the primary ray.\n    for (int i = 0; i < iSteps; i++) {\n\n        // Calculate the primary ray sample position.\n        vec3 iPos = r0 + r * (iTime + iStepSize * 0.5);\n\n        // Calculate the height of the sample.\n        float iHeight = length(iPos) - rPlanet;\n\n        // Calculate the optical depth of the Rayleigh and Mie scattering for this step.\n        float odStepRlh = exp(-iHeight / shRlh) * iStepSize;\n        float odStepMie = exp(-iHeight / shMie) * iStepSize;\n\n        // Accumulate optical depth.\n        iOdRlh += odStepRlh;\n        iOdMie += odStepMie;\n\n        // Calculate the step size of the secondary ray.\n        float jStepSize = rsi(iPos, pSun, rAtmos).y / float(jSteps);\n\n        // Initialize the secondary ray time.\n        float jTime = 0.0;\n\n        // Initialize optical depth accumulators for the secondary ray.\n        float jOdRlh = 0.0;\n        float jOdMie = 0.0;\n\n        // Sample the secondary ray.\n        for (int j = 0; j < jSteps; j++) {\n\n            // Calculate the secondary ray sample position.\n            vec3 jPos = iPos + pSun * (jTime + jStepSize * 0.5);\n\n            // Calculate the height of the sample.\n            float jHeight = length(jPos) - rPlanet;\n\n            // Accumulate the optical depth.\n            jOdRlh += exp(-jHeight / shRlh) * jStepSize;\n            jOdMie += exp(-jHeight / shMie) * jStepSize;\n\n            // Increment the secondary ray time.\n            jTime += jStepSize;\n        }\n\n        // Calculate attenuation.\n        vec3 attn = exp(-(kMie * (iOdMie + jOdMie) + kRlh * (iOdRlh + jOdRlh)));\n\n        // Accumulate scattering.\n        totalRlh += odStepRlh * attn;\n        totalMie += odStepMie * attn;\n\n        // Increment the primary ray time.\n        iTime += iStepSize;\n\n    }\n\n    // Calculate and return the final color.\n    return iSun * (pRlh * kRlh * totalRlh + pMie * kMie * totalMie);\n}\n\n      void main() {\n        vec3 color = atmosphere(\n          normalize(pos),\n          vec3(0,6372e3,0),\n          normalize(sundir),\n          22.0,\n          6371e3,\n          6471e3,\n          vec3(5.5e-6, 13.0e-6, 22.4e-6),\n          21e-6,\n          8e3,\n          1.2e3,\n          0.758\n        );\n\n        gl_FragColor = vec4(color, 1);\n      }\n    "]),attributes:{position:t},uniforms:{sundir:e.prop("sundir"),view:e.prop("view"),projection:e.prop("projection")},viewport:e.prop("viewport"),framebuffer:e.prop("framebuffer"),count:t.length/3});return function(t){return(t=t||{}).sunDirection=void 0===t.sunDirection?[0,.25,-1]:t.sunDirection,t.resolution=void 0===t.resolution?1024:t.resolution,o(e,(function(r){e.clear({color:[0,0,0,1],depth:1,framebuffer:r.framebuffer}),n({view:r.view,projection:r.projection,viewport:r.viewport,framebuffer:r.framebuffer,sundir:t.sunDirection})}),{resolution:t.resolution,cubeFBO:t.cubeFBO})}}},{glslify:3,"primitive-cube":4,"regl-render-envmap":5,"unindex-mesh":6}],2:[function(e,t,n){!function(e,r){if("object"==typeof n&&"object"==typeof t)t.exports=r();else{var a=r();for(var i in a)("object"==typeof n?n:e)[i]=a[i]}}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=e},t.toRadian=function(e){return e*a},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))};var r=t.EPSILON=1e-6;t.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,t.RANDOM=Math.random;var a=Math.PI/180},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=a,t.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,n,a){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=a,i},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=i,t.multiply=o,t.divide=s,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.distance=l,t.squaredDistance=u,t.length=c,t.squaredLength=f,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=a*o,e[3]=i*o),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=t[3];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e},t.random=function(e,t){var n,a,i,o,s,l;t=t||1;do{s=(n=2*r.RANDOM()-1)*n+(a=2*r.RANDOM()-1)*a}while(s>=1);do{l=(i=2*r.RANDOM()-1)*i+(o=2*r.RANDOM()-1)*o}while(l>=1);var u=Math.sqrt((1-s)/l);return e[0]=t*n,e[1]=t*a,e[2]=t*i*u,e[3]=t*o*u,e},t.transformMat4=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e},t.transformQuat=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*i-l*a,f=u*a+l*r-o*i,d=u*i+o*a-s*r,h=-o*r-s*a-l*i;return e[0]=c*u+h*-o+f*-l-d*-s,e[1]=f*u+h*-s+d*-o-c*-l,e[2]=d*u+h*-l+c*-s-f*-o,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function o(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function s(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+a*a+i*i)}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+a*a+i*i}function c(e){var t=e[0],n=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+n*n+r*r+a*a)}function f(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t*t+n*n+r*r+a*a}t.sub=i,t.mul=o,t.div=s,t.dist=l,t.sqrDist=u,t.len=c,t.sqrLen=f,t.forEach=function(){var e=a();return function(t,n,r,a,i,o){var s,l=void 0;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,t.length):t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],i(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=a,t.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=i,t.fromValues=o,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},t.subtract=s,t.multiply=l,t.divide=u,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},t.distance=c,t.squaredDistance=f,t.squaredLength=d,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=h,t.dot=p,t.cross=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2];return e[0]=a*l-i*s,e[1]=i*o-r*l,e[2]=r*s-a*o,e},t.lerp=function(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e},t.hermite=function(e,t,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,l=o*(i-2)+i,u=o*(i-1),c=o*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*u+a[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+a[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+a[2]*c,e},t.bezier=function(e,t,n,r,a,i){var o=1-i,s=o*o,l=i*i,u=s*o,c=3*i*s,f=3*l*o,d=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*f+a[0]*d,e[1]=t[1]*u+n[1]*c+r[1]*f+a[1]*d,e[2]=t[2]*u+n[2]*c+r[2]*f+a[2]*d,e},t.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,i=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=a*t,e},t.transformMat4=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e},t.transformMat3=function(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e},t.transformQuat=function(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=t[0],l=t[1],u=t[2],c=a*u-i*l,f=i*s-r*u,d=r*l-a*s,h=a*d-i*f,p=i*c-r*d,m=r*f-a*c,v=2*o;return c*=v,f*=v,d*=v,h*=2,p*=2,m*=2,e[0]=s+c+h,e[1]=l+f+p,e[2]=u+d+m,e},t.rotateX=function(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},t.rotateY=function(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},t.rotateZ=function(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},t.angle=function(e,t){var n=o(e[0],e[1],e[2]),r=o(t[0],t[1],t[2]);h(n,n),h(r,r);var a=p(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function i(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function o(e,t,n){var a=new r.ARRAY_TYPE(3);return a[0]=e,a[1]=t,a[2]=n,a}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function u(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function d(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function h(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function p(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.sub=s,t.mul=l,t.div=u,t.dist=c,t.sqrDist=f,t.len=i,t.sqrLen=d,t.forEach=function(){var e=a();return function(t,n,r,a,i,o){var s,l=void 0;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,t.length):t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],i(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0,t.create=l,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=u,t.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),a=Math.sin(n/2);return a>r.EPSILON?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=1,e[1]=0,e[2]=0),n},t.multiply=c,t.rotateX=function(e,t,n){n*=.5;var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=a*l+i*s,e[2]=i*l-a*s,e[3]=o*l-r*s,e},t.rotateY=function(e,t,n){n*=.5;var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-i*s,e[1]=a*l+o*s,e[2]=i*l+r*s,e[3]=o*l-a*s,e},t.rotateZ=function(e,t,n){n*=.5;var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=a*l-r*s,e[2]=i*l+o*s,e[3]=o*l-i*s,e},t.calculateW=function(e,t){var n=t[0],r=t[1],a=t[2];return e[0]=n,e[1]=r,e[2]=a,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),e},t.slerp=f,t.random=function(e){var t=r.RANDOM(),n=r.RANDOM(),a=r.RANDOM(),i=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*a),e[3]=o*Math.cos(2*Math.PI*a),e},t.invert=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n*n+r*r+a*a+i*i,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-a*s,e[3]=i*s,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=d,t.fromEuler=function(e,t,n,r){var a=.5*Math.PI/180;t*=a,n*=a,r*=a;var i=Math.sin(t),o=Math.cos(t),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return e[0]=i*l*c-o*s*u,e[1]=o*s*c+i*l*u,e[2]=o*l*u-i*s*c,e[3]=o*l*c+i*s*u,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};var r=s(n(0)),a=s(n(5)),i=s(n(2)),o=s(n(1));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function u(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function c(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+o*s+a*u-i*l,e[1]=a*c+o*l+i*s-r*u,e[2]=i*c+o*u+r*l-a*s,e[3]=o*c-r*s-a*l-i*u,e}function f(e,t,n,a){var i=t[0],o=t[1],s=t[2],l=t[3],u=n[0],c=n[1],f=n[2],d=n[3],h=void 0,p=void 0,m=void 0,v=void 0,g=void 0;return(p=i*u+o*c+s*f+l*d)<0&&(p=-p,u=-u,c=-c,f=-f,d=-d),1-p>r.EPSILON?(h=Math.acos(p),m=Math.sin(h),v=Math.sin((1-a)*h)/m,g=Math.sin(a*h)/m):(v=1-a,g=a),e[0]=v*i+g*u,e[1]=v*o+g*c,e[2]=v*s+g*f,e[3]=v*l+g*d,e}function d(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;r=Math.sqrt(t[3*a+a]-t[3*i+i]-t[3*o+o]+1),e[a]=.5*r,r=.5/r,e[3]=(t[3*i+o]-t[3*o+i])*r,e[i]=(t[3*i+a]+t[3*a+i])*r,e[o]=(t[3*o+a]+t[3*a+o])*r}return e}t.clone=o.clone,t.fromValues=o.fromValues,t.copy=o.copy,t.set=o.set,t.add=o.add,t.mul=c,t.scale=o.scale,t.dot=o.dot,t.lerp=o.lerp;var h=t.length=o.length,p=(t.len=h,t.squaredLength=o.squaredLength),m=(t.sqrLen=p,t.normalize=o.normalize);t.exactEquals=o.exactEquals,t.equals=o.equals,t.rotationTo=function(){var e=i.create(),t=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,a,o){var s=i.dot(a,o);return s<-.999999?(i.cross(e,t,a),i.len(e)<1e-6&&i.cross(e,n,a),i.normalize(e,e),u(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(e,a,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,m(r,r))}}(),t.sqlerp=function(){var e=l(),t=l();return function(n,r,a,i,o,s){return f(e,r,o,s),f(t,a,i,s),f(n,e,t,2*s*(1-s)),n}}(),t.setAxes=function(){var e=a.create();return function(t,n,r,a){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],m(t,d(t,e))}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,n,a,i,o,s,l,u,c,f,d,h,p,m,v){var g=new r.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=a,g[4]=i,g[5]=o,g[6]=s,g[7]=l,g[8]=u,g[9]=c,g[10]=f,g[11]=d,g[12]=h,g[13]=p,g[14]=m,g[15]=v,g},t.set=function(e,t,n,r,a,i,o,s,l,u,c,f,d,h,p,m,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=d,e[12]=h,e[13]=p,e[14]=m,e[15]=v,e},t.identity=a,t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15],b=n*s-r*o,y=n*l-a*o,_=n*u-i*o,w=r*l-a*s,x=r*u-i*s,M=a*u-i*l,S=c*m-f*p,k=c*v-d*p,A=c*g-h*p,O=f*v-d*m,E=f*g-h*m,C=d*g-h*v,T=b*C-y*E+_*O+w*A-x*k+M*S;return T?(T=1/T,e[0]=(s*C-l*E+u*O)*T,e[1]=(a*E-r*C-i*O)*T,e[2]=(m*M-v*x+g*w)*T,e[3]=(d*x-f*M-h*w)*T,e[4]=(l*A-o*C-u*k)*T,e[5]=(n*C-a*A+i*k)*T,e[6]=(v*_-p*M-g*y)*T,e[7]=(c*M-d*_+h*y)*T,e[8]=(o*E-s*A+u*S)*T,e[9]=(r*A-n*E-i*S)*T,e[10]=(p*x-m*_+g*b)*T,e[11]=(f*_-c*x-h*b)*T,e[12]=(s*k-o*O-l*S)*T,e[13]=(n*O-r*k+a*S)*T,e[14]=(m*y-p*w-v*b)*T,e[15]=(c*w-f*y+d*b)*T,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15];return e[0]=s*(d*g-h*v)-f*(l*g-u*v)+m*(l*h-u*d),e[1]=-(r*(d*g-h*v)-f*(a*g-i*v)+m*(a*h-i*d)),e[2]=r*(l*g-u*v)-s*(a*g-i*v)+m*(a*u-i*l),e[3]=-(r*(l*h-u*d)-s*(a*h-i*d)+f*(a*u-i*l)),e[4]=-(o*(d*g-h*v)-c*(l*g-u*v)+p*(l*h-u*d)),e[5]=n*(d*g-h*v)-c*(a*g-i*v)+p*(a*h-i*d),e[6]=-(n*(l*g-u*v)-o*(a*g-i*v)+p*(a*u-i*l)),e[7]=n*(l*h-u*d)-o*(a*h-i*d)+c*(a*u-i*l),e[8]=o*(f*g-h*m)-c*(s*g-u*m)+p*(s*h-u*f),e[9]=-(n*(f*g-h*m)-c*(r*g-i*m)+p*(r*h-i*f)),e[10]=n*(s*g-u*m)-o*(r*g-i*m)+p*(r*u-i*s),e[11]=-(n*(s*h-u*f)-o*(r*h-i*f)+c*(r*u-i*s)),e[12]=-(o*(f*v-d*m)-c*(s*v-l*m)+p*(s*d-l*f)),e[13]=n*(f*v-d*m)-c*(r*v-a*m)+p*(r*d-a*f),e[14]=-(n*(s*v-l*m)-o*(r*v-a*m)+p*(r*l-a*s)),e[15]=n*(s*d-l*f)-o*(r*d-a*f)+c*(r*l-a*s),e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],v=e[15];return(t*o-n*i)*(f*v-d*m)-(t*s-r*i)*(c*v-d*p)+(t*l-a*i)*(c*m-f*p)+(n*s-r*o)*(u*v-d*h)-(n*l-a*o)*(u*m-f*h)+(r*l-a*s)*(u*p-c*h)},t.multiply=i,t.translate=function(e,t,n){var r=n[0],a=n[1],i=n[2],o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,v=void 0,g=void 0;return t===e?(e[12]=t[0]*r+t[4]*a+t[8]*i+t[12],e[13]=t[1]*r+t[5]*a+t[9]*i+t[13],e[14]=t[2]*r+t[6]*a+t[10]*i+t[14],e[15]=t[3]*r+t[7]*a+t[11]*i+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],h=t[7],p=t[8],m=t[9],v=t[10],g=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=d,e[7]=h,e[8]=p,e[9]=m,e[10]=v,e[11]=g,e[12]=o*r+c*a+p*i+t[12],e[13]=s*r+f*a+m*i+t[13],e[14]=l*r+d*a+v*i+t[14],e[15]=u*r+h*a+g*i+t[15]),e},t.scale=function(e,t,n){var r=n[0],a=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,n,a){var i=a[0],o=a[1],s=a[2],l=Math.sqrt(i*i+o*o+s*s),u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,v=void 0,g=void 0,b=void 0,y=void 0,_=void 0,w=void 0,x=void 0,M=void 0,S=void 0,k=void 0,A=void 0,O=void 0,E=void 0,C=void 0,T=void 0,P=void 0,z=void 0;return l<r.EPSILON?null:(i*=l=1/l,o*=l,s*=l,u=Math.sin(n),f=1-(c=Math.cos(n)),d=t[0],h=t[1],p=t[2],m=t[3],v=t[4],g=t[5],b=t[6],y=t[7],_=t[8],w=t[9],x=t[10],M=t[11],S=i*i*f+c,k=o*i*f+s*u,A=s*i*f-o*u,O=i*o*f-s*u,E=o*o*f+c,C=s*o*f+i*u,T=i*s*f+o*u,P=o*s*f-i*u,z=s*s*f+c,e[0]=d*S+v*k+_*A,e[1]=h*S+g*k+w*A,e[2]=p*S+b*k+x*A,e[3]=m*S+y*k+M*A,e[4]=d*O+v*E+_*C,e[5]=h*O+g*E+w*C,e[6]=p*O+b*E+x*C,e[7]=m*O+y*E+M*C,e[8]=d*T+v*P+_*z,e[9]=h*T+g*P+w*z,e[10]=p*T+b*P+x*z,e[11]=m*T+y*P+M*z,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+u*r,e[5]=o*a+c*r,e[6]=s*a+f*r,e[7]=l*a+d*r,e[8]=u*a-i*r,e[9]=c*a-o*r,e[10]=f*a-s*r,e[11]=d*a-l*r,e},t.rotateY=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-u*r,e[1]=o*a-c*r,e[2]=s*a-f*r,e[3]=l*a-d*r,e[8]=i*r+u*a,e[9]=o*r+c*a,e[10]=s*r+f*a,e[11]=l*r+d*a,e},t.rotateZ=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+u*r,e[1]=o*a+c*r,e[2]=s*a+f*r,e[3]=l*a+d*r,e[4]=u*a-i*r,e[5]=c*a-o*r,e[6]=f*a-s*r,e[7]=d*a-l*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,n){var a=n[0],i=n[1],o=n[2],s=Math.sqrt(a*a+i*i+o*o),l=void 0,u=void 0,c=void 0;return s<r.EPSILON?null:(a*=s=1/s,i*=s,o*=s,l=Math.sin(t),c=1-(u=Math.cos(t)),e[0]=a*a*c+u,e[1]=i*a*c+o*l,e[2]=o*a*c-i*l,e[3]=0,e[4]=a*i*c-o*l,e[5]=i*i*c+u,e[6]=o*i*c+a*l,e[7]=0,e[8]=a*o*c+i*l,e[9]=i*o*c-a*l,e[10]=o*o*c+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=o,t.fromQuat2=function(e,t){var n=new r.ARRAY_TYPE(3),a=-t[0],i=-t[1],s=-t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7],h=a*a+i*i+s*s+l*l;return h>0?(n[0]=2*(u*l+d*a+c*s-f*i)/h,n[1]=2*(c*l+d*i+f*a-u*s)/h,n[2]=2*(f*l+d*s+u*i-c*a)/h):(n[0]=2*(u*l+d*a+c*s-f*i),n[1]=2*(c*l+d*i+f*a-u*s),n[2]=2*(f*l+d*s+u*i-c*a)),o(e,t,n),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+a*a),e[1]=Math.sqrt(i*i+o*o+s*s),e[2]=Math.sqrt(l*l+u*u+c*c),e},t.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},t.fromRotationTranslationScale=function(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=t[3],l=a+a,u=i+i,c=o+o,f=a*l,d=a*u,h=a*c,p=i*u,m=i*c,v=o*c,g=s*l,b=s*u,y=s*c,_=r[0],w=r[1],x=r[2];return e[0]=(1-(p+v))*_,e[1]=(d+y)*_,e[2]=(h-b)*_,e[3]=0,e[4]=(d-y)*w,e[5]=(1-(f+v))*w,e[6]=(m+g)*w,e[7]=0,e[8]=(h+b)*x,e[9]=(m-g)*x,e[10]=(1-(f+p))*x,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,n,r,a){var i=t[0],o=t[1],s=t[2],l=t[3],u=i+i,c=o+o,f=s+s,d=i*u,h=i*c,p=i*f,m=o*c,v=o*f,g=s*f,b=l*u,y=l*c,_=l*f,w=r[0],x=r[1],M=r[2],S=a[0],k=a[1],A=a[2],O=(1-(m+g))*w,E=(h+_)*w,C=(p-y)*w,T=(h-_)*x,P=(1-(d+g))*x,z=(v+b)*x,D=(p+y)*M,I=(v-b)*M,R=(1-(d+m))*M;return e[0]=O,e[1]=E,e[2]=C,e[3]=0,e[4]=T,e[5]=P,e[6]=z,e[7]=0,e[8]=D,e[9]=I,e[10]=R,e[11]=0,e[12]=n[0]+S-(O*S+T*k+D*A),e[13]=n[1]+k-(E*S+P*k+I*A),e[14]=n[2]+A-(C*S+z*k+R*A),e[15]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,u=n*o,c=r*o,f=r*s,d=a*o,h=a*s,p=a*l,m=i*o,v=i*s,g=i*l;return e[0]=1-f-p,e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=h+m,e[7]=0,e[8]=d+v,e[9]=h-m,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,n,r,a,i,o){var s=1/(n-t),l=1/(a-r),u=1/(i-o);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(o+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*u,e[15]=0,e},t.perspective=function(e,t,n,r,a){var i=1/Math.tan(t/2),o=void 0;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(r-a),e[10]=(a+r)*o,e[14]=2*a*r*o):(e[10]=-1,e[14]=-2*r),e},t.perspectiveFromFieldOfView=function(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(a+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(a-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},t.ortho=function(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*u,e[15]=1,e},t.lookAt=function(e,t,n,i){var o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,v=t[0],g=t[1],b=t[2],y=i[0],_=i[1],w=i[2],x=n[0],M=n[1],S=n[2];return Math.abs(v-x)<r.EPSILON&&Math.abs(g-M)<r.EPSILON&&Math.abs(b-S)<r.EPSILON?a(e):(d=v-x,h=g-M,p=b-S,o=_*(p*=m=1/Math.sqrt(d*d+h*h+p*p))-w*(h*=m),s=w*(d*=m)-y*p,l=y*h-_*d,(m=Math.sqrt(o*o+s*s+l*l))?(o*=m=1/m,s*=m,l*=m):(o=0,s=0,l=0),u=h*l-p*s,c=p*o-d*l,f=d*s-h*o,(m=Math.sqrt(u*u+c*c+f*f))?(u*=m=1/m,c*=m,f*=m):(u=0,c=0,f=0),e[0]=o,e[1]=u,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=l,e[9]=f,e[10]=p,e[11]=0,e[12]=-(o*v+s*g+l*b),e[13]=-(u*v+c*g+f*b),e[14]=-(d*v+h*g+p*b),e[15]=1,e)},t.targetTo=function(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=r[0],l=r[1],u=r[2],c=a-n[0],f=i-n[1],d=o-n[2],h=c*c+f*f+d*d;h>0&&(c*=h=1/Math.sqrt(h),f*=h,d*=h);var p=l*d-u*f,m=u*c-s*d,v=s*f-l*c;return(h=p*p+m*m+v*v)>0&&(p*=h=1/Math.sqrt(h),m*=h,v*=h),e[0]=p,e[1]=m,e[2]=v,e[3]=0,e[4]=f*v-d*m,e[5]=d*p-c*v,e[6]=c*m-f*p,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=a,e[13]=i,e[14]=o,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},t.subtract=s,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],h=e[10],p=e[11],m=e[12],v=e[13],g=e[14],b=e[15],y=t[0],_=t[1],w=t[2],x=t[3],M=t[4],S=t[5],k=t[6],A=t[7],O=t[8],E=t[9],C=t[10],T=t[11],P=t[12],z=t[13],D=t[14],I=t[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(a-_)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-x)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-M)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-k)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-A)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-O)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(d-E)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(h-C)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(p-T)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(v-z)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(z))&&Math.abs(g-D)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(b-I)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function i(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],v=t[13],g=t[14],b=t[15],y=n[0],_=n[1],w=n[2],x=n[3];return e[0]=y*r+_*s+w*f+x*m,e[1]=y*a+_*l+w*d+x*v,e[2]=y*i+_*u+w*h+x*g,e[3]=y*o+_*c+w*p+x*b,y=n[4],_=n[5],w=n[6],x=n[7],e[4]=y*r+_*s+w*f+x*m,e[5]=y*a+_*l+w*d+x*v,e[6]=y*i+_*u+w*h+x*g,e[7]=y*o+_*c+w*p+x*b,y=n[8],_=n[9],w=n[10],x=n[11],e[8]=y*r+_*s+w*f+x*m,e[9]=y*a+_*l+w*d+x*v,e[10]=y*i+_*u+w*h+x*g,e[11]=y*o+_*c+w*p+x*b,y=n[12],_=n[13],w=n[14],x=n[15],e[12]=y*r+_*s+w*f+x*m,e[13]=y*a+_*l+w*d+x*v,e[14]=y*i+_*u+w*h+x*g,e[15]=y*o+_*c+w*p+x*b,e}function o(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=r+r,l=a+a,u=i+i,c=r*s,f=r*l,d=r*u,h=a*l,p=a*u,m=i*u,v=o*s,g=o*l,b=o*u;return e[0]=1-(h+m),e[1]=f+b,e[2]=d-g,e[3]=0,e[4]=f-b,e[5]=1-(c+m),e[6]=p+v,e[7]=0,e[8]=d+g,e[9]=p-v,e[10]=1-(c+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}t.mul=i,t.sub=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,n,a,i,o,s,l,u){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=a,c[4]=i,c[5]=o,c[6]=s,c[7]=l,c[8]=u,c},t.set=function(e,t,n,r,a,i,o,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,d=-c*i+s*l,h=u*i-o*l,p=n*f+r*d+a*h;return p?(p=1/p,e[0]=f*p,e[1]=(-c*r+a*u)*p,e[2]=(s*r-a*o)*p,e[3]=d*p,e[4]=(c*n-a*l)*p,e[5]=(-s*n+a*i)*p,e[6]=h*p,e[7]=(-u*n+r*l)*p,e[8]=(o*n-r*i)*p,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=a*u-r*c,e[2]=r*s-a*o,e[3]=s*l-i*c,e[4]=n*c-a*l,e[5]=a*i-n*s,e[6]=i*u-o*l,e[7]=r*l-n*u,e[8]=n*o-r*i,e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*i-o*l)+n*(-u*a+o*s)+r*(l*a-i*s)},t.multiply=a,t.translate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=n[0],h=n[1];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=s,e[5]=l,e[6]=d*r+h*o+u,e[7]=d*a+h*s+c,e[8]=d*i+h*l+f,e},t.rotate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=Math.sin(n),h=Math.cos(n);return e[0]=h*r+d*o,e[1]=h*a+d*s,e[2]=h*i+d*l,e[3]=h*o-d*r,e[4]=h*s-d*a,e[5]=h*l-d*i,e[6]=u,e[7]=c,e[8]=f,e},t.scale=function(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,u=n*o,c=r*o,f=r*s,d=a*o,h=a*s,p=a*l,m=i*o,v=i*s,g=i*l;return e[0]=1-f-p,e[3]=c-g,e[6]=d+v,e[1]=c+g,e[4]=1-u-p,e[7]=h-m,e[2]=d-v,e[5]=h+m,e[8]=1-u-f,e},t.normalFromMat4=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15],b=n*s-r*o,y=n*l-a*o,_=n*u-i*o,w=r*l-a*s,x=r*u-i*s,M=a*u-i*l,S=c*m-f*p,k=c*v-d*p,A=c*g-h*p,O=f*v-d*m,E=f*g-h*m,C=d*g-h*v,T=b*C-y*E+_*O+w*A-x*k+M*S;return T?(T=1/T,e[0]=(s*C-l*E+u*O)*T,e[1]=(l*A-o*C-u*k)*T,e[2]=(o*E-s*A+u*S)*T,e[3]=(a*E-r*C-i*O)*T,e[4]=(n*C-a*A+i*k)*T,e[5]=(r*A-n*E-i*S)*T,e[6]=(m*M-v*x+g*w)*T,e[7]=(v*_-p*M-g*y)*T,e[8]=(p*x-m*_+g*b)*T,e):null},t.projection=function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},t.subtract=i,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=t[0],h=t[1],p=t[2],m=t[3],v=t[4],g=t[5],b=t[6],y=t[7],_=t[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=n[0],h=n[1],p=n[2],m=n[3],v=n[4],g=n[5],b=n[6],y=n[7],_=n[8];return e[0]=d*r+h*o+p*u,e[1]=d*a+h*s+p*c,e[2]=d*i+h*l+p*f,e[3]=m*r+v*o+g*u,e[4]=m*a+v*s+g*c,e[5]=m*i+v*l+g*f,e[6]=b*r+y*o+_*u,e[7]=b*a+y*s+_*c,e[8]=b*i+y*l+_*f,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}t.mul=a,t.sub=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0,t.create=a,t.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.subtract=i,t.multiply=o,t.divide=s,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},t.distance=l,t.squaredDistance=u,t.length=c,t.squaredLength=f,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},t.lerp=function(e,t,n,r){var a=t[0],i=t[1];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e},t.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},t.transformMat2=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e},t.transformMat2d=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e},t.transformMat3=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e},t.transformMat4=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e},t.rotate=function(e,t,n,r){var a=t[0]-n[0],i=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=a*s-i*o+n[0],e[1]=a*o+i*s+n[1],e},t.angle=function(e,t){var n=e[0],r=e[1],a=t[0],i=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=a*a+i*i;s>0&&(s=1/Math.sqrt(s));var l=(n*a+r*i)*o*s;return l>1?0:l<-1?Math.PI:Math.acos(l)},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var n=e[0],a=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-o)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(){var e=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function o(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function s(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function c(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function f(e){var t=e[0],n=e[1];return t*t+n*n}t.len=c,t.sub=i,t.mul=o,t.div=s,t.dist=l,t.sqrDist=u,t.sqrLen=f,t.forEach=function(){var e=a();return function(t,n,r,a,i,o){var s,l=void 0;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,t.length):t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],i(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0,t.create=function(){var e=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,n,a,i,o,s,l){var u=new r.ARRAY_TYPE(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=a,u[4]=i,u[5]=o,u[6]=s,u[7]=l,u},t.fromRotationTranslationValues=function(e,t,n,a,i,o,s){var l=new r.ARRAY_TYPE(8);l[0]=e,l[1]=t,l[2]=n,l[3]=a;var u=.5*i,c=.5*o,f=.5*s;return l[4]=u*a+c*n-f*t,l[5]=c*a+f*e-u*n,l[6]=f*a+u*t-c*e,l[7]=-u*e-c*t-f*n,l},t.fromRotationTranslation=s,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var n=a.create();i.getRotation(n,t);var o=new r.ARRAY_TYPE(3);return i.getTranslation(o,t),s(e,n,o),e},t.copy=l,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,n,r,a,i,o,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var n=t[4],r=t[5],a=t[6],i=t[7],o=-t[0],s=-t[1],l=-t[2],u=t[3];return e[0]=2*(n*u+i*o+r*l-a*s),e[1]=2*(r*u+i*s+a*o-n*l),e[2]=2*(a*u+i*l+n*s-r*o),e},t.translate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=.5*n[0],l=.5*n[1],u=.5*n[2],c=t[4],f=t[5],d=t[6],h=t[7];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=o*s+a*u-i*l+c,e[5]=o*l+i*s-r*u+f,e[6]=o*u+r*l-a*s+d,e[7]=-r*s-a*l-i*u+h,e},t.rotateX=function(e,t,n){var r=-t[0],i=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*r+u*o-c*i,h=u*s+f*i+c*r-l*o,p=c*s+f*o+l*i-u*r,m=f*s-l*r-u*i-c*o;return a.rotateX(e,t,n),r=e[0],i=e[1],o=e[2],s=e[3],e[4]=d*s+m*r+h*o-p*i,e[5]=h*s+m*i+p*r-d*o,e[6]=p*s+m*o+d*i-h*r,e[7]=m*s-d*r-h*i-p*o,e},t.rotateY=function(e,t,n){var r=-t[0],i=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*r+u*o-c*i,h=u*s+f*i+c*r-l*o,p=c*s+f*o+l*i-u*r,m=f*s-l*r-u*i-c*o;return a.rotateY(e,t,n),r=e[0],i=e[1],o=e[2],s=e[3],e[4]=d*s+m*r+h*o-p*i,e[5]=h*s+m*i+p*r-d*o,e[6]=p*s+m*o+d*i-h*r,e[7]=m*s-d*r-h*i-p*o,e},t.rotateZ=function(e,t,n){var r=-t[0],i=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*r+u*o-c*i,h=u*s+f*i+c*r-l*o,p=c*s+f*o+l*i-u*r,m=f*s-l*r-u*i-c*o;return a.rotateZ(e,t,n),r=e[0],i=e[1],o=e[2],s=e[3],e[4]=d*s+m*r+h*o-p*i,e[5]=h*s+m*i+p*r-d*o,e[6]=p*s+m*o+d*i-h*r,e[7]=m*s-d*r-h*i-p*o,e},t.rotateByQuatAppend=function(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=t[0],l=t[1],u=t[2],c=t[3];return e[0]=s*o+c*r+l*i-u*a,e[1]=l*o+c*a+u*r-s*i,e[2]=u*o+c*i+s*a-l*r,e[3]=c*o-s*r-l*a-u*i,s=t[4],l=t[5],u=t[6],c=t[7],e[4]=s*o+c*r+l*i-u*a,e[5]=l*o+c*a+u*r-s*i,e[6]=u*o+c*i+s*a-l*r,e[7]=c*o-s*r-l*a-u*i,e},t.rotateByQuatPrepend=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+o*s+a*u-i*l,e[1]=a*c+o*l+i*s-r*u,e[2]=i*c+o*u+r*l-a*s,e[3]=o*c-r*s-a*l-i*u,s=n[4],l=n[5],u=n[6],c=n[7],e[4]=r*c+o*s+a*u-i*l,e[5]=a*c+o*l+i*s-r*u,e[6]=i*c+o*u+r*l-a*s,e[7]=o*c-r*s-a*l-i*u,e},t.rotateAroundAxis=function(e,t,n,a){if(Math.abs(a)<r.EPSILON)return l(e,t);var i=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);a*=.5;var o=Math.sin(a),s=o*n[0]/i,u=o*n[1]/i,c=o*n[2]/i,f=Math.cos(a),d=t[0],h=t[1],p=t[2],m=t[3];e[0]=d*f+m*s+h*c-p*u,e[1]=h*f+m*u+p*s-d*c,e[2]=p*f+m*c+d*u-h*s,e[3]=m*f-d*s-h*u-p*c;var v=t[4],g=t[5],b=t[6],y=t[7];return e[4]=v*f+y*s+g*c-b*u,e[5]=g*f+y*u+b*s-v*c,e[6]=b*f+y*c+v*u-g*s,e[7]=y*f-v*s-g*u-b*c,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e},t.multiply=u,t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e},t.lerp=function(e,t,n,r){var a=1-r;return c(t,n)<0&&(r=-r),e[0]=t[0]*a+n[0]*r,e[1]=t[1]*a+n[1]*r,e[2]=t[2]*a+n[2]*r,e[3]=t[3]*a+n[3]*r,e[4]=t[4]*a+n[4]*r,e[5]=t[5]*a+n[5]*r,e[6]=t[6]*a+n[6]*r,e[7]=t[7]*a+n[7]*r,e},t.invert=function(e,t){var n=d(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var n=d(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,a=t[1]/n,i=t[2]/n,o=t[3]/n,s=t[4],l=t[5],u=t[6],c=t[7],f=r*s+a*l+i*u+o*c;e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=(s-r*f)/n,e[5]=(l-a*f)/n,e[6]=(u-i*f)/n,e[7]=(c-o*f)/n}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=t[0],d=t[1],h=t[2],p=t[3],m=t[4],v=t[5],g=t[6],b=t[7];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-v)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-g)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))};var r=o(n(0)),a=o(n(3)),i=o(n(4));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t,n){var r=.5*n[0],a=.5*n[1],i=.5*n[2],o=t[0],s=t[1],l=t[2],u=t[3];return e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=r*u+a*l-i*s,e[5]=a*u+i*o-r*l,e[6]=i*u+r*s-a*o,e[7]=-r*o-a*s-i*l,e}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function u(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=n[4],l=n[5],u=n[6],c=n[7],f=t[4],d=t[5],h=t[6],p=t[7],m=n[0],v=n[1],g=n[2],b=n[3];return e[0]=r*b+o*m+a*g-i*v,e[1]=a*b+o*v+i*m-r*g,e[2]=i*b+o*g+r*v-a*m,e[3]=o*b-r*m-a*v-i*g,e[4]=r*c+o*s+a*u-i*l+f*b+p*m+d*g-h*v,e[5]=a*c+o*l+i*s-r*u+d*b+p*v+h*m-f*g,e[6]=i*c+o*u+r*l-a*s+h*b+p*g+f*v-d*m,e[7]=o*c-r*s-a*l-i*u+p*b-f*m-d*v-h*g,e}t.getReal=a.copy,t.setReal=a.copy,t.mul=u;var c=t.dot=a.dot,f=t.length=a.length,d=(t.len=f,t.squaredLength=a.squaredLength);t.sqrLen=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,n,a,i,o){var s=new r.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=n,s[3]=a,s[4]=i,s[5]=o,s},t.set=function(e,t,n,r,a,i,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e},t.invert=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=n*i-r*a;return l?(l=1/l,e[0]=i*l,e[1]=-r*l,e[2]=-a*l,e[3]=n*l,e[4]=(a*s-i*o)*l,e[5]=(r*o-n*s)*l,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=a,t.rotate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*u,e[1]=a*c+o*u,e[2]=r*-u+i*c,e[3]=a*-u+o*c,e[4]=s,e[5]=l,e},t.scale=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=a*u,e[2]=i*c,e[3]=o*c,e[4]=s,e[5]=l,e},t.translate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=a,e[2]=i,e[3]=o,e[4]=r*u+i*c+s,e[5]=a*u+o*c+l,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},t.subtract=i,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],d=t[3],h=t[4],p=t[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-p)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1],f=n[2],d=n[3],h=n[4],p=n[5];return e[0]=r*u+i*c,e[1]=a*u+o*c,e[2]=r*f+i*d,e[3]=a*f+o*d,e[4]=r*h+i*p+s,e[5]=a*h+o*p+l,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}t.mul=a,t.sub=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,n,a){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=a,i},t.set=function(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e},t.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n*i-a*r;return o?(o=1/o,e[0]=i*o,e[1]=-r*o,e[2]=-a*o,e[3]=n*o,e):null},t.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=a,t.rotate=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=a*l+o*s,e[2]=r*-s+i*l,e[3]=a*-s+o*l,e},t.scale=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=a*s,e[2]=i*l,e[3]=o*l,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},t.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=i,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],a=e[1],i=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))},t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function a(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+i*l,e[1]=a*s+o*l,e[2]=r*u+i*c,e[3]=a*u+o*c,e}function i(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}t.mul=a,t.sub=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var r=h(n(0)),a=h(n(9)),i=h(n(8)),o=h(n(5)),s=h(n(4)),l=h(n(3)),u=h(n(7)),c=h(n(6)),f=h(n(2)),d=h(n(1));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.glMatrix=r,t.mat2=a,t.mat2d=i,t.mat3=o,t.mat4=s,t.quat=l,t.quat2=u,t.vec2=c,t.vec3=f,t.vec4=d}])}))},{}],3:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],4:[function(e,t,n){t.exports=function(e,t,n,r,a,i){void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=e),void 0===r&&(r=1),void 0===a&&(a=r),void 0===i&&(i=r);var o=0,s=[],l=[],u=[],c=[];function f(e,t,n,r,a,i,f,d,h,p){for(var m=o,v=0;v<=f;v++)for(var g=0;g<=i;g++){var b=s[o]=[0,0,0];b[e]=(-r/2+g*r/i)*h,b[t]=(-a/2+v*a/f)*p,b[n]=d;var y=l[o]=[0,0,0];y[e]=0,y[t]=0,y[n]=d/Math.abs(d);var _=u[o]=[0,0];_[0]=g/i,_[1]=1-v/f,++o}for(v=0;v<f;v++)for(g=0;g<i;g++){var w=m+v*(i+1)+g;c.push([w,w+i+1,w+i+2]),c.push([w,w+i+2,w+1])}}return f(0,1,2,e,t,r,a,n/2,1,-1),f(0,1,2,e,t,r,a,-n/2,-1,-1),f(2,1,0,n,t,i,a,-e/2,1,-1),f(2,1,0,n,t,i,a,e/2,-1,-1),f(0,2,1,e,n,r,i,t/2,1,1),f(0,2,1,e,n,r,i,-t/2,1,-1),{positions:s,normals:l,uvs:u,cells:c}}},{}],5:[function(e,t,n){"use strict";const r=e("gl-matrix").mat4,a=e("gl-matrix").vec3;t.exports=function(e,t,n){(n=n||{}).resolution=void 0===n.resolution?1024:n.resolution,n.near=void 0===n.near?.1:n.near,n.far=void 0===n.far?1e3:n.far,n.eye=void 0===n.eye?[0,0,0]:n.eye,n.cubeFBO=void 0===n.cubeFBO?e.framebufferCube(n.resolution):n.cubeFBO;const i=[{center:[1,0,0],up:[0,-1,0],fbo:n.cubeFBO.faces[0]},{center:[-1,0,0],up:[0,-1,0],fbo:n.cubeFBO.faces[1]},{center:[0,1,0],up:[0,0,1],fbo:n.cubeFBO.faces[2]},{center:[0,-1,0],up:[0,0,-1],fbo:n.cubeFBO.faces[3]},{center:[0,0,1],up:[0,-1,0],fbo:n.cubeFBO.faces[4]},{center:[0,0,-1],up:[0,-1,0],fbo:n.cubeFBO.faces[5]}];for(let e of i)t({view:r.lookAt([],n.eye,a.add([],n.eye,e.center),e.up),projection:r.perspective([],Math.PI/2,1,n.near,n.far),viewport:{x:0,y:0,width:n.cubeFBO.width,height:n.cubeFBO.height},framebuffer:e.fbo});return n.cubeFBO}},{"gl-matrix":2}],6:[function(e,t,n){t.exports=function(e,t,n){e.positions&&e.cells&&(n=t,t=e.cells,e=e.positions);var r=e.length?e[0].length:0,a=t.length?t[0].length:0;if(n=n||new Float32Array(t.length*a*r),3===a&&2===r)for(var i=0,o=0,s=t.length;i<s;i+=1){var l=t[i];n[o++]=e[l[0]][0],n[o++]=e[l[0]][1],n[o++]=e[l[1]][0],n[o++]=e[l[1]][1],n[o++]=e[l[2]][0],n[o++]=e[l[2]][1]}else if(3===a&&3===r)for(i=0,o=0,s=t.length;i<s;i+=1)l=t[i],n[o++]=e[l[0]][0],n[o++]=e[l[0]][1],n[o++]=e[l[0]][2],n[o++]=e[l[1]][0],n[o++]=e[l[1]][1],n[o++]=e[l[1]][2],n[o++]=e[l[2]][0],n[o++]=e[l[2]][1],n[o++]=e[l[2]][2];else for(i=0,o=0,s=t.length;i<s;i+=1){l=t[i];for(var u=0;u<l.length;u++)for(var c=l[u],f=0;f<r;f++)n[o++]=e[c][f]}return n}},{}]},{},[1])(1)},550:function(e){e.exports=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){var t=new Error("(regl) "+e);throw console.error(t),t}function a(e,t){e||r(t)}function i(e){return e?": "+e:""}function o(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"==typeof e}}function s(e,t,n){t.indexOf(e)<0&&r("invalid value"+i(n)+". must be one of: "+t)}var l=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(e,t){for(e+="";e.length<t;)e=" "+e;return e}function c(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(e,t){this.number=e,this.line=t,this.errors=[]}function d(e,t,n){this.file=e,this.line=t,this.message=n}function h(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function p(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function m(e,t){var n,r=e.split("\n"),a=1,i=0,o={unknown:new c,0:new c};o.unknown.name=o[0].name=t||h(),o.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var l=r[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var d=/(\d+)(\s+\d+)?/.exec(u[2]);d&&(a=0|d[1],d[2]&&((i=0|d[2])in o||(o[i]=new c)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);p&&(o[i].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}o[i].lines.push(new f(a++,l))}return Object.keys(o).forEach((function(e){var t=o[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),o}function v(e){e._commandRef=h()}function g(e,t){var n=p();r(e+" in command "+(t||h())+("unknown"===n?"":" called from "+n))}function b(e,t,n,r){o(e,t)||g("invalid parameter type"+i(n)+". expected "+t+", got "+typeof e,r||h())}var y=33071,_={};function w(e,t){return 32820===e||32819===e||33635===e?2:34042===e?4:_[e]*t}function x(e){return!(e&e-1||!e)}_[5120]=_[5121]=1,_[5122]=_[5123]=_[36193]=_[33635]=_[32819]=_[32820]=2,_[5124]=_[5125]=_[5126]=_[34042]=4;var M=t(a,{optional:function(e){e()},raise:r,commandRaise:g,command:function(e,t,n){e||g(t,n||h())},parameter:function(e,t,n){e in t||r("unknown parameter ("+e+")"+i(n)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,n,r){e in t||g("unknown parameter ("+e+")"+i(n)+". possible values: "+Object.keys(t).join(),r||h())},constructor:function(e){Object.keys(e).forEach((function(e){l.indexOf(e)<0&&r('invalid regl constructor argument "'+e+'". must be one of '+l)}))},type:function(e,t,n){o(e,t)||r("invalid parameter type"+i(n)+". expected "+t+", got "+typeof e)},commandType:b,isTypedArray:function(t,n){e(t)||r("invalid parameter type"+i(n)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||r("invalid parameter type, ("+e+")"+i(t)+". must be a nonnegative integer")},oneOf:s,shaderError:function(e,t,r,i,o){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),l=i===e.FRAGMENT_SHADER?"fragment":"vertex";b(r,"string",l+" shader source must be a string",o);var c=m(r,o),f=function(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new d(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new d("unknown",0,e))}})),t}(s);(function(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))})(c,f),Object.keys(c).forEach((function(e){var t=c[e];if(t.hasErrors){var r=[""],a=[""];i("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){i(u(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(r){var a=r.message,o=/^\s*'(.*)'\s*:\s*(.*)$/.exec(a);if(o){var s=o[1];a=o[2],"assign"===s&&(s="="),t=Math.max(e.line.indexOf(s,t),0)}else t=0;i(u("| ",6)),i(u("^^^",t+3)+n,"font-weight:bold"),i(u("| ",6)),i(a+n,"font-weight:bold")})),i(u("| ",6)+n)}else i(u(e.number,4)+"|  "),i(e.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(a[0]=r.join("%c"),console.log.apply(console,a))}function i(e,t){r.push(e),a.push(t||"")}})),a.raise("Error compiling "+l+" shader, "+c[0].name)}},linkError:function(e,t,r,i,o){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),l=m(r,o),u='Error linking program with vertex shader, "'+m(i,o)[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+"\n%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+n+s),a.raise(u)}},callSite:p,saveCommandRef:v,saveDrawInfo:function(e,t,n,r){function a(e){return e?r.id(e):0}function i(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}v(e),e._fragId=a(e.static.frag),e._vertId=a(e.static.vert);var o=e._uniformSet={};i(o,t.static),i(o,t.dynamic);var s=e._attributeSet={};i(s,n.static),i(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?s(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):s(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:h,texture2D:function(e,t,n){var r,i=t.width,o=t.height,s=t.channels;a(i>0&&i<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),e.wrapS===y&&e.wrapT===y||a(x(i)&&x(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==o&&a(9984!==e.minFilter&&9986!==e.minFilter&&9985!==e.minFilter&&9987!==e.minFilter,"min filter requires mipmap"):(a(x(i)&&x(o),"texture must be a square power of 2 to support mipmapping"),a(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),5126===t.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&a(9728===e.minFilter&&9728===e.magFilter,"filter not supported, must enable oes_texture_float_linear"),a(!e.genMipmaps,"mipmap generation not supported with float textures"));var l=t.images;for(r=0;r<16;++r)if(l[r]){var u=i>>r,c=o>>r;a(t.mipmask&1<<r,"missing mipmap data");var f=l[r];if(a(f.width===u&&f.height===c,"invalid shape for mip images"),a(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var d=Math.ceil(w(f.type,s)*u/f.unpackAlignment)*f.unpackAlignment;a(f.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||a(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&a(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,n,r){var i=e.width,o=e.height,s=e.channels;a(i>0&&i<=r.maxTextureSize&&o>0&&o<=r.maxTextureSize,"invalid texture shape"),a(i===o,"cube map must be square"),a(t.wrapS===y&&t.wrapT===y,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var u=n[l];a(u.width===i&&u.height===o,"inconsistent cube map face shape"),t.genMipmaps&&(a(!u.compressed,"can not generate mipmap for compressed textures"),a(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,f=0;f<16;++f){var d=c[f];if(d){var h=i>>f,p=o>>f;a(u.mipmask&1<<f,"missing mipmap data"),a(d.width===h&&d.height===p,"invalid shape for mip images"),a(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed||(d.data?a(d.data.byteLength===h*p*Math.max(w(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}}),S=0;function k(e,t){this.id=S++,this.type=e,this.data=t}function A(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function O(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+A(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return O(e.substr(0,r.index)).concat(O(r[1])).concat(O(e.substr(r.index+r[0].length)));var a=e.split(".");if(1===a.length)return['"'+A(e)+'"'];for(var i=[],o=0;o<a.length;++o)i=i.concat(O(a[o]));return i}function E(e){return"["+O(e).join("][")+"]"}var C={DynamicVariable:k,define:function(e,t){return new k(e,E(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof k},unbox:function e(t,n){return"function"==typeof t?new k(0,t):"number"==typeof t||"boolean"==typeof t?new k(5,t):Array.isArray(t)?new k(6,t.map((function(t,r){return e(t,n+"["+r+"]")}))):t instanceof k?t:void M(!1,"invalid option type in uniform "+n)},accessor:E},T={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},P="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function z(e){return"string"==typeof e?e.split():(M(Array.isArray(e),"invalid extension array"),e)}function D(e){return"string"==typeof e?(M("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function I(e){var n,r,a,i,o,s=e||{},l={},u=[],c=[],f="undefined"==typeof window?1:window.devicePixelRatio,d=!1,h=function(e){e&&M.raise(e)},p=function(){};if("string"==typeof s?(M("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),M(n,"invalid query string for element")):"object"==typeof s?"string"==typeof(o=s).nodeName&&"function"==typeof o.appendChild&&"function"==typeof o.getBoundingClientRect?n=s:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(s)?a=(i=s).canvas:(M.constructor(s),"gl"in s?i=s.gl:"canvas"in s?a=D(s.canvas):"container"in s&&(r=D(s.container)),"attributes"in s&&(l=s.attributes,M.type(l,"object","invalid context attributes")),"extensions"in s&&(u=z(s.extensions)),"optionalExtensions"in s&&(c=z(s.optionalExtensions)),"onDone"in s&&(M.type(s.onDone,"function","invalid or missing onDone callback"),h=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(f=+s.pixelRatio,M(f>0,"invalid pixel ratio"))):M.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?a=n:r=n),!i){if(!a){M("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(e,n,r){var a,i=document.createElement("canvas");function o(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var a=i.getBoundingClientRect();t=a.right-a.left,n=a.bottom-a.top}i.width=r*t,i.height=r*n}return t(i.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),e.appendChild(i),e===document.body&&(i.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(a=new ResizeObserver((function(){setTimeout(o)}))).observe(e):window.addEventListener("resize",o,!1),o(),{canvas:i,onDestroy:function(){a?a.disconnect():window.removeEventListener("resize",o),e.removeChild(i)}}}(r||document.body,0,f);if(!m)return null;a=m.canvas,p=m.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0),i=function(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(a,l)}return i?{gl:i,canvas:a,container:r,extensions:u,optionalExtensions:c,pixelRatio:f,profile:d,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function R(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function j(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function L(){var e=R(8,(function(){return[]}));function t(t){var n=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),r=e[j(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[j(t.byteLength)>>2].push(t)}return{alloc:t,free:n,allocType:function(e,n){var r=null;switch(e){case 5120:r=new Int8Array(t(n),0,n);break;case 5121:r=new Uint8Array(t(n),0,n);break;case 5122:r=new Int16Array(t(2*n),0,n);break;case 5123:r=new Uint16Array(t(2*n),0,n);break;case 5124:r=new Int32Array(t(4*n),0,n);break;case 5125:r=new Uint32Array(t(4*n),0,n);break;case 5126:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){n(e.buffer)}}}var N=L();N.zero=L();var F=3553,B=6408,U=5126,V=36160;function q(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var Y=function(e){return Object.keys(e).map((function(t){return e[t]}))},W={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,r){var a=1;if(t.length)for(var i=0;i<t.length;++i)a*=t[i];else a=0;var o=r||N.allocType(n,a);switch(t.length){case 0:break;case 1:!function(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}(e,t[0],o);break;case 2:!function(e,t,n,r){for(var a=0,i=0;i<t;++i)for(var o=e[i],s=0;s<n;++s)r[a++]=o[s]}(e,t[0],t[1],o);break;case 3:X(e,t[0],t[1],t[2],o,0);break;default:$(e,t,0,o,0)}return o}};function X(e,t,n,r,a,i){for(var o=i,s=0;s<t;++s)for(var l=e[s],u=0;u<n;++u)for(var c=l[u],f=0;f<r;++f)a[o++]=c[f]}function $(e,t,n,r,a){for(var i=1,o=n+1;o<t.length;++o)i*=t[o];var s=t[n];if(t.length-n==4){var l=t[n+1],u=t[n+2],c=t[n+3];for(o=0;o<s;++o)X(e[o],l,u,c,r,a),a+=i}else for(o=0;o<s;++o)$(e[o],t,n+1,r,a),a+=i}var H={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Z={dynamic:35048,stream:35040,static:35044},Q=W.flatten,K=W.shape,J=5121,ee=5126,te=[];function ne(e){return 0|H[Object.prototype.toString.call(e)]}function re(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function ae(e,t,n,r,a,i,o){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)e[s++]=t[a*l+i*u+o]}te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},oe=5121,se=5123,le=5125,ue=34963;var ce=new Float32Array(1),fe=new Uint32Array(ce.buffer);function de(e){for(var t=N.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{ce[0]=e[n];var r=fe[0],a=r>>>31<<15,i=(r<<1>>>24)-127,o=r>>13&1023;if(i<-24)t[n]=a;else if(i<-14){var s=-14-i;t[n]=a+(o+1024>>s)}else t[n]=i>15?a+31744:a+(i+15<<10)+o}return t}function he(t){return Array.isArray(t)||e(t)}var pe=function(e){return!(e&e-1||!e)},me=3553,ve=34067,ge=34069,be=6408,ye=6406,_e=6407,we=6409,xe=6410,Me=32855,Se=6402,ke=34041,Ae=35904,Oe=35906,Ee=36193,Ce=33776,Te=33777,Pe=33778,ze=33779,De=5121,Ie=5123,Re=5125,je=5126,Le=33071,Ne=9728,Fe=9984,Be=9987,Ue=4352,Ve=33984,qe=[Fe,9986,9985,Be],Ye=[0,we,xe,_e,be],We={};function Xe(e){return"[object "+e+"]"}We[6409]=We[6406]=We[6402]=1,We[34041]=We[6410]=2,We[6407]=We[35904]=3,We[6408]=We[35906]=4;var $e=Xe("HTMLCanvasElement"),He=Xe("OffscreenCanvas"),Ge=Xe("CanvasRenderingContext2D"),Ze=Xe("ImageBitmap"),Qe=Xe("HTMLImageElement"),Ke=Xe("HTMLVideoElement"),Je=Object.keys(H).concat([$e,He,Ge,Ze,Qe,Ke]),et=[];et[5121]=1,et[5126]=4,et[36193]=2,et[5123]=2,et[5125]=4;var tt=[];function nt(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function rt(e){return!!Array.isArray(e)&&!(0===e.length||!he(e[0]))}function at(e){return Object.prototype.toString.call(e)}function it(e){return at(e)===$e}function ot(e){return at(e)===He}function st(e){if(!e)return!1;var t=at(e);return Je.indexOf(t)>=0||nt(e)||rt(e)||q(e)}function lt(e){return 0|H[Object.prototype.toString.call(e)]}function ut(e,t){return N.allocType(e.type===Ee?je:e.type,t)}function ct(e,t){e.type===Ee?(e.data=de(t),N.freeType(t)):e.data=t}function ft(e,t,n,r,a,i){var o;if(o=void 0!==tt[e]?tt[e]:We[e]*et[t],i&&(o*=6),a){for(var s=0,l=n;l>=1;)s+=o*l*l,l/=2;return s}return o*n*r}function dt(n,r,a,i,o,s,l){var u={"don't care":Ue,"dont care":Ue,nice:4354,fast:4353},c={repeat:10497,clamp:Le,mirror:33648},f={nearest:Ne,linear:9729},d=t({mipmap:Be,"nearest mipmap nearest":Fe,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":Be},f),h={none:0,browser:37444},p={uint8:De,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:ye,luminance:we,"luminance alpha":xe,rgb:_e,rgba:be,rgba4:32854,"rgb5 a1":Me,rgb565:36194},v={};r.ext_srgb&&(m.srgb=Ae,m.srgba=Oe),r.oes_texture_float&&(p.float32=p.float=je),r.oes_texture_half_float&&(p.float16=p["half float"]=Ee),r.webgl_depth_texture&&(t(m,{depth:Se,"depth stencil":ke}),t(p,{uint16:Ie,uint32:Re,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&t(v,{"rgb s3tc dxt1":Ce,"rgba s3tc dxt1":Te,"rgba s3tc dxt3":Pe,"rgba s3tc dxt5":ze}),r.webgl_compressed_texture_atc&&t(v,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&t(v,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(v["rgb etc1"]=36196);var g=Array.prototype.slice.call(n.getParameter(34467));Object.keys(v).forEach((function(e){var t=v[e];g.indexOf(t)>=0&&(m[e]=t)}));var b=Object.keys(m);a.textureFormats=b;var y=[];Object.keys(m).forEach((function(e){var t=m[e];y[t]=e}));var _=[];Object.keys(p).forEach((function(e){var t=p[e];_[t]=e}));var w=[];Object.keys(f).forEach((function(e){w[f[e]]=e}));var x=[];Object.keys(d).forEach((function(e){var t=d[e];x[t]=e}));var S=[];Object.keys(c).forEach((function(e){S[c[e]]=e}));var k=b.reduce((function(e,t){var n=m[t];return n===we||n===ye||n===we||n===xe||n===Se||n===ke||r.ext_srgb&&(n===Ae||n===Oe)?e[n]=n:n===Me||t.indexOf("rgba")>=0?e[n]=be:e[n]=_e,e}),{});function A(){this.internalformat=be,this.format=be,this.type=De,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function O(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function E(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(M.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(M.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(M.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(M.parameter(t.colorSpace,h,"invalid colorSpace"),e.colorSpace=h[t.colorSpace]),"type"in t){var n=t.type;M(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),M(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),M(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),M.parameter(n,p,"invalid texture type"),e.type=p[n]}var i=e.width,o=e.height,s=e.channels,l=!1;"shape"in t?(M(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),i=t.shape[0],o=t.shape[1],3===t.shape.length&&(s=t.shape[2],M(s>0&&s<=4,"invalid number of channels"),l=!0),M(i>=0&&i<=a.maxTextureSize,"invalid width"),M(o>=0&&o<=a.maxTextureSize,"invalid height")):("radius"in t&&(i=o=t.radius,M(i>=0&&i<=a.maxTextureSize,"invalid radius")),"width"in t&&(i=t.width,M(i>=0&&i<=a.maxTextureSize,"invalid width")),"height"in t&&(o=t.height,M(o>=0&&o<=a.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,M(s>0&&s<=4,"invalid number of channels"),l=!0)),e.width=0|i,e.height=0|o,e.channels=0|s;var u=!1;if("format"in t){var c=t.format;M(r.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),M.parameter(c,m,"invalid texture format");var f=e.internalformat=m[c];e.format=k[f],c in p&&("type"in t||(e.type=p[c])),c in v&&(e.compressed=!0),u=!0}!l&&u?e.channels=We[e.format]:l&&!u?e.channels!==Ye[e.format]&&(e.format=e.internalformat=Ye[e.channels]):u&&l&&M(e.channels===We[e.format],"number of channels inconsistent with specified format")}}function C(e){n.pixelStorei(37440,e.flipY),n.pixelStorei(37441,e.premultiplyAlpha),n.pixelStorei(37443,e.colorSpace),n.pixelStorei(3317,e.unpackAlignment)}function T(){A.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function P(t,n){var r=null;if(st(n)?r=n:n&&(M.type(n,"object","invalid pixel data type"),E(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),st(n.data)&&(r=n.data)),M(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){M(!r,"can not specify copy and data field for the same texture");var i=o.viewportWidth,s=o.viewportHeight;t.width=t.width||i-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,M(t.xOffset>=0&&t.xOffset<i&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=i&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==De||(t.type=lt(r));else if(nt(r))t.channels=t.channels||4,function(e,t){var n=t.length;switch(e.type){case De:case Ie:case Re:case je:var r=N.allocType(e.type,n);r.set(t),e.data=r;break;case Ee:e.data=de(t);break;default:M.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(q(r)){var l=r.data;Array.isArray(l)||t.type!==De||(t.type=lt(l));var u,c,f,d,h,p,m=r.shape,v=r.stride;3===m.length?(f=m[2],p=v[2]):(M(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,p=1),u=m[0],c=m[1],d=v[0],h=v[1],t.alignment=1,t.width=u,t.height=c,t.channels=f,t.format=t.internalformat=Ye[f],t.needsFree=!0,function(e,t,n,r,a,i){for(var o=e.width,s=e.height,l=e.channels,u=ut(e,o*s*l),c=0,f=0;f<s;++f)for(var d=0;d<o;++d)for(var h=0;h<l;++h)u[c++]=t[n*d+r*f+a*h+i];ct(e,u)}(t,l,d,h,p,r.offset)}else if(it(r)||ot(r)||at(r)===Ge)it(r)||ot(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return at(e)===Ze}(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(function(e){return at(e)===Qe}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(e){return at(e)===Ke}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(rt(r)){var g=t.width||r[0].length,b=t.height||r.length,y=t.channels;y=he(r[0][0])?y||r[0][0].length:y||1;for(var _=W.shape(r),w=1,x=0;x<_.length;++x)w*=_[x];var S=ut(t,w);W.flatten(r,_,"",S),ct(t,S),t.alignment=1,t.width=g,t.height=b,t.channels=y,t.format=t.internalformat=Ye[y],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===je?M(a.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Ee&&M(a.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function z(e,t,r){var a=e.element,o=e.data,s=e.internalformat,l=e.format,u=e.type,c=e.width,f=e.height;C(e),a?n.texImage2D(t,r,l,l,u,a):e.compressed?n.compressedTexImage2D(t,r,s,c,f,0,o):e.needsCopy?(i(),n.copyTexImage2D(t,r,l,e.xOffset,e.yOffset,c,f,0)):n.texImage2D(t,r,l,c,f,0,l,u,o||null)}function D(e,t,r,a,o){var s=e.element,l=e.data,u=e.internalformat,c=e.format,f=e.type,d=e.width,h=e.height;C(e),s?n.texSubImage2D(t,o,r,a,c,f,s):e.compressed?n.compressedTexSubImage2D(t,o,r,a,u,d,h,l):e.needsCopy?(i(),n.copyTexSubImage2D(t,o,r,a,e.xOffset,e.yOffset,d,h)):n.texSubImage2D(t,o,r,a,d,h,c,f,l)}var I=[];function R(){return I.pop()||new T}function j(e){e.needsFree&&N.freeType(e.data),T.call(e),I.push(e)}function L(){A.call(this),this.genMipmaps=!1,this.mipmapHint=Ue,this.mipmask=0,this.images=Array(16)}function F(e,t,n){var r=e.images[0]=R();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function B(e,t){var n=null;if(st(t))O(n=e.images[0]=R(),e),P(n,t),e.mipmask=1;else if(E(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,a=0;a<r.length;++a)O(n=e.images[a]=R(),e),n.width>>=a,n.height>>=a,P(n,r[a]),e.mipmask|=1<<a;else O(n=e.images[0]=R(),e),P(n,t),e.mipmask=1;O(e,e.images[0]),!e.compressed||e.internalformat!==Ce&&e.internalformat!==Te&&e.internalformat!==Pe&&e.internalformat!==ze||M(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function U(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;z(n[r],t,r)}}var V=[];function X(){var e=V.pop()||new L;A.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function $(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&j(t[n]),t[n]=null;V.push(e)}function H(){this.minFilter=Ne,this.magFilter=Ne,this.wrapS=Le,this.wrapT=Le,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ue}function G(e,t){if("min"in t){var n=t.min;M.parameter(n,d),e.minFilter=d[n],qe.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;M.parameter(r,f),e.magFilter=f[r]}var i=e.wrapS,o=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(M.parameter(s,c),i=o=c[s]):Array.isArray(s)&&(M.parameter(s[0],c),M.parameter(s[1],c),i=c[s[0]],o=c[s[1]])}else{if("wrapS"in t){var l=t.wrapS;M.parameter(l,c),i=c[l]}if("wrapT"in t){var h=t.wrapT;M.parameter(h,c),o=c[h]}}if(e.wrapS=i,e.wrapT=o,"anisotropic"in t){var p=t.anisotropic;M("number"==typeof p&&p>=1&&p<=a.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var m=!1;switch(typeof t.mipmap){case"string":M.parameter(t.mipmap,u,"invalid mipmap hint"),e.mipmapHint=u[t.mipmap],e.genMipmaps=!0,m=!0;break;case"boolean":m=e.genMipmaps=t.mipmap;break;case"object":M(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,m=!0;break;default:M.raise("invalid mipmap type")}m&&!("min"in t)&&(e.minFilter=Fe)}}function Z(e,t){n.texParameteri(t,10241,e.minFilter),n.texParameteri(t,10240,e.magFilter),n.texParameteri(t,10242,e.wrapS),n.texParameteri(t,10243,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,34046,e.anisotropic),e.genMipmaps&&(n.hint(33170,e.mipmapHint),n.generateMipmap(t))}var Q=0,K={},J=a.maxTextureUnits,ee=Array(J).map((function(){return null}));function te(e){A.call(this),this.mipmask=0,this.internalformat=be,this.id=Q++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,l.profile&&(this.stats={size:0})}function ne(e){n.activeTexture(Ve),n.bindTexture(e.target,e.texture)}function re(){var e=ee[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(me,null)}function ae(e){var t=e.texture;M(t,"must not double destroy texture");var r=e.unit,a=e.target;r>=0&&(n.activeTexture(Ve+r),n.bindTexture(a,null),ee[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete K[e.id],s.textureCount--}return t(te.prototype,{bind:function(){var e=this;e.bindCount+=1;var t=e.unit;if(t<0){for(var r=0;r<J;++r){var a=ee[r];if(a){if(a.bindCount>0)continue;a.unit=-1}ee[r]=e,t=r;break}t>=J&&M.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),e.unit=t,n.activeTexture(Ve+t),n.bindTexture(e.target,e.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ae(this)}}),l.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(K).forEach((function(t){e+=K[t].stats.size})),e}),{create2D:function(e,t){var r=new te(me);function i(e,t){var n=r.texInfo;H.call(n);var o=X();return"number"==typeof e?F(o,0|e,"number"==typeof t?0|t:0|e):e?(M.type(e,"object","invalid arguments to regl.texture"),G(n,e),B(o,e)):F(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),r.mipmask=o.mipmask,O(r,o),M.texture2D(n,o,a),r.internalformat=o.internalformat,i.width=o.width,i.height=o.height,ne(r),U(o,me),Z(n,me),re(),$(o),l.profile&&(r.stats.size=ft(r.internalformat,r.type,o.width,o.height,n.genMipmaps,!1)),i.format=y[r.internalformat],i.type=_[r.type],i.mag=w[n.magFilter],i.min=x[n.minFilter],i.wrapS=S[n.wrapS],i.wrapT=S[n.wrapT],i}return K[r.id]=r,s.textureCount++,i(e,t),i.subimage=function(e,t,n,a){M(!!e,"must specify image data");var o=0|t,s=0|n,l=0|a,u=R();return O(u,r),u.width=0,u.height=0,P(u,e),u.width=u.width||(r.width>>l)-o,u.height=u.height||(r.height>>l)-s,M(r.type===u.type&&r.format===u.format&&r.internalformat===u.internalformat,"incompatible format for texture.subimage"),M(o>=0&&s>=0&&o+u.width<=r.width&&s+u.height<=r.height,"texture.subimage write out of bounds"),M(r.mipmask&1<<l,"missing mipmap data"),M(u.data||u.element||u.needsCopy,"missing image data"),ne(r),D(u,me,o,s,l),re(),j(u),i},i.resize=function(e,t){var a=0|e,o=0|t||a;if(a===r.width&&o===r.height)return i;i.width=r.width=a,i.height=r.height=o,ne(r);for(var s=0;r.mipmask>>s;++s){var u=a>>s,c=o>>s;if(!u||!c)break;n.texImage2D(me,s,r.format,u,c,0,r.format,r.type,null)}return re(),l.profile&&(r.stats.size=ft(r.internalformat,r.type,a,o,!1,!1)),i},i._reglType="texture2d",i._texture=r,l.profile&&(i.stats=r.stats),i.destroy=function(){r.decRef()},i},createCube:function(e,t,r,i,o,u){var c=new te(ve);K[c.id]=c,s.cubeCount++;var f=new Array(6);function d(e,t,n,r,i,o){var s,u=c.texInfo;for(H.call(u),s=0;s<6;++s)f[s]=X();if("number"!=typeof e&&e)if("object"==typeof e)if(t)B(f[0],e),B(f[1],t),B(f[2],n),B(f[3],r),B(f[4],i),B(f[5],o);else if(G(u,e),E(c,e),"faces"in e){var h=e.faces;for(M(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),s=0;s<6;++s)M("object"==typeof h[s]&&!!h[s],"invalid input for cube map face"),O(f[s],c),B(f[s],h[s])}else for(s=0;s<6;++s)B(f[s],e);else M.raise("invalid arguments to cube map");else{var p=0|e||1;for(s=0;s<6;++s)F(f[s],p,p)}for(O(c,f[0]),M.optional((function(){a.npotTextureCube||M(pe(c.width)&&pe(c.height),"your browser does not support non power or two texture dimensions")})),u.genMipmaps?c.mipmask=(f[0].width<<1)-1:c.mipmask=f[0].mipmask,M.textureCube(c,u,f,a),c.internalformat=f[0].internalformat,d.width=f[0].width,d.height=f[0].height,ne(c),s=0;s<6;++s)U(f[s],ge+s);for(Z(u,ve),re(),l.profile&&(c.stats.size=ft(c.internalformat,c.type,d.width,d.height,u.genMipmaps,!0)),d.format=y[c.internalformat],d.type=_[c.type],d.mag=w[u.magFilter],d.min=x[u.minFilter],d.wrapS=S[u.wrapS],d.wrapT=S[u.wrapT],s=0;s<6;++s)$(f[s]);return d}return d(e,t,r,i,o,u),d.subimage=function(e,t,n,r,a){M(!!t,"must specify image data"),M("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var i=0|n,o=0|r,s=0|a,l=R();return O(l,c),l.width=0,l.height=0,P(l,t),l.width=l.width||(c.width>>s)-i,l.height=l.height||(c.height>>s)-o,M(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),M(i>=0&&o>=0&&i+l.width<=c.width&&o+l.height<=c.height,"texture.subimage write out of bounds"),M(c.mipmask&1<<s,"missing mipmap data"),M(l.data||l.element||l.needsCopy,"missing image data"),ne(c),D(l,ge+e,i,o,s),re(),j(l),d},d.resize=function(e){var t=0|e;if(t!==c.width){d.width=c.width=t,d.height=c.height=t,ne(c);for(var r=0;r<6;++r)for(var a=0;c.mipmask>>a;++a)n.texImage2D(ge+r,a,c.format,t>>a,t>>a,0,c.format,c.type,null);return re(),l.profile&&(c.stats.size=ft(c.internalformat,c.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=c,l.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d},clear:function(){for(var e=0;e<J;++e)n.activeTexture(Ve+e),n.bindTexture(me,null),ee[e]=null;Y(K).forEach(ae),s.cubeCount=0,s.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<J;++e){var t=ee[e];t&&(t.bindCount=0,t.unit=-1,ee[e]=null)}Y(K).forEach((function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===me)n.texImage2D(me,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(ge+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);Z(e.texInfo,e.target)}))},refresh:function(){for(var e=0;e<J;++e){var t=ee[e];t&&(t.bindCount=0,t.unit=-1,ee[e]=null),n.activeTexture(Ve+e),n.bindTexture(me,null),n.bindTexture(ve,null)}}}}tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var ht=36161,pt=32854,mt=[];function vt(e,t,n){return mt[e]*t*n}mt[32854]=2,mt[32855]=2,mt[36194]=2,mt[33189]=2,mt[36168]=1,mt[34041]=4,mt[35907]=4,mt[34836]=16,mt[34842]=8,mt[34843]=6;var gt=36160,bt=36161,yt=3553,_t=34069,wt=[6407,6408],xt=[];xt[6408]=4,xt[6407]=3;var Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2;var St=[32854,32855,36194,35907,34842,34843,34836],kt={};kt[36053]="complete",kt[36054]="incomplete attachment",kt[36057]="incomplete dimensions",kt[36055]="incomplete, missing attachment",kt[36061]="unsupported";var At=34963,Ot=["attributes","elements","offset","count","primitive","instances"];function Et(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}var Ct=5121,Tt=5126;function Pt(t,n,r,a,i,o,s){function l(l){var u;null===n.next?(M(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=Ct):(M(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,M.optional((function(){o.oes_texture_float?(M(u===Ct||u===Tt,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===Tt&&M(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):M(u===Ct,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var c=0,f=0,d=a.framebufferWidth,h=a.framebufferHeight,p=null;e(l)?p=l:l&&(M.type(l,"object","invalid arguments to regl.read()"),c=0|l.x,f=0|l.y,M(c>=0&&c<a.framebufferWidth,"invalid x offset for regl.read"),M(f>=0&&f<a.framebufferHeight,"invalid y offset for regl.read"),d=0|(l.width||a.framebufferWidth-c),h=0|(l.height||a.framebufferHeight-f),p=l.data||null),p&&(u===Ct?M(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Tt&&M(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),M(d>0&&d+c<=a.framebufferWidth,"invalid width for read pixels"),M(h>0&&h+f<=a.framebufferHeight,"invalid height for read pixels"),r();var m=d*h*4;return p||(u===Ct?p=new Uint8Array(m):u===Tt&&(p=p||new Float32Array(m))),M.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),M(p.byteLength>=m,"data buffer for regl.read() too small"),t.pixelStorei(3333,4),t.readPixels(c,f,d,h,6408,u,p),p}return function(e){return e&&"framebuffer"in e?function(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=l(e)})),t}(e):l(e)}}function zt(e){return Array.prototype.slice.call(e)}function Dt(e){return zt(e).join("")}var It="xyzw".split(""),Rt="dither",jt="blend.enable",Lt="blend.color",Nt="blend.equation",Ft="blend.func",Bt="depth.enable",Ut="depth.func",Vt="depth.range",qt="depth.mask",Yt="colorMask",Wt="cull.enable",Xt="cull.face",$t="frontFace",Ht="lineWidth",Gt="polygonOffset.enable",Zt="polygonOffset.offset",Qt="sample.alpha",Kt="sample.enable",Jt="sample.coverage",en="stencil.enable",tn="stencil.mask",nn="stencil.func",rn="stencil.opFront",an="stencil.opBack",on="scissor.enable",sn="scissor.box",ln="viewport",un="profile",cn="framebuffer",fn="vert",dn="frag",hn="elements",pn="primitive",mn="count",vn="offset",gn="instances",bn="vao",yn="Width",_n="Height",wn=cn+yn,xn=cn+_n,Mn="drawingBufferWidth",Sn="drawingBufferHeight",kn=[Ft,Nt,nn,rn,an,Jt,ln,sn,Zt],An=34962,On=34963,En=5126,Cn=35664,Tn=35665,Pn=35666,zn=5124,Dn=35667,In=35668,Rn=35669,jn=35670,Ln=35671,Nn=35672,Fn=35673,Bn=35674,Un=35675,Vn=35676,qn=35678,Yn=35680,Wn=1028,Xn=1029,$n=2305,Hn=7680,Gn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zn=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Qn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Kn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Jn={frag:35632,vert:35633},er={cw:2304,ccw:$n};function tr(t){return Array.isArray(t)||e(t)||q(t)}function nr(e){return e.sort((function(e,t){return e===ln?-1:t===ln?1:e<t?-1:1}))}function rr(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function ar(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function ir(e){return new rr(!1,!1,!1,e)}function or(e,t){var n=e.type;if(0===n){var r=e.data.length;return new rr(!0,r>=1,r>=2,t)}if(4===n){var a=e.data;return new rr(a.thisDep,a.contextDep,a.propDep,t)}if(5===n)return new rr(!1,!1,!1,t);if(6===n){for(var i=!1,o=!1,s=!1,l=0;l<e.data.length;++l){var u=e.data[l];if(1===u.type)s=!0;else if(2===u.type)o=!0;else if(3===u.type)i=!0;else if(0===u.type){i=!0;var c=u.data;c>=1&&(o=!0),c>=2&&(s=!0)}else 4===u.type&&(i=i||u.data.thisDep,o=o||u.data.contextDep,s=s||u.data.propDep)}return new rr(i,o,s,t)}return new rr(3===n,2===n,1===n,t)}var sr=new rr(!1,!1,!1,(function(){}));function lr(e,n,r,a,i,o,s,l,u,c,f,d,h,p,m){var v=c.Record,g={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(g.min=32775,g.max=32776);var b=r.angle_instanced_arrays,y=r.webgl_draw_buffers,_=r.oes_vertex_array_object,w={dirty:!0,profile:m.profile},x={},S=[],k={},A={};function O(e){return e.replace(".","_")}function E(e,t,n){var r=O(e);S.push(e),x[r]=w[r]=!!n,k[r]=t}function T(e,t,n){var r=O(e);S.push(e),Array.isArray(n)?(w[r]=n.slice(),x[r]=n.slice()):w[r]=x[r]=n,A[r]=t}E(Rt,3024),E(jt,3042),T(Lt,"blendColor",[0,0,0,0]),T(Nt,"blendEquationSeparate",[32774,32774]),T(Ft,"blendFuncSeparate",[1,0,1,0]),E(Bt,2929,!0),T(Ut,"depthFunc",513),T(Vt,"depthRange",[0,1]),T(qt,"depthMask",!0),T(Yt,Yt,[!0,!0,!0,!0]),E(Wt,2884),T(Xt,"cullFace",Xn),T($t,$t,$n),T(Ht,Ht,1),E(Gt,32823),T(Zt,"polygonOffset",[0,0]),E(Qt,32926),E(Kt,32928),T(Jt,"sampleCoverage",[1,!1]),E(en,2960),T(tn,"stencilMask",-1),T(nn,"stencilFunc",[519,0,-1]),T(rn,"stencilOpSeparate",[Wn,Hn,Hn,Hn]),T(an,"stencilOpSeparate",[Xn,Hn,Hn,Hn]),E(on,3089),T(sn,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),T(ln,ln,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var P={gl:e,context:h,strings:n,next:x,current:w,draw:d,elements:o,buffer:i,shader:f,attributes:c.state,vao:c,uniforms:u,framebuffer:l,extensions:r,timer:p,isBufferArgs:tr},z={primTypes:ie,compareFuncs:Qn,blendFuncs:Gn,blendEquations:g,stencilOps:Kn,glTypes:G,orientationType:er};M.optional((function(){P.isArrayLike=he})),y&&(z.backBuffer=[Xn],z.drawBuffer=R(a.maxDrawbuffers,(function(e){return 0===e?[0]:R(e,(function(e){return 36064+e}))})));var D=0;function I(){var e=function(){var e=0,n=[],r=[];function a(){var n=[],r=[];return t((function(){n.push.apply(n,zt(arguments))}),{def:function(){var t="v"+e++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,zt(arguments)),n.push(";")),t},toString:function(){return Dt([r.length>0?"var "+r.join(",")+";":"",Dt(n)])}})}function i(){var e=a(),n=a(),r=e.toString,i=n.toString;function o(t,r){n(t,r,"=",e.def(t,r),";")}return t((function(){e.apply(e,zt(arguments))}),{def:e.def,entry:e,exit:n,save:o,set:function(t,n,r){o(t,n),e(t,n,"=",r,";")},toString:function(){return r()+i()}})}var o=a(),s={};return{global:o,link:function(t){for(var a=0;a<r.length;++a)if(r[a]===t)return n[a];var i="g"+e++;return n.push(i),r.push(t),i},block:a,proc:function(e,n){var r=[];function a(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var o=0;o<n;++o)a();var l=i(),u=l.toString;return s[e]=t(l,{arg:a,toString:function(){return Dt(["function(",r.join(),"){",u(),"}"])}})},scope:i,cond:function(){var e=Dt(arguments),n=i(),r=i(),a=n.toString,o=r.toString;return t(n,{then:function(){return n.apply(n,zt(arguments)),this},else:function(){return r.apply(r,zt(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Dt(["if(",e,"){",a(),"}",t])}})},compile:function(){var e=['"use strict";',o,"return {"];Object.keys(s).forEach((function(t){e.push('"',t,'":',s[t].toString(),",")})),e.push("}");var t=Dt(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}}}(),r=e.link,a=e.global;e.id=D++,e.batchId="0";var i=r(P),o=e.shared={props:"a0"};Object.keys(P).forEach((function(e){o[e]=a.def(i,".",e)})),M.optional((function(){e.CHECK=r(M),e.commandStr=M.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},z.invalidBlendCombinations=Zn}));var s=e.next={},l=e.current={};Object.keys(A).forEach((function(e){Array.isArray(w[e])&&(s[e]=a.def(o.next,".",e),l[e]=a.def(o.current,".",e))}));var u=e.constants={};Object.keys(z).forEach((function(e){u[e]=a.def(JSON.stringify(z[e]))})),e.invoke=function(t,n){switch(n.type){case 0:var a=["this",o.context,o.props,e.batchId];return t.def(r(n.data),".call(",a.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(o.props,n.data);case 2:return t.def(o.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return e.invoke(t,n)}))}},e.attribCache={};var f={};return e.scopeAttrib=function(e){var t=n.id(e);if(t in f)return f[t];var a=c.scope[t];return a||(a=c.scope[t]=new v),f[t]=r(a)},e}function j(e,t,s,u,d){var h=e.static,p=e.dynamic;M.optional((function(){var e=[cn,fn,dn,hn,pn,vn,mn,gn,un,bn].concat(S);function t(t){Object.keys(t).forEach((function(t){M.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',d.commandStr)}))}t(h),t(p)}));var m=function(e,t){var n=e.static;if("string"==typeof n[dn]&&"string"==typeof n[fn]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,a=Object.keys(r);if(a.length>0&&"number"==typeof r[a[0]]){for(var i=[],o=0;o<a.length;++o)M("number"==typeof r[a[o]],"must specify all vertex attribute locations when using vaos"),i.push([0|r[a[o]],a[o]]);return i}}return null}(e,t),y=function(e,t){var n=e.static,r=e.dynamic;if(cn in n){var a=n[cn];return a?(a=l.getFramebuffer(a),M.command(a,"invalid framebuffer object"),ir((function(e,t){var n=e.link(a),r=e.shared;t.set(r.framebuffer,".next",n);var i=r.context;return t.set(i,"."+wn,n+".width"),t.set(i,"."+xn,n+".height"),n}))):ir((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+wn,r+"."+Mn),t.set(r,"."+xn,r+"."+Sn),"null"}))}if(cn in r){var i=r[cn];return or(i,(function(e,t){var n=e.invoke(t,i),r=e.shared,a=r.framebuffer,o=t.def(a,".getFramebuffer(",n,")");M.optional((function(){e.assert(t,"!"+n+"||"+o,"invalid framebuffer object")})),t.set(a,".next",o);var s=r.context;return t.set(s,"."+wn,o+"?"+o+".width:"+s+"."+Mn),t.set(s,"."+xn,o+"?"+o+".height:"+s+"."+Sn),o}))}return null}(e),_=function(e,t,n){var r=e.static,a=e.dynamic;function i(e){if(e in r){var i=r[e];M.commandType(i,"object","invalid "+e,n.commandStr);var o,s,l=!0,u=0|i.x,c=0|i.y;return"width"in i?(o=0|i.width,M.command(o>=0,"invalid "+e,n.commandStr)):l=!1,"height"in i?(s=0|i.height,M.command(s>=0,"invalid "+e,n.commandStr)):l=!1,new rr(!l&&t&&t.thisDep,!l&&t&&t.contextDep,!l&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=o;"width"in i||(r=t.def(n,".",wn,"-",u));var a=s;return"height"in i||(a=t.def(n,".",xn,"-",c)),[u,c,r,a]}))}if(e in a){var f=a[e],d=or(f,(function(t,n){var r=t.invoke(n,f);M.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var a=t.shared.context,i=n.def(r,".x|0"),o=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",a,".",wn,"-",i,")"),l=n.def('"height" in ',r,"?",r,".height|0:","(",a,".",xn,"-",o,")");return M.optional((function(){t.assert(n,s+">=0&&"+l+">=0","invalid "+e)})),[i,o,s,l]}));return t&&(d.thisDep=d.thisDep||t.thisDep,d.contextDep=d.contextDep||t.contextDep,d.propDep=d.propDep||t.propDep),d}return t?new rr(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",wn),t.def(n,".",xn)]})):null}var o=i(ln);if(o){var s=o;o=new rr(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n}))}return{viewport:o,scissor_box:i(sn)}}(e,y,d),w=function(e,t){var n=e.static,r=e.dynamic,a={},i=!1,s=function(){if(bn in n){var e=n[bn];return null!==e&&null===c.getVAO(e)&&(e=c.createVAO(e)),i=!0,a.vao=e,ir((function(t){var n=c.getVAO(e);return n?t.link(n):"null"}))}if(bn in r){i=!0;var t=r[bn];return or(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}(),l=!1,u=function(){if(hn in n){var e=n[hn];if(a.elements=e,tr(e)){var u=a.elements=o.create(e,!0);e=o.getElements(u),l=!0}else e&&(e=o.getElements(e),l=!0,M.command(e,"invalid elements",t.commandStr));var c=ir((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return c.value=e,c}if(hn in r){l=!0;var f=r[hn];return or(f,(function(e,t){var n=e.shared,r=n.isBufferArgs,a=n.elements,i=e.invoke(t,f),o=t.def("null"),s=t.def(r,"(",i,")"),l=e.cond(s).then(o,"=",a,".createStream(",i,");").else(o,"=",a,".getElements(",i,");");return M.optional((function(){e.assert(l.else,"!"+i+"||"+o,"invalid elements")})),t.entry(l),t.exit(e.cond(s).then(a,".destroyStream(",o,");")),e.ELEMENTS=o,o}))}return i?new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}();function f(e,o){if(e in n){var u=0|n[e];return o?a.offset=u:a.instances=u,M.command(!o||u>=0,"invalid "+e,t.commandStr),ir((function(e,t){return o&&(e.OFFSET=u),u}))}if(e in r){var c=r[e];return or(c,(function(t,n){var r=t.invoke(n,c);return o&&(t.OFFSET=r,M.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}if(o){if(l)return ir((function(e,t){return e.OFFSET=0,0}));if(i)return new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(i)return new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var d=f(vn,!0),h=function(){if(pn in n){var e=n[pn];return a.primitive=e,M.commandParameter(e,ie,"invalid primitve",t.commandStr),ir((function(t,n){return ie[e]}))}if(pn in r){var o=r[pn];return or(o,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,o);return M.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(ie))})),t.def(n,"[",r,"]")}))}return l?ar(u)?u.value?ir((function(e,t){return t.def(e.ELEMENTS,".primType")})):ir((function(){return 4})):new rr(u.thisDep,u.contextDep,u.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)})):i?new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")})):null}(),p=function(){if(mn in n){var e=0|n[mn];return a.count=e,M.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),ir((function(){return e}))}if(mn in r){var o=r[mn];return or(o,(function(e,t){var n=e.invoke(t,o);return M.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(l){if(ar(u)){if(u)return d?new rr(d.thisDep,d.contextDep,d.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return M.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):ir((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var c=ir((function(){return-1}));return M.optional((function(){c.MISSING=!0})),c}var f=new rr(u.thisDep||d.thisDep,u.contextDep||d.contextDep,u.propDep||d.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return M.optional((function(){f.DYNAMIC=!0})),f}if(i){var h=new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}));return h}return null}(),m=f(gn,!1);return{elements:u,primitive:h,count:p,instances:m,offset:d,vao:s,vaoActive:i,elementsActive:l,static:a}}(e,d),x=function(e,t){var n=e.static,r=e.dynamic,i={};return S.forEach((function(e){var o=O(e);function s(t,a){if(e in n){var s=t(n[e]);i[o]=ir((function(){return s}))}else if(e in r){var l=r[e];i[o]=or(l,(function(e,t){return a(e,t,e.invoke(t,l))}))}}switch(e){case Wt:case jt:case Rt:case en:case Bt:case on:case Gt:case Qt:case Kt:case qt:return s((function(n){return M.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return M.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case Ut:return s((function(n){return M.commandParameter(n,Qn,"invalid "+e,t.commandStr),Qn[n]}),(function(t,n,r){var a=t.constants.compareFuncs;return M.optional((function(){t.assert(n,r+" in "+a,"invalid "+e+", must be one of "+Object.keys(Qn))})),n.def(a,"[",r,"]")}));case Vt:return s((function(e){return M.command(he(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){return M.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case Ft:return s((function(e){M.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,a="dstRGB"in e?e.dstRGB:e.dst,i="dstAlpha"in e?e.dstAlpha:e.dst;return M.commandParameter(n,Gn,o+".srcRGB",t.commandStr),M.commandParameter(r,Gn,o+".srcAlpha",t.commandStr),M.commandParameter(a,Gn,o+".dstRGB",t.commandStr),M.commandParameter(i,Gn,o+".dstAlpha",t.commandStr),M.command(-1===Zn.indexOf(n+", "+a),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+a+")",t.commandStr),[Gn[n],Gn[a],Gn[r],Gn[i]]}),(function(t,n,r){var a=t.constants.blendFuncs;function i(i,o){var s=n.def('"',i,o,'" in ',r,"?",r,".",i,o,":",r,".",i);return M.optional((function(){t.assert(n,s+" in "+a,"invalid "+e+"."+i+o+", must be one of "+Object.keys(Gn))})),s}M.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var o=i("src","RGB"),s=i("dst","RGB");M.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+o+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(a,"[",o,"]"),u=n.def(a,"[",i("src","Alpha"),"]");return[l,n.def(a,"[",s,"]"),u,n.def(a,"[",i("dst","Alpha"),"]")]}));case Nt:return s((function(n){return"string"==typeof n?(M.commandParameter(n,g,"invalid "+e,t.commandStr),[g[n],g[n]]):"object"==typeof n?(M.commandParameter(n.rgb,g,e+".rgb",t.commandStr),M.commandParameter(n.alpha,g,e+".alpha",t.commandStr),[g[n.rgb],g[n.alpha]]):void M.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var a=t.constants.blendEquations,i=n.def(),o=n.def(),s=t.cond("typeof ",r,'==="string"');return M.optional((function(){function n(e,n,r){t.assert(e,r+" in "+a,"invalid "+n+", must be one of "+Object.keys(g))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")})),s.then(i,"=",o,"=",a,"[",r,"];"),s.else(i,"=",a,"[",r,".rgb];",o,"=",a,"[",r,".alpha];"),n(s),[i,o]}));case Lt:return s((function(e){return M.command(he(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),R(4,(function(t){return+e[t]}))}),(function(e,t,n){return M.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),R(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case tn:return s((function(e){return M.commandType(e,"number",o,t.commandStr),0|e}),(function(e,t,n){return M.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case nn:return s((function(n){M.commandType(n,"object",o,t.commandStr);var r=n.cmp||"keep",a=n.ref||0,i="mask"in n?n.mask:-1;return M.commandParameter(r,Qn,e+".cmp",t.commandStr),M.commandType(a,"number",e+".ref",t.commandStr),M.commandType(i,"number",e+".mask",t.commandStr),[Qn[r],a,i]}),(function(e,t,n){var r=e.constants.compareFuncs;return M.optional((function(){function a(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}a(n+"&&typeof ",n,'==="object"'),a('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Hn),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case rn:case an:return s((function(n){M.commandType(n,"object",o,t.commandStr);var r=n.fail||"keep",a=n.zfail||"keep",i=n.zpass||"keep";return M.commandParameter(r,Kn,e+".fail",t.commandStr),M.commandParameter(a,Kn,e+".zfail",t.commandStr),M.commandParameter(i,Kn,e+".zpass",t.commandStr),[e===an?Xn:Wn,Kn[r],Kn[a],Kn[i]]}),(function(t,n,r){var a=t.constants.stencilOps;function i(i){return M.optional((function(){t.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+a+")","invalid "+e+"."+i+", must be one of "+Object.keys(Kn))})),n.def('"',i,'" in ',r,"?",a,"[",r,".",i,"]:",Hn)}return M.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===an?Xn:Wn,i("fail"),i("zfail"),i("zpass")]}));case Zt:return s((function(e){M.commandType(e,"object",o,t.commandStr);var n=0|e.factor,r=0|e.units;return M.commandType(n,"number",o+".factor",t.commandStr),M.commandType(r,"number",o+".units",t.commandStr),[n,r]}),(function(t,n,r){return M.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case Xt:return s((function(e){var n=0;return"front"===e?n=Wn:"back"===e&&(n=Xn),M.command(!!n,o,t.commandStr),n}),(function(e,t,n){return M.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',Wn,":",Xn)}));case Ht:return s((function(e){return M.command("number"==typeof e&&e>=a.lineWidthDims[0]&&e<=a.lineWidthDims[1],"invalid line width, must be a positive number between "+a.lineWidthDims[0]+" and "+a.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return M.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+a.lineWidthDims[0]+"&&"+n+"<="+a.lineWidthDims[1],"invalid line width")})),n}));case $t:return s((function(e){return M.commandParameter(e,er,o,t.commandStr),er[e]}),(function(e,t,n){return M.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?2304:'+$n)}));case Yt:return s((function(e){return M.command(he(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return M.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),R(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Jt:return s((function(e){M.command("object"==typeof e&&e,o,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return M.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){return M.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),i}(e,d),k=function(e,t,r){var a=e.static,i=e.dynamic;function o(e){if(e in a){var t=n.id(a[e]);M.optional((function(){f.shader(Jn[e],t,M.guessCommand())}));var r=ir((function(){return t}));return r.id=t,r}if(e in i){var o=i[e];return or(o,(function(t,n){var r=t.invoke(n,o),a=n.def(t.shared.strings,".id(",r,")");return M.optional((function(){n(t.shared.shader,".shader(",Jn[e],",",a,",",t.command,");")})),a}))}return null}var s,l=o(dn),u=o(fn),c=null;return ar(l)&&ar(u)?(c=f.program(u.id,l.id,null,r),s=ir((function(e,t){return e.link(c)}))):s=new rr(l&&l.thisDep||u&&u.thisDep,l&&l.contextDep||u&&u.contextDep,l&&l.propDep||u&&u.propDep,(function(e,t){var n,r=e.shared.shader;n=l?l.append(e,t):t.def(r,".",dn);var a=r+".program("+(u?u.append(e,t):t.def(r,".",fn))+","+n;return M.optional((function(){a+=","+e.command})),t.def(a+")")})),{frag:l,vert:u,progVar:s,program:c}}(e,0,m);function A(e){var t=_[e];t&&(x[e]=t)}A(ln),A(O(sn));var E=Object.keys(x).length>0,C={framebuffer:y,draw:w,shader:k,state:x,dirty:E,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(C.profile=function(e){var t,n=e.static,r=e.dynamic;if(un in n){var a=!!n[un];(t=ir((function(e,t){return a}))).enable=a}else if(un in r){var i=r[un];t=or(i,(function(e,t){return e.invoke(t,i)}))}return t}(e),C.uniforms=function(e,t){var n=e.static,r=e.dynamic,a={};return Object.keys(n).forEach((function(e){var r,i=n[e];if("number"==typeof i||"boolean"==typeof i)r=ir((function(){return i}));else if("function"==typeof i){var o=i._reglType;"texture2d"===o||"textureCube"===o?r=ir((function(e){return e.link(i)})):"framebuffer"===o||"framebufferCube"===o?(M.command(i.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=ir((function(e){return e.link(i.color[0])}))):M.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else he(i)?r=ir((function(t){return t.global.def("[",R(i.length,(function(n){return M.command("number"==typeof i[n]||"boolean"==typeof i[n],"invalid uniform "+e,t.commandStr),i[n]})),"]")})):M.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=i,a[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];a[e]=or(t,(function(e,n){return e.invoke(n,t)}))})),a}(s,d),C.drawVAO=C.scopeVAO=w.vao,!C.drawVAO&&k.program&&!m&&r.angle_instanced_arrays&&w.static.elements){var T=!0,P=k.program.attributes.map((function(e){var n=t.static[e];return T=T&&!!n,n}));if(T&&P.length>0){var z=c.getVAO(c.createVAO({attributes:P,elements:w.static.elements}));C.drawVAO=new rr(null,null,null,(function(e,t){return e.link(z)})),C.useVAO=!0}}return m?C.useVAO=!0:C.attributes=function(e,t){var r=e.static,a=e.dynamic,o={};return Object.keys(r).forEach((function(e){var a=r[e],s=n.id(e),l=new v;if(tr(a))l.state=1,l.buffer=i.getBuffer(i.create(a,An,!1,!0)),l.type=0;else{var u=i.getBuffer(a);if(u)l.state=1,l.buffer=u,l.type=0;else if(M.command("object"==typeof a&&a,"invalid data for attribute "+e,t.commandStr),"constant"in a){var c=a.constant;l.buffer="null",l.state=2,"number"==typeof c?l.x=c:(M.command(he(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+e,t.commandStr),It.forEach((function(e,t){t<c.length&&(l[e]=c[t])})))}else{u=tr(a.buffer)?i.getBuffer(i.create(a.buffer,An,!1,!0)):i.getBuffer(a.buffer),M.command(!!u,'missing buffer for attribute "'+e+'"',t.commandStr);var f=0|a.offset;M.command(f>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var d=0|a.stride;M.command(d>=0&&d<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var h=0|a.size;M.command(!("size"in a)||h>0&&h<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!a.normalized,m=0;"type"in a&&(M.commandParameter(a.type,G,"invalid type for attribute "+e,t.commandStr),m=G[a.type]);var g=0|a.divisor;M.optional((function(){"divisor"in a&&(M.command(0===g||b,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),M.command(g>=0,'invalid divisor for attribute "'+e+'"',t.commandStr));var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(a).forEach((function(t){M.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)}))})),l.buffer=u,l.state=1,l.size=h,l.normalized=p,l.type=m||u.dtype,l.offset=f,l.stride=d,l.divisor=g}}o[e]=ir((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(l).forEach((function(e){r[e]=l[e]})),l.buffer&&(r.buffer=e.link(l.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(a).forEach((function(e){var t=a[e];o[e]=or(t,(function(n,r){var a=n.invoke(r,t),i=n.shared,o=n.constants,s=i.isBufferArgs,l=i.buffer;M.optional((function(){n.assert(r,a+"&&(typeof "+a+'==="object"||typeof '+a+'==="function")&&('+s+"("+a+")||"+l+".getBuffer("+a+")||"+l+".getBuffer("+a+".buffer)||"+s+"("+a+'.buffer)||("constant" in '+a+"&&(typeof "+a+'.constant==="number"||'+i.isArrayLike+"("+a+".constant))))",'invalid dynamic attribute "'+e+'"')}));var u={isStream:r.def(!1)},c=new v;c.state=1,Object.keys(c).forEach((function(e){u[e]=r.def(""+c[e])}));var f=u.buffer,d=u.type;function h(e){r(u[e],"=",a,".",e,"|0;")}return r("if(",s,"(",a,")){",u.isStream,"=true;",f,"=",l,".createStream(",An,",",a,");",d,"=",f,".dtype;","}else{",f,"=",l,".getBuffer(",a,");","if(",f,"){",d,"=",f,".dtype;",'}else if("constant" in ',a,"){",u.state,"=",2,";","if(typeof "+a+'.constant === "number"){',u[It[0]],"=",a,".constant;",It.slice(1).map((function(e){return u[e]})).join("="),"=0;","}else{",It.map((function(e,t){return u[e]+"="+a+".constant.length>"+t+"?"+a+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",a,".buffer)){",f,"=",l,".createStream(",An,",",a,".buffer);","}else{",f,"=",l,".getBuffer(",a,".buffer);","}",d,'="type" in ',a,"?",o.glTypes,"[",a,".type]:",f,".dtype;",u.normalized,"=!!",a,".normalized;"),h("size"),h("offset"),h("stride"),h("divisor"),r("}}"),r.exit("if(",u.isStream,"){",l,".destroyStream(",f,");","}"),u}))})),o}(t,d),C.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=ir((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=or(t,(function(e,n){return e.invoke(n,t)}))})),r}(u),C}function L(e,t,n){var r=e.shared.context,a=e.scope();Object.keys(n).forEach((function(i){t.save(r,"."+i);var o=n[i].append(e,t);Array.isArray(o)?a(r,".",i,"=[",o.join(),"];"):a(r,".",i,"=",o,";")})),t(a)}function N(e,t,n,r){var a,i=e.shared,o=i.gl,s=i.framebuffer;y&&(a=t.def(i.extensions,".webgl_draw_buffers"));var l,u=e.constants,c=u.drawBuffer,f=u.backBuffer;l=n?n.append(e,t):t.def(s,".next"),r||t("if(",l,"!==",s,".cur){"),t("if(",l,"){",o,".bindFramebuffer(",36160,",",l,".framebuffer);"),y&&t(a,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),y&&t(a,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",l,";"),r||t("}")}function F(e,t,n){var r=e.shared,a=r.gl,i=e.current,o=e.next,s=r.current,l=r.next,u=e.cond(s,".dirty");S.forEach((function(t){var r,c,f=O(t);if(!(f in n.state))if(f in o){r=o[f],c=i[f];var d=R(w[f].length,(function(e){return u.def(r,"[",e,"]")}));u(e.cond(d.map((function(e,t){return e+"!=="+c+"["+t+"]"})).join("||")).then(a,".",A[f],"(",d,");",d.map((function(e,t){return c+"["+t+"]="+e})).join(";"),";"))}else{r=u.def(l,".",f);var h=e.cond(r,"!==",s,".",f);u(h),f in k?h(e.cond(r).then(a,".enable(",k[f],");").else(a,".disable(",k[f],");"),s,".",f,"=",r,";"):h(a,".",A[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&u(s,".dirty=false;"),t(u)}function B(e,t,n,r){var a=e.shared,i=e.current,o=a.current,s=a.gl;nr(Object.keys(n)).forEach((function(a){var l=n[a];if(!r||r(l)){var u=l.append(e,t);if(k[a]){var c=k[a];ar(l)?t(s,u?".enable(":".disable(",c,");"):t(e.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",a,"=",u,";")}else if(he(u)){var f=i[a];t(s,".",A[a],"(",u,");",u.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";")}else t(s,".",A[a],"(",u,");",o,".",a,"=",u,";")}}))}function U(e,t){b&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function V(e,t,n,r,a){var i,o,s,l=e.shared,u=e.stats,c=l.current,f=l.timer,d=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(e){e(i=t.def(),"=",h(),";"),"string"==typeof a?e(u,".count+=",a,";"):e(u,".count++;"),p&&(r?e(o=t.def(),"=",f,".getNumPendingQueries();"):e(f,".beginQuery(",u,");"))}function v(e){e(u,".cpuTime+=",h(),"-",i,";"),p&&(r?e(f,".pushScopeStats(",o,",",f,".getNumPendingQueries(),",u,");"):e(f,".endQuery();"))}function g(e){var n=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",n,";")}if(d){if(ar(d))return void(d.enable?(m(t),v(t.exit),g("true")):g("false"));g(s=d.append(e,t))}else s=t.def(c,".profile");var b=e.block();m(b),t("if(",s,"){",b,"}");var y=e.block();v(y),t.exit("if(",s,"){",y,"}")}function q(e,t,n,r,a){var i=e.shared;r.forEach((function(r){var o,s=r.name,l=n.attributes[s];if(l){if(!a(l))return;o=l.append(e,t)}else{if(!a(sr))return;var u=e.scopeAttrib(s);M.optional((function(){e.assert(t,u+".state","missing attribute "+s)})),o={},Object.keys(new v).forEach((function(e){o[e]=t.def(u,".",e)}))}!function(n,r,a){var o=i.gl,s=t.def(n,".location"),l=t.def(i.attributes,"[",s,"]"),u=a.state,c=a.buffer,f=[a.x,a.y,a.z,a.w],d=["buffer","normalized","offset","stride"];function h(){t("if(!",l,".buffer){",o,".enableVertexAttribArray(",s,");}");var n,i=a.type;if(n=a.size?t.def(a.size,"||",r):r,t("if(",l,".type!==",i,"||",l,".size!==",n,"||",d.map((function(e){return l+"."+e+"!=="+a[e]})).join("||"),"){",o,".bindBuffer(",An,",",c,".buffer);",o,".vertexAttribPointer(",[s,n,i,a.normalized,a.stride,a.offset],");",l,".type=",i,";",l,".size=",n,";",d.map((function(e){return l+"."+e+"="+a[e]+";"})).join(""),"}"),b){var u=a.divisor;t("if(",l,".divisor!==",u,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,u],");",l,".divisor=",u,";}")}}function p(){t("if(",l,".buffer){",o,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",It.map((function(e,t){return l+"."+e+"!=="+f[t]})).join("||"),"){",o,".vertexAttrib4f(",s,",",f,");",It.map((function(e,t){return l+"."+e+"="+f[t]+";"})).join(""),"}")}1===u?h():2===u?p():(t("if(",u,"===",1,"){"),h(),t("}else{"),p(),t("}"))}(e.link(r),function(e){switch(e){case Cn:case Dn:case Ln:return 2;case Tn:case In:case Nn:return 3;case Pn:case Rn:case Fn:return 4;default:return 1}}(r.info.type),o)}))}function Y(e,t,r,a,i,o){for(var s,l=e.shared,u=l.gl,c={},f=0;f<a.length;++f){var d=a[f],h=d.name,p=d.info.type,m=d.info.size,v=r.uniforms[h];if(m>1){if(!v)continue;var g=h.replace("[0]","");if(c[g])continue;c[g]=1}var b,y=e.link(d)+".location";if(v){if(!i(v))continue;if(ar(v)){var _=v.value;if(M.command(null!=_,'missing uniform "'+h+'"',e.commandStr),p===qn||p===Yn){M.command("function"==typeof _&&(p===qn&&("texture2d"===_._reglType||"framebuffer"===_._reglType)||p===Yn&&("textureCube"===_._reglType||"framebufferCube"===_._reglType)),"invalid texture for uniform "+h,e.commandStr);var w=e.link(_._texture||_.color[0]._texture);t(u,".uniform1i(",y,",",w+".bind());"),t.exit(w,".unbind();")}else if(p===Bn||p===Un||p===Vn){M.optional((function(){M.command(he(_),"invalid matrix for uniform "+h,e.commandStr),M.command(p===Bn&&4===_.length||p===Un&&9===_.length||p===Vn&&16===_.length,"invalid length for matrix uniform "+h,e.commandStr)}));var x=e.global.def("new Float32Array(["+Array.prototype.slice.call(_)+"])"),S=2;p===Un?S=3:p===Vn&&(S=4),t(u,".uniformMatrix",S,"fv(",y,",false,",x,");")}else{switch(p){case En:1===m?M.commandType(_,"number","uniform "+h,e.commandStr):M.command(he(_)&&_.length===m,"uniform "+h,e.commandStr),s="1f";break;case Cn:M.command(he(_)&&_.length&&_.length%2==0&&_.length<=2*m,"uniform "+h,e.commandStr),s="2f";break;case Tn:M.command(he(_)&&_.length&&_.length%3==0&&_.length<=3*m,"uniform "+h,e.commandStr),s="3f";break;case Pn:M.command(he(_)&&_.length&&_.length%4==0&&_.length<=4*m,"uniform "+h,e.commandStr),s="4f";break;case jn:1===m?M.commandType(_,"boolean","uniform "+h,e.commandStr):M.command(he(_)&&_.length===m,"uniform "+h,e.commandStr),s="1i";break;case zn:1===m?M.commandType(_,"number","uniform "+h,e.commandStr):M.command(he(_)&&_.length===m,"uniform "+h,e.commandStr),s="1i";break;case Ln:case Dn:M.command(he(_)&&_.length&&_.length%2==0&&_.length<=2*m,"uniform "+h,e.commandStr),s="2i";break;case Nn:case In:M.command(he(_)&&_.length&&_.length%3==0&&_.length<=3*m,"uniform "+h,e.commandStr),s="3i";break;case Fn:case Rn:M.command(he(_)&&_.length&&_.length%4==0&&_.length<=4*m,"uniform "+h,e.commandStr),s="4i"}m>1?(s+="v",_=e.global.def("["+Array.prototype.slice.call(_)+"]")):_=he(_)?Array.prototype.slice.call(_):_,t(u,".uniform",s,"(",y,",",_,");")}continue}b=v.append(e,t)}else{if(!i(sr))continue;b=t.def(l.uniforms,"[",n.id(h),"]")}p===qn?(M(!Array.isArray(b),"must specify a scalar prop for textures"),t("if(",b,"&&",b,'._reglType==="framebuffer"){',b,"=",b,".color[0];","}")):p===Yn&&(M(!Array.isArray(b),"must specify a scalar prop for cube maps"),t("if(",b,"&&",b,'._reglType==="framebufferCube"){',b,"=",b,".color[0];","}")),M.optional((function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(e,t){1===t&&M(!Array.isArray(b),"must not specify an array type for uniform"),n("Array.isArray("+b+") && typeof "+b+'[0]===" '+e+'" || typeof '+b+'==="'+e+'"',"invalid type, expected "+e)}function a(t,r,a){Array.isArray(b)?M(b.length&&b.length%t==0&&b.length<=t*a,"must have length of "+(1===a?"":"n * ")+t):n(l.isArrayLike+"("+b+")&&"+b+".length && "+b+".length % "+t+" === 0 && "+b+".length<="+t*a,"invalid vector, should have length of "+(1===a?"":"n * ")+t,e.commandStr)}function i(t){M(!Array.isArray(b),"must not specify a value type"),n("typeof "+b+'==="function"&&'+b+'._reglType==="texture'+(3553===t?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(p){case zn:r("number",m);break;case Dn:a(2,0,m);break;case In:a(3,0,m);break;case Rn:a(4,0,m);break;case En:r("number",m);break;case Cn:a(2,0,m);break;case Tn:a(3,0,m);break;case Pn:a(4,0,m);break;case jn:r("boolean",m);break;case Ln:a(2,0,m);break;case Nn:a(3,0,m);break;case Fn:case Bn:a(4,0,m);break;case Un:a(9,0,m);break;case Vn:a(16,0,m);break;case qn:i(3553);break;case Yn:i(34067)}}));var k=1;switch(p){case qn:case Yn:var A=t.def(b,"._texture");t(u,".uniform1i(",y,",",A,".bind());"),t.exit(A,".unbind();");continue;case zn:case jn:s="1i";break;case Dn:case Ln:s="2i",k=2;break;case In:case Nn:s="3i",k=3;break;case Rn:case Fn:s="4i",k=4;break;case En:s="1f";break;case Cn:s="2f",k=2;break;case Tn:s="3f",k=3;break;case Pn:s="4f",k=4;break;case Bn:s="Matrix2fv";break;case Un:s="Matrix3fv";break;case Vn:s="Matrix4fv"}if(-1===s.indexOf("Matrix")&&m>1&&(s+="v",k=1),"M"===s.charAt(0)){t(u,".uniform",s,"(",y,",");var O=Math.pow(p-Bn+2,2),E=e.global.def("new Float32Array(",O,")");Array.isArray(b)?t("false,(",R(O,(function(e){return E+"["+e+"]="+b[e]})),",",E,")"):t("false,(Array.isArray(",b,")||",b," instanceof Float32Array)?",b,":(",R(O,(function(e){return E+"["+e+"]="+b+"["+e+"]"})),",",E,")"),t(");")}else if(k>1){for(var C=[],T=[],P=0;P<k;++P)Array.isArray(b)?T.push(b[P]):T.push(t.def(b+"["+P+"]")),o&&C.push(t.def());o&&t("if(!",e.batchId,"||",C.map((function(e,t){return e+"!=="+T[t]})).join("||"),"){",C.map((function(e,t){return e+"="+T[t]+";"})).join("")),t(u,".uniform",s,"(",y,",",T.join(","),");"),o&&t("}")}else{if(M(!Array.isArray(b),"uniform value must not be an array"),o){var z=t.def();t("if(!",e.batchId,"||",z,"!==",b,"){",z,"=",b,";")}t(u,".uniform",s,"(",y,",",b,");"),o&&t("}")}}}function W(e,t,n,r){var a=e.shared,i=a.gl,o=a.draw,s=r.draw;var l=function(){var l,u=s.elements,c=t;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),l=u.append(e,c),s.elementsActive&&c("if("+l+")"+i+".bindBuffer("+"34963,"+l+".buffer.buffer);")):(l=c.def(),c(l,"=",o,".",hn,";","if(",l,"){",i,".bindBuffer(",On,",",l,".buffer.buffer);}","else if(",a.vao,".currentVAO){",l,"=",e.shared.elements+".getElements("+a.vao,".currentVAO.elements);",_?"":"if("+l+")"+i+".bindBuffer("+"34963,"+l+".buffer.buffer);","}")),l}();function u(a){var i=s[a];return i?i.contextDep&&r.contextDynamic||i.propDep?i.append(e,n):i.append(e,t):t.def(o,".",a)}var c,f,d=u(pn),h=u(vn),p=function(){var a,i=s.count,l=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(l=n),a=i.append(e,l),M.optional((function(){i.MISSING&&e.assert(t,"false","missing vertex count"),i.DYNAMIC&&e.assert(l,a+">=0","missing vertex count")}))):(a=l.def(o,".",mn),M.optional((function(){e.assert(l,a+">=0","missing vertex count")}))),a}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(c=u(gn),f=e.instancing);var m=l+".type",v=s.elements&&ar(s.elements)&&!s.vaoActive;function g(){function e(){n(f,".drawElementsInstancedANGLE(",[d,p,m,h+"<<(("+m+"-5121)>>1)",c],");")}function t(){n(f,".drawArraysInstancedANGLE(",[d,h,p,c],");")}l&&"null"!==l?v?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}function y(){function e(){n(i+".drawElements("+[d,p,m,h+"<<(("+m+"-5121)>>1)"]+");")}function t(){n(i+".drawArrays("+[d,h,p]+");")}l&&"null"!==l?v?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}b&&("number"!=typeof c||c>=0)?"string"==typeof c?(n("if(",c,">0){"),g(),n("}else if(",c,"<0){"),y(),n("}")):g():y()}function X(e,t,n,r,a){var i=I(),o=i.proc("body",a);return M.optional((function(){i.commandStr=t.commandStr,i.command=i.link(t.commandStr)})),b&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays")),e(i,o,n,r),i.compile().body}function $(e,t,n,r){U(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),q(e,t,n,r.attributes,(function(){return!0}))),Y(e,t,n,r.uniforms,(function(){return!0}),!1),W(e,t,t,n)}function H(e,t,n,r){function a(){return!0}e.batchId="a1",U(e,t),q(e,t,n,r.attributes,a),Y(e,t,n,r.uniforms,a,!1),W(e,t,t,n)}function Z(e,t,n,r){U(e,t);var a=n.contextDep,i=t.def(),o=t.def();e.shared.props=o,e.batchId=i;var s=e.scope(),l=e.scope();function u(e){return e.contextDep&&a||e.propDep}function c(e){return!u(e)}if(t(s.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",o,"=","a0","[",i,"];",l,"}",s.exit),n.needsContext&&L(e,l,n.context),n.needsFramebuffer&&N(e,l,n.framebuffer),B(e,l,n.state,u),n.profile&&u(n.profile)&&V(e,l,n,!1,!0),r)n.useVAO?n.drawVAO?u(n.drawVAO)?l(e.shared.vao,".setVAO(",n.drawVAO.append(e,l),");"):s(e.shared.vao,".setVAO(",n.drawVAO.append(e,s),");"):s(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(s(e.shared.vao,".setVAO(null);"),q(e,s,n,r.attributes,c),q(e,l,n,r.attributes,u)),Y(e,s,n,r.uniforms,c,!1),Y(e,l,n,r.uniforms,u,!0),W(e,s,l,n);else{var f=e.global.def("{}"),d=n.shader.progVar.append(e,l),h=l.def(d,".id"),p=l.def(f,"[",h,"]");l(e.shared.gl,".useProgram(",d,".program);","if(!",p,"){",p,"=",f,"[",h,"]=",e.link((function(t){return X(H,e,n,t,2)})),"(",d,");}",p,".call(this,a0[",i,"],",i,");")}}function Q(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!he(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(C.isDynamic(e[t[n]]))return!0;return!1}}(r)){var a=e.global,i=Object.keys(r),o=!1,s=!1,l=!1,u=e.global.def("{}");i.forEach((function(t){var n=r[t];if(C.isDynamic(n)){"function"==typeof n&&(n=r[t]=C.unbox(n));var i=or(n,null);o=o||i.thisDep,l=l||i.propDep,s=s||i.contextDep}else{switch(a(u,".",t,"="),typeof n){case"number":a(n);break;case"string":a('"',n,'"');break;case"object":Array.isArray(n)&&a("[",n.join(),"]");break;default:a(e.link(n))}a(";")}})),t.dynamic[n]=new C.DynamicVariable(4,{thisDep:o,contextDep:s,propDep:l,ref:u,append:function(e,t){i.forEach((function(n){var a=r[n];if(C.isDynamic(a)){var i=e.invoke(t,a);t(u,".",n,"=",i,";")}}))}}),delete t.static[n]}}return{next:x,current:w,procs:function(){var e=I(),t=e.proc("poll"),n=e.proc("refresh"),i=e.block();t(i),n(i);var o,s=e.shared,l=s.gl,u=s.next,c=s.current;i(c,".dirty=false;"),N(e,t),N(e,n,null,!0),b&&(o=e.link(b)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<a.maxAttributes;++f){var d=n.def(s.attributes,"[",f,"]"),h=e.cond(d,".buffer");h.then(l,".enableVertexAttribArray(",f,");",l,".bindBuffer(",An,",",d,".buffer.buffer);",l,".vertexAttribPointer(",f,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",f,");",l,".vertexAttrib4f(",f,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(h),b&&n(o,".vertexAttribDivisorANGLE(",f,",",d,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(k).forEach((function(r){var a=k[r],o=i.def(u,".",r),s=e.block();s("if(",o,"){",l,".enable(",a,")}else{",l,".disable(",a,")}",c,".",r,"=",o,";"),n(s),t("if(",o,"!==",c,".",r,"){",s,"}")})),Object.keys(A).forEach((function(r){var a,o,s=A[r],f=w[r],d=e.block();if(d(l,".",s,"("),he(f)){var h=f.length;a=e.global.def(u,".",r),o=e.global.def(c,".",r),d(R(h,(function(e){return a+"["+e+"]"})),");",R(h,(function(e){return o+"["+e+"]="+a+"["+e+"];"})).join("")),t("if(",R(h,(function(e){return a+"["+e+"]!=="+o+"["+e+"]"})).join("||"),"){",d,"}")}else a=i.def(u,".",r),o=i.def(c,".",r),d(a,");",c,".",r,"=",a,";"),t("if(",a,"!==",o,"){",d,"}");n(d)})),e.compile()}(),compile:function(e,r,a,i,o){var s=I();s.stats=s.link(o),Object.keys(r.static).forEach((function(e){Q(s,r,e)})),kn.forEach((function(t){Q(s,e,t)}));var l=j(e,r,a,i,s);return function(e,t){var n=e.proc("draw",1);U(e,n),L(e,n,t.context),N(e,n,t.framebuffer),F(e,n,t),B(e,n,t.state),V(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)$(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var a=e.global.def("{}"),i=n.def(r,".id"),o=n.def(a,"[",i,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",a,"[",i,"]=",e.link((function(n){return X($,e,t,n,1)})),"(",r,");",o,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(s,l),function(e,t){var r=e.proc("scope",3);e.batchId="a2";var a=e.shared,i=a.current;function o(n){var i=t.shader[n];i&&r.set(a.shader,"."+n,i.append(e,r))}L(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),nr(Object.keys(t.state)).forEach((function(n){var i=t.state[n].append(e,r);he(i)?i.forEach((function(t,a){r.set(e.next[n],"["+a+"]",t)})):r.set(a.next,"."+n,i)})),V(e,r,t,!0,!0),[hn,vn,mn,gn,pn].forEach((function(n){var i=t.draw[n];i&&r.set(a.draw,"."+n,""+i.append(e,r))})),Object.keys(t.uniforms).forEach((function(i){var o=t.uniforms[i].append(e,r);Array.isArray(o)&&(o="["+o.join()+"]"),r.set(a.uniforms,"["+n.id(i)+"]",o)})),Object.keys(t.attributes).forEach((function(n){var a=t.attributes[n].append(e,r),i=e.scopeAttrib(n);Object.keys(new v).forEach((function(e){r.set(i,"."+e,a[e])}))})),t.scopeVAO&&r.set(a.vao,".targetVAO",t.scopeVAO.append(e,r)),o(fn),o(dn),Object.keys(t.state).length>0&&(r(i,".dirty=true;"),r.exit(i,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}(s,l),function(e,t){var n=e.proc("batch",2);e.batchId="0",U(e,n);var r=!1,a=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(L(e,n,t.context),a=!1);var i=t.framebuffer,o=!1;function s(e){return e.contextDep&&r||e.propDep}i?(i.propDep?r=o=!0:i.contextDep&&r&&(o=!0),o||N(e,n,i)):N(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),F(e,n,t),B(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||V(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=a,t.needsFramebuffer=o;var l=t.shader.progVar;if(l.contextDep&&r||l.propDep)Z(e,n,t,null);else{var u=l.append(e,n);if(n(e.shared.gl,".useProgram(",u,".program);"),t.shader.program)Z(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),f=n.def(u,".id"),d=n.def(c,"[",f,"]");n(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",f,"]=",e.link((function(n){return X(Z,e,t,n,2)})),"(",u,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(s,l),t(s.compile(),{destroy:function(){l.shader.program.destroy()}})}}}var ur=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(e){n.push(e)}var a=[];function i(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var o=[];function s(e){o.push(e)}var l=[];function u(e,t,n){var r=o.pop()||new i;r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,l.push(r)}var c=[],f=[];return{beginQuery:function(e){var r=n.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,r),a.push(r),u(a.length-1,a.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:u,update:function(){var e,n,i=a.length;if(0!==i){f.length=Math.max(f.length,i+1),c.length=Math.max(c.length,i+1),c[0]=0,f[0]=0;var o=0;for(e=0,n=0;n<a.length;++n){var u=a[n];t.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(o+=t.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),r(u)):a[e++]=u,c[n+1]=o,f[n+1]=e}for(a.length=e,e=0,n=0;n<l.length;++n){var d=l[n],h=d.startQueryIndex,p=d.endQueryIndex;d.sum+=c[p]-c[h];var m=f[h],v=f[p];v===m?(d.stats.gpuTime+=d.sum/1e6,s(d)):(d.startQueryIndex=m,d.endQueryIndex=v,l[e++]=d)}l.length=e}},getNumPendingQueries:function(){return a.length},clear:function(){n.push.apply(n,a);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);a.length=0,n.length=0},restore:function(){a.length=0,n.length=0}}},cr="webglcontextlost",fr="webglcontextrestored";function dr(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}return function(n){var r=I(n);if(!r)return null;var a=r.gl,i=a.getContextAttributes(),o=a.isContextLost(),s=function(e,t){var n={};function r(t){M.type(t,"string","extension name must be string");var r,a=t.toLowerCase();try{r=n[a]=e.getExtension(a)}catch(e){}return!!r}for(var a=0;a<t.extensions.length;++a){var i=t.extensions[a];if(!r(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}(a,r);if(!s)return null;var l,u,c=(l={"":0},u=[""],{id:function(e){var t=l[e];return t||(t=l[e]=u.length,u.push(e),t)},str:function(e){return u[e]}}),f={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,h=ur(0,d),p=P(),m=a.drawingBufferWidth,v=a.drawingBufferHeight,g={tick:0,time:0,viewportWidth:m,viewportHeight:v,framebufferWidth:m,framebufferHeight:v,drawingBufferWidth:m,drawingBufferHeight:v,pixelRatio:r.pixelRatio},b={elements:null,primitive:4,count:-1,offset:0,instances:-1},y=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,a=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),a=e.getParameter(36063));var i=!!t.oes_texture_float;if(i){var o=e.createTexture();e.bindTexture(F,o),e.texImage2D(F,0,B,1,1,0,B,U,null);var s=e.createFramebuffer();if(e.bindFramebuffer(V,s),e.framebufferTexture2D(V,36064,F,o,0),e.bindTexture(F,null),36053!==e.checkFramebufferStatus(V))i=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var l=N.allocType(U,4);e.readPixels(0,0,1,1,B,U,l),e.getError()?i=!1:(e.deleteFramebuffer(s),e.deleteTexture(o),i=1===l[0]),N.freeType(l)}}var u=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=e.createTexture(),f=N.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,c),e.texImage2D(34069,0,B,3,3,0,B,5121,f),N.freeType(f),e.bindTexture(34067,null),e.deleteTexture(c),u=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:a,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:i,npotTextureCube:u}}(a,d),_=function(t,n,r,a){var i=0,o={};function s(e){this.id=i++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=J,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function u(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function c(t,n,r,a,i,o){var s,l;if(t.usage=r,Array.isArray(n)){if(t.dtype=a||ee,n.length>0)if(Array.isArray(n[0])){s=K(n);for(var c=1,f=1;f<s.length;++f)c*=s[f];t.dimension=c,u(t,l=Q(n,s,t.dtype),r),o?t.persistentData=l:N.freeType(l)}else if("number"==typeof n[0]){t.dimension=i;var d=N.allocType(t.dtype,n.length);re(d,n),u(t,d,r),o?t.persistentData=d:N.freeType(d)}else e(n[0])?(t.dimension=n[0].length,t.dtype=a||ne(n[0])||ee,u(t,l=Q(n,[n.length,n[0].length],t.dtype),r),o?t.persistentData=l:N.freeType(l)):M.raise("invalid buffer data")}else if(e(n))t.dtype=a||ne(n),t.dimension=i,u(t,n,r),o&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(q(n)){s=n.shape;var h=n.stride,p=n.offset,m=0,v=0,g=0,b=0;1===s.length?(m=s[0],v=1,g=h[0],b=0):2===s.length?(m=s[0],v=s[1],g=h[0],b=h[1]):M.raise("invalid shape"),t.dtype=a||ne(n.data)||ee,t.dimension=v;var y=N.allocType(t.dtype,m*v);ae(y,n.data,m,v,g,b,p),u(t,y,r),o?t.persistentData=y:N.freeType(y)}else n instanceof ArrayBuffer?(t.dtype=J,t.dimension=i,u(t,n,r),o&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):M.raise("invalid buffer data")}function f(e){n.bufferCount--,a(e);var r=e.buffer;M(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete o[e.id]}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(o).forEach((function(t){e+=o[t].stats.size})),e}),{create:function(a,i,l,u){n.bufferCount++;var d=new s(i);function h(n){var a=35044,i=null,o=0,s=0,l=1;return Array.isArray(n)||e(n)||q(n)||n instanceof ArrayBuffer?i=n:"number"==typeof n?o=0|n:n&&(M.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(M(null===i||Array.isArray(i)||e(i)||q(i),"invalid data for buffer"),i=n.data),"usage"in n&&(M.parameter(n.usage,Z,"invalid buffer usage"),a=Z[n.usage]),"type"in n&&(M.parameter(n.type,G,"invalid buffer type"),s=G[n.type]),"dimension"in n&&(M.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(M.nni(o,"buffer length must be a nonnegative integer"),o=0|n.length)),d.bind(),i?c(d,i,a,s,l,u):(o&&t.bufferData(d.type,o,a),d.dtype=s||J,d.usage=a,d.dimension=l,d.byteLength=o),r.profile&&(d.stats.size=d.byteLength*te[d.dtype]),h}function p(e,n){M(n+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,n,e)}return o[d.id]=d,l||h(a),h._reglType="buffer",h._buffer=d,h.subdata=function(t,n){var r,a=0|(n||0);if(d.bind(),e(t)||t instanceof ArrayBuffer)p(t,a);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var i=N.allocType(d.dtype,t.length);re(i,t),p(i,a),N.freeType(i)}else if(Array.isArray(t[0])||e(t[0])){r=K(t);var o=Q(t,r,d.dtype);p(o,a),N.freeType(o)}else M.raise("invalid buffer data")}else if(q(t)){r=t.shape;var s=t.stride,l=0,u=0,c=0,f=0;1===r.length?(l=r[0],u=1,c=s[0],f=0):2===r.length?(l=r[0],u=r[1],c=s[0],f=s[1]):M.raise("invalid shape");var m=Array.isArray(t.data)?d.dtype:ne(t.data),v=N.allocType(m,l*u);ae(v,t.data,l,u,c,f,t.offset),p(v,a),N.freeType(v)}else M.raise("invalid data for buffer subdata");return h},r.profile&&(h.stats=d.stats),h.destroy=function(){f(d)},h},createStream:function(e,t){var n=l.pop();return n||(n=new s(e)),n.bind(),c(n,t,35040,0,1,!1),n},destroyStream:function(e){l.push(e)},clear:function(){Y(o).forEach(f),l.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:function(){Y(o).forEach((function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)}))},_initBuffer:c}}(a,f,r,(function(e){return x.destroyBuffer(e)})),w=function(t,n,r,a){var i={},o=0,s={uint8:oe,uint16:se};function l(e){this.id=o++,i[this.id]=this,this.buffer=e,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=le),l.prototype.bind=function(){this.buffer.bind()};var u=[];function c(a,i,o,s,l,u,c){var f;if(a.buffer.bind(),i){var d=c;c||e(i)&&(!q(i)||e(i.data))||(d=n.oes_element_index_uint?le:se),r._initBuffer(a.buffer,i,o,d,3)}else t.bufferData(ue,u,o),a.buffer.dtype=f||oe,a.buffer.usage=o,a.buffer.dimension=3,a.buffer.byteLength=u;if(f=c,!c){switch(a.buffer.dtype){case oe:case 5120:f=oe;break;case se:case 5122:f=se;break;case le:case 5124:f=le;break;default:M.raise("unsupported type for element array")}a.buffer.dtype=f}a.type=f,M(f!==le||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=l;h<0&&(h=a.buffer.byteLength,f===se?h>>=1:f===le&&(h>>=2)),a.vertCount=h;var p=s;if(s<0){p=4;var m=a.buffer.dimension;1===m&&(p=0),2===m&&(p=1),3===m&&(p=4)}a.primType=p}function f(e){a.elementsCount--,M(null!==e.buffer,"must not double destroy elements"),delete i[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,n){var i=r.create(null,ue,!0),o=new l(i._buffer);function u(t){if(t)if("number"==typeof t)i(t),o.primType=4,o.vertCount=0|t,o.type=oe;else{var n=null,r=35044,a=-1,l=-1,f=0,d=0;Array.isArray(t)||e(t)||q(t)?n=t:(M.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,M(Array.isArray(n)||e(n)||q(n),"invalid data for element buffer")),"usage"in t&&(M.parameter(t.usage,Z,"invalid element buffer usage"),r=Z[t.usage]),"primitive"in t&&(M.parameter(t.primitive,ie,"invalid element buffer primitive"),a=ie[t.primitive]),"count"in t&&(M("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),l=0|t.count),"type"in t&&(M.parameter(t.type,s,"invalid buffer type"),d=s[t.type]),"length"in t?f=0|t.length:(f=l,d===se||5122===d?f*=2:d!==le&&5124!==d||(f*=4))),c(o,n,r,a,l,f,d)}else i(),o.primType=4,o.vertCount=0,o.type=oe;return u}return a.elementsCount++,u(t),u._reglType="elements",u._elements=o,u.subdata=function(e,t){return i.subdata(e,t),u},u.destroy=function(){f(o)},u},createStream:function(e){var t=u.pop();return t||(t=new l(r.create(null,ue,!0,!1)._buffer)),c(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){u.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof l?e._elements:null},clear:function(){Y(i).forEach(f)}}}(a,d,_,f),x=function(t,n,r,a,i,o,s){for(var l=r.maxAttributes,u=new Array(l),c=0;c<l;++c)u[c]=new Et;var f=0,d={},h={Record:Et,scope:{},state:u,currentVAO:null,targetVAO:null,restore:p()?function(){p()&&Y(d).forEach((function(e){e.refresh()}))}:function(){},createVAO:function(t){var r=new v;function s(t){var a;if(Array.isArray(t))a=t,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{if(M("object"==typeof t,"invalid arguments for create vao"),M("attributes"in t,"must specify attributes for vao"),t.elements){var u=t.elements;r.ownsElements?"function"==typeof u&&"elements"===u._reglType?(r.elements.destroy(),r.ownsElements=!1):(r.elements(u),r.ownsElements=!1):o.getElements(t.elements)?(r.elements=t.elements,r.ownsElements=!1):(r.elements=o.create(t.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;a=t.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in t&&(r.offset=0|t.offset),"count"in t&&(r.count=0|t.count),"instances"in t&&(r.instances=0|t.instances),"primitive"in t&&(M(t.primitive in ie,"bad primitive type: "+t.primitive),r.primitive=ie[t.primitive]),M.optional((()=>{for(var e=Object.keys(t),n=0;n<e.length;++n)M(Ot.indexOf(e[n])>=0,'invalid option for vao: "'+e[n]+'" valid options are '+Ot)})),M(Array.isArray(a),"attributes must be an array")}M(a.length<l,"too many attributes"),M(a.length>0,"must specify at least one attribute");var c={},f=r.attributes;f.length=a.length;for(var d=0;d<a.length;++d){var h,p=a[d],m=f[d]=new Et,v=p.data||p;Array.isArray(v)||e(v)||q(v)?(r.buffers[d]&&(h=r.buffers[d],e(v)&&h._buffer.byteLength>=v.byteLength?h.subdata(v):(h.destroy(),r.buffers[d]=null)),r.buffers[d]||(h=r.buffers[d]=i.create(p,34962,!1,!0)),m.buffer=i.getBuffer(h),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1,c[d]=1):i.getBuffer(p)?(m.buffer=i.getBuffer(p),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1):i.getBuffer(p.buffer)?(m.buffer=i.getBuffer(p.buffer),m.size=0|(+p.size||m.buffer.dimension),m.normalized=!!p.normalized||!1,"type"in p?(M.parameter(p.type,G,"invalid buffer type"),m.type=G[p.type]):m.type=m.buffer.dtype,m.offset=0|(p.offset||0),m.stride=0|(p.stride||0),m.divisor=0|(p.divisor||0),m.state=1,M(m.size>=1&&m.size<=4,"size must be between 1 and 4"),M(m.offset>=0,"invalid offset"),M(m.stride>=0&&m.stride<=255,"stride must be between 0 and 255"),M(m.divisor>=0,"divisor must be positive"),M(!m.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in p?(M(d>0,"first attribute must not be a constant"),m.x=+p.x||0,m.y=+p.y||0,m.z=+p.z||0,m.w=+p.w||0,m.state=2):M(!1,"invalid attribute spec for location "+d)}for(var g=0;g<r.buffers.length;++g)!c[g]&&r.buffers[g]&&(r.buffers[g].destroy(),r.buffers[g]=null);return r.refresh(),s}return a.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1),r.destroy()},s._vao=r,s._reglType="vao",s(t)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}},setVAO:p()?function(e){if(e!==h.currentVAO){var t=p();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),h.currentVAO=e}}:function(e){if(e!==h.currentVAO){if(e)e.bindAttrs();else{for(var n=m(),r=0;r<u.length;++r){var a=u[r];a.buffer?(t.enableVertexAttribArray(r),a.buffer.bind(),t.vertexAttribPointer(r,a.size,a.type,a.normalized,a.stride,a.offfset),n&&a.divisor&&n.vertexAttribDivisorANGLE(r,a.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,a.x,a.y,a.z,a.w))}s.elements?t.bindBuffer(At,s.elements.buffer.buffer):t.bindBuffer(At,null)}h.currentVAO=e}},clear:p()?function(){Y(d).forEach((function(e){e.destroy()}))}:function(){}};function p(){return n.oes_vertex_array_object}function m(){return n.angle_instanced_arrays}function v(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=p();this.vao=e?e.createVertexArrayOES():null,d[this.id]=this,this.buffers=[]}return v.prototype.bindAttrs=function(){for(var e=m(),n=this.attributes,r=0;r<n.length;++r){var a=n[r];a.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(34962,a.buffer.buffer),t.vertexAttribPointer(r,a.size,a.type,a.normalized,a.stride,a.offset),e&&a.divisor&&e.vertexAttribDivisorANGLE(r,a.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,a.x,a.y,a.z,a.w))}for(var i=n.length;i<l;++i)t.disableVertexAttribArray(i);var s=o.getElements(this.elements);s?t.bindBuffer(At,s.buffer.buffer):t.bindBuffer(At,null)},v.prototype.refresh=function(){var e=p();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=null,e.bindVertexArrayOES(null))},v.prototype.destroy=function(){if(this.vao){var e=p();this===h.currentVAO&&(h.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),d[this.id]&&(delete d[this.id],a.vaoCount-=1)},h}(a,d,y,f,_,w,b),S=function(e,n,r,a){var i={},o={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function l(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function u(t,r,a){var s=35632===t?i:o,l=s[r];if(!l){var u=n.str(r);l=e.createShader(t),e.shaderSource(l,u),e.compileShader(l),M.shaderError(e,l,u,t,a),s[r]=l}return l}var c={},f=[],d=0;function h(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,a.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(t,r,i){var o,c,f=u(35632,t.fragId),d=u(35633,t.vertId),h=t.program=e.createProgram();if(e.attachShader(h,f),e.attachShader(h,d),i)for(o=0;o<i.length;++o){var p=i[o];e.bindAttribLocation(h,p[0],p[1])}e.linkProgram(h),M.linkError(e,h,n.str(t.fragId),n.str(t.vertId),r);var m=e.getProgramParameter(h,35718);a.profile&&(t.stats.uniformsCount=m);var v=t.uniforms;for(o=0;o<m;++o)if(c=e.getActiveUniform(h,o)){if(c.size>1)for(var g=0;g<c.size;++g){var b=c.name.replace("[0]","["+g+"]");l(v,new s(b,n.id(b),e.getUniformLocation(h,b),c))}var y=c.name;c.size>1&&(y=y.replace("[0]","")),l(v,new s(y,n.id(y),e.getUniformLocation(h,y),c))}var _=e.getProgramParameter(h,35721);a.profile&&(t.stats.attributesCount=_);var w=t.attributes;for(o=0;o<_;++o)(c=e.getActiveAttrib(h,o))&&l(w,new s(c.name,n.id(c.name),e.getAttribLocation(h,c.name),c))}return a.profile&&(r.getMaxUniformsCount=function(){var e=0;return f.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return f.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);Y(i).forEach(t),i={},Y(o).forEach(t),o={},f.forEach((function(t){e.deleteProgram(t.program)})),f.length=0,c={},r.shaderCount=0},program:function(n,a,s,l){M.command(n>=0,"missing vertex shader",s),M.command(a>=0,"missing fragment shader",s);var u=c[a];u||(u=c[a]={});var d=u[n];if(d&&(d.refCount++,!l))return d;var m=new h(a,n);return r.shaderCount++,p(m,s,l),d||(u[n]=m),f.push(m),t(m,{destroy:function(){if(m.refCount--,m.refCount<=0){e.deleteProgram(m.program);var t=f.indexOf(m);f.splice(t,1),r.shaderCount--}u[m.vertId].refCount<=0&&(e.deleteShader(o[m.vertId]),delete o[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(e.deleteShader(i[m.fragId]),delete i[m.fragId],delete c[m.fragId])}})},restore:function(){i={},o={};for(var e=0;e<f.length;++e)p(f[e],null,f[e].attributes.map((function(e){return[e.location,e.name]})))},shader:u,frag:-1,vert:-1}}(a,c,f,r),k=dt(a,d,y,(function(){E.procs.poll()}),g,f,r),A=function(e,t,n,r,a){var i={rgba4:pt,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(i.srgba=35907),t.ext_color_buffer_half_float&&(i.rgba16f=34842,i.rgb16f=34843),t.webgl_color_buffer_float&&(i.rgba32f=34836);var o=[];Object.keys(i).forEach((function(e){var t=i[e];o[t]=e}));var s=0,l={};function u(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=pt,this.width=0,this.height=0,a.profile&&(this.stats={size:0})}function c(t){var n=t.renderbuffer;M(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(ht,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete l[t.id],r.renderbufferCount--}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},a.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach((function(t){e+=l[t].stats.size})),e}),{create:function(t,s){var c=new u(e.createRenderbuffer());function f(t,r){var s=0,l=0,u=pt;if("object"==typeof t&&t){var d=t;if("shape"in d){var h=d.shape;M(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),s=0|h[0],l=0|h[1]}else"radius"in d&&(s=l=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(l=0|d.height);"format"in d&&(M.parameter(d.format,i,"invalid renderbuffer format"),u=i[d.format])}else"number"==typeof t?(s=0|t,l="number"==typeof r?0|r:s):t?M.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(M(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||l!==c.height||u!==c.format)return f.width=c.width=s,f.height=c.height=l,c.format=u,e.bindRenderbuffer(ht,c.renderbuffer),e.renderbufferStorage(ht,u,s,l),M(0===e.getError(),"invalid render buffer format"),a.profile&&(c.stats.size=vt(c.format,c.width,c.height)),f.format=o[c.format],f}return l[c.id]=c,r.renderbufferCount++,f(t,s),f.resize=function(t,r){var i=0|t,o=0|r||i;return i===c.width&&o===c.height||(M(i>0&&o>0&&i<=n.maxRenderbufferSize&&o<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=c.width=i,f.height=c.height=o,e.bindRenderbuffer(ht,c.renderbuffer),e.renderbufferStorage(ht,c.format,i,o),M(0===e.getError(),"invalid render buffer format"),a.profile&&(c.stats.size=vt(c.format,c.width,c.height))),f},f._reglType="renderbuffer",f._renderbuffer=c,a.profile&&(f.stats=c.stats),f.destroy=function(){c.decRef()},f},clear:function(){Y(l).forEach(c)},restore:function(){Y(l).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(ht,t.renderbuffer),e.renderbufferStorage(ht,t.format,t.width,t.height)})),e.bindRenderbuffer(ht,null)}}}(a,d,y,f,r),O=function(e,n,r,a,i,o){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function f(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,a=0;t?(r=t.width,a=t.height):n&&(r=n.width,a=n.height),this.width=r,this.height=a}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e,t,n){if(e)if(e.texture){var r=e.texture._texture,a=Math.max(1,r.width),i=Math.max(1,r.height);M(a===t&&i===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var o=e.renderbuffer._renderbuffer;M(o.width===t&&o.height===n,"inconsistent width/height for renderbuffer"),o.refCount+=1}}function p(t,n){n&&(n.texture?e.framebufferTexture2D(gt,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(gt,t,bt,n.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=yt,n=null,r=null,a=e;"object"==typeof e&&(a=e.data,"target"in e&&(t=0|e.target)),M.type(a,"function","invalid attachment data");var i=a._reglType;return"texture2d"===i?(n=a,M(t===yt)):"textureCube"===i?(n=a,M(t>=_t&&t<34075,"invalid cube map target")):"renderbuffer"===i?(r=a,t=bt):M.raise("invalid regl object for attachment"),new f(t,n,r)}function v(e,t,n,r,o){if(n){var s=a.create2D({width:e,height:t,format:r,type:o});return s._texture.refCount=0,new f(yt,s,null)}var l=i.create({width:e,height:t,format:r});return l._renderbuffer.refCount=0,new f(bt,null,l)}function g(e){return e&&(e.texture||e.renderbuffer)}function b(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var y=0,_={};function w(){this.id=y++,_[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function x(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function S(t){var n=t.framebuffer;M(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,o.framebufferCount--,delete _[t.id]}function k(t){var n;e.bindFramebuffer(gt,t.framebuffer);var a=t.colorAttachments;for(n=0;n<a.length;++n)p(36064+n,a[n]);for(n=a.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(gt,36064+n,yt,null,0);e.framebufferTexture2D(gt,33306,yt,null,0),e.framebufferTexture2D(gt,36096,yt,null,0),e.framebufferTexture2D(gt,36128,yt,null,0),p(36096,t.depthAttachment),p(36128,t.stencilAttachment),p(33306,t.depthStencilAttachment);var i=e.checkFramebufferStatus(gt);e.isContextLost()||36053===i||M.raise("framebuffer configuration not supported, status = "+kt[i]),e.bindFramebuffer(gt,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function A(e,a){var i=new w;function f(e,t){var a;M(s.next!==i,"can not update framebuffer which is currently in use");var o=0,d=0,p=!0,b=!0,y=null,_=!0,w="rgba",S="uint8",A=1,O=null,E=null,C=null,T=!1;if("number"==typeof e)o=0|e,d=0|t||o;else if(e){M.type(e,"object","invalid arguments for framebuffer");var P=e;if("shape"in P){var z=P.shape;M(Array.isArray(z)&&z.length>=2,"invalid shape for framebuffer"),o=z[0],d=z[1]}else"radius"in P&&(o=d=P.radius),"width"in P&&(o=P.width),"height"in P&&(d=P.height);("color"in P||"colors"in P)&&(y=P.color||P.colors,Array.isArray(y)&&M(1===y.length||n.webgl_draw_buffers,"multiple render targets not supported")),y||("colorCount"in P&&(A=0|P.colorCount,M(A>0,"invalid color buffer count")),"colorTexture"in P&&(_=!!P.colorTexture,w="rgba4"),"colorType"in P&&(S=P.colorType,_?(M(n.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),M(n.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(M(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==S&&"float32"!==S||(M(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),M.oneOf(S,c,"invalid color type")),"colorFormat"in P&&(w=P.colorFormat,l.indexOf(w)>=0?_=!0:u.indexOf(w)>=0?_=!1:M.optional((function(){_?M.oneOf(P.colorFormat,l,"invalid color format for texture"):M.oneOf(P.colorFormat,u,"invalid color format for renderbuffer")})))),("depthTexture"in P||"depthStencilTexture"in P)&&(T=!(!P.depthTexture&&!P.depthStencilTexture),M(!T||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in P&&("boolean"==typeof P.depth?p=P.depth:(O=P.depth,b=!1)),"stencil"in P&&("boolean"==typeof P.stencil?b=P.stencil:(E=P.stencil,p=!1)),"depthStencil"in P&&("boolean"==typeof P.depthStencil?p=b=P.depthStencil:(C=P.depthStencil,p=!1,b=!1))}else o=d=1;var D=null,I=null,R=null,j=null;if(Array.isArray(y))D=y.map(m);else if(y)D=[m(y)];else for(D=new Array(A),a=0;a<A;++a)D[a]=v(o,d,_,w,S);M(n.webgl_draw_buffers||D.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),M(D.length<=r.maxColorAttachments,"too many color attachments, not supported"),o=o||D[0].width,d=d||D[0].height,O?I=m(O):p&&!b&&(I=v(o,d,T,"depth","uint32")),E?R=m(E):b&&!p&&(R=v(o,d,!1,"stencil","uint8")),C?j=m(C):!O&&!E&&b&&p&&(j=v(o,d,T,"depth stencil","depth stencil")),M(!!O+!!E+!!C<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(a=0;a<D.length;++a)if(h(D[a],o,d),M(!D[a]||D[a].texture&&wt.indexOf(D[a].texture._texture.format)>=0||D[a].renderbuffer&&St.indexOf(D[a].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+a+" is invalid"),D[a]&&D[a].texture){var N=xt[D[a].texture._texture.format]*Mt[D[a].texture._texture.type];null===L?L=N:M(L===N,"all color attachments much have the same number of bits per pixel.")}return h(I,o,d),M(!I||I.texture&&6402===I.texture._texture.format||I.renderbuffer&&33189===I.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),h(R,o,d),M(!R||R.renderbuffer&&36168===R.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),h(j,o,d),M(!j||j.texture&&34041===j.texture._texture.format||j.renderbuffer&&34041===j.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),x(i),i.width=o,i.height=d,i.colorAttachments=D,i.depthAttachment=I,i.stencilAttachment=R,i.depthStencilAttachment=j,f.color=D.map(g),f.depth=g(I),f.stencil=g(R),f.depthStencil=g(j),f.width=i.width,f.height=i.height,k(i),f}return o.framebufferCount++,f(e,a),t(f,{resize:function(e,t){M(s.next!==i,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===i.width&&r===i.height)return f;for(var a=i.colorAttachments,o=0;o<a.length;++o)b(a[o],n,r);return b(i.depthAttachment,n,r),b(i.stencilAttachment,n,r),b(i.depthStencilAttachment,n,r),i.width=f.width=n,i.height=f.height=r,k(i),f},_reglType:"framebuffer",_framebuffer:i,destroy:function(){S(i),x(i)},use:function(e){s.setFBO({framebuffer:f},e)}})}return t(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof w)return t}return null},create:A,createCube:function(e){var i=Array(6);function o(e){var r;M(i.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},d=0,h=null,p="rgba",m="uint8",v=1;if("number"==typeof e)d=0|e;else if(e){M.type(e,"object","invalid arguments for framebuffer");var g=e;if("shape"in g){var b=g.shape;M(Array.isArray(b)&&b.length>=2,"invalid shape for framebuffer"),M(b[0]===b[1],"cube framebuffer must be square"),d=b[0]}else"radius"in g&&(d=0|g.radius),"width"in g?(d=0|g.width,"height"in g&&M(g.height===d,"must be square")):"height"in g&&(d=0|g.height);("color"in g||"colors"in g)&&(h=g.color||g.colors,Array.isArray(h)&&M(1===h.length||n.webgl_draw_buffers,"multiple render targets not supported")),h||("colorCount"in g&&(v=0|g.colorCount,M(v>0,"invalid color buffer count")),"colorType"in g&&(M.oneOf(g.colorType,c,"invalid color type"),m=g.colorType),"colorFormat"in g&&(p=g.colorFormat,M.oneOf(g.colorFormat,l,"invalid color format for texture"))),"depth"in g&&(f.depth=g.depth),"stencil"in g&&(f.stencil=g.stencil),"depthStencil"in g&&(f.depthStencil=g.depthStencil)}else d=1;if(h)if(Array.isArray(h))for(u=[],r=0;r<h.length;++r)u[r]=h[r];else u=[h];else{u=Array(v);var y={radius:d,format:p,type:m};for(r=0;r<v;++r)u[r]=a.createCube(y)}for(f.color=Array(u.length),r=0;r<u.length;++r){var _=u[r];M("function"==typeof _&&"textureCube"===_._reglType,"invalid cube map"),d=d||_.width,M(_.width===d&&_.height===d,"invalid cube map shape"),f.color[r]={target:_t,data:u[r]}}for(r=0;r<6;++r){for(var w=0;w<u.length;++w)f.color[w].target=_t+r;r>0&&(f.depth=i[0].depth,f.stencil=i[0].stencil,f.depthStencil=i[0].depthStencil),i[r]?i[r](f):i[r]=A(f)}return t(o,{width:d,height:d,color:u})}return o(e),t(o,{faces:i,resize:function(e){var t,n=0|e;if(M(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===o.width)return o;var a=o.color;for(t=0;t<a.length;++t)a[t].resize(n);for(t=0;t<6;++t)i[t].resize(n);return o.width=o.height=n,o},_reglType:"framebufferCube",destroy:function(){i.forEach((function(e){e.destroy()}))}})},clear:function(){Y(_).forEach(S)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,Y(_).forEach((function(t){t.framebuffer=e.createFramebuffer(),k(t)}))}})}(a,d,y,k,A,f),E=lr(a,c,d,y,_,w,0,O,{},x,S,b,g,h,r),z=Pt(a,O,E.procs.poll,g,i,d,y),D=E.next,R=a.canvas,j=[],L=[],W=[],X=[r.onDestroy],$=null;function H(){if(0===j.length)return h&&h.update(),void($=null);$=T.next(H),ye();for(var e=j.length-1;e>=0;--e){var t=j[e];t&&t(g,null,0)}a.flush(),h&&h.update()}function ce(){!$&&j.length>0&&($=T.next(H))}function fe(){$&&(T.cancel(H),$=null)}function de(e){e.preventDefault(),o=!0,fe(),L.forEach((function(e){e()}))}function he(e){a.getError(),o=!1,s.restore(),S.restore(),_.restore(),k.restore(),A.restore(),O.restore(),x.restore(),h&&h.restore(),E.procs.refresh(),ce(),W.forEach((function(e){e()}))}function pe(e){function n(e,t){var n={},r={};return Object.keys(e).forEach((function(a){var i=e[a];if(C.isDynamic(i))r[a]=C.unbox(i,a);else{if(t&&Array.isArray(i))for(var o=0;o<i.length;++o)if(C.isDynamic(i[o]))return void(r[a]=C.unbox(i,a));n[a]=i}})),{dynamic:r,static:n}}M(!!e,"invalid args to regl({...})"),M.type(e,"object","invalid args to regl({...})");var r=n(e.context||{},!0),a=n(e.uniforms||{},!0),i=n(e.attributes||{},!1),s=n(function(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1),l={gpuTime:0,cpuTime:0,count:0},u=E.compile(s,i,a,r,l),c=u.draw,f=u.batch,d=u.scope,h=[];return t((function(e,t){var n;if(o&&M.raise("context lost"),"function"==typeof e)return d.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)d.call(this,null,t,n);else{if(!Array.isArray(e))return d.call(this,e,t,0);for(n=0;n<e.length;++n)d.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return f.call(this,function(e){for(;h.length<e;)h.push(null);return h}(0|e),0|e)}else{if(!Array.isArray(e))return c.call(this,e);if(e.length)return f.call(this,e,e.length)}}),{stats:l,destroy:function(){u.destroy()}})}R&&(R.addEventListener(cr,de,!1),R.addEventListener(fr,he,!1));var me=O.setFBO=pe({framebuffer:C.define.call(null,1,"framebuffer")});function ve(e,t){var n=0;E.procs.poll();var r=t.color;r&&(a.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(a.clearDepth(+t.depth),n|=256),"stencil"in t&&(a.clearStencil(0|t.stencil),n|=1024),M(!!n,"called regl.clear with no buffer specified"),a.clear(n)}function ge(e){return M.type(e,"function","regl.frame() callback must be a function"),j.push(e),ce(),{cancel:function(){var t=dr(j,e);M(t>=0,"cannot cancel a frame twice"),j[t]=function e(){var t=dr(j,e);j[t]=j[j.length-1],j.length-=1,j.length<=0&&fe()}}}}function be(){var e=D.viewport,t=D.scissor_box;e[0]=e[1]=t[0]=t[1]=0,g.viewportWidth=g.framebufferWidth=g.drawingBufferWidth=e[2]=t[2]=a.drawingBufferWidth,g.viewportHeight=g.framebufferHeight=g.drawingBufferHeight=e[3]=t[3]=a.drawingBufferHeight}function ye(){g.tick+=1,g.time=we(),be(),E.procs.poll()}function _e(){k.refresh(),be(),E.procs.refresh(),h&&h.update()}function we(){return(P()-p)/1e3}_e();var xe=t(pe,{clear:function(e){if(M("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)me(t({framebuffer:e.framebuffer.faces[n]},e),ve);else me(e,ve);else ve(0,e)},prop:C.define.bind(null,1),context:C.define.bind(null,2),this:C.define.bind(null,3),draw:pe({}),buffer:function(e){return _.create(e,34962,!1,!1)},elements:function(e){return w.create(e,!1)},texture:k.create2D,cube:k.createCube,renderbuffer:A.create,framebuffer:O.create,framebufferCube:O.createCube,vao:x.createVAO,attributes:i,frame:ge,on:function(e,t){var n;switch(M.type(t,"function","listener callback must be a function"),e){case"frame":return ge(t);case"lost":n=L;break;case"restore":n=W;break;case"destroy":n=X;break;default:M.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:y,hasExtension:function(e){return y.extensions.indexOf(e.toLowerCase())>=0},read:z,destroy:function(){j.length=0,fe(),R&&(R.removeEventListener(cr,de),R.removeEventListener(fr,he)),S.clear(),O.clear(),A.clear(),x.clear(),k.clear(),w.clear(),_.clear(),h&&h.clear(),X.forEach((function(e){e()}))},_gl:a,_refresh:_e,poll:function(){ye(),h&&h.update()},now:we,stats:f});return r.onDone(null,xe),xe}}()},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<a&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<a&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,p=!1,m=!1,v=!1,g="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(v=!1,_(e),!m)if(null!==r(u))m=!0,D(x);else{var t=r(c);null!==t&&I(w,t.startTime-e)}}function x(e,n){m=!1,v&&(v=!1,b(A),A=-1),p=!0;var i=h;try{for(_(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?d.callback=s:d===r(u)&&a(u),_(n)}else a(u);d=r(u)}if(null!==d)var l=!0;else{var f=r(c);null!==f&&I(w,f.startTime-n),l=!1}return l}finally{d=null,h=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var M,S=!1,k=null,A=-1,O=5,E=-1;function C(){return!(t.unstable_now()-E<O)}function T(){if(null!==k){var e=t.unstable_now();E=e;var n=!0;try{n=k(!0,e)}finally{n?M():(S=!1,k=null)}}else S=!1}if("function"==typeof y)M=function(){y(T)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,z=P.port2;P.port1.onmessage=T,M=function(){z.postMessage(null)}}else M=function(){g(T,0)};function D(e){k=e,S||(S=!0,M())}function I(e,n){A=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?o+i:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(v?(b(A),A=-1):v=!0,I(w,i-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,D(x))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},377:(e,t,n)=>{var r=n(832),a=n(652),i=n(801),o=n(30),s=n(618),l=n(49),u=n(971);u.alea=r,u.xor128=a,u.xorwow=i,u.xorshift7=o,u.xor4096=s,u.tychei=l,e.exports=u},832:function(e,t,n){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},49:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},652:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},618:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},30:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,a))||(a.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},971:function(e,t,n){var r;!function(a,i,o){var s,l=256,u=o.pow(l,6),c=o.pow(2,52),f=2*c,d=255;function h(e,t,n){var r=[],d=g(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(a.crypto||a.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,b(i)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,g(b(h.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(o.random=e,t):e})(y,d,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<l;)o[a]=a++;for(a=0;a<l;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*l+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(v(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),i),e.exports){e.exports=h;try{s=n(42)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],u=r.base?l[0]+r.base:l[0],c=i[u]||0,f="".concat(u," ").concat(c);i[u]=c+1;var d=n(f),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var p=a(h,r);r.byIndex=s,t.splice(s,0,{identifier:f,updater:p,references:1})}o.push(f)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var l=r(e,a),u=0;u<i.length;u++){var c=n(i[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},613:(e,t,n)=>{"use strict";n.d(t,{H:()=>u,QL:()=>r,WN:()=>i,Z3:()=>p,_6:()=>l,dX:()=>s,tH:()=>o,zN:()=>c});class r{check(e){e<0||e>=this.length||Number.isInteger(e)}get(e){return Boolean(this.buf[e>>>3]&1<<e%8)}set(e,t){let n=1<<e%8;t?this.buf[e>>>3]|=n:this.buf[e>>>3]&=255^n}fill(){this.buf.fill(255)}clear(){this.buf.fill(0)}copy(e){if(this.length!==e.length)throw Error("Mismatched dimension");this.buf.set(e.buf)}constructor(e){this.length=e,this.buf=new Uint8Array(Math.ceil(e/8))}}class a{get(e){return this.ref.get(e,this.y)}set(e,t){this.ref.set(e,this.y,t)}constructor(e,t){this.ref=e,this.y=t}}class i{get ROWS(){return this.MY}get COLS(){return this.MX}check(e,t){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||Number.isInteger(t)}get(e,t){let n=t*this.MX+e;return Boolean(this.buf[n>>>3]&1<<n%8)}set(e,t,n){let r=t*this.MX+e,a=1<<r%8;n?this.buf[r>>>3]|=a:this.buf[r>>>3]&=255^a}row(e){return new a(this,e)}fill(){this.buf.fill(255)}clear(){this.buf.fill(0)}copy(e){if(this.MX!==e.MX||this.MY!==e.MY)throw Error("Mismatched dimension");this.buf.set(e.buf)}constructor(e,t){this.MX=e,this.MY=t,this.buf=new Uint8Array(Math.ceil(e*t/8))}}class o{check(e,t,n){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||!Number.isInteger(t)||n<0||n>=this.MX||Number.isInteger(n)}get(e,t,n){let r=n*this.MY*this.MX+t*this.MX+e;return Boolean(this.buf[r>>>3]&1<<r%8)}set(e,t,n,r){let a=n*this.MY*this.MX+t*this.MX+e,i=1<<a%8;r?this.buf[a>>>3]|=i:this.buf[a>>>3]&=255^i}fill(){this.buf.fill(255)}clear(){this.buf.fill(0)}constructor(e,t,n,r){this.MX=e,this.MY=t,this.MZ=n,this.buf=new Uint8Array(Math.ceil(e*t*n/8)),r?this.fill():this.clear()}}class s{get ROWS(){return this.MY}get COLS(){return this.MX}check(e,t){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||Number.isInteger(t)}get(e,t){return this.arr[t*this.MX+e]}set(e,t,n){this.arr[t*this.MX+e]=n}fill(e){this.arr.fill(e)}row(e){return this.arr.subarray(e*this.MX,(e+1)*this.MX)}incre(e,t){this.arr[t*this.MX+e]++}static from(e,t){if(!t?.length)return null;let n=new s(e,t[0].length,t.length);for(let e=0;e<t.length;e++)n.row(e).set(t[e]);return n}copy(e){if(this.MX!==e.MX||this.MY!==e.MY)throw Error("Mismatched dimension");this.arr.set(e.arr)}constructor(e,t,n,r){if(this.arr=new e(t*n),"number"==typeof r)this.arr.fill(r);else if("function"==typeof r)for(let e=0;e<n;e++)for(let n=0;n<t;n++)this.arr[e*t+n]=r(n,e);this.MX=t,this.MY=n}}class l{check(e,t,n){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||!Number.isInteger(t)||n<0||n>=this.MX||Number.isInteger(n)}get(e,t,n){return this.arr[n*this.MX*this.MY+t*this.MX+e]}set(e,t,n,r){this.arr[n*this.MX*this.MY+t*this.MX+e]=r}copy(e){if(this.MX!==e.MX||this.MY!==e.MY||this.MZ!==e.MZ)throw Error("Mismatched dimension");this.arr.set(e.arr)}constructor(e,t,n,r,a){if(this.arr=new e(t*n*r),a)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let i=0;i<t;i++)this.arr[e*t*n+r*t+i]=a(i,r,e);this.MX=t,this.MY=n,this.MZ=r}}const u=(e,t,n,r,a)=>{let i=new e(t*n*r);for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let o=0;o<t;o++)i[e*t*n+r*t+o]=a(o,r,e);return i};class c{get size(){return this._size}clear(){this.map.clear()}get(e){let t=this.hashFunc(e),n=this.map.get(t);if(!n)return null;let r=n.find((t=>this.eqFunc(e,t.k)));return r?r.v:null}set(e,t){let n=this.hashFunc(e),r=this.map.get(n);if(r){let n=r.findIndex((t=>this.eqFunc(e,t.k)));n<0?(r.push({k:this.copyFunc(e),v:t}),this._size++):r[n].v=t}else this.map.set(n,[{k:this.copyFunc(e),v:t}]),this._size++}delete(e){let t=this.hashFunc(e),n=this.map.get(t);if(!n)return!1;if(1===n.length)return this.map.delete(t),this._size--,!0;let r=n.findIndex((t=>this.eqFunc(e,t.k)));return!(r<0||(n.splice(r,1),this._size--,0))}keys(){return[...this.map.values()].flat().map((e=>e.k))}values(){return[...this.map.values()].flat().map((e=>e.v))}entries(){return[...this.map.values()].flat().map((e=>[e.k,e.v]))}constructor(e,t,n){this._size=0,this.map=new Map,this.copyFunc=e,this.hashFunc=t,this.eqFunc=n}}let f=e=>(e+1>>>1)-1,d=e=>1+(e<<1),h=e=>e+1<<1;class p{get size(){return this.heap.length}isEmpty(){return!this.heap.length}peek(){return this.heap[0]}enqueue(...e){return e.forEach((e=>{this.heap.push(e),this._siftUp()})),this.size}dequeue(){let e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this.heap.pop(),this._siftDown(),e}_greater(e,t){return this.comparator(this.heap[e],this.heap[t])}_swap(e,t){[this.heap[e],this.heap[t]]=[this.heap[t],this.heap[e]]}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,f(e));)this._swap(e,f(e)),e=f(e)}_siftDown(){let e=0;for(;d(e)<this.size&&this._greater(d(e),e)||h(e)<this.size&&this._greater(h(e),e);){let t=h(e)<this.size&&this._greater(h(e),d(e))?h(e):d(e);this._swap(e,t),e=t}}constructor(e=((e,t)=>e>t)){this.heap=[],this.heap=[],this.comparator=e}}},999:(e,t,n)=>{"use strict";n.d(t,{TT:()=>a,uD:()=>i.u,Th:()=>r,j:()=>I});class r{get characters(){return this._chars}setCharacters(e){if(this._chars!==e){this._chars=e;let t=e.split("").map((e=>this._palette.get(e)));this.colors=new Uint8Array(4*t.length);for(let e=0;e<t.length;e++)this.colors.set(t[e],4*e)}}set palette(e){this._palette=new Map([...e.entries()])}get palette(){return new Map([...this._palette.entries()])}}class a extends r{get canvas(){return a._canvas}get ctx(){return a._ctx}update(e,t,n){(this.MX!==e||this.MY!==t)&&(this.MX=e,this.MY=t,this.img=new ImageData(e,t))}render(e){let{MX:t,MY:n,img:r,colors:a,canvas:i,ctx:o}=this;if(!(i&&o&&a&&r))return;let{data:s}=r,l=t*n;for(let t=0;t<l;t++){let n=e[t]<<2,r=t<<2;s[r+0]=a[n+0],s[r+1]=a[n+1],s[r+2]=a[n+2],s[r+3]=a[n+3]}i.width=t,i.height=n,i.style.width=`${t}px`,i.style.height=`${n}px`,o.putImageData(r,0,0)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}dispose(){}constructor(){super(),this.canvas.style.imageRendering="pixelated"}}a._canvas=document.createElement("canvas"),a._ctx=a._canvas.getContext("2d");var i=n(852),o=n(550),s=n.n(o),l=1e-6,u="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random,f=Math.PI/180;function d(e){return e*f}function h(){var e=new u(3);return u!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function p(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function m(e,t){t=t||1;var n=2*c()*Math.PI,r=2*c()-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),h();var v,g,b,y,_=n(452),w=n.n(_);class x{get ping(){return this.fbo[this.index]}get pong(){return this.fbo[1-this.index]}swap(){this.index=1-this.index}resize(e,t){e<=this.width&&t<=this.height||(this.ping.resize(e,t),this.pong.resize(e,t))}constructor(e,t,n,r){this.index=0,this.width=e,this.height=t;let a={width:e,height:t,colorType:r};this.fbo=[n.framebuffer(a),n.framebuffer(a)]}}let M={};const S=(e,t)=>{let n=e._gl.canvas,r=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}(h(),p(h(),[1.11,-0,.25]),1496e8),a=w()(e),i=a({sunDirection:p(h(),r),resolution:1024}),o=new x(n.width,n.height,e,t),s=[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1];(v=M).t2Sphere||(v.t2Sphere=(()=>{let t=new Float32Array(3145728);for(let e=0;e<1048576;e++){let n=m(h());t[3*e+0]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]}return e.texture({width:1024,height:1024,format:"rgb",type:"float",data:t,wrap:"repeat"})})()),(g=M).t3Sphere||(g.t3Sphere=(()=>{let t=new Float32Array(3145728);for(let e=0;e<1048576;e++){let n=m(h(),Math.random());t[3*e+0]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]}return e.texture({width:1024,height:1024,format:"rgb",type:"float",data:t,wrap:"repeat"})})()),(b=M).tUniform2||(b.tUniform2=(()=>{let t=new Float32Array(2097152);for(let e=0;e<1048576;e++)t[2*e+0]=Math.random(),t[2*e+1]=Math.random();return e.texture({width:1024,height:1024,format:"luminance alpha",type:"float",data:t,wrap:"repeat"})})()),(y=M).tUniform1||(y.tUniform1=(()=>{let t=new Float32Array(1048576);for(let e=0;e<1048576;e++)t[e]=Math.random();return e.texture({width:1024,height:1024,format:"luminance",type:"float",data:t,wrap:"repeat"})})());let l=t=>e.prop(t),u=e({vert:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nvoid main() {\n    gl_Position = vec4(position, 0, 1);\n}\n",frag:"precision highp float;\n#define GLSLIFY 1\nuniform highp sampler2D tRGB, tRMET, tRi, tIndex, t2Sphere, t3Sphere, tUniform2, tUniform1, source;\nuniform samplerCube tSky;\nuniform mat4 invpv;\nuniform vec3 eye, bounds, lightPosition, groundColor;\nuniform vec2 res, tOffset, invResRand;\nuniform float resStage, lightRadius, groundRoughness, groundMetalness, dofDist, dofMag, lightIntensity;\n\nconst float epsilon = 0.0001;\nconst int nBounces = 4;\n\nfloat randUniform1(inout vec2 randOffset) {\n    float r = texture2D(tUniform1, randOffset + tOffset).r;\n    randOffset += r;\n    return r;\n}\n\nvec2 randUniform2(inout vec2 randOffset) {\n    vec2 r = texture2D(tUniform2, randOffset + tOffset).ra;\n    randOffset += r;\n    return r;\n}\n\nvec3 rand2Sphere(inout vec2 randOffset) {\n    vec3 r = texture2D(t2Sphere, randOffset + tOffset).xyz;\n    randOffset += r.xy;\n    return r;\n}\n\nvec3 rand3Sphere(inout vec2 randOffset) {\n    vec3 r = texture2D(t3Sphere, randOffset + tOffset).xyz;\n    randOffset += r.xy;\n    return r;\n}\n\nbool inBounds(vec3 p) {\n    if (p.x < 0.0 || p.y < 0.0 || p.z < 0.0) {\n        return false;\n    }\n    if (p.x >= bounds.x || p.y >= bounds.y || p.z >= bounds.z) {\n        return false;\n    }\n    return true;\n}\n\nbool rayAABB(vec3 origin, vec3 direction, vec3 bMin, vec3 bMax, out float t0) {\n    vec3 invDir = 1.0 / direction;\n    vec3 omin = (bMin - origin) * invDir;\n    vec3 omax = (bMax - origin) * invDir;\n    vec3 imax = max(omax, omin);\n    vec3 imin = min(omax, omin);\n    float t1 = min(imax.x, min(imax.y, imax.z));\n    t0 = max(imin.x, max(imin.y, imin.z));\n    t0 = max(t0, 0.0);\n    return t1 > t0;\n}\n\nvec3 rayAABBNorm(vec3 p, vec3 v) {\n    vec3 d = p - (v + 0.5);\n    vec3 dabs = abs(d);\n    if (dabs.x > dabs.y) {\n        if (dabs.x > dabs.z) {\n            return vec3(sign(d.x), 0.0, 0.0);\n        } else {\n            return vec3(0, 0, sign(d.z));\n        }\n    } else {\n        if (dabs.y > dabs.z) {\n            return vec3(0.0, sign(d.y), 0.0);\n        } else {\n            return vec3(0.0, 0.0, sign(d.z));\n        }\n    }\n}\n\nvec2 samplePoint(vec3 v) {\n    float invResStage = 1.0 / resStage;\n    float i = v.y * bounds.x * bounds.z + v.z * bounds.x + v.x;\n    i = i * invResStage;\n    float y = floor(i);\n    float x = fract(i) * resStage;\n    x = (x + 0.5) * invResStage;\n    y = (y + 0.5) * invResStage;\n    return vec2(x, y);\n}\n\nstruct VoxelData {\n  vec3 xyz;\n  vec3 rgb;\n  vec2 index;\n  float roughness;\n  float metalness;\n  float emission;\n  float transparent;\n  float ri;\n};\n\nVoxelData floorData(vec3 v) {\n  return VoxelData(v, groundColor, vec2(1.0 / 255.0, 0.0), groundRoughness, groundMetalness, 0.0, 0.0, 1.0);\n}\n\nVoxelData airData(vec3 v) {\n  return VoxelData(v, vec3(1.0), vec2(0.0), 0.0, 0.0, 0.0, 1.0, 1.0);\n}\n\nVoxelData voxelData(vec3 v) {\n    VoxelData vd;\n    vd.xyz = v;\n    if (v.y == -1.0) {\n        return floorData(v);\n    }\n    if (!inBounds(v)) {\n        return airData(v);\n    }\n    vec2 s = samplePoint(v);\n    vd.index = texture2D(tIndex, s).ra;\n    if (vd.index == vec2(0.0)) return airData(v);\n    vd.rgb = texture2D(tRGB, vd.index).rgb;\n    vec4 rmet = texture2D(tRMET, vd.index);\n    vd.roughness = rmet.r;\n    vd.metalness = rmet.g;\n    vd.emission = rmet.b;\n    vd.transparent = rmet.a;\n    vd.ri = texture2D(tRi, vd.index).r;\n    return vd;\n}\n\nVoxelData intersectFloor(vec3 r0, vec3 r) {\n    // NOTE: Assumes this ray actually hits the floor.\n    vec3 v = floor(r0 + r * -r0.y / r.y);\n    v.y = -1.0;\n    return floorData(v);\n}\n\nfloat raySphereIntersect(vec3 r0, vec3 rd, vec3 s0, float sr) {\n    float a = dot(rd, rd);\n    vec3 s0_r0 = r0 - s0;\n    float b = 2.0 * dot(rd, s0_r0);\n    float c = dot(s0_r0, s0_r0) - (sr * sr);\n    if (b * b - 4.0 * a * c < 0.0) {\n        return -1.0;\n    }\n    return (-b - sqrt((b * b) - 4.0 * a * c)) / (2.0 * a);\n}\n\nvec3 skyColor(vec3 r0, vec3 r, float sunScale) {\n    if (r.y < 0.0) {\n        return vec3(0.0);\n    }\n    vec3 sky = textureCube(tSky, r).rgb;\n    if (raySphereIntersect(r0, r, lightPosition, lightRadius) > 0.0) {\n        sky += vec3(lightIntensity) * sunScale;\n    }\n    return sky;\n}\n\nbool intersect(vec3 r0, vec3 r, inout VoxelData vd) {\n    float tBounds = 0.0;\n    vec3 v = vec3(0.0);\n    \n    if (!inBounds(r0)) {\n        if (!rayAABB(r0, r, vec3(0.0), bounds, tBounds)) {\n            if (r.y >= 0.0) {\n                return false;\n            }\n            vd = intersectFloor(r0, r);\n            return true;\n        }\n        r0 = r0 + r * tBounds + r * epsilon;\n    }\n\n    v = floor(r0);\n    vec3 stp = sign(r);\n    vec3 tDelta = 1.0 / abs(r);\n    vec3 tMax = step(0.0, r) * (1.0 - fract(r0)) + (1.0 - step(0.0, r)) * fract(r0);\n    tMax = tMax/abs(r);\n\n    for (int i = 0; i < 8192; i++) {\n\n        if (!inBounds(v)) {\n            if (r.y >= 0.0) {\n                return false;\n            }\n            vd = intersectFloor(r0, r);\n            return true;\n        }\n\n        vec2 lastIndex = vd.index;\n        vd = voxelData(v);\n\n        if (lastIndex != vd.index) {\n            return true;\n        }\n\n        vec3 s = vec3(\n            step(tMax.x, tMax.y) * step(tMax.x, tMax.z),\n            step(tMax.y, tMax.x) * step(tMax.y, tMax.z),\n            step(tMax.z, tMax.x) * step(tMax.z, tMax.y)\n        );\n\n        v += s * stp;\n        tMax += s * tDelta;\n    }\n\n    return false;\n}\n\nvoid main() {\n\n    vec4 src = texture2D(source, gl_FragCoord.xy / res);\n\n    vec2 randOffset = vec2(0.0);\n\n    // Recover NDC\n    vec2 jitter = randUniform2(randOffset) - 0.5;\n    vec4 ndc = vec4(\n      2.0 * (gl_FragCoord.xy + jitter) / res - 1.0,\n      2.0 * gl_FragCoord.z - 1.0,\n      1.0\n    );\n\n    // Calculate clip\n    vec4 clip = invpv * ndc;\n\n    // Calculate 3D position\n    vec3 p3d = clip.xyz / clip.w;\n\n    vec3 ray = normalize(p3d - eye);\n    vec3 r0 = eye;\n\n    float ddof = dofDist * length(bounds) + length(0.5 * bounds - eye) - length(bounds) * 0.5;\n    vec3 tdof = r0 + ddof * ray;\n    r0 += rand2Sphere(randOffset) * dofMag;\n    ray = normalize(tdof - r0);\n\n    vec3 mask = vec3(1.0);\n    vec3 accm = vec3(0.0);\n\n    VoxelData vd = airData(floor(r0));\n\n    bool reflected = false;\n    for (int b = 0; b < nBounces; b++) {\n        bool refracted = false;\n        float lastRi = vd.ri;\n\n        if (intersect(r0, ray, vd)) {\n            if (vd.emission > 0.0) {\n                accm += mask * vd.emission * vd.rgb;\n                break;\n            }\n\n            float tVoxel = 0.0;\n            rayAABB(r0, ray, vd.xyz, vd.xyz + 1.0, tVoxel);\n            vec3 r1 = r0 + tVoxel * ray;\n            vec3 n = rayAABBNorm(r1, vd.xyz);\n            vec3 m = normalize(n + rand3Sphere(randOffset) * vd.roughness);\n            vec3 diffuse = normalize(m + rand2Sphere(randOffset));\n            vec3 ref = reflect(ray, m);\n            if (randUniform1(randOffset) <= vd.metalness) {\n                // metallic\n                ray = ref;\n                reflected = true;\n                mask *= vd.rgb;\n            } else {\n                // nonmetallic\n                const float F0 = 0.0;\n                float F = F0 + (1.0 - F0) * pow(1.0 - dot(-ray, n), 5.0);\n                if (randUniform1(randOffset) <= F) {\n                    // reflect\n                    ray = ref;\n                    reflected = true;\n                } else {\n                    // diffuse\n                    mask *= vd.rgb;\n                    if (randUniform1(randOffset) <= vd.transparent) {\n                        // attempt refraction\n                        ray = refract(ray, m, lastRi/vd.ri);\n                        if (ray != vec3(0.0)) {\n                            // refracted\n                            ray = normalize(ray);\n                            refracted = true;\n                            reflected = false;\n                        } else {\n                            // total internal refraction, use reflection.\n                            ray = ref;\n                            refracted = false;\n                            reflected = true;\n                        }\n                    } else {\n                        // diffuse reflection\n                        ray = diffuse;\n                        reflected = false;\n                    }\n                }\n            }\n\n            if (!refracted && dot(ray, n) < 0.0) {\n                accm = vec3(0.0);\n                break;\n            }\n\n            r0 = r1 + ray * epsilon;\n            vd = voxelData(floor(r0));\n\n            if (ray == diffuse) {\n                // Perform next event estimation when a diffuse bounce occurs.\n                vec3 pLight = lightPosition + rand2Sphere(randOffset) * lightRadius;\n                vec3 rLight = normalize(pLight - r0);\n                VoxelData _vd;\n                if (!intersect(r0, rLight, _vd)) {\n                    accm += mask * skyColor(r0, rLight, 0.5) * clamp(dot(rLight, m), 0.0, 1.0);\n                }\n            }\n        } else {\n            accm += mask * skyColor(r0, ray, b == 0 ? 1.0 : 0.0).rgb;\n            break;\n        }\n    }\n\n    gl_FragColor = vec4(accm, 1) + src;\n}\n",attributes:{position:s},uniforms:{source:l("source"),invpv:l("invpv"),eye:l("eye"),res:l("res"),resFrag:l("resFrag"),tSky:i,tUniform1:M.tUniform1,tUniform2:M.tUniform2,t2Sphere:M.t2Sphere,t3Sphere:M.t3Sphere,tOffset:l("tOffset"),tRGB:l("tRGB"),tRMET:l("tRMET"),tRi:l("tRi"),tIndex:l("tIndex"),dofDist:l("dofDist"),dofMag:l("dofMag"),resStage:l("resStage"),invResRand:[.0009765625,.0009765625],lightPosition:l("lightPosition"),lightIntensity:l("lightIntensity"),lightRadius:l("lightRadius"),groundColor:l("groundColor"),groundRoughness:l("groundRoughness"),groundMetalness:l("groundMetalness"),bounds:l("bounds")},depth:{enable:!1,mask:!1},viewport:l("viewport"),framebuffer:l("destination"),count:6}),c=e({vert:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nvarying vec2 vPos;\n\nvoid main() {\n    gl_Position = vec4(position, 0, 1);\n    vPos = 0.5 * position + 0.5;\n}\n",frag:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D source;\n\nvarying vec2 vPos;\n\nvoid main() {\n    vec4 src = texture2D(source, vPos);\n    // Gamma correction\n    vec3 color = src.rgb / max(src.a, 1.0);\n    color = pow(color, vec3(1.0 / 2.2));\n    gl_FragColor = vec4(color, 1);\n}\n",attributes:{position:s},uniforms:{source:l("source"),fraction:l("fraction"),tUniform1:M.tUniform1,tUniform1Res:[M.tUniform1.width,M.tUniform1.height]},depth:{enable:!1,mask:!1},viewport:l("viewport"),count:6}),f=0,d=n.width,_=n.height;return{context:e,sample:function(e,t,s){let l=function(e,t){let n=2*Math.PI*(e-6)/24;return[1496e8*Math.cos(t)*Math.cos(n),1496e8*Math.sin(n),1496e8*Math.sin(t)*Math.cos(n)]}(s.time,s.azimuth);(function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)})(l,r)>.001&&(r=l,a({sunDirection:p(h(),r),cubeFBO:i}));for(let a=0;a<s.count;a++)u({eye:t.position,invpv:t.inverse,res:[n.width,n.height],tOffset:[Math.random(),Math.random()],tRGB:e.tRGB,tRMET:e.tRMET,tRi:e.tRi,tIndex:e.tIndex,resStage:e.tIndex.width,bounds:e.dim,lightPosition:r,lightIntensity:s.lightIntensity,lightRadius:695508e3*s.lightRadius,groundRoughness:s.groundRoughness,groundColor:s.groundColor,groundMetalness:s.groundMetalness,dofDist:s.dofDist,dofMag:s.dofMag,source:o.ping,destination:o.pong,viewport:{x:0,y:0,width:n.width,height:n.height}}),o.swap(),f++},display:function(){c({source:o.ping,viewport:{x:0,y:0,width:n.width,height:n.height}})},reset:function(){(d<n.width||_<n.height)&&(o.ping({width:d,height:_,colorType:t}),o.pong({width:n.width,height:n.height,colorType:t}),d=n.width,_=n.height),e.clear({color:[0,0,0,1],framebuffer:o.ping}),e.clear({color:[0,0,0,1],framebuffer:o.pong}),f=0},sampleCount:()=>f,destroy(){o.ping.destroy(),o.pong.destroy()}}};class k{resize(e){let t=this.regl;for(this.dim=e,this.textureSize=1;this.textureSize*this.textureSize<this.dim[0]*this.dim[1]*this.dim[2];)this.textureSize*=2;this.ind_buf=new Uint8Array(this.textureSize*this.textureSize*2),this.tIndex=t.texture({width:this.textureSize,height:this.textureSize,format:"luminance alpha"})}setMaterial(e,t,n,r,a=1,i=0,o=0,s=0,l=1){this.rgb_buf[3*e+0]=t,this.rgb_buf[3*e+1]=n,this.rgb_buf[3*e+2]=r,this.pbr_buf[4*e+0]=a,this.pbr_buf[4*e+1]=i,this.pbr_buf[4*e+2]=o,this.pbr_buf[4*e+3]=s,this.ri_buf[4*e+0]=l}setGrid(e){for(let t=0;t<e.length;t++)this.ind_buf[2*t]=e[t];this.tIndex.subimage(this.ind_buf)}updateBuffers(){this.tRGB.subimage(this.rgb_buf),this.tRMET.subimage(this.pbr_buf),this.tRi.subimage(this.ri_buf)}clearMaterial(){this.rgb_buf.fill(0),this.pbr_buf.fill(0),this.ri_buf.fill(0)}clearGrid(){this.ind_buf.fill(0),this.tIndex.subimage(this.ind_buf)}constructor(e){this.rgb_buf=new Uint8Array(196608),this.pbr_buf=new Float32Array(262144),this.ri_buf=new Float32Array(262144),this.regl=e,this.tRGB=e.texture({width:256,height:256,format:"rgb"}),this.tRMET=e.texture({width:256,height:256,format:"rgba",type:"float"}),this.tRi=e.texture({width:256,height:256,format:"rgba",type:"float"}),this.resize([0,0,0])}}function A(){var e=new u(16);return u!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}var O=function(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],v=t[13],g=t[14],b=t[15],y=n[0],_=n[1],w=n[2],x=n[3];return e[0]=y*r+_*s+w*f+x*m,e[1]=y*a+_*l+w*d+x*v,e[2]=y*i+_*u+w*h+x*g,e[3]=y*o+_*c+w*p+x*b,y=n[4],_=n[5],w=n[6],x=n[7],e[4]=y*r+_*s+w*f+x*m,e[5]=y*a+_*l+w*d+x*v,e[6]=y*i+_*u+w*h+x*g,e[7]=y*o+_*c+w*p+x*b,y=n[8],_=n[9],w=n[10],x=n[11],e[8]=y*r+_*s+w*f+x*m,e[9]=y*a+_*l+w*d+x*v,e[10]=y*i+_*u+w*h+x*g,e[11]=y*o+_*c+w*p+x*b,y=n[12],_=n[13],w=n[14],x=n[15],e[12]=y*r+_*s+w*f+x*m,e[13]=y*a+_*l+w*d+x*v,e[14]=y*i+_*u+w*h+x*g,e[15]=y*o+_*c+w*p+x*b,e};let E=new Float32Array([0,1,0]);class C{set distance(e){this._distance=Math.max(.001,Math.min(e,this.maxDistance))}get distance(){return this._distance}get view(){return this._buf.subarray(0,16)}get inverse(){return this._buf.subarray(16,32)}get position(){return this._buf.subarray(32,35)}update(){let e=this._buf.slice(),t=A(),n=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(A(),d(-this.azimuth)),r=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(A(),d(-this.incline));O(t,n,r);let a=A();a[14]=this._distance;let i=O(A(),t,a),o=this._buf.subarray(32,35);var s,u;u=i,(s=o)[0]=u[12],s[1]=u[13],s[2]=u[14],function(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}(o,o,this.center);let c=function(e,t,n,r){var a,i,o,s,u,c,f,d,h,p,m=t[0],v=t[1],g=t[2],b=r[0],y=r[1],_=r[2],w=n[0],x=n[1],M=n[2];return Math.abs(m-w)<l&&Math.abs(v-x)<l&&Math.abs(g-M)<l?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(f=m-w,d=v-x,h=g-M,a=y*(h*=p=1/Math.hypot(f,d,h))-_*(d*=p),i=_*(f*=p)-b*h,o=b*d-y*f,(p=Math.hypot(a,i,o))?(a*=p=1/p,i*=p,o*=p):(a=0,i=0,o=0),s=d*o-h*i,u=h*a-f*o,c=f*i-d*a,(p=Math.hypot(s,u,c))?(s*=p=1/p,u*=p,c*=p):(s=0,u=0,c=0),e[0]=a,e[1]=s,e[2]=f,e[3]=0,e[4]=i,e[5]=u,e[6]=d,e[7]=0,e[8]=o,e[9]=c,e[10]=h,e[11]=0,e[12]=-(a*m+i*v+o*g),e[13]=-(s*m+u*v+c*g),e[14]=-(f*m+d*v+h*g),e[15]=1,e)}(A(),o,this.center,E),f=function(e,t,n,r,a){var i,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(i=1/(r-a),e[10]=(a+r)*i,e[14]=2*a*r*i):(e[10]=-1,e[14]=-2*r),e}(A(),d(this.fov),this.aspect,this.nearClip,this.farClip);O(this._buf,f,c),function(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],v=t[14],g=t[15],b=n*s-r*o,y=n*l-a*o,_=n*u-i*o,w=r*l-a*s,x=r*u-i*s,M=a*u-i*l,S=c*m-f*p,k=c*v-d*p,A=c*g-h*p,O=f*v-d*m,E=f*g-h*m,C=d*g-h*v,T=b*C-y*E+_*O+w*A-x*k+M*S;T&&(T=1/T,e[0]=(s*C-l*E+u*O)*T,e[1]=(a*E-r*C-i*O)*T,e[2]=(m*M-v*x+g*w)*T,e[3]=(d*x-f*M-h*w)*T,e[4]=(l*A-o*C-u*k)*T,e[5]=(n*C-a*A+i*k)*T,e[6]=(v*_-p*M-g*y)*T,e[7]=(c*M-d*_+h*y)*T,e[8]=(o*E-s*A+u*S)*T,e[9]=(r*A-n*E-i*S)*T,e[10]=(p*x-m*_+g*b)*T,e[11]=(f*_-c*x-h*b)*T,e[12]=(s*k-o*O-l*S)*T,e[13]=(n*O-r*k+a*S)*T,e[14]=(m*y-p*w-v*b)*T,e[15]=(c*w-f*y+d*b)*T)}(this._buf.subarray(16),this._buf);for(let t=0;t<e.length;t++)if(this._buf[t]!==e[t])return!0;return!1}reset(){this.fov=60,this.aspect=1.33,this.nearClip=.1,this.farClip=1e3,this._distance=10,this.maxDistance=1e3,this.azimuth=0,this.incline=0,this.center.fill(0),this.update()}constructor(){this.fov=0,this.aspect=0,this.nearClip=0,this.farClip=0,this._distance=0,this.maxDistance=0,this.azimuth=0,this.incline=0,this.center=new Float32Array(3),this._buf=new Float32Array(36),this.reset()}}class T{get sampleCount(){return this._renderer.sampleCount()}ground(e,t,n){(function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]})(this._ground.color,e),this._ground.rough=t,this._ground.metal=n,this._renderDirty=!0}sun(e,t,n,r){this._sun.time=e,this._sun.azimuth=t,this._sun.radius=n,this._sun.intensity=r,this._renderDirty=!0}dof(e,t){this._dof.distance=e,this._dof.magnitude=t,this._renderDirty=!0}grid(e){this.stage.setGrid(e),this._renderDirty=!0}sample(e){this.frame++,(this.oldDim[0]!==this._canvas.width||this.oldDim[1]!==this._canvas.height)&&(this.oldDim[0]=this._canvas.width,this.oldDim[1]=this._canvas.height,this._renderDirty=!0),this.camera.aspect=this._canvas.width/this._canvas.height,this.camera.update()&&(this._renderDirty=!0),this._renderDirty&&!(this.frame%4)&&(this._renderer.reset(),this._renderDirty=!1),this._renderer.sampleCount()>=1024||this._renderer.sample(this.stage,this.camera,{groundColor:this._ground.color,groundRoughness:this._ground.rough,groundMetalness:this._ground.metal,time:this._sun.time,azimuth:this._sun.azimuth,lightRadius:this._sun.radius,lightIntensity:this._sun.intensity,dofDist:this._dof.distance,dofMag:this._dof.magnitude,count:e})}display(){this._renderer.sampleCount()>=1024||this._renderer.display()}destroy(){this.stage.tIndex.destroy(),this.stage.tRGB.destroy(),this.stage.tRMET.destroy(),this.stage.tRi.destroy(),this._renderer.destroy()}constructor(e,t,n){this._ground={color:[1,1,1],rough:1,metal:0},this._sun={time:6,azimuth:0,radius:8,intensity:1},this._dof={distance:.5,magnitude:0},this._renderDirty=!0,this.frame=0,this._canvas=e,this._renderer=S(t,n),this.stage=new k(this._renderer.context),this.camera=new C,this.oldDim=[this._canvas.width,this._canvas.height]}}var P,z;let D=(e,t,n)=>e<t?t:e>n?n:e;!function(e){e[e.MOUSE_UP=0]="MOUSE_UP",e[e.MOUSE_DOWN=1]="MOUSE_DOWN"}(P||(P={})),function(e){e[e.MOUSE_LEFT=0]="MOUSE_LEFT",e[e.MOUSE_MIDDLE=1]="MOUSE_MIDDLE",e[e.MOUSE_RIGHT=2]="MOUSE_RIGHT"}(z||(z={}));class I extends r{loop(){this.vixel.sample(this.samples),this.vixel.display(),this.raf=requestAnimationFrame((()=>this.loop()))}setCharacters(e){super.setCharacters(e);let{characters:t,colors:n,vixel:r}=this;for(let e=0;e<t.length;e++){let a=t.charAt(e),[i,o,s]=n.subarray(4*e,4*e+3);"Y"===a?r.stage.setMaterial(e,i,o,s,.5,.5,2):"U"===a?r.stage.setMaterial(e,i,o,s,0,.25,0,1,1.333):r.stage.setMaterial(e,i,o,s)}r.stage.updateBuffers()}get canvas(){return I.canvas}update(e,t,n){if(this.MX===e&&this.MY===t&&this.MZ===n)return;this.MX=e,this.MY=t,this.MZ=n;let r=Math.sqrt(e*e+t*t+n*n);this.vixel.camera.azimuth=-45,this.vixel.camera.incline=30,n>e&&n>t?this.vixel.camera.center.set([e/2,n/2,t/2]):this.vixel.camera.center.set([e/2,n/4,t/2]),this.vixel.camera.maxDistance=2*r,this.vixel.camera.distance=r,this.vixel.stage.resize([e,n,t])}render(e){this.vixel.grid(e)}clear(){this.vixel.stage.clearGrid()}dispose(){cancelAnimationFrame(this.raf),this.vixel.destroy()}constructor(){super(),this.raf=0,this.samples=16,this.canvas.width=512,this.canvas.height=512,this.canvas.style.width="512px",this.canvas.style.height="512px",this.vixel=new T(this.canvas,I.gfx,I.colorType),I.cam_ctrl.camera=this.vixel.camera,this.vixel.dof(.5,.25),this.vixel.sun(17,1.5*Math.PI/2,1,1),this.clear(),this.raf=requestAnimationFrame((()=>this.loop()))}}I.canvas=document.createElement("canvas"),I.gfx=s()({canvas:I.canvas,optionalExtensions:["OES_texture_float","OES_texture_half_float","WEBGL_color_buffer_float","EXT_color_buffer_half_float"],attributes:{antialias:!1,preserveDrawingBuffer:!0}}),I.cam_ctrl=new class{set camera(e){e&&(this.cam=e)}onMouseWheel(e){this.cam.distance*=1+e/1e3}onOnePointerMove(e,t,n){let r=this.pointers.get(e);if(!r)return;let a=100,i=D(t-r.ox,-a,a),o=D(-(n-r.oy),-a,a);r.ox=r.nx,r.oy=r.ny,r.nx=t,r.ny=n,this.cam.azimuth=this.cam.azimuth+1*i,this.cam.incline=D(this.cam.incline-1*o,-90,90)}constructor(e){this.pointers=new Map,e.addEventListener("wheel",(e=>{this.cam&&this.onMouseWheel(e.deltaY)})),e.addEventListener("pointerdown",(e=>{this.cam&&(this.pointers.size>=2||this.pointers.set(e.pointerId,{nx:e.clientX,ny:e.clientY,ox:e.clientX,oy:e.clientY,ts:Date.now()}))})),e.addEventListener("pointermove",(e=>{this.cam&&this.onOnePointerMove(e.pointerId,e.clientX,e.clientY)}));let t=e=>{this.cam&&this.pointers.delete(e.pointerId)};e.addEventListener("pointercancel",t),e.addEventListener("pointerleave",t),e.addEventListener("pointerout",t),e.addEventListener("pointerup",t)}}(I.canvas),I.supported=!1,I.colorType=I.gfx.hasExtension("OES_texture_float")&&I.gfx.hasExtension("WEBGL_color_buffer_float")?(I.supported=!0,"float"):I.gfx.hasExtension("OES_texture_half_float")||I.gfx.hasExtension("EXT_color_buffer_half_float")?(I.supported=!0,"half float"):null},852:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>IsometricRenderer});var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(999),_helpers_datastructures__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(613);class IsometricRenderer extends ___WEBPACK_IMPORTED_MODULE_0__.Th{get canvas(){return IsometricRenderer._canvas}get ctx(){return IsometricRenderer._ctx}static voxel(e,t,n,r){let a=this.pool,i=this.pool_ptr;return this.pool_ptr+=5,a[i+0]=e,a[i+1]=t,a[i+2]=n,a[i+3]=r,i}update(e,t,n){if(this.MX===e&&this.MY===t&&this.MZ===n)return;this.MX=e,this.MY=t,this.MZ=n,this.visible=new _helpers_datastructures__WEBPACK_IMPORTED_MODULE_1__.QL(e*t*n),this.hash=new _helpers_datastructures__WEBPACK_IMPORTED_MODULE_1__.WN(e+t+2*n-3,e+t-1);let r=(e+t)*this.sprite.size,a=~~(((e+t)/2+n)*this.sprite.size),i=r+2*this.sprite.size,o=a+2*this.sprite.size;this.img=new ImageData(i,o)}render(e){let{MX:t,MY:n,MZ:r,visible:a,hash:i,ctx:o,sprite:s,colors:l,img:u}=this;if(!(o&&s&&l&&u))return;a.clear(),i.clear();let c=Array.from({length:t+n+r-2},(e=>[])),f=Array.from({length:t+n+r-2},(e=>[]));IsometricRenderer.pool.fill(0),IsometricRenderer.pool_ptr=0,(()=>{for(let i=0;i<r;i++)for(let r=0;r<n;r++)for(let o=0;o<t;o++){let s=o+r*t+i*t*n,l=e[s];a.set(s,0!==l),0!==l&&c[o+r+i].push(IsometricRenderer.voxel(l,o,r,i))}let o=IsometricRenderer.pool;for(let e=c.length-1;e>=0;e--){let s=c[e];for(let l=0;l<s.length;l++){let u=s[l],c=o[u+1],d=o[u+2],h=o[u+3],p=c-d+n-1,m=c+d-2*h+2*r-2;if(!i.get(m,p)){let s=0===c||!a.get(c-1+d*t+h*t*n),l=0===d||!a.get(c+(d-1)*t+h*t*n),v=0===h||!a.get(c+d*t+(h-1)*t*n);o[u+4]=Number(d===n-1||!a.get(c+(d+1)*t+h*t*n))<<0|Number(c===t-1||!a.get(c+1+d*t+h*t*n))<<1|Number(s||d!=n-1&&a.get(c-1+(d+1)*t+h*t*n))<<2|Number(s||h!=r-1&&a.get(c-1+d*t+(h+1)*t*n))<<3|Number(l||c!=t-1&&a.get(c+1+(d-1)*t+h*t*n))<<4|Number(l||h!=r-1&&a.get(c+(d-1)*t+(h+1)*t*n))<<5|Number(v||c!=t-1&&a.get(c+1+d*t+(h-1)*t*n))<<6|Number(v||d!=n-1&&a.get(c+(d+1)*t+(h-1)*t*n))<<7,f[e].push(u),i.set(m,p,!0)}}}})();let d=this.sprite.size,h=~~(((t+n)/2+r)*d),p=(t+n)*d+2*d,m=h+2*d;this.canvas.width=p,this.canvas.height=m,(()=>{let{data:e}=u,t=IsometricRenderer.pool;for(let n of(e.fill(0),f))for(let a of n){let n=t[a+0],i=t[a+1],o=t[a+2],u=t[a+3],c=t[a+4],f=p/2+d*(i-o)-d,v=(m-h)/2+(r-1)*d+~~(d*(i+o)/2-d*u),g=n<<2,b=l[g+0],y=l[g+1],_=l[g+2];s.draw(e,b,y,_,~~f,~~v,p,c)}o.putImageData(u,0,0)})()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}dispose(){}constructor(){super(),this.sprite=new VoxelSprite(IsometricRenderer.BLOCK_SIZE),this.canvas.style.imageRendering="auto"}}IsometricRenderer.BLOCK_SIZE=6,IsometricRenderer._canvas=document.createElement("canvas"),IsometricRenderer._ctx=IsometricRenderer._canvas.getContext("2d"),IsometricRenderer.pool=new Uint8Array(10485760),IsometricRenderer.pool_ptr=0;let C1=215,C2=143,C3=71,transparent=255,black=0,frag_funcs=Array(8);frag_funcs[0]="x == 1 && y <= 0 ? C1 : expr",frag_funcs[1]="x == 0 && y <= 0 ? C1 : expr",frag_funcs[2]="x == 1 - s && 2 * y < s && 2 * y >= -s ? black : expr",frag_funcs[3]="x <= 0 && y == ~~(x / 2) + s - 1 ? black : expr",frag_funcs[4]="x == s && 2 * y < s && 2 * y >= -s ? black : expr",frag_funcs[5]="x > 0 && y == -~~((x + 1) / 2) + s ? black : expr",frag_funcs[6]="x > 0 && y == ~~((x + 1) / 2) - s ? black : expr",frag_funcs[7]="x <= 0 && y == -~~(x / 2) - s + 1 ? black : expr";class VoxelSprite{draw(e,t,n,r,a,i,o,s){let{width:l,height:u,edge_func_table:c,size:f}=this,d=c[s];for(let s=0;s<u;s++)for(let u=0;u<l;u++){let l=d(u-f+1,f-s-1);if(l===transparent)continue;let c=(i+s)*o+(a+u)<<2;e[c+0]=t*l/256,e[c+1]=n*l/256,e[c+2]=r*l/256,e[c+3]=255}}constructor(size){this.size=size,this.width=2*size,this.height=2*size-1,this.edge_func_table=Array.from({length:256},((_,index)=>{let funcs=[];for(let e=0;e<8;e++)1<<e&index&&funcs.push(frag_funcs[e]);let nested=funcs.reduce(((e,t)=>e.replaceAll("expr",`(${t})`)),"(x, y) => {\n                    const c = expr;\n                    if (c !== transparent) return c;\n\n                    if (\n                        2 * y - x >= 2 * s ||\n                        2 * y + x > 2 * s ||\n                        2 * y - x < -2 * s ||\n                        2 * y + x <= -2 * s\n                    ) {\n                        return transparent;\n                    } else if (x > 0 && 2 * y < x) {\n                        return C3;\n                    } else if (x <= 0 && 2 * y <= -x) {\n                        return C2;\n                    } else {\n                        return C1;\n                    }\n                }"),cleaned=nested.replaceAll(/\bs\b/g,this.size.toString()).replaceAll("C1",C1.toString()).replaceAll("C2",C2.toString()).replaceAll("C3",C3.toString()).replaceAll("black",black.toString()).replaceAll("expr","transparent").replaceAll("transparent",transparent.toString());return eval(cleaned)}))}}},42:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(893),t=__webpack_require__(162);function n(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var r={};function a(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:r}var i=Object.assign,o=Object.getOwnPropertyDescriptor,s=Object.defineProperty,l=Object.prototype,u=[];Object.freeze(u);var c={};Object.freeze(c);var f="undefined"!=typeof Proxy,d=Object.toString();function h(){f||n("Proxy not available")}function p(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var m=function(){};function v(e){return"function"==typeof e}function g(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function b(e){return null!==e&&"object"==typeof e}function y(e){if(!b(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===d}function _(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function w(e,t,n){s(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function x(e,t,n){s(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function M(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return b(e)&&!0===e[n]}}function S(e){return e instanceof Map}function k(e){return e instanceof Set}var A=void 0!==Object.getOwnPropertySymbols,O="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:A?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function E(e){return null===e?null:"object"==typeof e?""+e:e}function C(e,t){return l.hasOwnProperty.call(e,t)}var T=Object.getOwnPropertyDescriptors||function(e){var t={};return O(e).forEach((function(n){t[n]=o(e,n)})),t};function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D.apply(this,arguments)}function I(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,R(e,t)}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F=Symbol("mobx-stored-annotations");function B(e){return Object.assign((function(t,n){U(t,n,e)}),e)}function U(e,t,n){C(e,F)||w(e,F,D({},e[F])),function(e){return e.annotationType_===G}(n)||(e[F][t]=n)}var V=Symbol("mobx administration"),q=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return ft(this)},t.reportChanged=function(){ut(),dt(this),ct()},t.toString=function(){return this.name_},e}(),Y=M("Atom",q);function W(e,t,n){void 0===t&&(t=m),void 0===n&&(n=m);var r=new q(e);return t!==m&&zt(Tt,r,t,undefined),n!==m&&Pt(r,n),r}var X={identity:function(e,t){return e===t},structural:function(e,t){return Xn(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Xn(e,t,1)}};function $(e,t,n){return qt(e)?e:Array.isArray(e)?Ae.array(e,{name:n}):y(e)?Ae.object(e,void 0,{name:n}):S(e)?Ae.map(e,{name:n}):k(e)?Ae.set(e,{name:n}):"function"!=typeof e||Et(e)||Vt(e)?e:_(e)?Bt(e):At(n,e)}function H(e){return e}var G="override";function Z(e,t){return{annotationType_:e,options_:t,make_:Q,extend_:K}}function Q(e,t,n,r){var a;if(null!=(a=this.options_)&&a.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Et(n.value))return 1;var i=J(e,this,t,n,!1);return s(r,t,i),2}function K(e,t,n,r){var a=J(e,this,t,n);return e.defineProperty_(t,a,r)}function J(e,t,n,r,a){var i,o,s,l,u,c,f,d;void 0===a&&(a=ot.safeDescriptors),d=r,t.annotationType_,d.value;var h,p=r.value;return null!=(i=t.options_)&&i.bound&&(p=p.bind(null!=(h=e.proxy_)?h:e.target_)),{value:je(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),p,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(f=e.proxy_)?f:e.target_:void 0),configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function ee(e,t){return{annotationType_:e,options_:t,make_:te,extend_:ne}}function te(e,t,n,r){var a;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(a=this.options_)&&a.bound&&(!C(e.target_,t)||!Vt(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(Vt(n.value))return 1;var i=re(e,this,0,n,!1,!1);return s(r,t,i),2}function ne(e,t,n,r){var a,i=re(e,this,0,n,null==(a=this.options_)?void 0:a.bound);return e.defineProperty_(t,i,r)}function re(e,t,n,r,a,i){var o;void 0===i&&(i=ot.safeDescriptors),o=r,t.annotationType_,o.value;var s,l=r.value;return Vt(l)||(l=Bt(l)),a&&((l=l.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0),{value:l,configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ae(e,t){return{annotationType_:e,options_:t,make_:ie,extend_:oe}}function ie(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function oe(e,t,n,r){return a=n,this.annotationType_,a.get,e.defineComputedProperty_(t,D({},this.options_,{get:n.get,set:n.set}),r);var a}function se(e,t){return{annotationType_:e,options_:t,make_:le,extend_:ue}}function le(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ue(e,t,n,r){var a,i;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(a=null==(i=this.options_)?void 0:i.enhancer)?a:$,r)}var ce=fe();function fe(e){return{annotationType_:"true",options_:e,make_:de,extend_:he}}function de(e,t,n,r){var a,i,o,l;if(n.get)return Te.make_(e,t,n,r);if(n.set){var u=je(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!ot.safeDescriptors||e.isPlainObject_,set:u})?0:2:(s(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"==typeof n.value)return _(n.value)?(null!=(l=this.options_)&&l.autoBind?Bt.bound:Bt).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?At.bound:At).make_(e,t,n,r);var c,f=!1===(null==(a=this.options_)?void 0:a.deep)?Ae.ref:Ae;return"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(c=e.proxy_)?c:e.target_)),f.make_(e,t,n,r)}function he(e,t,n,r){var a,i,o;return n.get?Te.extend_(e,t,n,r):n.set?e.defineProperty_(t,{configurable:!ot.safeDescriptors||e.isPlainObject_,set:je(t.toString(),n.set)},r):("function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_)),(!1===(null==(i=this.options_)?void 0:i.deep)?Ae.ref:Ae).extend_(e,t,n,r))}var pe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function me(e){return e||pe}Object.freeze(pe);var ve=se("observable"),ge=se("observable.ref",{enhancer:H}),be=se("observable.shallow",{enhancer:function(e,t,n){return null==e||zn(e)||mn(e)||xn(e)||kn(e)?e:Array.isArray(e)?Ae.array(e,{name:n,deep:!1}):y(e)?Ae.object(e,void 0,{name:n,deep:!1}):S(e)?Ae.map(e,{name:n,deep:!1}):k(e)?Ae.set(e,{name:n,deep:!1}):void 0}}),ye=se("observable.struct",{enhancer:function(e,t){return Xn(e,t)?t:e}}),_e=B(ve);function we(e){return!0===e.deep?$:!1===e.deep?H:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:$;var t,n,r}function xe(e,t,n){if(!g(t))return qt(e)?e:y(e)?Ae.object(e,t,n):Array.isArray(e)?Ae.array(e,t):S(e)?Ae.map(e,t):k(e)?Ae.set(e,t):"object"==typeof e&&null!==e?e:Ae.box(e,t);U(e,t,ve)}Object.assign(xe,_e);var Me,Se,ke={box:function(e,t){var n=me(t);return new Ue(e,we(n),n.name,!0,n.equals)},array:function(e,t){var n=me(t);return(!1===ot.useProxies||!1===n.proxy?Un:on)(e,we(n),n.name)},map:function(e,t){var n=me(t);return new wn(e,we(n),n.name)},set:function(e,t){var n=me(t);return new Sn(e,we(n),n.name)},object:function(e,t,n){return function(e,t,n,r){var a=T(t),i=Cn(e,r)[V];ut();try{O(a).forEach((function(e){i.extend_(e,a[e],!n||!(e in n)||n[e])}))}finally{ct()}return e}(!1===ot.useProxies||!1===(null==n?void 0:n.proxy)?Cn({},n):function(e,t){var n,r;return h(),null!=(r=(n=(e=Cn(e,t))[V]).proxy_)?r:n.proxy_=new Proxy(e,$t)}({},n),e,t)},ref:B(ge),shallow:B(be),deep:_e,struct:B(ye)},Ae=i(xe,ke),Oe="computed",Ee=ae(Oe),Ce=ae("computed.struct",{equals:X.structural}),Te=function(e,t){if(g(t))return U(e,t,Ee);if(y(e))return B(ae(Oe,e));var n=y(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Ye(n)};Object.assign(Te,Ee),Te.struct=B(Ce);var Pe,ze=0,De=1,Ie=null!=(Me=null==(Se=o((function(){}),"name"))?void 0:Se.configurable)&&Me,Re={value:"action",configurable:!0,writable:!1,enumerable:!1};function je(e,t,n,r){function a(){return Le(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),a.isMobxAction=!0,Ie&&(Re.value=e,Object.defineProperty(a,"name",Re)),a}function Le(e,t,r,a,i){var o=function(e,t,n,r){var a=ot.trackingDerivation,i=!t||!a;ut();var o=ot.allowStateChanges;i&&(Ke(),o=Ne(!0));var s={runAsAction_:i,prevDerivation_:a,prevAllowStateChanges_:o,prevAllowStateReads_:et(!0),notifySpy_:!1,startTime_:0,actionId_:De++,parentActionId_:ze};return ze=s.actionId_,s}(0,t);try{return r.apply(a,i)}catch(e){throw o.error_=e,e}finally{!function(e){ze!==e.actionId_&&n(30),ze=e.parentActionId_,void 0!==e.error_&&(ot.suppressReactionErrors=!0),Fe(e.prevAllowStateChanges_),tt(e.prevAllowStateReads_),ct(),e.runAsAction_&&Je(e.prevDerivation_),ot.suppressReactionErrors=!1}(o)}}function Ne(e){var t=ot.allowStateChanges;return ot.allowStateChanges=e,t}function Fe(e){ot.allowStateChanges=e}Pe=Symbol.toPrimitive;var Be,Ue=function(e){function t(t,n,r,a,i){var o;return void 0===r&&(r="ObservableValue"),void 0===a&&(a=!0),void 0===i&&(i=X.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=i,o.value_=n(t,void 0,r),o}I(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==ot.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Ht(this)){var t=Zt(this,{object:this,type:nn,newValue:e});if(!t)return ot.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?ot.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Qt(this)&&Jt(this,{type:nn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Gt(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:nn,newValue:this.value_,oldValue:void 0}),Kt(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return E(this.get())},n[Pe]=function(){return this.valueOf()},t}(q);Be=Symbol.toPrimitive;var Ve,qe,Ye=function(){function e(e){this.dependenciesState_=Ve.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Xe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=qe.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||n(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=je("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?X.structural:X.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){var e;(e=this).lowestObserverState_===Ve.UP_TO_DATE_&&(e.lowestObserverState_=Ve.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&(e.dependenciesState_=Ve.POSSIBLY_STALE_,e.onBecomeStale_())})))},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&n(32,this.name_,this.derivation),0!==ot.inBatch||0!==this.observers_.size||this.keepAlive_){if(ft(this),He(this)){var e=ot.trackingContext;this.keepAlive_&&!e&&(ot.trackingContext=this),this.trackAndCompute()&&((t=this).lowestObserverState_!==Ve.STALE_&&(t.lowestObserverState_=Ve.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===Ve.POSSIBLY_STALE_?e.dependenciesState_=Ve.STALE_:e.dependenciesState_===Ve.UP_TO_DATE_&&(t.lowestObserverState_=Ve.UP_TO_DATE_)})))),ot.trackingContext=e}}else He(this)&&(this.warnAboutUntrackedRead_(),ut(),this.value_=this.computeValue_(!1),ct());var t,r=this.value_;if($e(r))throw r.cause;return r},t.set=function(e){if(this.setter_){this.isRunningSetter_&&n(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else n(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ve.NOT_TRACKING_,n=this.computeValue_(!0),r=t||$e(e)||$e(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ne(!1);if(e)t=Ge(this,this.derivation,this.scope_);else if(!0===ot.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Xe(e)}return Fe(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Ze(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,a=void 0;return function(e,t){var n,r;void 0===t&&(t=c);var a,i=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(t.scheduler||t.delay){var o=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ct}(t),s=!1;a=new ht(i,(function(){s||(s=!0,o((function(){s=!1,a.isDisposed_||a.track(l)})))}),t.onError,t.requiresObservable)}else a=new ht(i,(function(){this.track(l)}),t.onError,t.requiresObservable);function l(){e(a)}return a.schedule_(),a.getDisposer_()}((function(){var i=n.get();if(!r||t){var o=Ke();e({observableKind:"computed",debugObjectName:n.name_,type:nn,object:n,newValue:i,oldValue:a}),Je(o)}r=!1,a=i}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return E(this.get())},t[Be]=function(){return this.valueOf()},e}(),We=M("ComputedValue",Ye);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Ve||(Ve={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(qe||(qe={}));var Xe=function(e){this.cause=void 0,this.cause=e};function $e(e){return e instanceof Xe}function He(e){switch(e.dependenciesState_){case Ve.UP_TO_DATE_:return!1;case Ve.NOT_TRACKING_:case Ve.STALE_:return!0;case Ve.POSSIBLY_STALE_:for(var t=et(!0),n=Ke(),r=e.observing_,a=r.length,i=0;i<a;i++){var o=r[i];if(We(o)){if(ot.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return Je(n),tt(t),!0}if(e.dependenciesState_===Ve.STALE_)return Je(n),tt(t),!0}}return nt(e),Je(n),tt(t),!1}}function Ge(e,t,n){var r=et(!0);nt(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++ot.runId;var a,i=ot.trackingDerivation;if(ot.trackingDerivation=e,ot.inBatch++,!0===ot.disableErrorBoundaries)a=t.call(n);else try{a=t.call(n)}catch(e){a=new Xe(e)}return ot.inBatch--,ot.trackingDerivation=i,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Ve.UP_TO_DATE_,a=0,i=e.unboundDepsCount_,o=0;o<i;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,a!==o&&(n[a]=s),a++),s.dependenciesState_>r&&(r=s.dependenciesState_)}for(n.length=a,e.newObserving_=null,i=t.length;i--;){var l=t[i];0===l.diffValue_&&st(l,e),l.diffValue_=0}for(;a--;){var u=n[a];1===u.diffValue_&&(u.diffValue_=0,f=e,(c=u).observers_.add(f),c.lowestObserverState_>f.dependenciesState_&&(c.lowestObserverState_=f.dependenciesState_))}var c,f;r!==Ve.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),tt(r),a}function Ze(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)st(t[n],e);e.dependenciesState_=Ve.NOT_TRACKING_}function Qe(e){var t=Ke();try{return e()}finally{Je(t)}}function Ke(){var e=ot.trackingDerivation;return ot.trackingDerivation=null,e}function Je(e){ot.trackingDerivation=e}function et(e){var t=ot.allowStateReads;return ot.allowStateReads=e,t}function tt(e){ot.allowStateReads=e}function nt(e){if(e.dependenciesState_!==Ve.UP_TO_DATE_){e.dependenciesState_=Ve.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Ve.UP_TO_DATE_}}var rt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},at=!0,it=!1,ot=function(){var e=a();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(at=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new rt).version&&(at=!1),at?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new rt):(setTimeout((function(){it||n(35)}),1),new rt)}();function st(e,t){e.observers_.delete(t),0===e.observers_.size&&lt(e)}function lt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,ot.pendingUnobservations.push(e))}function ut(){ot.inBatch++}function ct(){if(0==--ot.inBatch){mt();for(var e=ot.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Ye&&n.suspend_())}ot.pendingUnobservations=[]}}function ft(e){var t=ot.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&ot.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&ot.inBatch>0&&lt(e),!1)}function dt(e){e.lowestObserverState_!==Ve.STALE_&&(e.lowestObserverState_=Ve.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ve.STALE_})))}var ht=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ve.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=qe.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ot.pendingReactions.push(this),mt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ut(),this.isScheduled_=!1;var e=ot.trackingContext;if(ot.trackingContext=this,He(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}ot.trackingContext=e,ct()}},t.track=function(e){if(!this.isDisposed_){ut(),this.isRunning_=!0;var t=ot.trackingContext;ot.trackingContext=this;var n=Ge(this,e,void 0);ot.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Ze(this),$e(n)&&this.reportExceptionInDerivation_(n.cause),ct()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(ot.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";ot.suppressReactionErrors||console.error(n,e),ot.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ut(),Ze(this),ct()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[V]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){n("trace() is not available in production builds");for(var e=!1,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];"boolean"==typeof r[r.length-1]&&(e=r.pop());var i=Yt(r);if(!i)return n("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");i.isTracing_===qe.NONE&&console.log("[mobx.trace] '"+i.name_+"' tracing enabled"),i.isTracing_=e?qe.BREAK:qe.LOG}(this,e)},e}(),pt=function(e){return e()};function mt(){ot.inBatch>0||ot.isRunningReactions||pt(vt)}function vt(){ot.isRunningReactions=!0;for(var e=ot.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,a=n.length;r<a;r++)n[r].runReaction_()}ot.isRunningReactions=!1}var gt=M("Reaction",ht),bt="action",yt="autoAction",_t=Z(bt),wt=Z("action.bound",{bound:!0}),xt=Z(yt,{autoAction:!0}),Mt=Z("autoAction.bound",{autoAction:!0,bound:!0});function St(e){return function(t,n){return v(t)?je(t.name||"<unnamed action>",t,e):v(n)?je(t,n,e):g(n)?U(t,n,e?xt:_t):g(t)?B(Z(e?yt:bt,{name:t,autoAction:e})):void 0}}var kt=St(!1);Object.assign(kt,_t);var At=St(!0);function Ot(e){return Le(e.name,!1,e,this,void 0)}function Et(e){return v(e)&&!0===e.isMobxAction}Object.assign(At,xt),kt.bound=B(wt),At.bound=B(Mt);var Ct=function(e){return e()};var Tt="onBO";function Pt(e,t,n){return zt("onBUO",e,t,n)}function zt(e,t,n,r){var a="function"==typeof r?Vn(t,n):Vn(t),i=v(r)?r:n,o=e+"L";return a[o]?a[o].add(i):a[o]=new Set([i]),function(){var e=a[o];e&&(e.delete(i),0===e.size&&delete a[o])}}var Dt="always";function It(e){!0===e.isolateGlobalState&&function(){if((ot.pendingReactions.length||ot.inBatch||ot.isRunningReactions)&&n(36),it=!0,at){var e=a();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),ot=new rt}}();var t,r,i=e.useProxies,o=e.enforceActions;if(void 0!==i&&(ot.useProxies=i===Dt||"never"!==i&&"undefined"!=typeof Proxy),"ifavailable"===i&&(ot.verifyProxies=!0),void 0!==o){var s=o===Dt?Dt:"observed"===o;ot.enforceActions=s,ot.allowStateChanges=!0!==s&&s!==Dt}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(ot[t]=!!e[t])})),ot.allowStateReads=!ot.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,r=pt,pt=function(e){return t((function(){return r(e)}))})}function Rt(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Rt)),n}var jt=0;function Lt(){this.message="FLOW_CANCELLED"}Lt.prototype=Object.create(Error.prototype);var Nt=ee("flow"),Ft=ee("flow.bound",{bound:!0}),Bt=Object.assign((function(e,t){if(g(t))return U(e,t,Nt);var n=e,r=n.name||"<unnamed flow>",a=function(){var e,t=this,a=arguments,i=++jt,o=kt(r+" - runid: "+i+" - init",n).apply(t,a),s=void 0,l=new Promise((function(t,n){var a=0;function l(e){var t;s=void 0;try{t=kt(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=kt(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!v(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)}));return l.cancel=kt(r+" - runid: "+i+" - cancel",(function(){try{s&&Ut(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(m,m),Ut(n),e(new Lt)}catch(t){e(t)}})),l};return a.isMobXFlow=!0,a}),Nt);function Ut(e){v(e.cancel)&&e.cancel()}function Vt(e){return!0===(null==e?void 0:e.isMobXFlow)}function qt(e){return function(e,t){return!!e&&(void 0!==t?!!zn(e)&&e[V].values_.has(t):zn(e)||!!e[V]||Y(e)||gt(e)||We(e))}(e)}function Yt(e){switch(e.length){case 0:return ot.trackingDerivation;case 1:return Vn(e[0]);case 2:return Vn(e[0],e[1])}}function Wt(e,t){void 0===t&&(t=void 0),ut();try{return e.apply(t)}finally{ct()}}function Xt(e){return e[V]}Bt.bound=B(Ft);var $t={has:function(e,t){return Xt(e).has_(t)},get:function(e,t){return Xt(e).get_(t)},set:function(e,t,n){var r;return!!g(t)&&(null==(r=Xt(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!g(t)&&(null==(n=Xt(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=Xt(e).defineProperty_(t,n))||r},ownKeys:function(e){return Xt(e).ownKeys_()},preventExtensions:function(e){n(13)}};function Ht(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Gt(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Zt(e,t){var r=Ke();try{for(var a=[].concat(e.interceptors_||[]),i=0,o=a.length;i<o&&((t=a[i](t))&&!t.type&&n(14),t);i++);return t}finally{Je(r)}}function Qt(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Kt(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Jt(e,t){var n=Ke(),r=e.changeListeners_;if(r){for(var a=0,i=(r=r.slice()).length;a<i;a++)r[a](t);Je(n)}}function en(e,t,n){var r=Cn(e,n)[V];ut();try{null!=t||(t=function(e){return C(e,F)||w(e,F,D({},e[F])),e[F]}(e)),O(t).forEach((function(e){return r.make_(e,t[e])}))}finally{ct()}return e}var tn="splice",nn="update",rn={get:function(e,t){var n=e[V];return t===V?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?C(sn,t)?sn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[V];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){n(15)}},an=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new q(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Gt(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Kt(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&n("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var r=new Array(e-t),a=0;a<e-t;a++)r[a]=void 0;this.spliceWithArray_(t,0,r)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&n(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Bn(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var a=this.values_.length;if(void 0===e?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),t=1===arguments.length?a-e:null==t?0:Math.max(0,Math.min(t,a-e)),void 0===n&&(n=u),Ht(this)){var i=Zt(this,{object:this.proxy_,type:tn,index:e,removedCount:t,added:n});if(!i)return u;t=i.removedCount,n=i.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(a,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var a=this.values_.slice(e,e+t),i=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<i.length;s++)this.values_[e+n.length+s]=i[s];return a},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,a=Qt(this),i=a||r?{observableKind:"array",object:this.proxy_,type:nn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),a&&Jt(this,i)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,a=Qt(this),i=a||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:tn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),a&&Jt(this,i)},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(e,t){var r=this.values_;if(e<r.length){this.atom_;var a=r[e];if(Ht(this)){var i=Zt(this,{type:nn,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,a))!==a&&(r[e]=t,this.notifyArrayChildUpdate_(e,t,a))}else e===r.length?this.spliceWithArray_(e,0,[t]):n(17,e,r.length)},e}();function on(e,t,n,r){void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),h();var a=new an(n,t,r,!1);x(a.values_,V,a);var i=new Proxy(a.values_,rn);if(a.proxy_=i,e&&e.length){var o=Ne(!0);a.spliceWithArray_(0,0,e),Fe(o)}return i}var sn={clear:function(){return this.splice(0)},replace:function(e){var t=this[V];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var i=this[V];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray_(e);case 2:return i.spliceWithArray_(e,t)}return i.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[V].spliceWithArray_(e,t,n)},push:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[V].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return ot.trackingDerivation&&n(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ot.trackingDerivation&&n(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[V],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function ln(e,t){"function"==typeof Array.prototype[e]&&(sn[e]=t(e))}function un(e){return function(){var t=this[V];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function cn(e){return function(t,n){var r=this,a=this[V];return a.atom_.reportObserved(),a.dehanceValues_(a.values_)[e]((function(e,a){return t.call(n,e,a,r)}))}}function fn(e){return function(){var t=this,n=this[V];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),a=arguments[0];return arguments[0]=function(e,n,r){return a(e,n,r,t)},r[e].apply(r,arguments)}}ln("concat",un),ln("flat",un),ln("includes",un),ln("indexOf",un),ln("join",un),ln("lastIndexOf",un),ln("slice",un),ln("toString",un),ln("toLocaleString",un),ln("every",cn),ln("filter",cn),ln("find",cn),ln("findIndex",cn),ln("flatMap",cn),ln("forEach",cn),ln("map",cn),ln("some",cn),ln("reduce",fn),ln("reduceRight",fn);var dn,hn,pn=M("ObservableArrayAdministration",an);function mn(e){return b(e)&&pn(e[V])}var vn={},gn="add",bn="delete";dn=Symbol.iterator,hn=Symbol.toStringTag;var yn,_n,wn=function(){function e(e,t,r){var a=this;void 0===t&&(t=$),void 0===r&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[V]=vn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=r,v(Map)||n(18),this.keysAtom_=W("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=Ne(e);try{t()}finally{Fe(n)}}(!0,(function(){a.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!ot.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ue(this.has_(e),H,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Pt(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Ht(this)){var r=Zt(this,{type:n?nn:gn,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if(this.keysAtom_,Ht(this)&&!Zt(this,{type:bn,object:this,name:e}))return!1;if(this.has_(e)){var n=Qt(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:bn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Wt((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Jt(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==ot.UNCHANGED){var r=Qt(this),a=r?{observableKind:"map",debugObjectName:this.name_,type:nn,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Jt(this,a)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Wt((function(){var r,a=new Ue(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,a),t=a.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=Qt(this),a=r?{observableKind:"map",debugObjectName:this.name_,type:gn,object:this,name:e,newValue:t}:null;r&&Jt(this,a)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Gn({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:e.get(a)}}})},t.entries=function(){var e=this,t=this.keys();return Gn({next:function(){var n=t.next(),r=n.done,a=n.value;return{done:r,value:r?void 0:[a,e.get(a)]}}})},t[dn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=N(this);!(n=r()).done;){var a=n.value,i=a[0],o=a[1];e.call(t,o,i,this)}},t.merge=function(e){var t=this;return xn(e)&&(e=new Map(e)),Wt((function(){y(e)?function(e){var t=Object.keys(e);if(!A)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return l.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):S(e)?(e.constructor!==Map&&n(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&n(20,e)})),this},t.clear=function(){var e=this;Wt((function(){Qe((function(){for(var t,n=N(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return Wt((function(){for(var r,a=function(e){if(S(e)||xn(e))return e;if(Array.isArray(e))return new Map(e);if(y(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}return n(21,e)}(e),i=new Map,o=!1,s=N(t.data_.keys());!(r=s()).done;){var l=r.value;if(!a.has(l))if(t.delete(l))o=!0;else{var u=t.data_.get(l);i.set(l,u)}}for(var c,f=N(a.entries());!(c=f()).done;){var d=c.value,h=d[0],p=d[1],m=t.data_.has(h);if(t.set(h,p),t.data_.has(h)){var v=t.data_.get(h);i.set(h,v),m||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),b=i.keys(),_=g.next(),w=b.next();!_.done;){if(_.value!==w.value){t.keysAtom_.reportChanged();break}_=g.next(),w=b.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Kt(this,e)},t.intercept_=function(e){return Gt(this,e)},z(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:hn,get:function(){return"Map"}}]),e}(),xn=M("ObservableMap",wn),Mn={};yn=Symbol.iterator,_n=Symbol.toStringTag;var Sn=function(){function e(e,t,r){void 0===t&&(t=$),void 0===r&&(r="ObservableSet"),this.name_=void 0,this[V]=Mn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,v(Set)||n(22),this.atom_=W(this.name_),this.enhancer_=function(e,n){return t(e,n,r)},e&&this.replace(e)}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Wt((function(){Qe((function(){for(var t,n=N(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=N(this);!(n=r()).done;){var a=n.value;e.call(t,a,a,this)}},t.add=function(e){var t=this;if(this.atom_,Ht(this)&&!Zt(this,{type:gn,object:this,newValue:e}))return this;if(!this.has(e)){Wt((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=Qt(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:gn,object:this,newValue:e}:null;n&&Jt(this,r)}return this},t.delete=function(e){var t=this;if(Ht(this)&&!Zt(this,{type:bn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=Qt(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:bn,object:this,oldValue:e}:null;return Wt((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Jt(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Gn({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Gn({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return kn(e)&&(e=new Set(e)),Wt((function(){Array.isArray(e)||k(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&n("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Kt(this,e)},t.intercept_=function(e){return Gt(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[yn]=function(){return this.values()},z(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:_n,get:function(){return"Set"}}]),e}(),kn=M("ObservableSet",Sn),An=Object.create(null),On="remove",En=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=ce),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new q("ObservableObject.keys"),this.isPlainObject_=y(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Ye)return n.set(t),!0;if(Ht(this)){var r=Zt(this,{type:nn,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==ot.UNCHANGED){var a=Qt(this),i=a?{type:nn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),a&&Jt(this,i)}return!0},t.get_=function(e){return ot.trackingDerivation&&!C(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),C(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!ot.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ue(e in this.target_,H,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var r;if(null!=(r=this.target_[F])&&r[e])return;n(1,t.annotationType_,this.name_+"."+e.toString())}for(var a=this.target_;a&&a!==l;){var i=o(a,e);if(i){var s=t.make_(this,e,i,a);if(0===s)return;if(1===s)break}a=Object.getPrototypeOf(a)}Dn(this,0,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var a=n.extend_(this,e,t,r);return a&&Dn(this,0,e),a},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{ut();var r=this.delete_(e);if(!r)return r;if(Ht(this)){var a=Zt(this,{object:this.proxy_||this.target_,name:e,type:gn,newValue:t.value});if(!a)return null;var i=a.newValue;t.value!==i&&(t=D({},t,{value:i}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else s(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{ct()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1);try{ut();var a=this.delete_(e);if(!a)return a;if(Ht(this)){var i=Zt(this,{object:this.proxy_||this.target_,name:e,type:gn,newValue:t});if(!i)return null;t=i.newValue}var o=Pn(e),l={configurable:!ot.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,l))return!1}else s(this.target_,e,l);var u=new Ue(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{ct()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{ut();var r=this.delete_(e);if(!r)return r;if(Ht(this)&&!Zt(this,{object:this.proxy_||this.target_,name:e,type:gn,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var a=Pn(e),i={configurable:!ot.safeDescriptors||this.isPlainObject_,enumerable:!1,get:a.get,set:a.set};if(n){if(!Reflect.defineProperty(this.target_,e,i))return!1}else s(this.target_,e,i);this.values_.set(e,new Ye(t)),this.notifyPropertyAddition_(e,void 0)}finally{ct()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!C(this.target_,e))return!0;if(Ht(this)&&!Zt(this,{object:this.proxy_||this.target_,name:e,type:On}))return null;try{var n,r;ut();var a,i=Qt(this),s=this.values_.get(e),l=void 0;if(!s&&i&&(l=null==(a=o(this.target_,e))?void 0:a.value),t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Ue&&(l=s.value_),dt(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),i){var u={type:On,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:l,name:e};i&&Jt(this,u)}}finally{ct()}return!0},t.observe_=function(e,t){return Kt(this,e)},t.intercept_=function(e){return Gt(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,a=Qt(this);if(a){var i=a?{type:gn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;a&&Jt(this,i)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),O(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Cn(e,t){var n;if(C(e,V))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",a=new En(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:fe(e):void 0}(t));return w(e,V,a),e}var Tn=M("ObservableObjectAdministration",En);function Pn(e){return An[e]||(An[e]={get:function(){return this[V].getObservablePropValue_(e)},set:function(t){return this[V].setObservablePropValue_(e,t)}})}function zn(e){return!!b(e)&&Tn(e[V])}function Dn(e,t,n){var r;null==(r=e.target_[F])||delete r[n]}var In,Rn,jn=0,Ln=function(){};In=Ln,Rn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(In.prototype,Rn):void 0!==In.prototype.__proto__?In.prototype.__proto__=Rn:In.prototype=Rn;var Nn=function(e,t,n){function r(t,n,r,a){var i;void 0===r&&(r="ObservableArray"),void 0===a&&(a=!1),i=e.call(this)||this;var o=new an(r,n,a,!0);if(o.proxy_=j(i),x(j(i),V,o),t&&t.length){var s=Ne(!0);i.spliceWithArray(0,0,t),Fe(s)}return i}I(r,e);var a=r.prototype;return a.concat=function(){this[V].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return mn(e)?e.slice():e})))},a[n]=function(){var e=this,t=0;return Gn({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},z(r,[{key:"length",get:function(){return this[V].getArrayLength_()},set:function(e){this[V].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Ln,Symbol.toStringTag,Symbol.iterator);function Fn(e){s(Nn.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[V].get_(e)},set:function(t){this[V].set_(e,t)}}}(e))}function Bn(e){if(e>jn){for(var t=jn;t<e+100;t++)Fn(t);jn=e}}function Un(e,t,n){return new Nn(e,t,n)}function Vn(e,t){if("object"==typeof e&&null!==e){if(mn(e))return void 0!==t&&n(23),e[V].atom_;if(kn(e))return e[V];if(xn(e)){if(void 0===t)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||n(25,t,Yn(e)),r}if(zn(e)){if(!t)return n(26);var a=e[V].values_.get(t);return a||n(27,t,Yn(e)),a}if(Y(e)||We(e)||gt(e))return e}else if(v(e)&&gt(e[V]))return e[V];n(28)}function qn(e,t){return e||n(29),void 0!==t?qn(Vn(e,t)):Y(e)||We(e)||gt(e)||xn(e)||kn(e)?e:e[V]?e[V]:void n(24,e)}function Yn(e,t){var n;if(void 0!==t)n=Vn(e,t);else{if(Et(e))return e.name;n=zn(e)||xn(e)||kn(e)?qn(e):Vn(e)}return n.name_}Object.entries(sn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&w(Nn.prototype,t,n)})),Bn(1e3);var Wn=l.toString;function Xn(e,t,n){return void 0===n&&(n=-1),$n(e,t,n)}function $n(e,t,n,r,a){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;if("function"!==i&&"object"!==i&&"object"!=typeof t)return!1;var o=Wn.call(e);if(o!==Wn.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Hn(e),t=Hn(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(v(l)&&l instanceof l&&v(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),a=a||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return a[c]===t;if(r.push(e),a.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!$n(e[c],t[c],n-1,r,a))return!1}else{var f,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!C(t,f=d[c])||!$n(e[f],t[f],n-1,r,a))return!1}return r.pop(),a.pop(),!0}function Hn(e){return mn(e)?e.slice():S(e)||xn(e)||k(e)||kn(e)?Array.from(e.entries()):e}function Gn(e){return e[Symbol.iterator]=Zn,e}function Zn(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===a()[e]&&n("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Yn},$mobx:V});var Qn=__webpack_require__(294);if(!Qn.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!en)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Kn=__webpack_require__(935);function Jn(e){e()}function er(e){return Rt(Vn(e,t));var t}var tr="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry;function nr(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+rr}}var rr=1e4,ar=tr?function(e){var t=new Map,n=1,r=new e((function(e){var n=t.get(e);n&&(n.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,a,i){var o=n++;return r.register(i,o,e),e.current=nr(a),e.current.finalizationRegistryCleanupToken=o,t.set(o,e.current),e.current},recordReactionAsCommitted:function(e){r.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(tr):function(){var e,t=new Set;function n(){void 0===e&&(e=setTimeout(r,1e4))}function r(){e=void 0;var r=Date.now();t.forEach((function(e){var n=e.current;n&&r>=n.cleanAt&&(n.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&n()}return{addReactionToTrack:function(e,r,a){var i;return e.current=nr(r),i=e,t.add(i),n(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),r())},resetCleanupScheduleForTests:function(){var n,r;if(t.size>0){try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=a.next();!i.done;i=a.next()){var o=i.value,s=o.current;s&&(s.reaction.dispose(),o.current=null)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}(),ir=ar.addReactionToTrack,or=ar.recordReactionAsCommitted,sr=(ar.resetCleanupScheduleForTests,ar.forceCleanupTimerToRunNowForTests,!1);function lr(){return sr}var ur=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};function cr(e){return"observer".concat(e)}var fr=function(){};function dr(){return new fr}var hr="function"==typeof Symbol&&Symbol.for,pr=hr?Symbol.for("react.forward_ref"):"function"==typeof Qn.forwardRef&&(0,Qn.forwardRef)((function(e){return null})).$$typeof,mr=hr?Symbol.for("react.memo"):"function"==typeof Qn.memo&&(0,Qn.memo)((function(e){return null})).$$typeof,vr={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};!function(e){e||(e=Jn),It({reactionScheduler:e})}(Kn.unstable_batchedUpdates);var gr=__webpack_require__(745),br=__webpack_require__(377),yr=__webpack_require__.n(br),_r=__webpack_require__(999);class wr{static split2(e,t,n){return e.split(t).map((e=>e.split(n)))}static firstNonZeroPosition(e){for(let t=0;t<32;t++,e>>=1)if(1==(1&e))return t;return 255}static sampleWeights(e,t){let n=0;for(let t=0;t<e.length;t++)n+=e[t];let r=t*n,a=0;for(let t=0;t<e.length;t++)if((a+=e[t])>=r)return t;return 0}static*childrenByTag(e,t){for(let n of wr.collectionIter(e.children))n.tagName===t&&(yield n)}static*childrenByTags(e,t){for(let n of wr.collectionIter(e.children))t.includes(n.tagName)&&(yield n)}static collectionToArr(e){let t=[];for(let n=0;n<e.length;n++)t.push(e.item(n));return t}static*collectionIter(e){for(let t=0;t<e.length;t++)yield e.item(t)}static*matchTags(e,...t){let n=[e];for(;n.length;){let r=n.shift();for(let a of(r!==e&&(yield r),this.childrenByTags(r,t)))n.push(a)}}static matchTag(e,t){for(let n of wr.collectionIter(e.children))if(n.tagName===t)return n;return null}static maxPositiveIndex(e){let t=-1,n=-1;for(let r=0;r<e.length;r++){let a=e[r];a>0&&a>t&&(t=a,n=r)}return n}static shuffleFill(e,t){for(let n=0;n<e.length;n++){let r=xr(t,n+1);e[n]=e[r],e[r]=n}}static pick(e,t){return e[xr(t,e.length)]}static indexBoolArr(e){let t=0,n=1;for(let r=0;r<e.length;r++,n*=2)e[r]&&(t+=n);return t}static indexByteArr(e,t){let n=0n,r=1n;for(let a=0;a<e.length;a++,r*=t)n+=BigInt(e[e.length-1-a])*r;return n}static ords(e,t=[]){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let a=e[r],i=t.indexOf(a);-1==i&&(i=t.length,t.push(a)),n[r]=i}return[n,t.length]}static intPower(e,t){let n=1;for(let r=0;r<t;r++)n*=e;return n}static compareArr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}static hex2rgba(e,t=255){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(n){var r=parseInt(n[1],16),a=parseInt(n[2],16),i=parseInt(n[3],16);return new Uint8ClampedArray([r,a,i,t])}return null}}const xr=(e,t)=>Math.floor(e()*t);class Mr{get length(){return this.view.byteLength}get EOF(){return this.offset===this.view.byteLength}u8(){return this.view.getUint8(this.offset++)}i8(){return this.view.getInt8(this.offset++)}u16(){let e=this.view.getUint16(this.offset,this.le);return this.offset+=2,e}i16(){let e=this.view.getInt16(this.offset,this.le);return this.offset+=2,e}u32(){let e=this.view.getUint32(this.offset,this.le);return this.offset+=4,e}i32(){let e=this.view.getInt32(this.offset,this.le);return this.offset+=4,e}u64(){let e=this.view.getBigUint64(this.offset,this.le);return this.offset+=8,e}i64(){let e=this.view.getBigInt64(this.offset,this.le);return this.offset+=8,e}f32(){let e=this.view.getFloat32(this.offset,this.le);return this.offset+=4,e}f64(){let e=this.view.getFloat64(this.offset,this.le);return this.offset+=8,e}chars(e){return String.fromCharCode(...Array.from({length:e},(e=>this.u8())))}skip(e){this.offset+=e}utf8(e=!0){let t=[];for(;this.offset<this.view.byteLength;){let e=this.u8();if(!e)break;t.push(String.fromCharCode(e))}let n=t.join("");return e?decodeURIComponent(escape(n)):n}ucs2(e=!1,t=0){let n=[];if(e)for(;this.offset<this.view.byteLength;){let e=this.u16();if(!e)break;n.push(String.fromCharCode(255&e^t))}else for(;this.offset<this.view.byteLength;){let e=this.u16();if(!e)break;n.push(String.fromCharCode(e^t))}return n.join("")}raw(e=0){let t=this.view.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}constructor(e,t=!0){this.offset=0,this.view=e,this.le=t}}class Sr{u8(e){return Sr.BufferPool.setUint8(this.offset++,e),this}i8(e){return Sr.BufferPool.setInt8(this.offset++,e),this}u16(e){return Sr.BufferPool.setUint16(this.offset,e,this.le),this.offset+=2,this}i16(e){return Sr.BufferPool.setInt16(this.offset,e,this.le),this.offset+=2,this}u32(e){return Sr.BufferPool.setUint32(this.offset,e,this.le),this.offset+=4,this}i32(e){return Sr.BufferPool.setInt32(this.offset,e,this.le),this.offset+=4,this}f32(e){return Sr.BufferPool.setFloat32(this.offset,e,this.le),this.offset+=4,this}f64(e){return Sr.BufferPool.setFloat64(this.offset,e,this.le),this.offset+=8,this}i64(e){return Sr.BufferPool.setBigInt64(this.offset,BigInt(e),this.le),this.offset+=8,this}u64(e){return Sr.BufferPool.setBigUint64(this.offset,BigInt(e),this.le),this.offset+=8,this}utf8(e,t=!1,n=!0){if("string"==typeof e){t&&(e=unescape(encodeURIComponent(e)));for(let t=0;t<e.length;t++)this.u8(e.charCodeAt(t));n&&this.u8(0)}else if(e?.byteLength)for(let t of e)this.u8(t);else n&&this.u8(0);return this}ucs2(e){for(let t=0;t<e.length;t++)this.u16(e.charCodeAt(t));this.u16(0)}skip(e=0){this.offset+=e}buf(e){new Uint8Array(Sr.BufferPool.buffer,this.offset,e.length).set(e),this.offset+=e.length}output(){return Sr.BufferPool.buffer.slice(0,this.offset)}constructor(e=!0){this.offset=0,this.le=e}}Sr.BufferPool=new DataView(new ArrayBuffer(10485760));class kr{static read(e){let t=new Mr(new DataView(e)),n=null,r=-1,a=-1,i=-1;for(t.chars(4),t.i32();!t.EOF;){let e=t.chars(1);if("S"===e){if("IZE"!==t.chars(3))continue;let e=t.i32();t.skip(4),r=t.i32(),a=t.i32(),i=t.i32(),t.skip(e-12)}else if("X"===e){if("YZI"!==t.chars(3))continue;if(r<=0||a<=0||i<=0)return[null,r,a,i];(n=new Int32Array(r*a*i)).fill(-1),t.skip(8);let e=t.i32();for(let i=0;i<e;i++){let e=t.u8(),i=t.u8(),o=t.u8(),s=t.u8();n[e+i*r+o*r*a]=s}}}return[n,r,a,i]}static serialize(e,t,n,r,a){let i=new Uint8Array(t*n*r*4),o=0;for(let a=0;a<r;a++)for(let r=0;r<n;r++)for(let s=0;s<t;s++){let l=e[s+r*t+a*t*n];if(l){let e=o<<2;i[e+0]=s,i[e+1]=r,i[e+2]=a,i[e+3]=l+1,o++}}let s=new Sr;for(let e of(s.utf8("VOX ",!1,!1),s.i32(150),s.utf8("MAIN",!1,!1),s.i32(0),s.i32(1092+4*o),s.utf8("PACK",!1,!1),s.i32(4),s.i32(0),s.i32(1),s.utf8("SIZE",!1,!1),s.i32(12),s.i32(0),s.i32(t),s.i32(n),s.i32(r),s.utf8("XYZI",!1,!1),s.i32(4+4*o),s.i32(0),s.i32(o),s.buf(i.subarray(0,4*o)),s.utf8("RGBA",!1,!1),s.i32(1024),s.i32(0),a))s.u8(e[0]),s.u8(e[1]),s.u8(e[2]),s.u8(0);for(let e=a.length;e<255;e++)s.u8(255-e-1),s.u8(255-e-1),s.u8(255-e-1),s.u8(255);return s.i32(0),s.output()}}class Ar{static async xml(e){let t=await fetch(e);if(200!==t.status)return null;let n=await t.text();try{return this.xmlParse(n)}catch(e){return console.error(e),null}}static xmlParse(e){return(new DOMParser).parseFromString(e,"text/xml").getRootNode().firstChild}static async vox(e){let t=await fetch(e);if(200!==t.status)return[null,-1,-1,-1];let n=await t.arrayBuffer();try{return kr.read(n)}catch(e){return console.error(e),[null,-1,-1,-1]}}static async bitmap(e){try{let t=await fetch(e),n=await t.blob(),r=await createImageBitmap(n),a=document.createElement("canvas");a.width=r.width,a.height=r.height;let i=a.getContext("2d");i.drawImage(r,0,0),r.close();let{data:o,width:s,height:l}=i.getImageData(0,0,a.width,a.height);return[new Int32Array(o.buffer),s,l,1]}catch(e){return console.error(e),[null,-1,-1,-1]}}}class Or{static build(e,t,n,r){let a=new Or;a.MX=t,a.MY=n,a.MZ=r;let i=e.getAttribute("values")?.replaceAll(" ","");if(!i)return console.error(e,"no values specified"),null;a.characters=i;for(let t=0;t<a.C;t++){let n=i.charCodeAt(t);if(a.values.has(n))return console.error(e,"contains repeating value"),null;a.values.set(n,t),a.waves.set(n,1<<t)}let o=e.getAttribute("transparent");o&&(a.transparent=a.wave(o));let s=[...wr.matchTags(e,"markov","sequence","union")].filter((e=>"union"===e.tagName));for(let e of(a.waves.set(42,(1<<a.C)-1),s)){let t=e.getAttribute("symbol").charCodeAt(0);if(a.waves.has(t))return console.error(e,`repeating union type "${String.fromCharCode(t)}"`),null;{let n=a.wave(e.getAttribute("values"));a.waves.set(t,n)}}return a.state=new Uint8Array(t*n*r),a.statebuffer=new Uint8Array(t*n*r),a.mask=new Uint8Array(t*n*r),a.folder=e.getAttribute("folder"),a}get C(){return this.characters.length}clear(){this.state.fill(0)}wave(e){let t=0;for(let n=0;n<e.length;n++)t+=1<<this.values.get(e.charCodeAt(n));return t}matches(e,t,n,r){let{MX:a,MY:i,state:o}=this,{input:s,IMX:l,IMY:u}=e,c=0,f=0,d=0;for(let e=0;e<s.length;e++){if(0==(s[e]&1<<o[t+d+(n+f)*a+(r+c)*a*i]))return!1;++d===l&&(d=0,++f===u&&(f=0,c++))}return!0}constructor(){this.values=new Map,this.waves=new Map}}let Er=e=>new Uint8Array(Array.from({length:48},((t,n)=>e(n)?1:0)));class Cr{static squareSymmetries(e,t,n,r,a=null){let i=Array(8);i[0]=e,i[1]=n(i[0]),i[2]=t(i[0]),i[3]=n(i[2]),i[4]=t(i[2]),i[5]=n(i[4]),i[6]=t(i[4]),i[7]=n(i[6]);let o=[];for(let e=0;e<8;e++)a&&!a[e]||o.some((t=>r(t,i[e])))||o.push(i[e]);return o}static cubeSymmetries(e,t,n,r,a,i=null){let o=Array(48);o[0]=e,o[1]=r(o[0]),o[2]=t(o[0]),o[3]=r(o[2]),o[4]=t(o[2]),o[5]=r(o[4]),o[6]=t(o[4]),o[7]=r(o[6]),o[8]=n(o[0]),o[9]=r(o[8]),o[10]=n(o[2]),o[11]=r(o[10]),o[12]=n(o[4]),o[13]=r(o[12]),o[14]=n(o[6]),o[15]=r(o[14]),o[16]=n(o[8]),o[17]=r(o[16]),o[18]=n(o[10]),o[19]=r(o[18]),o[20]=n(o[12]),o[21]=r(o[20]),o[22]=n(o[14]),o[23]=r(o[22]),o[24]=n(o[16]),o[25]=r(o[24]),o[26]=n(o[18]),o[27]=r(o[26]),o[28]=n(o[20]),o[29]=r(o[28]),o[30]=n(o[22]),o[31]=r(o[30]),o[32]=t(o[8]),o[33]=r(o[32]),o[34]=t(o[10]),o[35]=r(o[34]),o[36]=t(o[12]),o[37]=r(o[36]),o[38]=t(o[14]),o[39]=r(o[38]),o[40]=t(o[24]),o[41]=r(o[40]),o[42]=t(o[26]),o[43]=r(o[42]),o[44]=t(o[28]),o[45]=r(o[44]),o[46]=t(o[30]),o[47]=r(o[46]);let s=[];for(let e=0;e<48;e++)i&&!i[e]||s.some((t=>a(t,o[e])))||s.push(o[e]);return s}static getSymmetry(e,t,n){return t?e?this.squareSubgroups.get(t):this.cubeSubgroups.get(t):n}}Cr.squareSubgroups=new Map([["()",new Uint8Array([1,0,0,0,0,0,0,0])],["(x)",new Uint8Array([1,1,0,0,0,0,0,0])],["(y)",new Uint8Array([1,0,0,0,0,1,0,0])],["(x)(y)",new Uint8Array([1,1,0,0,1,1,0,0])],["(xy+)",new Uint8Array([1,0,1,0,1,0,1,0])],["(xy)",new Uint8Array([1,1,1,1,1,1,1,1])]]),Cr.cubeSubgroups=new Map([["()",Er((e=>0===e))],["(x)",Er((e=>0===e||1===e))],["(z)",Er((e=>0===e||17===e))],["(xy)",Er((e=>e<8))],["(xyz+)",Er((e=>e%2==0))],["(xyz)",Er((e=>!0))]]);class Tr{static async factory(e,t,n,r){let a=e.tagName.toLowerCase();if(!Tr.VALID_TAGS.includes(a))return console.error(e,`unknown node type: ${a}`),null;let i={one:()=>new ca,all:()=>new la,prl:()=>new fa,markov:()=>new Dr,sequence:()=>new zr,path:()=>new Wr,map:()=>new Yr,convolution:()=>new Fr,convchain:()=>new Ir,wfc:()=>e.getAttribute("sample")?new va:e.getAttribute("tileset")?new ma:null}[a]();return i.ip=n,i.grid=r,i.source=e,i.comment=e.getAttribute("comment"),await i.load(e,t,r)?i:null}}Tr.VALID_TAGS=["one","all","prl","markov","sequence","path","map","convolution","convchain","wfc"];class Pr extends Tr{async load(e,t,n){let r=e.getAttribute("symmetry"),a=Cr.getSymmetry(1===this.ip.grid.MZ,r,t);if(!a)return console.error(e,`unknown symmetry ${r}`),!1;for(let t of wr.collectionIter(e.children)){if(!Tr.VALID_TAGS.includes(t.tagName))continue;let e=await Tr.factory(t,a,this.ip,n);if(!e)return!1;e instanceof Pr&&(e.parent=e instanceof Yr||e instanceof da?null:this),this.nodes.push(e)}return!0}run(){for(;this.n<this.nodes.length;this.n++){let e=this.nodes[this.n];if(e instanceof Pr&&(this.ip.current=e),e.run())return!0}return this.ip.current=this.ip.current.parent,this.reset(),!1}reset(){this.nodes.forEach((e=>e.reset())),this.n=0}constructor(...e){super(...e),this.nodes=[]}}class zr extends Pr{}class Dr extends Pr{run(){return this.n=0,super.run()}constructor(e,t){super(),e&&(this.nodes=[e]),this.ip=t,this.grid=t?.grid}}class Ir extends Tr{async load(e,t,n){if(1!==n.MZ)return console.error("convchain currently works only for 2d"),!1;let r=`resources/samples/${e.getAttribute("sample")}.png`,a=await Ar.bitmap(r),i=a[0];if(this.SMX=a[1],this.SMY=a[2],!i)return console.error(`Failed to load ConvChain sample ${r}`),!1;this.sample=new Uint8Array(i.length);for(let e=0;e<this.sample.length;e++)this.sample[e]=Number(-1==i[e]);let o=this.N=parseInt(e.getAttribute("n"))||3;this.steps=parseInt(e.getAttribute("steps"))||-1,this.temperature=parseFloat(e.getAttribute("temperature"))||1,this.c0=n.values.get(e.getAttribute("black").charCodeAt(0)),this.c1=n.values.get(e.getAttribute("white").charCodeAt(0)),this.substrateColor=n.values.get(e.getAttribute("on").charCodeAt(0)),this.substrate=new Uint8Array(n.state.length),this.weights=new Float64Array(1<<o*o);let{SMX:s,SMY:l,sample:u,weights:c}=this;for(let e=0;e<l;e++)for(let t=0;t<s;t++){let n=Rr(o,((n,r)=>u[(t+n)%s+(e+r)%l*s])),r=Cr.squareSymmetries(n,(e=>jr(o,e)),(e=>Lr(o,e)),(e=>!1));for(let e of r)c[wr.indexBoolArr(e)]+=1}for(let e=0;e<c.length;e++)c[e]<=0&&(c[e]=.1);return!0}toggle(e,t){e[t]=e[t]==this.c0?this.c1:this.c0}run(){if(this.steps>0&&this.counter>=this.steps)return!1;let{grid:e,c0:t,c1:n,substrate:r,ip:a,N:i,weights:o,temperature:s,substrateColor:l}=this,{MX:u,MY:c,state:f}=e;if(!this.counter){let e=!1;for(let i=0;i<r.length;i++)f[i]===l&&(f[i]=0==xr(a.rng,2)?t:n,r[i]=1,e=!0);return this.counter++,e}for(let e=0;e<f.length;e++){let e=xr(a.rng,f.length);if(!r[e])continue;let t=e%u,l=~~(e/u),d=1;for(let e=l-i+1;e<=l+i-1;e++)for(let r=t-i+1;r<=t+i-1;r++){let a=0,s=0;for(let o=0;o<i;o++)for(let d=0;d<i;d++){let h=r+d;h<0?h+=u:h>=u&&(h-=u);let p=e+o;p<0?p+=c:p>=c&&(p-=c);let m=f[h+p*u]==n,v=1<<o*i+d;a+=m?v:0,h==t&&p==l&&(s=m?v:-v)}d*=o[a-s]/o[a]}d>=1?this.toggle(f,e):(1!=s&&(d=Math.pow(d,1/s)),d>a.rng.double()&&this.toggle(f,e))}return this.counter++,!0}reset(){this.substrate.fill(0),this.counter=0}}let Rr=(e,t)=>{let n=new Uint8Array(e*e);for(let r=0;r<e;r++)for(let a=0;a<e;a++)n[a+r*e]=t(a,r);return n},jr=(e,t)=>Rr(e,((n,r)=>t[e-1-r+n*e])),Lr=(e,t)=>Rr(e,((n,r)=>t[e-1-n+r*e]));var Nr=__webpack_require__(613);class Fr extends Tr{async load(e,t,n){let r=[...wr.childrenByTag(e,"rule")],a=r.length?r:[e];if(this.rules=a.map((()=>new Ur)),!this.rules.every(((e,t)=>e.load(a[t],n))))return!1;let i=e.getAttribute("neighborhood");return this.kernel=(1===n.MZ?Fr.kernels2d:Fr.kernels3d).get(i),this.kernel?(this.steps=parseInt(e.getAttribute("steps"))||-1,this.periodic="True"===e.getAttribute("periodic"),this.sumfield=new Nr.dX(Int32Array,n.C,n.state.length,0),!0):(console.error(e,"unknown kernel"),!1)}reset(){this.counter=0}run(){if(this.steps>0&&this.counter>=this.steps)return!1;let{grid:e,sumfield:t,periodic:n,kernel:r}=this,{MX:a,MY:i,MZ:o}=e;if(t.fill(0),1==o)for(let o=0;o<i;o++)for(let s=0;s<a;s++){let l=t.row(s+o*a);for(let t=-1;t<=1;t++)for(let u=-1;u<=1;u++){let c=s+u,f=o+t;if(n)c<0?c+=a:c>=a&&(c-=a),f<0?f+=i:f>=i&&(f-=i);else if(c<0||f<0||c>=a||f>=i)continue;l[e.state[c+f*a]]+=r[u+1+3*(t+1)]}}else for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<a;u++){let c=t.row(u+l*a+s*a*i);for(let t=-1;t<=1;t++)for(let f=-1;f<=1;f++)for(let d=-1;d<=1;d++){let h=u+d,p=l+f,m=s+t;if(n)h<0?h+=a:h>=a&&(h-=a),p<0?p+=i:p>=i&&(p-=i),m<0?m+=o:m>=o&&(m-=o);else if(h<0||p<0||m<0||h>=a||p>=i||m>=o)continue;c[e.state[h+p*a+m*a*i]]+=r[d+1+3*(f+1)+9*(t+1)]}}let s=!1;for(let n=0;n<t.ROWS;n++){let r=t.row(n),a=e.state[n];for(let t of this.rules)if(a==t.input&&t.output!=e.state[n]&&(1==t.p||this.ip.rng.double()<t.p)){let a=!0;if(null!=t.sums){let e=0;for(let n=0;n<t.values.length;n++)e+=r[t.values[n]];a=Boolean(t.sums[e])}if(a){e.state[n]=t.output,s=!0;break}}}return this.counter++,s}}function*Br(e){if(e.includes("..")){let t=e.split(".."),n=parseInt(t[0]),r=parseInt(t[1]);for(let e=n;e<=r;e++)yield e}else yield parseInt(e)}Fr.kernels2d=new Map([["VonNeumann",new Uint8Array([0,1,0,1,0,1,0,1,0])],["Moore",new Uint8Array([1,1,1,1,0,1,1,1,1])]]),Fr.kernels3d=new Map([["VonNeumann",new Uint8Array([0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,0])],["NoCorners",new Uint8Array([0,1,0,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,0,1,0,1,1,1,0,1,0])]]);class Ur{load(e,t){this.input=t.values.get(e.getAttribute("in").charCodeAt(0)),this.output=t.values.get(e.getAttribute("out").charCodeAt(0));let n=e.getAttribute("values"),r=e.getAttribute("sum");if(n&&!r)return console.error(e,'missing "sum" attribute'),!1;if(!n&&r)return console.error(e,'missing "value" attribute'),!1;if(n&&(this.values=new Uint8Array(Array.from({length:n.length},((e,r)=>t.values.get(n.charCodeAt(r)))))),this.p=parseFloat(e.getAttribute("p"))||1,r){this.sums=new Uint8Array(28);let e=r.split(",");for(let t of e)for(let e of Br(t))this.sums[e]=1}return!0}}class Vr{ZRotated(){let[e,t,n,r,a,i]=this.IO_DIM,o=new Int32Array(this.input.length);for(let r=0;r<n;r++)for(let n=0;n<e;n++)for(let a=0;a<t;a++)o[a+n*t+r*e*t]=this.input[e-1-n+a*e+r*e*t];let s=new Uint8Array(this.output.length);for(let e=0;e<i;e++)for(let t=0;t<r;t++)for(let n=0;n<a;n++)s[n+t*a+e*r*a]=this.output[r-1-t+n*r+e*r*a];return new Vr(o,s,[t,e,n,a,r,i],this.ishifts.length,this.p)}YRotated(){let[e,t,n,r,a,i]=this.IO_DIM,o=new Int32Array(this.input.length);for(let r=0;r<e;r++)for(let a=0;a<t;a++)for(let i=0;i<n;i++)o[i+a*n+r*n*t]=this.input[e-1-r+a*e+i*e*t];let s=new Uint8Array(this.output.length);for(let e=0;e<r;e++)for(let t=0;t<a;t++)for(let n=0;n<i;n++)s[n+t*i+e*i*a]=this.output[r-1-e+t*r+n*r*a];return new Vr(o,s,[n,t,e,i,a,r],this.ishifts.length,this.p)}reflected(){let[e,t,n,r,a,i]=this.IO_DIM,o=new Int32Array(this.input.length);for(let r=0;r<n;r++)for(let n=0;n<t;n++)for(let a=0;a<e;a++)o[a+n*e+r*e*t]=this.input[e-1-a+n*e+r*e*t];let s=new Uint8Array(this.output.length);for(let e=0;e<i;e++)for(let t=0;t<a;t++)for(let n=0;n<r;n++)s[n+t*r+e*r*a]=this.output[r-1-n+t*r+e*r*a];return new Vr(o,s,[e,t,n,r,a,i],this.ishifts.length,this.p)}static same(e,t){return wr.compareArr(e.IO_DIM,t.IO_DIM)&&wr.compareArr(e.input,t.input)&&wr.compareArr(e.output,t.output)}symmetries(e,t){return t?Cr.squareSymmetries(this,(e=>e.ZRotated()),(e=>e.reflected()),Vr.same,e):Cr.cubeSymmetries(this,(e=>e.ZRotated()),(e=>e.YRotated()),(e=>e.reflected()),Vr.same,e)}static async loadResource(e,t,n){if(!t)return console.error(`no legend for ${e}`),[null,-1,-1,-1];let[r,a,i,o]=n?await Ar.bitmap(e):await Ar.vox(e);if(null===r)return console.error(`failed to load ${e}`),[null,a,i,o];let[s,l]=wr.ords(r);if(l>t.length)return console.error(`the amount of colors ${l} in ${e} is more than ${t.length}`),[null,a,i,o];let u=new Int8Array(s.length);for(let e=0;e<s.length;e++)u[e]=t.charCodeAt(s[e]);return[u,a,i,o]}static parse(e){let t=wr.split2(e," ","/"),n=t[0][0].length,r=t[0].length,a=t.length,i=new Int8Array(n*r*a);for(let e=0;e<a;e++){let o=t[a-1-e];if(o.length!==r)return console.error("non-rectangular pattern"),[null,-1,-1,-1];for(let t=0;t<r;t++){let a=o[t];if(a.length!==n)return console.error("non-rectangular pattern"),[null,-1,-1,-1];for(let o=0;o<n;o++){let s=a.charCodeAt(o);(s<=0||s>128)&&console.error(`invalid character code: ${s}`),i[o+t*n+e*n*r]=s}}}return[i,n,r,a]}static async load(e,t,n){let r,a,i=e=>{let r="resources/rules/";return null!=n.folder&&(r+=n.folder+"/"),r+=e,r+(1===t.MZ?".png":".vox")},o=e.getAttribute("in"),s=e.getAttribute("out"),l=e.getAttribute("fin"),u=e.getAttribute("fout"),c=e.getAttribute("file"),f=e.getAttribute("legend"),d=-1,h=-1,p=-1,m=-1,v=-1,g=-1;if(c){if(o||l||s||u)return console.error(e,"already contains a file attribute"),null;let[n,b,y,_]=await this.loadResource(i(c),f,1===t.MZ);if(!n)return console.error(e,"failed to load input"),null;if(b%2)return console.error(e,`odd width in ${c}`),null;d=m=b/2,h=v=y,p=g=_,r=(0,Nr.H)(Int8Array,b/2,y,_,((e,t,r)=>n[e+t*b+r*b*y])),a=(0,Nr.H)(Int8Array,b/2,y,_,((e,t,r)=>n[e+b/2+t*b+r*b*y]))}else{if(!o&&!l)return console.error(e,"no intput"),null;if(!s&&!u)return console.error(e,"no output"),null;if([r,d,h,p]=o?this.parse(o):await this.loadResource(i(l),f,1===t.MZ),!r||([a,m,v,g]=s?this.parse(s):await this.loadResource(i(u),f,1===n.MZ),!a))return console.error(e,"failed to load input"),null;if(t===n&&(g!=p||v!=h||m!=d))return console.error(e,"non-matching pattern sizes"),null}let b=new Int32Array(r.length);for(let n=0;n<r.length;n++){let a=r[n],i=t.waves.get(a);if(isNaN(i))return console.error(e,`input code ${a} is not found in codes`),null;b[n]=i}let y=new Uint8Array(a.length);for(let t=0;t<a.length;t++){let r=a[t];if(42===r)y[t]=255;else{let a=n.values.get(r);if(isNaN(a))return console.error(e,`output code ${r} is not found in codes`),null;y[t]=a}}let _=parseFloat(e.getAttribute("p"))||1;return new Vr(b,y,[d,h,p,m,v,g],t.C,_)}get IMX(){return this.IO_DIM[0]}get IMY(){return this.IO_DIM[1]}get IMZ(){return this.IO_DIM[2]}get OMX(){return this.IO_DIM[3]}get OMY(){return this.IO_DIM[4]}get OMZ(){return this.IO_DIM[5]}constructor(e,t,n,r,a){this.input=e,this.output=t,this.IO_DIM=new Int32Array(n),this.p=a;let i=Array.from({length:r},(e=>[])),[o,s,l,u,c,f]=this.IO_DIM;for(let t=0;t<l;t++)for(let n=0;n<s;n++)for(let a=0;a<o;a++){let l=e[a+n*o+t*o*s];for(let e=0;e<r;e++,l>>=1)1==(1&l)&&i[e].push([a,n,t])}this.ishifts=Array.from({length:r});for(let e=0;e<r;e++)this.ishifts[e]=i[e].concat([]);if(u===o&&c===s&&f===l){for(let e=0;e<r;e++)i[e]=[];for(let e=0;e<f;e++)for(let n=0;n<c;n++)for(let a=0;a<u;a++){let o=t[a+n*u+e*u*c];if(255!==o)i[o].push([a,n,e]);else for(let t=0;t<r;t++)i[t].push([a,n,e])}this.oshifts=Array.from({length:r});for(let e=0;e<r;e++)this.oshifts[e]=i[e].concat([])}let d=(1<<r)-1;this.binput=new Uint8Array(e.length);for(let t=0;t<e.length;t++){let n=e[t];this.binput[t]=n===d?255:wr.firstNonZeroPosition(n)}}}let qr=e=>{if(!e.includes("/"))return[parseInt(e),1];let t=e.split("/");return[parseInt(t[0]),parseInt(t[1])]};class Yr extends Pr{async load(e,t,n){let r=e.getAttribute("scale");if(!r)return console.error(e,"scale should be specified in map node"),!1;let a=r.split(" ");if(3!==a.length)return console.error(e,`scale attribute ${r} should have 3 components separated by space`),!1;let[i,o]=qr(a[0]),[s,l]=qr(a[1]),[u,c]=qr(a[2]);if(this.ND.set([i,s,u,o,l,c]),this.newgrid=Or.build(e,~~(i*n.MX/o),~~(s*n.MY/l),~~(u*n.MZ/c)),!this.newgrid||!await super.load(e,t,this.newgrid))return!1;let f=Cr.getSymmetry(1===n.MZ,e.getAttribute("symmetry"),t);for(let t of wr.childrenByTag(e,"rule")){let e=await Vr.load(t,n,this.newgrid);if(e.original=!0,!e)return!1;e.symmetries(f,1===n.MZ).forEach((e=>this.rules.push(e)))}return!0}static matches(e,t,n,r,a,i,o,s){let{IMX:l,IMY:u,IMZ:c,input:f}=e;for(let e=0;e<c;e++)for(let c=0;c<u;c++)for(let d=0;d<l;d++){let h=t+d,p=n+c,m=r+e;if(h>=i&&(h-=i),p>=o&&(p-=o),m>=s&&(m-=s),0==(f[d+c*l+e*l*u]&1<<a[h+p*i+m*i*o]))return!1}return!0}static apply(e,t,n,r,a,i,o,s){let{OMZ:l,OMY:u,OMX:c,output:f}=e;for(let e=0;e<l;e++)for(let l=0;l<u;l++)for(let d=0;d<c;d++){let h=t+d,p=n+l,m=r+e;h>=i&&(h-=i),p>=o&&(p-=o),m>=s&&(m-=s);let v=f[d+l*c+e*c*u];255!=v&&(a[h+p*i+m*i*o]=v)}}run(){if(this.n>=0)return super.run();let e=this.grid,t=this.newgrid,[n,r,a,i,o,s]=this.ND,{MZ:l,MY:u,MX:c,state:f}=e;for(let e of(t.clear(),this.rules))for(let d=0;d<l;d++)for(let h=0;h<u;h++)for(let p=0;p<c;p++)Yr.matches(e,p,h,d,f,c,u,l)&&Yr.apply(e,~~(p*n/i),~~(h*r/o),~~(d*a/s),t.state,t.MX,t.MY,t.MZ);return this.ip.grid=t,this.n++,!0}reset(){super.reset(),this.n=-1}constructor(...e){super(...e),this.rules=[],this.ND=new Int32Array(6)}}class Wr extends Tr{async load(e,t,n){let r=e.getAttribute("from");return this.start=n.wave(r),this.value=n.values.get((e.getAttribute("color")||r).charCodeAt(0)),this.finish=n.wave(e.getAttribute("to")),this.inertia="True"===e.getAttribute("inertia"),this.longest="True"===e.getAttribute("longest"),this.edges="True"===e.getAttribute("edges"),this.vertices="True"===e.getAttribute("vertices"),this.substrate=n.wave(e.getAttribute("on")),!0}reset(){}run(){let{grid:e,substrate:t,start:n,finish:r,edges:a,vertices:i}=this,o=[],s=[],l=new Int32Array(e.state.length);l.fill(-1);let{MX:u,MY:c,MZ:f}=e;for(let t=0;t<f;t++)for(let a=0;a<c;a++)for(let i=0;i<u;i++){let f=i+a*u+t*u*c;l[f]=-1;let d=e.state[f];0!=(n&1<<d)&&s.push([i,a,t]),0!=(r&1<<d)&&(l[f]=0,o.push([0,i,a,t]))}if(!s.length||!o.length)return!1;let d=(r,a,i,s)=>{let f=a+i*u+s*u*c,d=e.state[f];-1==l[f]&&(0!=(t&1<<d)||0!=(n&1<<d))&&(0!=(t&1<<d)&&o.push([r,a,i,s]),l[f]=r)};for(;o.length;){let[e,t,n,r]=o.shift();for(let[o,s,l]of Wr.directions(t,n,r,u,c,f,a,i))d(e+1,t+o,n+s,r+l)}if(!s.some((([e,t,n])=>l[e+t*u+n*u*c]>0)))return!1;let h=yr()(this.ip.rng.int32().toString()),p=u*c*f,m=-1,v=[-1,-1,-1],g=[-1,-1,-1];for(let[e,t,n]of s){let r=l[e+t*u+n*u*c];if(-1==r)continue;let a=r,i=.1*h.double();a+i<p&&(p=a+i,v=[e,t,n]),a+i>m&&(m=a+i,g=[e,t,n])}let[b,y,_]=this.longest?g:v,[w,x,M]=this.direction(b,y,_,0,0,0,l,h);for(b+=w,y+=x,_+=M;l[b+y*u+_*u*c];)e.state[b+y*u+_*u*c]=this.value,this.ip.changes.push([b,y,_]),[w,x,M]=this.direction(b,y,_,w,x,M,l,h),b+=w,y+=x,_+=M;return!0}direction(e,t,n,r,a,i,o,s){let l=[],{grid:u,vertices:c,edges:f,inertia:d}=this,{MX:h,MY:p,MZ:m}=u,v=o[e+t*h+n*h*p],g=(r,a,i)=>{o[e+r+(t+a)*h+(n+i)*h*p]==v-1&&l.push([r,a,i])};if(c||f){for(let r of Wr.directions(e,t,n,h,p,m,f,c))g(r[0],r[1],r[2]);let o=[-1,-1,-1];if(!d||0==r&&0==a&&0==i)o=wr.pick(l,s);else{let e=-4;for(let[t,n,u]of l){let l=.1*s.double(),c=(t*r+n*a+u*i)/Math.sqrt((t*t+n*n+u*u)*(r*r+a*a+i*i));c+l>e&&(e=c+l,o=[t,n,u])}}return o}if(0!=r||0!=a||0!=i){let s=e+r,l=t+a,u=n+i;if(d&&s>=0&&l>=0&&u>=0&&s<h&&l<p&&u<m&&o[s+l*h+u*h*p]==v-1)return[r,a,i]}return e>0&&g(-1,0,0),e<h-1&&g(1,0,0),t>0&&g(0,-1,0),t<p-1&&g(0,1,0),n>0&&g(0,0,-1),n<m-1&&g(0,0,1),wr.pick(l,s)}static directions(e,t,n,r,a,i,o,s){let l=[];return 1==i?(e>0&&l.push([-1,0,0]),e<r-1&&l.push([1,0,0]),t>0&&l.push([0,-1,0]),t<a-1&&l.push([0,1,0]),o&&(e>0&&t>0&&l.push([-1,-1,0]),e>0&&t<a-1&&l.push([-1,1,0]),e<r-1&&t>0&&l.push([1,-1,0]),e<r-1&&t<a-1&&l.push([1,1,0]))):(e>0&&l.push([-1,0,0]),e<r-1&&l.push([1,0,0]),t>0&&l.push([0,-1,0]),t<a-1&&l.push([0,1,0]),n>0&&l.push([0,0,-1]),n<i-1&&l.push([0,0,1]),o&&(e>0&&t>0&&l.push([-1,-1,0]),e>0&&t<a-1&&l.push([-1,1,0]),e<r-1&&t>0&&l.push([1,-1,0]),e<r-1&&t<a-1&&l.push([1,1,0]),e>0&&n>0&&l.push([-1,0,-1]),e>0&&n<i-1&&l.push([-1,0,1]),e<r-1&&n>0&&l.push([1,0,-1]),e<r-1&&n<i-1&&l.push([1,0,1]),t>0&&n>0&&l.push([0,-1,-1]),t>0&&n<i-1&&l.push([0,-1,1]),t<a-1&&n>0&&l.push([0,1,-1]),t<a-1&&n<i-1&&l.push([0,1,1])),s&&(e>0&&t>0&&n>0&&l.push([-1,-1,-1]),e>0&&t>0&&n<i-1&&l.push([-1,-1,1]),e>0&&t<a-1&&n>0&&l.push([-1,1,-1]),e>0&&t<a-1&&n<i-1&&l.push([-1,1,1]),e<r-1&&t>0&&n>0&&l.push([1,-1,-1]),e<r-1&&t>0&&n<i-1&&l.push([1,-1,1]),e<r-1&&t<a-1&&n>0&&l.push([1,1,-1]),e<r-1&&t<a-1&&n<i-1&&l.push([1,1,1]))),l}}class Xr{compute(e,t){let{zero:n,substrate:r}=this,{MX:a,MY:i,MZ:o,state:s}=t,l=[],u=0,c=0,f=0;for(let t=0;t<s.length;t++)e[t]=-1,n&1<<s[t]&&(e[t]=0,l.push([0,u,c,f])),++u===a&&(u=0,++c===i&&(c=0,f++));if(!l.length)return!1;for(;l.length;){let[t,n,u,c]=l.shift();Xr.neighbors(n,u,c,a,i,o,((n,o,u)=>{let c=n+o*a+u*a*i,f=s[c];-1===e[c]&&r&1<<f&&(l.push([t+1,n,o,u]),e[c]=t+1)}))}return!0}static neighbors(e,t,n,r,a,i,o){e>0&&o(e-1,t,n),e<r-1&&o(e+1,t,n),t>0&&o(e,t-1,n),t<a-1&&o(e,t+1,n),n>0&&o(e,t,n-1),n<i-1&&o(e,t,n+1)}static deltaPointwise(e,t,n,r,a,i,o,s,l){let u=0,c=0,f=0,d=0;for(let h=0;h<t.input.length;h++){let p=t.output[h];if(255!=p&&0==(t.input[h]&1<<p)){let t=n+d+(r+f)*s+(a+c)*s*l,h=o.get(t,p);if(-1==h)return null;let m=e[t],v=o.get(t,m);if(u+=h-v,i){let e=i[m];e&&e.inversed&&(u+=2*v);let t=i[p];t&&t.inversed&&(u-=2*h)}}++d==t.IMX&&(d=0,++f==t.IMY&&(f=0,c++))}return u}constructor(e,t){this.recompute="True"===e.getAttribute("recompute"),this.essential="True"===e.getAttribute("essential");let n=e.getAttribute("on");this.substrate=t.wave(n);let r=e.getAttribute("from");r?this.inversed=!0:(this.inversed=!1,r=e.getAttribute("to")),this.zero=t.wave(r)}}class $r{static computeFutureSetPresent(e,t,n){let r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)n[e]||(r[e]=1);for(let a=0;a<t.length;a++){let i=t[a],o=n[i];r[i]=1,o?(e[a]=o.to,t[a]=o.from):e[a]=1<<i}for(let e=0;e<r.length;e++)if(!r[e])return!1;return!0}static computeForwardPotentials(e,t,n,r,a,i){e.fill(-1);for(let n=0;n<t.length;n++)e.set(n,t[n],0);this.computePotentials(e,n,r,a,i,!1)}static computeBackwardPotentials(e,t,n,r,a,i){for(let n=0;n<e.ROWS;n++){let r=e.row(n);for(let e=0;e<t.length;e++)r[e]=0!=(t[e]&1<<n)?0:-1}this.computePotentials(e,n,r,a,i,!0)}static computePotentials(e,t,n,r,a,i){let o=[];for(let r=0;r<e.ROWS;r++){let a=e.row(r);for(let e=0;e<a.length;e++)a[e]||o.push([r,e%t,~~(e%(t*n)/t),~~(e/(t*n))])}let s=new Nr.WN(e.COLS,a.length);for(;o.length;){let[l,u,c,f]=o.shift(),d=u+c*t+f*t*n,h=e.get(d,l);for(let d=0;d<a.length;d++){let p=a[d],m=i?p.oshifts[l]:p.ishifts[l];for(let[a,l,v]of m){let m=u-a,g=c-l,b=f-v;if(m<0||g<0||b<0||m+p.IMX>t||g+p.IMY>n||b+p.IMZ>r)continue;let y=m+g*t+b*t*n;!s.get(y,d)&&this.forwardMatches(p,m,g,b,e,h,t,n,i)&&(s.set(y,d,!0),this.applyForward(p,m,g,b,e,h,t,n,o,i))}}}}static forwardMatches(e,t,n,r,a,i,o,s,l){let u=0,c=0,f=0,d=l?e.output:e.binput;for(let l=0;l<d.length;l++){let h=d[l];if(255!=h){let e=a.get(t+f+(n+c)*o+(r+u)*o*s,h);if(e>i||-1===e)return!1}++f==e.IMX&&(f=0,++c==e.IMY&&(c=0,u++))}return!0}static applyForward(e,t,n,r,a,i,o,s,l,u){let c=u?e.binput:e.output;for(let u=0;u<e.IMZ;u++){let f=r+u;for(let r=0;r<e.IMY;r++){let d=n+r;for(let n=0;n<e.IMX;n++){let h=t+n,p=h+d*o+f*o*s,m=c[n+r*e.IMX+u*e.IMX*e.IMY];255!==m&&-1===a.get(p,m)&&(a.set(p,m,i+1),l.push([m,h,d,f]))}}}}static IsGoalReached(e,t){for(let n=0;n<e.length;n++)if(0==(1<<e[n]&t[n]))return!1;return!0}static forwardPointwise(e,t){let n=0;for(let r=0;r<t.length;r++){let a=t[r],i=1e3,o=-1;for(let t=0;t<e.ROWS;t++,a>>=1){let n=e.get(r,t);1==(1&a)&&n>=0&&n<i&&(i=n,o=t)}if(o<0)return-1;n+=i}return n}static backwardPointwise(e,t){let n=0;for(let r=0;r<t.length;r++){let a=e.get(r,t[r]);if(a<0)return-1;n+=a}return n}constructor(e,t,n){this.from=n.values.get(e),this.to=n.wave(t)}}class Hr{static run(e,t,n,r,a,i,o,s,l,u,c){let f=e.length,d=new Nr.dX(Int32Array,f,o,-1),h=new Nr.dX(Int32Array,f,o,-1);$r.computeBackwardPotentials(d,t,r,a,i,n);let p=$r.backwardPointwise(d,e);$r.computeForwardPotentials(h,e,r,a,i,n);let m=$r.forwardPointwise(h,t);if(p<0||m<0)return console.error("INCORRECT PROBLEM"),null;if(!p)return[];let v=new ra(e,-1,0,p,m),g=[v],b=new Nr.zN((e=>e.slice()),oa,aa);b.set(e,0);let y=new Nr.Z3((({p:e},{p:t})=>e<=t)),_=yr()(c.toString());y.enqueue({v:0,p:v.rank(_,u)});let w=p+m;for(;y.size>0&&(l<0||g.length<l);){let e=y.dequeue().v,o=g[e],c=s?this.allChildStates(o.state,r,a,n):this.oneChildStates(o.state,r,a,n);for(let s of c){let c=b.get(s);if(c in g){let t=g[c];o.depth+1<t.depth&&(t.depth=o.depth+1,t.parentIndex=e,t.backwardEstimate>=0&&t.forwardEstimate>=0&&y.enqueue({v:c,p:t.rank(_,u)}))}else{let f=$r.backwardPointwise(d,s);$r.computeForwardPotentials(h,s,r,a,i,n);let p=$r.forwardPointwise(h,t);if(f<0||p<0)continue;let m=new ra(s,e,o.depth+1,f,p);if(g.push(m),c=g.length-1,b.set(m.state,c),0===p)return console.log(`Found a trajectory of length ${o.depth+1}, visited ${b.size} states`),ra.trajectory(c,g).reverse().map((e=>e.state));if(l<0&&f+p<=w){w=f+p;let e=`found a state of record estimate ${w} = ${f} + ${p}`;console.debug(e)}y.enqueue({v:c,p:m.rank(_,u)})}}}return null}static allChildStates(e,t,n,r){let a=[],i=new Int32Array(e.length);for(let o=0;o<e.length;o++){let s=o%t,l=~~(o/t);for(let u of r)if(Qr(u,s,l,e,n,n)){a.push([u,o]);for(let e=0;e<u.IMY;e++)for(let n=0;n<u.IMX;n++)i[s+n+(l+e)*t]++}}let o=a.concat([]),s=new Uint8Array(o.length);s.fill(1);let l=[];return this.enumerate(l,[],o,i,s,e,t),l}static oneChildStates(e,t,n,r){let a=[];for(let i of r)for(let r=0;r<n;r++)for(let o=0;o<t;o++)Gr(i,o,r,e,t,n)&&a.push(Zr(i,o,r,e,t));return a}static enumerate(e,t,n,r,a,i,o){let s=wr.maxPositiveIndex(r),l=s%o,u=~~(s/o);if(s<0)return void e.push(ea(i,t,o));let c=[];for(let e=0;e<n.length;e++){let[t,r]=n[e];a[e]&&ta(l,u,t,r%o,~~(r/o))&&c.push([t,r])}for(let[s,l]of c){t.push([s,l]);let u=[];for(let e=0;e<n.length;e++)if(a[e]){let[t,r]=n[e];na(s,l%o,~~(l/o),t,r%o,~~(r/o))&&u.push(e)}for(let e of u)Kr(e,!1,n,r,a,o);for(let s of(this.enumerate(e,t,n,r,a,i,o),u))Kr(s,!0,n,r,a,o);t.pop()}}}let Gr=(e,t,n,r,a,i)=>{if(t+e.IMX>a||n+e.IMY>i)return!1;let o=0,s=0;for(let i=0;i<e.input.length;i++){if(0==(e.input[i]&1<<r[t+s+(n+o)*a]))return!1;++s===e.IMX&&(s=0,o++)}return!0},Zr=(e,t,n,r,a)=>{let i=new Uint8Array(r.length);i.set(r);for(let r=0;r<e.OMZ;r++)for(let o=0;o<e.OMY;o++)for(let s=0;s<e.OMX;s++){let l=e.output[s+o*e.OMX+r*e.OMX*e.OMY];255!=l&&(i[t+s+(n+o)*a]=l)}return i},Qr=(e,t,n,r,a,i)=>{if(t+e.IMX>a||n+e.IMY>i)return!1;let o=0,s=0;for(let i=0;i<e.input.length;i++){if(0==(e.input[i]&1<<r[t+s+(n+o)*a]))return!1;++s==e.IMX&&(s=0,o++)}return!0},Kr=(e,t,n,r,a,i)=>{a[e]=t?1:0;let[o,s]=n[e],l=s%i,u=~~(s/i),c=t?1:-1;for(let e=0;e<o.IMY;e++)for(let t=0;t<o.IMX;t++)r[l+t+(u+e)*i]+=c},Jr=(e,t,n,r,a)=>{for(let i=0;i<e.IMY;i++)for(let o=0;o<e.IMX;o++)r[t+o+(n+i)*a]=e.output[o+i*e.IMX]},ea=(e,t,n)=>{let r=new Uint8Array(e.length);for(let[a,i]of(r.set(e),t))Jr(a,i%n,~~(i/n),r,n);return r},ta=(e,t,n,r,a)=>r<=e&&e<r+n.IMX&&a<=t&&t<a+n.IMY,na=(e,t,n,r,a,i)=>{for(let o=0;o<e.IMY;o++)for(let s=0;s<e.IMX;s++)if(ta(t+s,n+o,r,a,i))return!0;return!1};class ra{rank(e,t){return(t<0?1e3-this.depth:this.forwardEstimate+this.backwardEstimate+2*t*this.depth)+1e-4*e.double()}static trajectory(e,t){let n=[];for(let r=t[e];r.parentIndex>=0;r=t[r.parentIndex])n.push(r);return n}constructor(e,t,n,r,a){this.state=e,this.parentIndex=t,this.depth=n,this.backwardEstimate=r,this.forwardEstimate=a}}let aa=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},ia=new Int32Array(1),oa=e=>{ia[0]=17;for(let t=0;t<e.length;t++)ia[0]=29*ia[0]+e[t];return ia[0]};class sa extends Tr{async load(e,t,n){let r=e.getAttribute("symmetry"),a=Cr.getSymmetry(1===n.MZ,r,t);if(!a)return console.error(e,`unknown symmetry ${r}`),null;let i=[],o=[...wr.childrenByTag(e,"rule")],s=o.length>0?o:[e];for(let e of s){let t=await Vr.load(e,n,n);if(!t)return!1;t.original=!0;let r=e.getAttribute("symmetry"),o=Cr.getSymmetry(1===n.MZ,r,a);if(!o)return console.error(e,`unknown rule symmetry ${r}`),null;for(let e of t.symmetries(o,1===n.MZ))i.push(e)}this.rules=i.concat([]),this.last=new Uint8Array(this.rules.length),this.steps=parseInt(e.getAttribute("steps"))||0,this.temperature=parseFloat(e.getAttribute("temperature"))||0;let l=[...wr.matchTags(e,"field")];if(l.length){for(let e of(this.fields=Array.from({length:n.C}),l))this.fields[n.values.get(e.getAttribute("for").charCodeAt(0))]=new Xr(e,n);this.potentials=new Nr.dX(Int32Array,n.state.length,n.C),this.potentials.fill(0)}let u=[...wr.childrenByTag(e,"observe")];if(u.length){for(let e of(this.observations=Array.from({length:n.C}),u)){let t=n.values.get(e.getAttribute("value").charCodeAt(0));this.observations[t]=new $r(e.getAttribute("from")?.charCodeAt(0)||n.characters.charCodeAt(t),e.getAttribute("to"),n)}this.search="True"===e.getAttribute("search"),this.search?(this.limit=parseInt(e.getAttribute("limit"))||-1,this.depthCoefficient=parseFloat(e.getAttribute("depthCoefficient"))||.5):this.potentials||(this.potentials=new Nr.dX(Int32Array,n.state.length,n.C)),this.future=new Int32Array(n.state.length)}return!0}reset(){this.lastMatchedTurn=-1,this.counter=0,this.futureComputed=!1,this.last.fill(0)}add(e,t,n,r,a){a.set(t+n*this.grid.MX+r*this.grid.MX*this.grid.MY,!0);let i=this.matchCount<<2;if(i+4<this.matches.length)this.matches[i+0]=e,this.matches[i+1]=t,this.matches[i+2]=n,this.matches[i+3]=r;else{let a=this.matches;this.matches=new Uint32Array(a.length+4<<1),this.matches.set(a),this.matches[i+0]=e,this.matches[i+1]=t,this.matches[i+2]=n,this.matches[i+3]=r}this.matchCount++}run(){if(this.last.fill(0),this.steps>0&&this.counter>=this.steps)return!1;let e=this.grid,{MX:t,MY:n,MZ:r}=e;if(this.observations&&!this.futureComputed){if(!$r.computeFutureSetPresent(this.future,e.state,this.observations))return!1;if(this.futureComputed=!0,this.search){this.trajectory=null;let t=this.limit<0?1:20;for(let n=0;n<t&&!this.trajectory;n++){let t=Hr.run(e.state,this.future,this.rules,e.MX,e.MY,e.MZ,e.C,this instanceof la,this.limit,this.depthCoefficient,this.ip.rng.int32());this.trajectory=Nr.dX.from(Uint8Array,t)}this.trajectory||console.error("SEARCH RETURNED NULL")}else $r.computeBackwardPotentials(this.potentials,this.future,t,n,r,this.rules)}if(this.lastMatchedTurn>=0){let a=this.ip;for(let i=a.first[this.lastMatchedTurn];i<a.changes.length;i++){let[o,s,l]=a.changes[i],u=e.state[o+s*t+l*t*n];for(let a=0;a<this.rules.length;a++){let i=this.rules[a],c=this.matchMask.row(a),f=i.ishifts[u];for(let[u,d,h]of f){let f=o-u,p=s-d,m=l-h;if(f<0||p<0||m<0||f+i.IMX>t||p+i.IMY>n||m+i.IMZ>r)continue;let v=f+p*t+m*t*n;!c.get(v)&&e.matches(i,f,p,m)&&this.add(a,f,p,m,c)}}}}else{this.matchCount=0;for(let a=0;a<this.rules.length;a++){let i=this.rules[a],o=this.matchMask?.row(a);for(let s=i.IMZ-1;s<r;s+=i.IMZ)for(let l=i.IMY-1;l<n;l+=i.IMY)for(let u=i.IMX-1;u<t;u+=i.IMX){let c=u+l*t+s*t*n,f=e.state[c],d=i.ishifts[f];for(let[c,f,h]of d){let d=u-c,p=l-f,m=s-h;d<0||p<0||m<0||d+i.IMX>t||p+i.IMY>n||m+i.IMZ>r||!e.matches(i,d,p,m)||this.add(a,d,p,m,o)}}}}if(this.fields){let t=!1,n=!1;for(let r=0;r<this.fields.length;r++){let a=this.fields[r];if(a&&(!this.counter||a.recompute)){let i=a.compute(this.potentials.row(r),e);if(!i&&a.essential)return!1;t||(t=i),n=!0}}if(n&&!t)return!1}return!0}}class la extends sa{async load(e,t,n){return!!await super.load(e,t,n)&&(this.matches=new Uint32Array(1024),this.matchMask=new Nr.WN(n.state.length,this.rules.length),this.matchMask.clear(),!0)}fit(e,t,n,r,a,i,o){let s=this.rules[e];for(let e=0;e<s.OMZ;e++)for(let l=0;l<s.OMY;l++)for(let u=0;u<s.OMX;u++)if(255!=s.output[u+l*s.OMX+e*s.OMX*s.OMY]&&a[t+u+(n+l)*i+(r+e)*i*o])return;this.last[e]=1;for(let e=0;e<s.OMZ;e++)for(let l=0;l<s.OMY;l++)for(let u=0;u<s.OMX;u++){let c=s.output[u+l*s.OMX+e*s.OMX*s.OMY];if(255!=c){let s=t+u,f=n+l,d=r+e,h=s+f*i+d*i*o;a[h]=1,this.grid.state[h]=c,this.ip.changes.push([s,f,d])}}}run(){let e=this.grid;if(!super.run())return!1;if(this.lastMatchedTurn=this.ip.counter,this.trajectory)return!(this.counter>=this.trajectory.ROWS||(console.log(`[ALL] Set state to trajectory [${this.counter}]`),e.state.set(this.trajectory.row(this.counter)),this.counter++,0));if(!this.matchCount)return!1;let{MX:t,MY:n}=e;if(this.potentials){let r=0,a=!1,i=[];for(let o=0;o<this.matchCount;o++){let s=o<<2,[l,u,c,f]=this.matches.subarray(s,s+4),d=Xr.deltaPointwise(e.state,this.rules[l],u,c,f,this.fields,this.potentials,t,n);if(d){a||(r=d,a=!0);let e=this.ip.rng.double();i.push([o,this.temperature>0?Math.pow(e,Math.exp((d-r)/this.temperature)):.001*e-d])}}for(let[r,a]of(i.sort((([,e],[,t])=>t-e)),i)){let a=r<<2,[i,o,s,l]=this.matches.subarray(a,a+4);this.matchMask.set(o+s*t+l*t*n,i,!1),this.fit(i,o,s,l,e.mask,t,n)}}else{let r=new Int32Array(this.matchCount);for(let a of(wr.shuffleFill(r,this.ip.rng),r)){let r=a<<2,[i,o,s,l]=this.matches.subarray(r,r+4);this.matchMask.set(o+s*t+l*t*n,i,!1),this.fit(i,o,s,l,e.mask,t,n)}}for(let r=this.ip.first[this.lastMatchedTurn];r<this.ip.changes.length;r++){let[a,i,o]=this.ip.changes[r];e.mask[a+i*t+o*t*n]=0}return this.counter++,this.matchCount=0,!0}}let ua=[-1,-1,-1,-1];class ca extends sa{async load(e,t,n){return!!await super.load(e,t,n)&&(this.matches=new Uint32Array(1024),this.matchMask=new Nr.WN(n.state.length,this.rules.length),this.matchMask.clear(),!0)}reset(){super.reset(),this.matchCount&&(this.matchMask.clear(),this.matchCount=0)}apply(e,t,n,r){let a=this.grid,{MX:i,MY:o}=a,s=this.ip.changes;for(let l=0;l<e.OMZ;l++)for(let u=0;u<e.OMY;u++)for(let c=0;c<e.OMX;c++){let f=e.output[c+u*e.OMX+l*e.OMX*e.OMY];if(255!==f){let e=t+c,d=n+u,h=r+l,p=e+d*i+h*i*o;f!==a.state[p]&&(a.state[p]=f,s.push([e,d,h]))}}}run(){if(!super.run())return!1;if(this.lastMatchedTurn=this.ip.counter,this.trajectory)return!(this.counter>=this.trajectory.ROWS||(console.log(`[ONE] Set state to trajectory [${this.counter}]`),this.grid.state.set(this.trajectory.row(this.counter)),this.counter++,0));let[e,t,n,r]=this.randomMatch(this.ip.rng);return!(e<0||(this.last[e]=1,this.apply(this.rules[e],t,n,r),this.counter++,0))}randomMatch(e){let{grid:t,matchMask:n,matches:r}=this;if(this.potentials){if(this.observations&&$r.IsGoalReached(t.state,this.future))return this.futureComputed=!1,ua;let n=-1e3,r=-1,a=0,i=!1;for(let o=0;o<this.matchCount;o++){let s=o<<2,[l,u,c,f]=this.matches.subarray(s,s+4),d=u+c*t.MX+f*t.MX*t.MY;if(t.matches(this.rules[l],u,c,f)){let s=Xr.deltaPointwise(t.state,this.rules[l],u,c,f,this.fields,this.potentials,t.MX,t.MY);if(null===s)continue;i||(a=s,i=!0);let d=e.double(),h=this.temperature>0?Math.pow(d,Math.exp((s-a)/this.temperature)):.001*d-s;h>n&&(n=h,r=o)}else{this.matchMask.set(d,l,!1),this.matchCount--;let e=this.matchCount<<2;this.matches.copyWithin(s,e,e+4),o--}}return r>=0?this.matches.subarray(r<<2,4+(r<<2)):ua}for(;this.matchCount>0;){let a=xr(e,this.matchCount)<<2,[i,o,s,l]=r.subarray(a,a+4),u=o+s*t.MX+l*t.MX*t.MY;n.set(u,i,!1),this.matchCount--;let c=this.matchCount<<2;if(this.matches.copyWithin(a,c,c+4),t.matches(this.rules[i],o,s,l))return[i,o,s,l]}return ua}}class fa extends sa{async load(e,t,n){return!!await super.load(e,t,n)&&(this.newstate=new Uint8Array(n.state.length),!0)}add(e,t,n,r,a){let i=this.ip,o=this.grid,s=this.rules[e];if(i.rng.double()>s.p)return;this.last[e]=1;let{MX:l,MY:u}=o;for(let e=0;e<s.OMZ;e++)for(let a=0;a<s.OMY;a++)for(let c=0;c<s.OMX;c++){let f=s.output[c+a*s.OMX+e*s.OMX*s.OMY];isNaN(f);let d=t+c+(n+a)*l+(r+e)*l*u;255!==f&&f!==o.state[d]&&(this.newstate[d]=f,i.changes.push([t+c,n+a,r+e]))}this.matchCount++}run(){if(!super.run())return!1;let{ip:e,grid:t,newstate:n}=this;for(let r=e.first[e.counter];r<e.changes.length;r++){let[a,i,o]=e.changes[r],s=a+i*t.MX+o*t.MX*t.MY;t.state[s]=n[s]}return this.counter++,this.matchCount>0}}class da extends Pr{async load(e,t,n){if(this.shannon="True"===e.getAttribute("shannon"),this.tries=parseInt(e.getAttribute("tries"))||1e3,this.wave=new ha(n.state.length,this.P,this.propagator.length,this.shannon),this.startwave=new ha(n.state.length,this.P,this.propagator.length,this.shannon),this.stack=new Int32Array(this.wave.data.ROWS*this.P*2),this.shannon){this.weightLogWeights=new Float64Array(this.P);for(let e=0;e<this.P;e++)this.weightLogWeights[e]=this.weights[e]*Math.log(this.weights[e]),this.sumOfWeights+=this.weights[e],this.sumOfWeightLogWeights+=this.weightLogWeights[e];this.startingEntropy=Math.log(this.sumOfWeights)-this.sumOfWeightLogWeights/this.sumOfWeights}return this.distribution=new Float64Array(this.P),await super.load(e,t,this.newgrid)}reset(){super.reset(),this.n=-1,this.firstgo=!0}run(){if(this.n>=0)return super.run();if(this.firstgo){this.wave.init(this.propagator,this.sumOfWeights,this.sumOfWeightLogWeights,this.startingEntropy,this.shannon);for(let e=0;e<this.wave.data.ROWS;e++){let t=this.grid.state[e],n=this.map.get(t);if(n)for(let t=0;t<this.P;t++)n[t]||this.ban(e,t)}if(!this.propagate())return console.error("WFC initial conditions are contradictive"),!1;this.startwave.copyFrom(this.wave,this.shannon);let e=this.goodSeed();return null!==e&&(this.rng=yr()(e.toString()),this.stacksize=0,this.wave.copyFrom(this.startwave,this.shannon),this.firstgo=!1,this.newgrid.clear(),this.ip.grid=this.newgrid,!0)}{let e=this.nextUnobservedNode(this.rng);return e>=0?(this.observe(e,this.rng),this.propagate()):this.n++,this.n>=0&&this.updateState(),!0}}goodSeed(){for(let e=0;e<this.tries;e++){let t=0,n=this.ip.rng.int32();for(this.rng=yr()(n.toString()),this.stacksize=0,this.wave.copyFrom(this.startwave,this.shannon);;){let r=this.nextUnobservedNode(this.rng);if(!(r>=0))return console.log(`WFC found a good seed ${n} on try#${e} with ${t} observations`),n;if(this.observe(r,this.rng),t++,!this.propagate()){console.error(`CONTRADICTION on try#${e} with ${t} observations`);break}}}return console.error(`WFC failed to find a good seed in ${this.tries} tries`),null}nextUnobservedNode(e){let{MX:t,MY:n,MZ:r}=this.grid,a=this.N,i=1e4,o=-1;for(let s=0;s<r;s++)for(let l=0;l<n;l++)for(let u=0;u<t;u++){if(!this.periodic&&(u+a>t||l+a>n||s+1>r))continue;let c=u+l*t+s*t*n,f=this.wave.sumsOfOnes[c],d=this.shannon?this.wave.entropies[c]:f;if(f>1&&d<=i){let t=1e-6*e.double();d+t<i&&(i=d+t,o=c)}}return o}observe(e,t){let n=this.wave.data.row(e);for(let e=0;e<this.P;e++)this.distribution[e]=n.get(e)?this.weights[e]:0;let r=wr.sampleWeights(this.distribution,t.double());for(let t=0;t<this.P;t++)n.get(t)!==(t===r)&&this.ban(e,t)}propagate(){let{N:e,grid:t,periodic:n,propagator:r}=this,{MX:a,MY:i,MZ:o}=t;for(;this.stacksize>0;){let t=this.stack[this.stacksize-2],s=this.stack[this.stacksize-1];this.stacksize-=2;let l=t%a,u=~~(t%(a*i)/a),c=~~(t/(a*i));for(let t=0;t<r.length;t++){let f=l+da.DX[t],d=u+da.DY[t],h=c+da.DZ[t];if(!n&&(f<0||d<0||h<0||f+e>a||d+e>i||h+1>o))continue;f<0?f+=a:f>=a&&(f-=a),d<0?d+=i:d>=i&&(d-=i),h<0?h+=o:h>=o&&(h-=o);let p=f+d*a+h*a*i,m=r[t][s];for(let e=0;e<m.length;e++){let n=m[e],r=this.wave.compatible.get(t,n,p)-1;this.wave.compatible.set(t,n,p,r),0===r&&this.ban(p,n)}}}return this.wave.sumsOfOnes[0]>0}ban(e,t){let n=this.wave;n.data.set(t,e,!1);for(let r=0;r<this.propagator.length;r++)n.compatible.set(r,t,e,0);if(this.stack[this.stacksize+0]=e,this.stack[this.stacksize+1]=t,this.stacksize+=2,n.sumsOfOnes[e]-=1,this.shannon){let r=n.sumsOfWeights[e];n.entropies[e]+=n.sumsOfWeightLogWeights[e]/r-Math.log(r),n.sumsOfWeights[e]-=this.weights[t],n.sumsOfWeightLogWeights[e]-=this.weightLogWeights[t],r=n.sumsOfWeights[e],n.entropies[e]-=n.sumsOfWeightLogWeights[e]/r-Math.log(r)}}constructor(...e){super(...e),this.P=1,this.N=1,this.stacksize=0,this.sumOfWeights=0,this.sumOfWeightLogWeights=0,this.startingEntropy=0,this.map=new Map,this.firstgo=!0}}da.DX=new Int8Array([1,0,-1,0,0,0]),da.DY=new Int8Array([0,1,0,-1,0,0]),da.DZ=new Int8Array([0,0,0,0,1,-1]);class ha{init(e,t,n,r,a){this.data.fill();let i=this.data.COLS;for(let t=0;t<this.data.ROWS;t++)for(let n=0;n<i;n++)for(let r=0;r<e.length;r++)this.compatible.set(r,n,t,e[ha.opposite[r]][n].length);this.sumsOfOnes.fill(i),a&&(this.sumsOfWeights.fill(t),this.sumsOfWeightLogWeights.fill(n),this.entropies.fill(r))}copyFrom(e,t){this.data.copy(e.data),this.compatible.copy(e.compatible),this.sumsOfOnes.set(e.sumsOfOnes),t&&(this.sumsOfWeights.set(e.sumsOfWeights),this.sumsOfWeightLogWeights.set(e.sumsOfWeightLogWeights),this.entropies.set(e.entropies))}constructor(e,t,n,r){this.data=new Nr.WN(t,e),this.data.fill(),this.compatible=new Nr._6(Int32Array,n,t,e),this.compatible.arr.fill(-1),this.sumsOfOnes=new Int32Array(e),r&&(this.sumsOfWeights=new Float64Array(e),this.sumsOfWeightLogWeights=new Float64Array(e),this.entropies=new Float64Array(e))}}ha.opposite=new Uint8Array([2,3,0,1,5,4]);let pa=e=>!1;class ma extends da{async load(e,t,n){this.periodic="True"===e.getAttribute("periodic"),this.name=e.getAttribute("tileset");let r=e.getAttribute("tiles")||this.name;this.overlap=parseInt(e.getAttribute("overlap"))||0,this.overlapz=parseInt(e.getAttribute("overlapz"))||0;let a=`resources/tilesets/${this.name}.xml`,i=await Ar.xml(a),o="True"===i.getAttribute("fullSymmetry"),s=`${r}/${wr.matchTag(wr.matchTag(i,"tiles"),"tile").getAttribute("name")}.vox`,[l,u,c,f]=await Ar.vox(`resources/tilesets/${s}`);if(!l)return console.error(`Failed to load tileset ${s}`),!1;if(u!==c)return console.error(`Tiles should be square shaped: ${u} != ${c}`),!1;if(o&&u!=f)return console.error(`Tiles should be cube shaped for full symmetry option: ${u} != ${f}`),!1;this.S=u,this.SZ=f;let{overlap:d,overlapz:h}=this;if(this.newgrid=Or.build(e,(u-d)*n.MX+d,(u-d)*n.MY+d,(f-h)*n.MZ+h),!this.newgrid)return!1;this.votes=new Nr.dX(Uint32Array,this.newgrid.C,u*u*f,0),this.tiledata=[];let p=new Map,m=e=>(0,Nr.H)(Uint8Array,u,u,f,e),v=e=>m(((t,n,r)=>e[n+(u-1-t)*u+r*u*u])),g=e=>m(((t,n,r)=>e[r+n*u+(u-1-t)*u*u])),b=e=>m(((t,n,r)=>e[t+r*u+(u-1-n)*u*u])),y=e=>m(((t,n,r)=>e[u-1-t+n*u+r*u*u])),_=e=>m(((t,n,r)=>e[t+(u-1-n)*u+r*u*u])),w=e=>m(((t,n,r)=>e[t+n*u+(u-1-r)*u*u])),x=new Map,M=[],S=[],k=[...wr.matchTags(wr.matchTag(i,"tiles"),"tile")],A=0;for(let e of k){let t=e.getAttribute("name"),n=parseFloat(e.getAttribute("weight"))||1,a=`resources/tilesets/${r}/${t}.vox`,[i]=await Ar.vox(a);if(!i)return console.error(`Failed to load tile ${a}`),!1;let[s,l]=wr.ords(i,S);if(l>this.newgrid.C)return console.error(`There're more than ${this.newgrid.C} colors in vox files`),!1;let u=o?Cr.cubeSymmetries(s,v,g,y,wr.compareArr):Cr.squareSymmetries(s,v,y,wr.compareArr),c=new Uint8Array(128);for(let e of(x.set(t,u),u))this.tiledata.push(e),M.push(n),c[A]=1,A++;p.set(t,c)}let O=this.P=this.tiledata.length;for(let t of(console.log(`P = ${this.P}`),this.weights=new Float64Array(M),this.map=new Map,wr.childrenByTag(e,"rule"))){let r=t.getAttribute("in").charCodeAt(0),a=t.getAttribute("out").split("|"),i=new Uint8Array(O);for(let t of a){let n=p.get(t);if(!n)return console.error(e,`unknown tilename ${t}`),!1;for(let e=0;e<O;e++)n[e]&&(i[e]=1)}this.map.set(n.values.get(r),i)}this.map.has(0)||this.map.set(0,new Uint8Array(Array(O).fill(1)));let E=new Nr.tH(O,O,6,!1),C=e=>{for(let t=0;t<this.tiledata.length;t++)if(wr.compareArr(e,this.tiledata[t]))return t;return-1},T=e=>e?.split(" ").slice(-1)[0],P=e=>{let t=e.split(" "),n=2===t.length?t[0]:"",r=x.get(T(e))[0];for(let e=n.length-1;e>=0;e--){let t=n.charAt(e);if("x"===t)r=b(r);else if("y"===t)r=g(r);else{if("z"!==t)return console.error(`unknown symmetry ${t}`),null;r=v(r)}}return r},z=k.map((e=>e.getAttribute("name")));for(let e of(z.push(null),wr.matchTags(wr.matchTag(i,"neighbors"),"neighbor")))if(o){let t=e.getAttribute("left"),n=e.getAttribute("right");if(!z.includes(T(t))||!z.includes(T(n)))return console.error(e,`unknown tile "${T(t)}" or "${T(n)}" ("${t}", "${n}")`,z),!1;let r=P(t),a=P(n);if(!r||!a)return!1;let i=Cr.squareSymmetries(r,b,_,pa),o=Cr.squareSymmetries(a,b,_,pa);for(let e=0;e<i.length;e++)E.set(C(o[e]),C(i[e]),0,!0),E.set(C(y(i[e])),C(y(o[e])),0,!0);let s=v(r),l=v(a);var D=Cr.squareSymmetries(s,g,w,pa),I=Cr.squareSymmetries(l,g,w,pa);for(let e=0;e<D.length;e++)E.set(C(I[e]),C(D[e]),1,!0),E.set(C(_(D[e])),C(_(I[e])),1,!0);let u=g(r),c=g(a);var R=Cr.squareSymmetries(u,v,y,pa),j=Cr.squareSymmetries(c,v,y,pa);for(let e=0;e<R.length;e++)E.set(C(j[e]),C(R[e]),4,!0),E.set(C(w(R[e])),C(w(j[e])),4,!0)}else if(e.getAttribute("left")){let t=e.getAttribute("left"),n=e.getAttribute("right");if(!z.includes(T(t))||!z.includes(T(n)))return console.error(e,`unknown tile "${T(t)}" or "${T(n)}" ("${t}", "${n}")`,z),!1;let r=P(t),a=P(n);if(!r||!a)return!1;E.set(C(a),C(r),0,!0),E.set(C(_(a)),C(_(r)),0,!0),E.set(C(y(r)),C(y(a)),0,!0),E.set(C(_(y(r))),C(_(y(a))),0,!0);let i=v(r),o=v(a);E.set(C(o),C(i),1,!0),E.set(C(y(o)),C(y(i)),1,!0),E.set(C(_(i)),C(_(o)),1,!0),E.set(C(y(_(i))),C(y(_(o))),1,!0)}else{let t=e.getAttribute("top"),n=e.getAttribute("bottom");if(!z.includes(T(t))||!z.includes(T(n)))return console.error(e,`unknown tile "${T(t)}" or "${T(n)}" ("${t}", "${n}")`,z),!1;let r=P(t),a=P(n);if(!r||!a)return!1;let i=Cr.squareSymmetries(r,v,y,pa),o=Cr.squareSymmetries(a,v,y,pa);for(let e=0;e<i.length;e++)E.set(C(i[e]),C(o[e]),4,!0)}for(let e=0;e<O;e++)for(let t=0;t<O;t++)E.set(t,e,2,E.get(e,t,0)),E.set(t,e,3,E.get(e,t,1)),E.set(t,e,5,E.get(e,t,4));let L=Array.from({length:6},(e=>Array.from({length:O},(e=>[]))));return this.propagator=Array.from({length:6},((e,t)=>Array.from({length:O},((e,n)=>{let r=L[t][n];for(let e=0;e<O;e++)E.get(e,n,t)&&r.push(e);return new Int32Array(r)})))),await super.load(e,t,n)}updateState(){let{newgrid:e,grid:t,wave:n,S:r,SZ:a,P:i,tiledata:o,overlap:s,overlapz:l,votes:u}=this,c=ma.state_rng;for(let f=0;f<t.MZ;f++)for(let d=0;d<t.MY;d++)for(let h=0;h<t.MX;h++){let p=n.data.row(h+d*t.MX+f*t.MX*t.MY);u.fill(0);for(let e=0;e<i;e++)if(p.get(e)){let t=o[e];for(let e=0;e<a;e++)for(let n=0;n<r;n++)for(let a=0;a<r;a++){let i=a+n*r+e*r*r;u.incre(t[i],i)}}for(let t=0;t<a;t++)for(let n=0;n<r;n++)for(let i=0;i<r;i++){let o=u.row(i+n*r+t*r*r),p=-1,m=255;for(let e=0;e<o.length;e++){let t=o[e]+.1*c.double();t>p&&(m=e,p=t)}let v=h*(r-s)+i,g=d*(r-s)+n,b=f*(a-l)+t;e.state[v+g*e.MX+b*e.MX*e.MY]=m}}}}ma.state_rng=(0,br.alea)("",{entropy:!0});class va extends da{async load(e,t,n){if(1!==n.MZ)return console.error("overlapping model currently works only for 2d"),!1;let r=this.N=parseInt(e.getAttribute("n"))||3,a=e.getAttribute("symmetry"),i=Cr.getSymmetry(!0,a,t);if(!i)return console.error(e,`unknown symmetry ${a}`),!1;let o="False"!==e.getAttribute("periodicInput");if(this.newgrid=Or.build(e,n.MX,n.MY,n.MZ),!this.newgrid)return!1;this.periodic=!0,this.name=e.getAttribute("sample");let[s,l,u]=await Ar.bitmap(`resources/samples/${this.name}.png`);if(!s)return console.error(`Failed to read sample ${this.name}`),!1;let[c,f]=wr.ords(s);if(f>this.newgrid.C)return console.error(`There're more than ${this.newgrid.C} colors in the sample`),!1;let d=wr.intPower(f,r*r),h=e=>{let t=new Uint8Array(r*r);for(let n=0;n<r;n++)for(let a=0;a<r;a++)t[a+n*r]=e(a,n);return t},p=(e,t)=>h(((n,r)=>c[(e+n)%l+(t+r)%u*l])),m=e=>h(((t,n)=>e[r-1-n+t*r])),v=e=>h(((t,n)=>e[r-1-t+n*r])),g=BigInt(f),b=(e,t=new Uint8Array(r*r))=>{let n=e,a=BigInt(d);for(let e=0;e<t.length;e++){a/=g;let r=0;for(;n>=a;)n-=a,r++;t[e]=r}return t},y=new Map,_=[],w=o?n.MY:n.MY-r+1,x=o?n.MX:n.MX-r+1,M=Array.from({length:8});for(let e=0;e<w;e++)for(let t=0;t<x;t++){M[0]=p(t,e),M[1]=v(M[0]),M[2]=m(M[0]),M[3]=v(M[2]),M[4]=m(M[2]),M[5]=v(M[4]),M[6]=m(M[4]),M[7]=v(M[6]);for(let e=0;e<8;e++)if(i[e]){let t=wr.indexByteArr(M[e],g),n=y.get(t);void 0!==n?y.set(t,n+1):(y.set(t,1),_.push(t))}}let S=this.P=y.size;console.log(`number of patterns P = ${S}`),this.patterns=new Nr.dX(Uint8Array,r*r,S),this.weights=new Float64Array(S);let k=0;for(let e of _)b(e,this.patterns.row(k)),this.weights[k]=y.get(e),k++;let A=(e,t,n,a)=>{let i=n<0?0:n,o=n<0?n+r:r,s=a<0?a+r:r;for(let l=a<0?0:a;l<s;l++)for(let s=i;s<o;s++)if(e[s+r*l]!=t[s-n+r*(l-a)])return!1;return!0};this.propagator=[,,,,];for(let e=0;e<4;e++){this.propagator[e]=Array(S);for(let t=0;t<S;t++){let n=[];for(let r=0;r<S;r++)A(this.patterns.row(t),this.patterns.row(r),va.DX[e],va.DY[e])&&n.push(r);this.propagator[e][t]=new Int32Array(n)}}for(let t of(this.map=new Map,wr.childrenByTag(e,"rule"))){let e=t.getAttribute("in").charCodeAt(0),r=t.getAttribute("out").split("|").map((e=>this.newgrid.values.get(e.charCodeAt(0)))),a=new Uint8Array(Array.from({length:S},((e,t)=>r.includes(this.patterns.get(0,t))?1:0)));this.map.set(n.values.get(e),a)}return this.map.has(0)||this.map.set(0,new Uint8Array(Array(S).fill(1))),this.votes=new Nr.dX(Uint32Array,this.newgrid.C,this.newgrid.state.length,0),await super.load(e,t,n)}updateState(){let{newgrid:e,wave:t,patterns:n,P:r,N:a,votes:i}=this,{MX:o,MY:s}=e,l=va.state_rng,u=i.arr,c=i.ROWS,f=i.COLS;u.fill(0);let d=t.data.ROWS;for(let e=0;e<r;e++){let r=n.row(e);for(let n=0;n<d;n++){let i=n%o,l=~~(n/o);if(t.data.get(e,n))for(let e=0;e<a;e++){let t=l+e;t>=s&&(t-=s);for(let n=0;n<a;n++){let s=i+n;s>=o&&(s-=o),u[r[n+e*a]+(s+t*o)*f]++}}}}for(let t=0;t<c;t++){let n=-1,r=255,a=t*f;for(let e=0;e<f;e++){let t=u[a+e]+.1*l.double();t>n&&(r=e,n=t)}e.state[t]=r}}}va.state_rng=(0,br.alea)("",{entropy:!0});class ga{static async load(e,t,n,r){let a=new ga;if(a.origin="True"===e.getAttribute("origin"),a.grid=Or.build(e,t,n,r),!a.grid)return console.error("Failed to load grid"),null;a.startgrid=a.grid;let i=e.getAttribute("symmetry"),o=new Uint8Array(1===a.grid.MZ?8:48);o.fill(1);let s=Cr.getSymmetry(1===a.grid.MZ,i,o);if(!s)return console.error(e,`unknown symmetry ${i}`),null;let l=await Tr.factory(e,s,a,a.grid);return l?(a.root=l instanceof Pr?l:new Dr(l,a),a):null}*run(e,t){if(this.rng=yr()(e.toString()),this.grid=this.startgrid,this.grid.clear(),this.origin){let e=~~(this.grid.MX/2)+~~(this.grid.MY/2)*this.grid.MX+~~(this.grid.MZ/2)*this.grid.MX*this.grid.MY;this.grid.state[e]=1}for(this.changes.splice(0,this.changes.length),this.first.splice(0,this.first.length),this.first.push(0),this.root.reset(),this.current=this.root,this.counter=0;this.current&&(t<=0||this.counter<t);)yield[this.grid.state,this.grid.characters,this.grid.MX,this.grid.MY,this.grid.MZ],this.current.run(),this.counter++,this.first.push(this.changes.length);yield[this.grid.state,this.grid.characters,this.grid.MX,this.grid.MY,this.grid.MZ]}onRender(){this.current instanceof da&&this.current.n<0&&this.current.updateState()}final(){let e=this.grid;return[e.state,e.characters,e.MX,e.MY,e.MZ]}constructor(){this.changes=[],this.first=[],this.counter=0}}var ba=function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};let ya={isometric:_r.uD,voxel:_r.j};class _a{static loadPalette(){let e=Ar.xmlParse('\ufeff<colors>\n  <color symbol="B" value="000000" comment="Black"/>\n  <color symbol="I" value="1D2B53" comment="Indigo"/>\n  <color symbol="P" value="7E2553" comment="Purple"/>\n  <color symbol="E" value="008751" comment="Emerald"/>\n  <color symbol="N" value="AB5236" comment="browN"/>\n  <color symbol="D" value="5F574F" comment="Dead, Dark"/>\n  <color symbol="A" value="C2C3C7" comment="Alive, grAy"/>\n  <color symbol="W" value="FFF1E8" comment="White"/>\n  <color symbol="R" value="FF004D" comment="Red"/>\n  <color symbol="O" value="FFA300" comment="Orange"/>\n  <color symbol="Y" value="FFEC27" comment="Yellow"/>\n  <color symbol="G" value="00E436" comment="Green"/>\n  <color symbol="U" value="29ADFF" comment="blUe"/>\n  <color symbol="S" value="83769C" comment="Slate"/>\n  <color symbol="K" value="FF77A8" comment="pinK"/>\n  <color symbol="F" value="FFCCAA" comment="Fawn"/>\n  \n  <color symbol="b" value="291814" comment="black"/>\n  <color symbol="i" value="111d35" comment="indigo"/>\n  <color symbol="p" value="422136" comment="purple"/>\n  <color symbol="e" value="125359" comment="emerald"/>\n  <color symbol="n" value="742f29" comment="brown"/>\n  <color symbol="d" value="49333b" comment="dead, dark"/>\n  <color symbol="a" value="a28879" comment="alive, gray"/>\n  <color symbol="w" value="f3ef7d" comment="white"/>\n  <color symbol="r" value="be1250" comment="red"/>\n  <color symbol="o" value="ff6c24" comment="orange"/>\n  <color symbol="y" value="a8e72e" comment="yellow"/>\n  <color symbol="g" value="00b543" comment="green"/>\n  <color symbol="u" value="065ab5" comment="blue"/>\n  <color symbol="s" value="754665" comment="slate"/>\n  <color symbol="k" value="ff6e59" comment="pink"/>\n  <color symbol="f" value="ff9d81" comment="fawn"/>\n  \n  <color symbol="C" value="00ffff" comment="Cyan"/>\n  <color symbol="c" value="5fcde4" comment="cyan"/>\n  <color symbol="H" value="e4bb40" comment="Honey"/>\n  <color symbol="h" value="8a6f30" comment="honey"/>\n  <color symbol="J" value="4b692f" comment="Jungle"/>\n  <color symbol="j" value="45107e" comment="jungle"/>\n  <color symbol="L" value="847e87" comment="Light"/>\n  <color symbol="l" value="696a6a" comment="light"/>\n  <color symbol="M" value="ff00ff" comment="Magenta"/>\n  <color symbol="m" value="9c09cc" comment="magenta"/>\n  <color symbol="Q" value="9badb7" comment="aQua"/>\n  <color symbol="q" value="3f3f74" comment="aqua"/>\n  <color symbol="T" value="37946e" comment="Teal"/>\n  <color symbol="t" value="323c39" comment="teal"/>\n  <color symbol="V" value="8f974a" comment="oliVe"/>\n  <color symbol="v" value="524b24" comment="olive"/>\n  <color symbol="X" value="ff0000" comment="X"/>\n  <color symbol="x" value="d95763" comment="x"/>\n  <color symbol="Z" value="ffffff" comment="Z"/>\n  <color symbol="z" value="cbdbfc" comment="z"/>\n</colors>'),t=[...wr.childrenByTag(e,"color")];this.palette=new Map(t.map((e=>[e.getAttribute("symbol").charAt(0),wr.hex2rgba(e.getAttribute("value"))])))}static listModels(){let e=Ar.xmlParse('<models>\r\n  <model name="Apartemazements" size="8" d="3" />\r\n  <model name="CarmaTower" length="12" width="12" height="18"/>\r\n  <model name="ModernHouse" length="9" width="9" height="4" />\r\n  <model name="SeaVilla" length="10" width="10" height="4" />\r\n  \r\n  <model name="Island" size="400" steps="-1" pixelsize="1">\r\n    <color symbol="I" value="abcbe8" comment="sea"/>\r\n    <color symbol="U" value="cee6f9" comment="coast and lakes"/>\r\n    <color symbol="T" value="2b8aa9" comment="rivers"/>\r\n    <color symbol="Y" value="f1ebc2" comment="sand"/>\r\n    <color symbol="G" value="a8d1a5" comment="grass"/>\r\n    <color symbol="E" value="93c08d" comment="forest"/>\r\n    <color symbol="S" value="d0d8ac" comment="slopes"/>\r\n    <color symbol="s" value="e9e0b2" comment="hills"/>\r\n  </model>\r\n  <model name="Backtracker" size="89"/>\r\n  <model name="BacktrackerCycle" size="59"/>\r\n  <model name="Basic" size="60" steps="3600"/>\r\n  <model name="BasicBrickWall" size="30"/>\r\n  <model name="BasicDijkstraDungeon" size="60"/>\r\n  <model name="BasicDijkstraFill" size="60"/>\r\n  <model name="BasicDungeonGrowth" size="59"/>\r\n  <model name="BasicPartitioning" size="60" steps="1000"/>\r\n  <model name="BernoulliPercolation" size="359"/>\r\n  <model name="BiasedGrowth" size="120" steps="1000"/>\r\n  <model name="BiasedGrowthContraction" size="120" steps="5000"/>\r\n  <model name="BiasedMazeGrowth" size="117" steps="400"/>\r\n  <model name="BiasedVoronoi" size="80" steps="1000"/>\r\n  <model name="BishopParity" size="60"/>\r\n  <model name="BlueNoise" size="80" steps="500"/>\r\n  <model name="Cave" size="60"/>\r\n  <model name="CaveContour" size="80"/>\r\n  <model name="CentralCrawlers" size="60" steps="300"/>\r\n  <model name="CentralSAW" size="59"/>\r\n  <model name="ChainDungeon" size="60"/>\r\n  <model name="ChainDungeonMaze" size="60"/>\r\n  <model name="ChainMaze" size="60"/>\r\n  <model name="Circuit" size="59" steps="1200"/>\r\n  <model name="ClosedSurface" size="12" d="3"/>\r\n  <model name="ColoredKnots" size="12" d="3"/>\r\n  <model name="CompleteSAW" size="19"/>\r\n  <model name="CompleteSAWSmart" size="23"/>\r\n  <model name="ConnectedCaves" size="60"/>\r\n  <model name="ConstrainedCaves" size="60"/>\r\n  <model name="Counting" size="8" d="3"/>\r\n  <model name="Coupling" size="80"/>\r\n  <model name="CrawlersChase" size="60" steps="200"/>\r\n  <model name="CrossCountry" size="80"/>\r\n  <model name="Cycles" size="59"/>\r\n  <model name="DenseSAW" size="59" />\r\n  <model name="DiagonalPath" size="80"/>\r\n  <model name="Digger" size="359" steps="50000"/>\r\n  <model name="DijkstraDungeon" size="40" />\r\n  <model name="DualRetraction" size="59"/>\r\n  <model name="DualRetraction3D" size="27" d="3"/>\r\n  <model name="DungeonGrowth" size="79" />\r\n  <model name="Dwarves" size="20" steps="85"/>\r\n  <model name="Escher" size="8" d="3"/>\r\n  <model name="EscherSurface" size="8" d="3"/>\r\n  <model name="EuclideanPath" size="80"/>\r\n  <model name="FindLongCycle" size="27" pixelsize="10"/>\r\n  <model name="FireNoise" size="300"/>\r\n  <model name="Flowers" size="60"/>\r\n  <model name="Forest" size="240"/>\r\n  <model name="ForestFire" size="600" steps="1000" pixelsize="1"/>\r\n  <model name="ForestFireCA" size="600" steps="80" pixelsize="1"/>\r\n  <model name="GameOfLife" size="120" steps="100"/>\r\n  <model name="Growth" size="359" steps="128880" pixelsize="2" />\r\n  <model name="Growth" size="29" d="3" steps="3000"/>\r\n  <model name="GrowthCompetition" size="80" steps="30000"/>\r\n  <model name="GrowthContraction" size="79" steps="10000"/>\r\n  <model name="GrowthWalk" size="79" steps="5000"/>\r\n  <model name="GrowTo" size="120" steps="2000"/>\r\n  <model name="HamiltonianPath" size="39" steps="150000"/>\r\n  <model name="HamiltonianPaths" size="39" steps="1000"/>\r\n  <model name="Hills" length="40" width="40" height="12" d="3"/>\r\n  <model name="IrregularMazeGrowth" size="79"/>\r\n  <model name="IrregularSAW" size="79"/>\r\n  <model name="Keys" size="33"/>\r\n  <model name="Keys" size="23" d="3"/>\r\n  <model name="KnightPatrol" size="60" steps="200"/>\r\n  <model name="Knots2D" size="12"/>\r\n  <model name="Knots3D" size="8" d="3"/>\r\n  <model name="Laplace" size="60" steps="1000"/>\r\n  <model name="LoopGrowth" size="37"/>\r\n  <model name="LostCity" size="256" pixelsize="3"/>\r\n  <model name="MarchingSquares" size="20"/>\r\n  <model name="MazeBacktracker" size="359" steps="20000"/>\r\n  <model name="MazeBacktracker" size="967" pixelsize="1" steps="200000"/>\r\n  <model name="MazeGrowth" size="359"/>\r\n  <model name="MazeGrowth" size="27" d="3"/>\r\n  <model name="MazeMap" size="30"/>\r\n  <model name="MazeTrail" size="59" steps="1000"/>\r\n  <model name="MazeTrail" size="27" d="3" steps="1000"/>\r\n  <model name="MultiHeadedDungeon" size="55"/>\r\n  <model name="MultiHeadedWalk" size="99"/>\r\n  <model name="MultiHeadedWalkDungeon" size="59"/>\r\n  <model name="NestedGrowth" size="80" steps="100"/>\r\n  <model name="NoDeadEnds" size="39"/>\r\n  <model name="NoDeadEnds" size="19" d="3"/>\r\n  <model name="Noise" size="80"/>\r\n  <model name="Noise" size="24" d="3"/>\r\n  <model name="NystromDungeon" size="39"  pixelsize="8" gui="150"/>\r\n  <model name="OddScale" size="8"/>\r\n  <model name="OddScale3D" size="8" d="3"/>\r\n  <model name="OpenCave" size="80"/>\r\n  <model name="OpenCave3D" size="40" d="3"/>\r\n  <model name="OrganicMechanic" size="30" steps="200"/>\r\n  <model name="OrientedEscher" size="6" d="3"/>\r\n  <model name="PaintCompetition" size="48" steps="400"/>\r\n  <model name="ParallelGrowth" size="29" d="3" steps="24"/>\r\n  <model name="ParallelMazeGrowth" size="179"/>\r\n  <model name="Partitioning" length="11" width="11" height="3"/>\r\n  <model name="Percolation" size="360"/>\r\n  <model name="PeriodicEscher" size="8" d="3"/>\r\n  <model name="PillarsOfEternity" size="9" d="3"/>\r\n  <model name="Push" size="40" steps="8000"/>\r\n  <model name="PutColoredLs" size="30"/>\r\n  <model name="PutLs" size="50"/>\r\n  <model name="RainbowGrowth" size="59" steps="3481"/>\r\n  <model name="RegularPath" size="79"/>\r\n  <model name="RegularSAW" size="39"/>\r\n  <model name="RegularSAW" size="19" d="3"/>\r\n  <model name="RegularSAWRestart" size="39"/>\r\n  <model name="RegularSAWRestart" size="19" d="3"/>\r\n  <model name="River" size="80" />\r\n  <model name="River" size="20" d="3" />\r\n  <model name="SAWRestart" size="79" steps="2000"/>\r\n  <model name="SelectLargeCaves" size="60"/>\r\n  <model name="SelectLongKnots" size="10" d="3"/>\r\n  <model name="SelfAvoidingWalk" size="39"/>\r\n  <model name="Sewers" size="40"/>\r\n  <model name="SmarterDigger" size="40" steps="800"/>\r\n  <model name="SmartSAW" size="19"/>\r\n  <model name="SmoothTrail" size="59"/>\r\n  <model name="SnellLaw" size="80"/>\r\n  <model name="SoftPath" size="180"/>\r\n  <model name="SoftPath" size="80" d="3"/>\r\n  <model name="StairsPath" size="33" d="3"/>\r\n  <model name="StochasticVoronoi" size="200"/>\r\n  <model name="StochasticVoronoi" size="50" d="3" steps="-1"/>\r\n  <model name="StormySnellLaw" size="120"/>\r\n  <model name="StrangeNoise" size="60" steps="500"/>  \r\n  <model name="StrangeDungeon" size="59"/>\r\n  <model name="StrangeDungeon" size="29" d="3"/>\r\n  <model name="StrangeGrowth" size="59" steps="700"/>\r\n  <model name="SubmergedKnots" size="12" d="3"/>\r\n  <model name="Surface" size="10" d="3"/>\r\n  <model name="Tetris" size="30" steps="1500"/>\r\n  <model name="Texture" size="240"/>\r\n  <model name="TileDungeon" size="12" />\r\n  <model name="Trail" size="59" steps="3000"/>\r\n  <model name="Voronoi" size="240"/>\r\n  <model name="Voronoi" size="60" d="3"/>\r\n  <model name="WaveBrickWall" size="50"/>\r\n  <model name="WaveDungeon" size="50"/>\r\n  <model name="WaveFlowers" size="60"/>\r\n  <model name="WolfBasedApproach" size="70" steps="300"/>\r\n  \r\n  gifs\r\n  \x3c!--<model name="Wilson" size="59" steps="1000" gui="150" gif="True"/>--\x3e\r\n  <model name="BasicSnake" size="50" steps="1000" pixelsize="10" />\r\n  \x3c!--<model name="Chase" size="60" steps="200" gif="True"/>--\x3e\r\n\r\n  \x3c!--<model name="MultiSokoban9" size="9"  pixelsize="20" gif="True"/>--\x3e\r\n  \x3c!--<model name="MultiSokoban8" size="8"  pixelsize="20" gif="True"/>--\x3e\r\n  <model name="SokobanLevel1" length="14" width="9"  pixelsize="21" />\r\n  <model name="SokobanLevel2" length="5" width="4"  pixelsize="21" gif="True"/>\r\n  \x3c!--<model name="SequentialSokoban" size="20" gif="True"/>--\x3e\r\n\r\n  benchmarks\r\n  \x3c!--<model name="MazeGrowth" size="967"  pixelsize="1" steps="200000"/> 1.7--\x3e\r\n  \x3c!--<model name="ParallelMazeGrowth" size="967"  pixelsize="1"/> 2.0--\x3e\r\n  \x3c!--<model name="MazeBacktracker" size="967"  pixelsize="1" steps="200000"/> 2.3--\x3e\r\n</models>\r\n\r\n\x3c!--\r\n\r\n--\x3e\r\n');for(let t of(this.models.clear(),wr.childrenByTag(e,"model"))){let e=t.getAttribute("name")?.toUpperCase()||"MODEL",n=(r=null)=>{let a=null===r?e:`${e}_${r}`;this.models.has(a)?n(r?r+1:1):this.models.set(a,t)};n()}}debug(){}load(){return this._loadPromise}get paused(){return this._paused}set speed(e){e<=0?(this._speed=0,this._delay=Math.abs(e)):(this._speed=~~e,this._delay=0)}get speed(){return this._delay?-this._delay:this._speed}get running(){return!!this._curr}get seed(){return this._seed}start(e){return this.ip=null,this._curr=null,this.output=null,this.loading?Promise.resolve(!1):(this.loading=!0,this._loadPromise.then((async t=>!!t&&(this._steps=e?.steps||-1,this.ip=await ga.load(this.modelDoc,this.DIM[0],this.DIM[1],this.DIM[2]),Ot((()=>{this.loading=!1,this._timer=0,this._paused=!1,this.loop()})),!0))))}pause(){this._paused=!0}resume(){this._paused=!1,this.loop()}step(){this.loop(!0)}randomize(){this._seed=_a.meta.int32()}loop(e=!1,t=!0){if(!e&&this._paused)return;let n=performance.now();if(this._curr||(this._curr=this.ip?.run(this._seed,this._steps)),!this._curr)return;let r=this._curr.next();if(this._speed>0)for(let e=0;e<this._speed&&(r=this._curr.next(),!(performance.now()-n>20));e++);let a=performance.now();if(this._timer+=a-n,r.done){this._curr=null;let[e,t,n,r,a]=this.ip.final();if(this.ip.onRender(),this.renderer.setCharacters(t),this.renderer.update(n,r,a),this.renderer.render(e),this.rendered++,a>1){let i=this.renderer.palette,o=t.split("").map((e=>i.get(e)));this.output={name:`${this.name}_${this._seed}.vox`,buffer:kr.serialize(e,n,r,a,o)}}console.log(`Time: ${this._timer.toFixed(2)}ms`)}else if(e||(this._delay?setTimeout((()=>Ot((()=>this.loop()))),this._delay):requestAnimationFrame((()=>Ot((()=>this.loop()))))),t){let[e,t,n,a,i]=r.value;this.ip.onRender(),this.renderer.setCharacters(t),this.renderer.update(n,a,i),this.renderer.render(e),this.rendered++}}get MX(){return this.DIM[0]}get MY(){return this.DIM[1]}get MZ(){return this.DIM[2]}get renderType(){let e=this.renderer;return e instanceof _r.TT?"bitmap":e instanceof _r.uD?"isometric":e instanceof _r.j?"voxel":null}toggleRender(e){let t=this.renderer.palette;this.renderer.canvas.remove(),this.renderer.dispose(),this.rendered=0,this.renderer=new ya[e],this.renderer.palette=t,this.renderer.clear(),document.getElementById("canvas-container").appendChild(this.renderer.canvas);let[n,r,a,i,o]=this.ip.final();this.ip.onRender(),this.renderer.setCharacters(r),this.renderer.update(a,i,o),this.renderer.render(n),this.rendered++}stop(){this.pause(),this.renderer.canvas.remove(),this.renderer.dispose()}constructor(e){this._timer=0,this._steps=-1,this.default3DrenderType=_r.j.supported?"voxel":"isometric",this.rendered=0,this.DIM=new Int32Array([-1,-1,-1]),this._curr=null,this._seed=null,this._speed=0,this._delay=0,this._paused=!1,this.loading=!1,this.output=null,_a.palette||console.error("Load palette first before running any model");let t=this.modelDescriptor=_a.models.get(e?.toUpperCase());if(!this.modelDescriptor)return;_a.instance=this;let n=this.name=t.getAttribute("name"),r=parseInt(t.getAttribute("size"))||-1,a=parseInt(t.getAttribute("d"))||2;this.DIM[0]=parseInt(t.getAttribute("length"))||r,this.DIM[1]=parseInt(t.getAttribute("width"))||r,this.DIM[2]=parseInt(t.getAttribute("height"))||(2===a?1:r),this.renderer=1===this.DIM[2]?new _r.TT:new ya[this.default3DrenderType],this.renderer.clear(),document.getElementById("canvas-container").appendChild(this.renderer.canvas),this._loadPromise=(async()=>{let e=`models/${n}.xml`;if(!(this.modelDoc=await Ar.xml(e)))return console.error(`Failed to load ${e}`),!1;let r=t.getAttribute("seeds")?.split(" ").map((e=>parseInt(e))),a=new Map(_a.palette.entries());for(let e of wr.childrenByTag(t,"color"))a.set(e.getAttribute("symbol").charAt(0),wr.hex2rgba(e.getAttribute("value")));return this.renderer.palette=a,Ot((()=>{this._seed=r?.[0]||_a.meta.int32()})),!0})(),en(this)}}_a.meta=yr()(),_a.models=new Map,ba([Ae],_a.prototype,"renderer",void 0),ba([Ae],_a.prototype,"_curr",void 0),ba([Ae],_a.prototype,"_seed",void 0),ba([Ae],_a.prototype,"_speed",void 0),ba([Ae],_a.prototype,"_delay",void 0),ba([Ae],_a.prototype,"_paused",void 0),ba([Ae],_a.prototype,"loading",void 0),ba([Ae],_a.prototype,"output",void 0),ba([kt],_a.prototype,"debug",null),ba([kt],_a.prototype,"load",null),ba([Te],_a.prototype,"paused",null),ba([Te],_a.prototype,"speed",null),ba([Te],_a.prototype,"running",null),ba([Te],_a.prototype,"seed",null),ba([kt],_a.prototype,"start",null),ba([kt],_a.prototype,"pause",null),ba([kt],_a.prototype,"resume",null),ba([kt],_a.prototype,"step",null),ba([kt],_a.prototype,"randomize",null),ba([Te],_a.prototype,"MX",null),ba([Te],_a.prototype,"MY",null),ba([Te],_a.prototype,"MZ",null),ba([Te],_a.prototype,"renderType",null),ba([kt],_a.prototype,"toggleRender",null),ba([kt],_a.prototype,"stop",null);var wa=__webpack_require__(379),xa=__webpack_require__.n(wa),Ma=__webpack_require__(795),Sa=__webpack_require__.n(Ma),ka=__webpack_require__(569),Aa=__webpack_require__.n(ka),Oa=__webpack_require__(565),Ea=__webpack_require__.n(Oa),Ca=__webpack_require__(216),Ta=__webpack_require__.n(Ca),Pa=__webpack_require__(589),za=__webpack_require__.n(Pa),Da=__webpack_require__(998),Ia={};Ia.styleTagTransform=za(),Ia.setAttributes=Ea(),Ia.insert=Aa().bind(null,"head"),Ia.domAPI=Sa(),Ia.insertStyleElement=Ta(),xa()(Da.Z,Ia),Da.Z&&Da.Z.locals&&Da.Z.locals;let Ra="localhost"===location.hostname,ja=_r.j.supported,La=function(e,t){if(mr&&e.$$typeof===mr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(lr())return e;var n=null!==void 0&&!1,r=e,a=e.displayName||e.name;if(pr&&e.$$typeof===pr&&(n=!0,"function"!=typeof(r=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var i,o,s=function(e,t){return function(e,t){if(void 0===t&&(t="observed"),lr())return e();var n=ur(Qn.useState(dr),1)[0],r=ur(Qn.useState(),2)[1],a=function(){return r([])},i=Qn.useRef(null);if(!i.current)var o=new ht(cr(t),(function(){s.mounted?a():s.changedBeforeMount=!0})),s=ir(i,o,n);var l,u,c=i.current.reaction;if(Qn.useDebugValue(c,er),Qn.useEffect((function(){return or(i),i.current?(i.current.mounted=!0,i.current.changedBeforeMount&&(i.current.changedBeforeMount=!1,a())):(i.current={reaction:new ht(cr(t),(function(){a()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},a()),function(){i.current.reaction.dispose(),i.current=null}}),[]),c.track((function(){try{l=e()}catch(e){u=e}})),u)throw u;return l}((function(){return r(e,t)}),a)};return""!==a&&(s.displayName=a),e.contextTypes&&(s.contextTypes=e.contextTypes),n&&(s=(0,Qn.forwardRef)(s)),s=(0,Qn.memo)(s),i=e,o=s,Object.keys(i).forEach((function(e){vr[e]||Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})),s}((({model:n,close:r})=>{let[a,i]=(0,Qn.useState)(null);return(0,Qn.useEffect)((()=>{if(!n)return()=>{};let e=new _a(n);return e.load().then((e=>e?console.log(`Model loaded: ${n}`):r())),i(e),()=>{e.stop()}}),[n]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"controls",children:[(0,e.jsx)("h3",{id:"model-select",children:n}),a&&(0,e.jsxs)(e.Fragment,{children:[" ",(0,e.jsxs)("p",{children:["size:"," ",a.MZ>1?`${a.MX}x${a.MY}x${a.MZ}`:`${a.MX}x${a.MY}`,"  ","seed: ",a.seed]}),a.loading?(0,e.jsx)("p",{children:"loading..."}):(0,e.jsxs)("div",{className:"control-buttons",children:[a.running?(0,e.jsx)("button",{onClick(){a.paused?a.resume():a.pause()},children:a.paused?"resume":"pause"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("button",{onClick:()=>a.start(),children:"Start"}),(0,e.jsx)("button",{onClick:()=>a.randomize(),children:"Randomize Seed"})]}),a.paused&&(0,e.jsx)("button",{onClick:()=>a.step(),children:"Step"}),a.output&&(0,e.jsx)("button",{id:"vox-download",onClick:()=>(0,t.saveAs)(new Blob([a.output.buffer]),a.output.name),children:"Download Output"}),ja&&"bitmap"!==a.renderType&&a.MZ>1&&(0,e.jsx)("button",{onClick:()=>a.toggleRender("voxel"===a.renderType?"isometric":"voxel"),children:"voxel"===a.renderType?"Isometric":"Voxel"}),Ra&&(0,e.jsx)("button",{id:"debug",onClick:()=>a.debug(),children:"debug 😭"})]})]})]}),a&&(0,e.jsxs)("div",{id:"speed",children:[(0,e.jsx)("label",{style:{left:`calc(${(a.speed+200)/400*100}% + ${Math.max(50-a.speed,0)/10}px)`},children:a.speed>=0?`x${a.speed||1}`:-a.speed+"ms"}),(0,e.jsx)("input",{id:"speed-bar",type:"range",min:-200,max:200,step:1,value:a.speed,onChange:e=>a.speed=e.target.valueAsNumber})]})]})}));_a.loadPalette(),_a.listModels(),(0,gr.s)(document.getElementById("app")).render((0,e.jsx)((()=>{let[t,n]=(0,Qn.useState)(null);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"left-column",children:[(0,e.jsx)("h1",{id:"title",children:"MarkovJunior"}),(0,e.jsx)("div",{className:"model-list",children:[..._a.models.keys()].map((r=>(0,e.jsx)("div",{"data-selected":t===r,onClick:()=>n(r),children:r},r)))})]}),(0,e.jsx)("div",{id:"canvas-container",children:(0,e.jsx)(La,{model:t,close:()=>n(null)})}),(0,e.jsx)("div",{id:"mobile-select",children:(0,e.jsxs)("select",{defaultValue:"disabled",onChange:e=>n(e.target.value),children:[(0,e.jsx)("option",{value:"disabled",disabled:!0,children:"SELECT MODEL"}),[..._a.models.keys()].map((t=>(0,e.jsx)("option",{value:t,children:t},t)))]})})]})}),{}))})()})();