/*! For license information please see index.js.LICENSE.txt */
(()=>{var __webpack_modules__={998:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(81),i=n.n(r),a=n(645),o=n.n(a)()(i());o.push([e.id,"@import url(https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css);"]),o.push([e.id,'html,\r\nbody,\r\n#app {\r\n    padding: 0;\r\n    position: absolute !important;\r\n    top: 0px;\r\n    left: 0px;\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 0px;\r\n    overflow: hidden;\r\n    user-select: none;\r\n    scroll-behavior: smooth;\r\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial,\r\n        sans-serif, "Apple Color Emoji", "Segoe UI Emoji";\r\n    color: aliceblue;\r\n    background-color: #222;\r\n    touch-action: none;\r\n}\r\n\r\n#app {\r\n    display: flex;\r\n}\r\n\r\n#mobile-select {\r\n    position: absolute;\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: center;\r\n    top: -50px;\r\n    transition: top 0.25s linear;\r\n}\r\n\r\n#mobile-select > select {\r\n    text-align: center;\r\n    background-color: #222;\r\n    color: #eee;\r\n    appearance: none;\r\n    outline: none;\r\n    padding: 8px;\r\n    border: solid 1px rgba(238, 238, 238, 0.5);\r\n}\r\n\r\n#mobile-select > select > option {\r\n    background-color: #222;\r\n    color: #eee;\r\n}\r\n\r\n#mobile-select > select > option:focus {\r\n    background-color: #222;\r\n    color: cornflowerblue;\r\n}\r\n\r\nh1 {\r\n    text-align: center;\r\n}\r\n\r\n#left-column {\r\n    width: 25%;\r\n    min-width: 225px;\r\n    max-width: 300px;\r\n    overflow-x: hidden;\r\n    overflow-y: hidden;\r\n    transition: all 0.25s linear;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n#model-list {\r\n    height: 100%;\r\n    overflow-x: hidden;\r\n    overflow-y: scroll;\r\n    padding: 15px;\r\n    transition: all 0.25s linear;\r\n}\r\n\r\n#model-list > div {\r\n    padding: 5px;\r\n    cursor: pointer;\r\n}\r\n\r\n#model-list div[data-selected="true"] {\r\n    font-weight: bold;\r\n    background-color: rgb(45, 50, 58);\r\n}\r\n\r\n#model-list div:hover {\r\n    color: cornflowerblue;\r\n}\r\n\r\n#model-select {\r\n    opacity: 1;\r\n    transition: opacity 0.25s linear;\r\n}\r\n\r\n#center-column {\r\n    width: 75%;\r\n    display: flex;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    transition: width 0.25s linear;\r\n}\r\n\r\n#center-column canvas {\r\n    align-self: center;\r\n    min-width: 50%;\r\n    min-height: 50%;\r\n    width: calc(100vh - 210px);\r\n    height: calc(100vh - 210px);\r\n    object-fit: contain;\r\n    margin: auto;\r\n}\r\n\r\n#controls {\r\n    align-self: center;\r\n    text-align: center;\r\n    background-color: rgba(34, 34, 34, 0.5);\r\n    padding-bottom: 20px;\r\n}\r\n\r\n#control-buttons {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin: 0px 20px;\r\n}\r\n\r\n#control-buttons > button {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n#control-buttons > button:not(:first-child) {\r\n    margin-left: 20px;\r\n}\r\n\r\n#speed {\r\n    width: 60%;\r\n    height: 100px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    transition: bottom 0.25s linear;\r\n}\r\n\r\n#speed-label {\r\n    width: 100%;\r\n}\r\n\r\n#speed-bar {\r\n    width: 100%;\r\n    max-width: 400px;\r\n    height: 15px;\r\n    -webkit-appearance: none;\r\n    background: #111;\r\n    outline: none;\r\n    border-radius: 15px;\r\n    overflow: hidden;\r\n    box-shadow: inset 0 0 5px rgba(0, 0, 0, 1);\r\n}\r\n\r\n#speed-bar::-webkit-slider-thumb {\r\n    -webkit-appearance: none;\r\n    width: 15px;\r\n    height: 15px;\r\n    border-radius: 50%;\r\n    background: #414141;\r\n    cursor: pointer;\r\n    border: 4px solid #aaa;\r\n    box-shadow: -407px 0 0 400px #3f3f3f;\r\n    transition: border 0.25s ease-in-out, box-shadow 0.25s ease-in-out;\r\n}\r\n\r\n#speed-bar::-webkit-slider-thumb:hover {\r\n    border: 4px solid #fff;\r\n    box-shadow: -407px 0 0 400px #828282;\r\n}\r\n\r\n#right-column {\r\n    width: 100%;\r\n    max-width: 600px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    transition: width 0.25s ease-in-out;\r\n}\r\n\r\n#search-model {\r\n    width: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n#input-holder {\r\n    border-bottom: solid 1px rgba(238, 238, 238, 0.5);\r\n    background-color: #111;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n#input-holder i {\r\n    margin-right: 6px;\r\n    pointer-events: none;\r\n}\r\n\r\ninput[type="text"] {\r\n    color: #eee;\r\n    font-size: 14px;\r\n    background-color: transparent;\r\n    padding: 6px;\r\n    outline: none;\r\n    border: none;\r\n    transition: background-color 0.25s linear;\r\n}\r\n\r\ninput[type="text"]:focus {\r\n    background-color: #000;\r\n}\r\n\r\ninput[type="color"] {\r\n    -webkit-appearance: none;\r\n    border: none;\r\n    max-width: 32px;\r\n    max-height: 32px;\r\n    width: 2vw;\r\n    height: 2vw;\r\n    padding: 2px;\r\n    margin: 2px;\r\n}\r\n\r\ninput[type="color"]::-webkit-color-swatch-wrapper {\r\n    padding: 0;\r\n}\r\n\r\ninput[type="color"]::-webkit-color-swatch {\r\n    border: none;\r\n}\r\n\r\n#palette-container {\r\n    padding: 25px;\r\n}\r\n\r\n#state-viz {\r\n    max-height: 100%;\r\n    overflow-x: hidden;\r\n    overflow-y: scroll;\r\n    padding: 25px;\r\n    position: relative;\r\n}\r\n\r\n.tooltip {\r\n    filter: drop-shadow(0 0 2px #eee);\r\n    border-radius: 0%;\r\n}\r\n\r\n.node-state {\r\n    --color: #eee;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    transition: color 0.25s linear;\r\n}\r\n\r\n.breakpoint {\r\n    display: none;\r\n    margin: 0;\r\n    width: 12px;\r\n    height: 12px;\r\n    background-color: crimson;\r\n    border-radius: 50%;\r\n    position: absolute;\r\n    left: 0px;\r\n    transform: translateY(6px);\r\n    cursor: pointer;\r\n}\r\n\r\n.node-state[data-breakpoint="true"]:hover .breakpoint {\r\n    color: red;\r\n    filter: drop-shadow(0 0 5px red) contrast(1) brightness(1.5);\r\n}\r\n\r\n.node-state[data-breakpoint="true"] .breakpoint {\r\n    display: block;\r\n}\r\n\r\n.node-state i {\r\n    color: var(--color);\r\n    margin-right: 5px;\r\n}\r\n\r\n.node-state > label > i {\r\n    color: #ccc;\r\n    margin-left: 10px;\r\n    margin-right: 0px;\r\n    cursor: none;\r\n}\r\n\r\n.node-state > label > i:hover {\r\n    color: #eee;\r\n}\r\n\r\n.node-state[data-level-index="0"] {\r\n    margin-top: 10px;\r\n}\r\n\r\n.node-state[data-highlight="true"] {\r\n    --color: cornflowerblue !important;\r\n}\r\n\r\n.node-state[data-highlight="true"][data-breakpoint="true"] {\r\n    --color: red !important;\r\n}\r\n\r\n.convo-rule i {\r\n    color: var(--color);\r\n    margin-left: 5px;\r\n}\r\n\r\n.convo-rule label,\r\n.field label {\r\n    margin-left: 10px;\r\n    margin-right: 10px;\r\n}\r\n\r\n.node-state > label > span {\r\n    color: var(--color);\r\n    cursor: pointer;\r\n}\r\n\r\n.node-state > label > span:hover {\r\n    color: #fff;\r\n}\r\n\r\n.rule-list,\r\n.convo-rule-list,\r\n.field-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin-left: 1em;\r\n}\r\n\r\n.rule,\r\n.field,\r\n.convo-rule,\r\n.convchain-sample,\r\n.path-state {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 5px;\r\n    --size: 1vw;\r\n}\r\n\r\n.path-state {\r\n    flex-direction: column;\r\n    align-items: baseline;\r\n}\r\n\r\n.path-state > div {\r\n    display: inline-flex;\r\n    width: 100%;\r\n}\r\n\r\n.path-state > div > label {\r\n    margin-right: 10px;\r\n}\r\n\r\n.path-state table {\r\n    margin-left: auto;\r\n}\r\n\r\n.convchain-sample,\r\n.path-state {\r\n    margin-left: 15px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.rule[data-size="small"],\r\n.convchain-sample[data-size="small"] {\r\n    --size: 0.5vw;\r\n}\r\n\r\n.rule table,\r\n.field table,\r\n.convo-rule table,\r\n.convchain-sample {\r\n    border-spacing: 0px;\r\n    border-collapse: collapse;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.grid {\r\n    position: relative;\r\n}\r\n\r\n.rule > .grid > table {\r\n    position: absolute;\r\n}\r\n\r\n.rule:last-child {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.rule td[data-transparent="true"] {\r\n    background-color: transparent !important;\r\n    border-style: dashed;\r\n    border-color: rgba(238, 238, 238, 0.5);\r\n}\r\n\r\n.rule td,\r\n.field td,\r\n.convchain-sample td,\r\n.convo-rule td,\r\n.path-state td {\r\n    width: var(--size);\r\n    height: var(--size);\r\n    min-width: var(--size);\r\n    max-height: var(--size);\r\n    aspect-ratio: 1 / 1;\r\n    border: solid #eee 1px;\r\n    margin: 0px;\r\n    padding: 0px;\r\n}\r\n\r\n.rule > label {\r\n    margin-left: 5px;\r\n    margin-right: 5px;\r\n}\r\n\r\n@media only screen and (max-width: 750px) {\r\n    button {\r\n        padding: 5px 5px;\r\n        max-width: 35vw;\r\n        min-width: 50px;\r\n    }\r\n\r\n    #left-column {\r\n        width: 0;\r\n        min-width: 0;\r\n    }\r\n\r\n    #right-column {\r\n        display: none;\r\n    }\r\n\r\n    #center-column {\r\n        width: 100%;\r\n    }\r\n\r\n    #vox-download,\r\n    #debug {\r\n        display: none;\r\n    }\r\n\r\n    #center-column canvas {\r\n        min-width: 100px;\r\n        min-height: 100px;\r\n        max-width: 90%;\r\n        max-height: 90%;\r\n        object-fit: cover;\r\n    }\r\n\r\n    #model-select {\r\n        opacity: 0;\r\n    }\r\n\r\n    #mobile-select {\r\n        top: 25px;\r\n    }\r\n\r\n    #speed {\r\n        bottom: clamp(15px, calc(25vh - 25vw - 25px), 25px);\r\n    }\r\n\r\n    #state-viz {\r\n        padding: 5px;\r\n    }\r\n\r\n    .rule td {\r\n        border: none !important;\r\n    }\r\n}\r\n\r\n#title {\r\n    overflow-y: hidden;\r\n    transition: all 0.25s linear;\r\n}\r\n\r\n#title i {\r\n    font-size: 24px;\r\n    cursor: pointer;\r\n    color: #ddd;\r\n    transition: color 0.2s linear;\r\n}\r\n\r\n#title i:hover {\r\n    color: #fff;\r\n}\r\n\r\n@media only screen and (max-height: 500px) {\r\n    #title {\r\n        max-height: 0px;\r\n        margin: 0px;\r\n    }\r\n\r\n    #speed {\r\n        bottom: 20px;\r\n    }\r\n\r\n    #model-list {\r\n        max-height: 95vh;\r\n    }\r\n}\r\n\r\nbutton {\r\n    padding: 5px 10px;\r\n    background-color: transparent;\r\n    outline: none;\r\n    border: solid 1px rgba(238, 238, 238, 0.5);\r\n    color: #eee;\r\n    cursor: pointer;\r\n    transition: border 0.25s linear, color 0.25s linear;\r\n}\r\n\r\nbutton:disabled {\r\n    color: gray;\r\n    border: solid 1px gray;\r\n}\r\n\r\nbutton:disabled:hover {\r\n    cursor: not-allowed;\r\n}\r\n\r\nbutton:hover:not(:disabled) {\r\n    color: #fff;\r\n    border: solid 1px #fff;\r\n    filter: drop-shadow(0 0 5px #eee) contrast(2) brightness(2);\r\n}\r\n\r\nbutton.danger {\r\n    color: crimson;\r\n    border: solid 1px rgba(220, 20, 60, 0.5);\r\n}\r\n\r\nbutton.danger:hover {\r\n    color: red;\r\n    border: solid 1px red;\r\n    filter: drop-shadow(0 0 5px red) contrast(2) brightness(2);\r\n}\r\n\r\n::-webkit-scrollbar {\r\n    width: 5px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n    background-color: #ffffff;\r\n    border-radius: 20px;\r\n}\r\n\r\n::-webkit-scrollbar-track {\r\n    background-color: #2b2b2b;\r\n    border-radius: 20px;\r\n    margin: 5px;\r\n}\r\n',""]);const s=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},162:function(e,t,n){var r;void 0===(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,n,o){var s=a.URL||a.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?t(e,n,o):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),n);else if(r(e))t(e,n,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){i(o)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var f=a.URL||a.webkitURL,d=f.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){f.revokeObjectURL(d)}),4e4)}});a.saveAs=s.saveAs=s,e.exports=s}.apply(t,[]))||(e.exports=r)},949:(e,t,n)=>{"use strict";function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}n.d(t,{Fl:()=>Te,Gf:()=>Rt,KG:()=>Z,LO:()=>Ee,aD:()=>Et,jQ:()=>jt,le:()=>mt,rC:()=>rn,z:()=>It});var i={};function a(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:i}var o=Object.assign,s=Object.getOwnPropertyDescriptor,l=Object.defineProperty,u=Object.prototype,c=[];Object.freeze(c);var f={};Object.freeze(f);var d="undefined"!=typeof Proxy,h=Object.toString();function p(){d||r("Proxy not available")}function m(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var g=function(){};function v(e){return"function"==typeof e}function b(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function y(e){return null!==e&&"object"==typeof e}function A(e){if(!y(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===h}function w(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function _(e,t,n){l(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function x(e,t,n){l(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function S(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return y(e)&&!0===e[n]}}function M(e){return e instanceof Map}function k(e){return e instanceof Set}var E=void 0!==Object.getOwnPropertySymbols,C="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:E?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function I(e){return null===e?null:"object"==typeof e?""+e:e}function O(e,t){return u.hasOwnProperty.call(e,t)}var T=Object.getOwnPropertyDescriptors||function(e){var t={};return C(e).forEach((function(n){t[n]=s(e,n)})),t};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(this,arguments)}function z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,j(e,t)}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F=Symbol("mobx-stored-annotations");function Q(e){return Object.assign((function(t,n){U(t,n,e)}),e)}function U(e,t,n){O(e,F)||_(e,F,P({},e[F])),function(e){return e.annotationType_===$}(n)||(e[F][t]=n)}var V=Symbol("mobx administration"),W=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return ht(this)},t.reportChanged=function(){ft(),pt(this),dt()},t.toString=function(){return this.name_},e}(),q=S("Atom",W);function Y(e,t,n){void 0===t&&(t=g),void 0===n&&(n=g);var r=new W(e);return t!==g&&Pt(Bt,r,t,undefined),n!==g&&Dt(r,n),r}var X={identity:function(e,t){return e===t},structural:function(e,t){return Gn(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Gn(e,t,1)}};function H(e,t,n){return Yt(e)?e:Array.isArray(e)?Ee.array(e,{name:n}):A(e)?Ee.object(e,void 0,{name:n}):M(e)?Ee.map(e,{name:n}):k(e)?Ee.set(e,{name:n}):"function"!=typeof e||Ot(e)||qt(e)?e:w(e)?Vt(e):Ct(n,e)}function G(e){return e}var $="override",Z=Q({annotationType_:$,make_:function(e,t){return 0},extend_:function(e,t,n,i){r("'"+this.annotationType_+"' can only be used with 'makeObservable'")}});function K(e,t){return{annotationType_:e,options_:t,make_:J,extend_:ee}}function J(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Ot(n.value))return 1;var a=te(e,this,t,n,!1);return l(r,t,a),2}function ee(e,t,n,r){var i=te(e,this,t,n);return e.defineProperty_(t,i,r)}function te(e,t,n,r,i){var a,o,s,l,u,c,f,d;void 0===i&&(i=st.safeDescriptors),d=r,t.annotationType_,d.value;var h,p=r.value;return null!=(a=t.options_)&&a.bound&&(p=p.bind(null!=(h=e.proxy_)?h:e.target_)),{value:Re(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),p,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(f=e.proxy_)?f:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ne(e,t){return{annotationType_:e,options_:t,make_:re,extend_:ie}}function re(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!O(e.target_,t)||!qt(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(qt(n.value))return 1;var a=ae(e,this,0,n,!1,!1);return l(r,t,a),2}function ie(e,t,n,r){var i,a=ae(e,this,0,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,a,r)}function ae(e,t,n,r,i,a){var o;void 0===a&&(a=st.safeDescriptors),o=r,t.annotationType_,o.value;var s,l=r.value;return qt(l)||(l=Vt(l)),i&&((l=l.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0),{value:l,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function oe(e,t){return{annotationType_:e,options_:t,make_:se,extend_:le}}function se(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function le(e,t,n,r){return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,P({},this.options_,{get:n.get,set:n.set}),r);var i}function ue(e,t){return{annotationType_:e,options_:t,make_:ce,extend_:fe}}function ce(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function fe(e,t,n,r){var i,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(a=this.options_)?void 0:a.enhancer)?i:H,r)}var de=he();function he(e){return{annotationType_:"true",options_:e,make_:pe,extend_:me}}function pe(e,t,n,r){var i,a,o,s;if(n.get)return Te.make_(e,t,n,r);if(n.set){var u=Re(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!st.safeDescriptors||e.isPlainObject_,set:u})?0:2:(l(r,t,{configurable:!0,set:u}),2)}if(r!==e.target_&&"function"==typeof n.value)return w(n.value)?(null!=(s=this.options_)&&s.autoBind?Vt.bound:Vt).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?Ct.bound:Ct).make_(e,t,n,r);var c,f=!1===(null==(i=this.options_)?void 0:i.deep)?Ee.ref:Ee;return"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(c=e.proxy_)?c:e.target_)),f.make_(e,t,n,r)}function me(e,t,n,r){var i,a,o;return n.get?Te.extend_(e,t,n,r):n.set?e.defineProperty_(t,{configurable:!st.safeDescriptors||e.isPlainObject_,set:Re(t.toString(),n.set)},r):("function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_)),(!1===(null==(a=this.options_)?void 0:a.deep)?Ee.ref:Ee).extend_(e,t,n,r))}var ge={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ve(e){return e||ge}Object.freeze(ge);var be=ue("observable"),ye=ue("observable.ref",{enhancer:G}),Ae=ue("observable.shallow",{enhancer:function(e,t,n){return null==e||zn(e)||bn(e)||Mn(e)||Cn(e)?e:Array.isArray(e)?Ee.array(e,{name:n,deep:!1}):A(e)?Ee.object(e,void 0,{name:n,deep:!1}):M(e)?Ee.map(e,{name:n,deep:!1}):k(e)?Ee.set(e,{name:n,deep:!1}):void 0}}),we=ue("observable.struct",{enhancer:function(e,t){return Gn(e,t)?t:e}}),_e=Q(be);function xe(e){return!0===e.deep?H:!1===e.deep?G:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:H;var t,n,r}function Se(e,t,n){if(!b(t))return Yt(e)?e:A(e)?Ee.object(e,t,n):Array.isArray(e)?Ee.array(e,t):M(e)?Ee.map(e,t):k(e)?Ee.set(e,t):"object"==typeof e&&null!==e?e:Ee.box(e,t);U(e,t,be)}Object.assign(Se,_e);var Me,ke,Ee=o(Se,{box:function(e,t){var n=ve(t);return new Ue(e,xe(n),n.name,!0,n.equals)},array:function(e,t){var n=ve(t);return(!1===st.useProxies||!1===n.proxy?Wn:un)(e,xe(n),n.name)},map:function(e,t){var n=ve(t);return new Sn(e,xe(n),n.name)},set:function(e,t){var n=ve(t);return new En(e,xe(n),n.name)},object:function(e,t,n){return function(e,t,n,r){var i=T(t),a=Bn(e,r)[V];ft();try{C(i).forEach((function(e){a.extend_(e,i[e],!n||!(e in n)||n[e])}))}finally{dt()}return e}(!1===st.useProxies||!1===(null==n?void 0:n.proxy)?Bn({},n):function(e,t){var n,r;return p(),null!=(r=(n=(e=Bn(e,t))[V]).proxy_)?r:n.proxy_=new Proxy(e,$t)}({},n),e,t)},ref:Q(ye),shallow:Q(Ae),deep:_e,struct:Q(we)}),Ce="computed",Ie=oe(Ce),Oe=oe("computed.struct",{equals:X.structural}),Te=function(e,t){if(b(t))return U(e,t,Ie);if(A(e))return Q(oe(Ce,e));var n=A(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new qe(n)};Object.assign(Te,Ie),Te.struct=Q(Oe);var Be,De=0,Pe=1,ze=null!=(Me=null==(ke=s((function(){}),"name"))?void 0:ke.configurable)&&Me,je={value:"action",configurable:!0,writable:!1,enumerable:!1};function Re(e,t,n,r){function i(){return Le(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,ze&&(je.value=e,Object.defineProperty(i,"name",je)),i}function Le(e,t,n,i,a){var o=function(e,t,n,r){var i=st.trackingDerivation,a=!t||!i;ft();var o=st.allowStateChanges;a&&(Je(),o=Ne(!0));var s={runAsAction_:a,prevDerivation_:i,prevAllowStateChanges_:o,prevAllowStateReads_:tt(!0),notifySpy_:!1,startTime_:0,actionId_:Pe++,parentActionId_:De};return De=s.actionId_,s}(0,t);try{return n.apply(i,a)}catch(e){throw o.error_=e,e}finally{!function(e){De!==e.actionId_&&r(30),De=e.parentActionId_,void 0!==e.error_&&(st.suppressReactionErrors=!0),Fe(e.prevAllowStateChanges_),nt(e.prevAllowStateReads_),dt(),e.runAsAction_&&et(e.prevDerivation_),st.suppressReactionErrors=!1}(o)}}function Ne(e){var t=st.allowStateChanges;return st.allowStateChanges=e,t}function Fe(e){st.allowStateChanges=e}Be=Symbol.toPrimitive;var Qe,Ue=function(e){function t(t,n,r,i,a){var o;return void 0===r&&(r="ObservableValue"),void 0===i&&(i=!0),void 0===a&&(a=X.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=a,o.value_=n(t,void 0,r),o}z(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==st.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Zt(this)){var t=Jt(this,{object:this,type:on,newValue:e});if(!t)return st.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?st.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),en(this)&&nn(this,{type:on,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Kt(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:on,newValue:this.value_,oldValue:void 0}),tn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return I(this.get())},n[Be]=function(){return this.valueOf()},t}(W);Qe=Symbol.toPrimitive;var Ve,We,qe=function(){function e(e){this.dependenciesState_=Ve.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Ve.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Xe(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=We.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||r(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Re("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?X.structural:X.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){e.lowestObserverState_===Ve.UP_TO_DATE_&&(e.lowestObserverState_=Ve.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&(e.dependenciesState_=Ve.POSSIBLY_STALE_,e.onBecomeStale_())})))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&r(32,this.name_,this.derivation),0!==st.inBatch||0!==this.observers_.size||this.keepAlive_){if(ht(this),Ge(this)){var e=st.trackingContext;this.keepAlive_&&!e&&(st.trackingContext=this),this.trackAndCompute()&&function(e){e.lowestObserverState_!==Ve.STALE_&&(e.lowestObserverState_=Ve.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Ve.POSSIBLY_STALE_?t.dependenciesState_=Ve.STALE_:t.dependenciesState_===Ve.UP_TO_DATE_&&(e.lowestObserverState_=Ve.UP_TO_DATE_)})))}(this),st.trackingContext=e}}else Ge(this)&&(this.warnAboutUntrackedRead_(),ft(),this.value_=this.computeValue_(!1),dt());var t=this.value_;if(He(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&r(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else r(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Ve.NOT_TRACKING_,n=this.computeValue_(!0),r=t||He(e)||He(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ne(!1);if(e)t=$e(this,this.derivation,this.scope_);else if(!0===st.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Xe(e)}return Fe(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(Ze(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){var n,r;void 0===t&&(t=f);var i,a=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(t.scheduler||t.delay){var o=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Tt}(t),s=!1;i=new mt(a,(function(){s||(s=!0,o((function(){s=!1,i.isDisposed_||i.track(l)})))}),t.onError,t.requiresObservable)}else i=new mt(a,(function(){this.track(l)}),t.onError,t.requiresObservable);function l(){e(i)}return i.schedule_(),i.getDisposer_()}((function(){var a=n.get();if(!r||t){var o=Je();e({observableKind:"computed",debugObjectName:n.name_,type:on,object:n,newValue:a,oldValue:i}),et(o)}r=!1,i=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return I(this.get())},t[Qe]=function(){return this.valueOf()},e}(),Ye=S("ComputedValue",qe);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Ve||(Ve={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(We||(We={}));var Xe=function(e){this.cause=void 0,this.cause=e};function He(e){return e instanceof Xe}function Ge(e){switch(e.dependenciesState_){case Ve.UP_TO_DATE_:return!1;case Ve.NOT_TRACKING_:case Ve.STALE_:return!0;case Ve.POSSIBLY_STALE_:for(var t=tt(!0),n=Je(),r=e.observing_,i=r.length,a=0;a<i;a++){var o=r[a];if(Ye(o)){if(st.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return et(n),nt(t),!0}if(e.dependenciesState_===Ve.STALE_)return et(n),nt(t),!0}}return rt(e),et(n),nt(t),!1}}function $e(e,t,n){var r=tt(!0);rt(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++st.runId;var i,a=st.trackingDerivation;if(st.trackingDerivation=e,st.inBatch++,!0===st.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new Xe(e)}return st.inBatch--,st.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Ve.UP_TO_DATE_,i=0,a=e.unboundDepsCount_,o=0;o<a;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,i!==o&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}for(n.length=i,e.newObserving_=null,a=t.length;a--;){var l=t[a];0===l.diffValue_&&ut(l,e),l.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,lt(u,e))}r!==Ve.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),nt(r),i}function Ze(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)ut(t[n],e);e.dependenciesState_=Ve.NOT_TRACKING_}function Ke(e){var t=Je();try{return e()}finally{et(t)}}function Je(){var e=st.trackingDerivation;return st.trackingDerivation=null,e}function et(e){st.trackingDerivation=e}function tt(e){var t=st.allowStateReads;return st.allowStateReads=e,t}function nt(e){st.allowStateReads=e}function rt(e){if(e.dependenciesState_!==Ve.UP_TO_DATE_){e.dependenciesState_=Ve.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Ve.UP_TO_DATE_}}var it=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},at=!0,ot=!1,st=function(){var e=a();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(at=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new it).version&&(at=!1),at?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new it):(setTimeout((function(){ot||r(35)}),1),new it)}();function lt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function ut(e,t){e.observers_.delete(t),0===e.observers_.size&&ct(e)}function ct(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,st.pendingUnobservations.push(e))}function ft(){st.inBatch++}function dt(){if(0==--st.inBatch){vt();for(var e=st.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof qe&&n.suspend_())}st.pendingUnobservations=[]}}function ht(e){var t=st.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&st.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&st.inBatch>0&&ct(e),!1)}function pt(e){e.lowestObserverState_!==Ve.STALE_&&(e.lowestObserverState_=Ve.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Ve.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Ve.STALE_})))}var mt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Ve.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=We.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,st.pendingReactions.push(this),vt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ft(),this.isScheduled_=!1;var e=st.trackingContext;if(st.trackingContext=this,Ge(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}st.trackingContext=e,dt()}},t.track=function(e){if(!this.isDisposed_){ft(),this.isRunning_=!0;var t=st.trackingContext;st.trackingContext=this;var n=$e(this,e,void 0);st.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Ze(this),He(n)&&this.reportExceptionInDerivation_(n.cause),dt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(st.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";st.suppressReactionErrors||console.error(n,e),st.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ft(),Ze(this),dt()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[V]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){r("trace() is not available in production builds");for(var e=!1,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];"boolean"==typeof n[n.length-1]&&(e=n.pop());var a=Xt(n);if(!a)return r("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");a.isTracing_===We.NONE&&console.log("[mobx.trace] '"+a.name_+"' tracing enabled"),a.isTracing_=e?We.BREAK:We.LOG}(this,e)},e}(),gt=function(e){return e()};function vt(){st.inBatch>0||st.isRunningReactions||gt(bt)}function bt(){st.isRunningReactions=!0;for(var e=st.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}st.isRunningReactions=!1}var yt=S("Reaction",mt),At="action",wt="autoAction",_t=K(At),xt=K("action.bound",{bound:!0}),St=K(wt,{autoAction:!0}),Mt=K("autoAction.bound",{autoAction:!0,bound:!0});function kt(e){return function(t,n){return v(t)?Re(t.name||"<unnamed action>",t,e):v(n)?Re(t,n,e):b(n)?U(t,n,e?St:_t):b(t)?Q(K(e?wt:At,{name:t,autoAction:e})):void 0}}var Et=kt(!1);Object.assign(Et,_t);var Ct=kt(!0);function It(e){return Le(e.name,!1,e,this,void 0)}function Ot(e){return v(e)&&!0===e.isMobxAction}Object.assign(Ct,St),Et.bound=Q(xt),Ct.bound=Q(Mt);var Tt=function(e){return e()};var Bt="onBO";function Dt(e,t,n){return Pt("onBUO",e,t,n)}function Pt(e,t,n,r){var i="function"==typeof r?qn(t,n):qn(t),a=v(r)?r:n,o=e+"L";return i[o]?i[o].add(a):i[o]=new Set([a]),function(){var e=i[o];e&&(e.delete(a),0===e.size&&delete i[o])}}var zt="always";function jt(e){!0===e.isolateGlobalState&&function(){if((st.pendingReactions.length||st.inBatch||st.isRunningReactions)&&r(36),ot=!0,at){var e=a();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),st=new it}}();var t,n,i=e.useProxies,o=e.enforceActions;if(void 0!==i&&(st.useProxies=i===zt||"never"!==i&&"undefined"!=typeof Proxy),"ifavailable"===i&&(st.verifyProxies=!0),void 0!==o){var s=o===zt?zt:"observed"===o;st.enforceActions=s,st.allowStateChanges=!0!==s&&s!==zt}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(st[t]=!!e[t])})),st.allowStateReads=!st.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=gt,gt=function(e){return t((function(){return n(e)}))})}function Rt(e,t){return Lt(qn(e,t))}function Lt(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Lt)),n}var Nt=0;function Ft(){this.message="FLOW_CANCELLED"}Ft.prototype=Object.create(Error.prototype);var Qt=ne("flow"),Ut=ne("flow.bound",{bound:!0}),Vt=Object.assign((function(e,t){if(b(t))return U(e,t,Qt);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=this,i=arguments,a=++Nt,o=Et(r+" - runid: "+a+" - init",n).apply(t,i),s=void 0,l=new Promise((function(t,n){var i=0;function l(e){var t;s=void 0;try{t=Et(r+" - runid: "+a+" - yield "+i++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=Et(r+" - runid: "+a+" - yield "+i++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!v(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)}));return l.cancel=Et(r+" - runid: "+a+" - cancel",(function(){try{s&&Wt(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(g,g),Wt(n),e(new Ft)}catch(t){e(t)}})),l};return i.isMobXFlow=!0,i}),Qt);function Wt(e){v(e.cancel)&&e.cancel()}function qt(e){return!0===(null==e?void 0:e.isMobXFlow)}function Yt(e){return function(e,t){return!!e&&(void 0!==t?!!zn(e)&&e[V].values_.has(t):zn(e)||!!e[V]||q(e)||yt(e)||Ye(e))}(e)}function Xt(e){switch(e.length){case 0:return st.trackingDerivation;case 1:return qn(e[0]);case 2:return qn(e[0],e[1])}}function Ht(e,t){void 0===t&&(t=void 0),ft();try{return e.apply(t)}finally{dt()}}function Gt(e){return e[V]}Vt.bound=Q(Ut);var $t={has:function(e,t){return Gt(e).has_(t)},get:function(e,t){return Gt(e).get_(t)},set:function(e,t,n){var r;return!!b(t)&&(null==(r=Gt(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!b(t)&&(null==(n=Gt(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=Gt(e).defineProperty_(t,n))||r},ownKeys:function(e){return Gt(e).ownKeys_()},preventExtensions:function(e){r(13)}};function Zt(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Kt(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),m((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Jt(e,t){var n=Je();try{for(var i=[].concat(e.interceptors_||[]),a=0,o=i.length;a<o&&((t=i[a](t))&&!t.type&&r(14),t);a++);return t}finally{et(n)}}function en(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function tn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),m((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function nn(e,t){var n=Je(),r=e.changeListeners_;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);et(n)}}function rn(e,t,n){var r=Bn(e,n)[V];ft();try{null!=t||(t=function(e){return O(e,F)||_(e,F,P({},e[F])),e[F]}(e)),C(t).forEach((function(e){return r.make_(e,t[e])}))}finally{dt()}return e}var an="splice",on="update",sn={get:function(e,t){var n=e[V];return t===V?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?O(cn,t)?cn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[V];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){r(15)}},ln=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new W(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Kt(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),tn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&r("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&r(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Vn(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=c),Zt(this)){var a=Jt(this,{object:this.proxy_,type:an,index:e,removedCount:t,added:n});if(!a)return c;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<a.length;s++)this.values_[e+n.length+s]=a[s];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=en(this),a=i||r?{observableKind:"array",object:this.proxy_,type:on,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&nn(this,a)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=en(this),a=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:an,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&nn(this,a)},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(e,t){var n=this.values_;if(e<n.length){this.atom_;var i=n[e];if(Zt(this)){var a=Jt(this,{type:on,object:this.proxy_,index:e,newValue:t});if(!a)return;t=a.newValue}(t=this.enhancer_(t,i))!==i&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,i))}else e===n.length?this.spliceWithArray_(e,0,[t]):r(17,e,n.length)},e}();function un(e,t,n,r){void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),p();var i=new ln(n,t,r,!1);x(i.values_,V,i);var a=new Proxy(i.values_,sn);if(i.proxy_=a,e&&e.length){var o=Ne(!0);i.spliceWithArray_(0,0,e),Fe(o)}return a}var cn={clear:function(){return this.splice(0)},replace:function(e){var t=this[V];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=this[V];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[V].spliceWithArray_(e,t,n)},push:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[V].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[V],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return st.trackingDerivation&&r(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){st.trackingDerivation&&r(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[V],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function fn(e,t){"function"==typeof Array.prototype[e]&&(cn[e]=t(e))}function dn(e){return function(){var t=this[V];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function hn(e){return function(t,n){var r=this,i=this[V];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function pn(e){return function(){var t=this,n=this[V];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}fn("concat",dn),fn("flat",dn),fn("includes",dn),fn("indexOf",dn),fn("join",dn),fn("lastIndexOf",dn),fn("slice",dn),fn("toString",dn),fn("toLocaleString",dn),fn("every",hn),fn("filter",hn),fn("find",hn),fn("findIndex",hn),fn("flatMap",hn),fn("forEach",hn),fn("map",hn),fn("some",hn),fn("reduce",pn),fn("reduceRight",pn);var mn,gn,vn=S("ObservableArrayAdministration",ln);function bn(e){return y(e)&&vn(e[V])}var yn={},An="add",wn="delete";mn=Symbol.iterator,gn=Symbol.toStringTag;var _n,xn,Sn=function(){function e(e,t,n){var i=this;void 0===t&&(t=H),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[V]=yn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,v(Map)||r(18),this.keysAtom_=Y("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var n=Ne(e);try{t()}finally{Fe(n)}}(!0,(function(){i.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!st.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ue(this.has_(e),G,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Dt(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Zt(this)){var r=Jt(this,{type:n?on:An,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if(this.keysAtom_,Zt(this)&&!Jt(this,{type:wn,object:this,name:e}))return!1;if(this.has_(e)){var n=en(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:wn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Ht((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&nn(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==st.UNCHANGED){var r=en(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:on,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&nn(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Ht((function(){var r,i=new Ue(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=en(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:An,object:this,name:e,newValue:t}:null;r&&nn(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Kn({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return Kn({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[mn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=N(this);!(n=r()).done;){var i=n.value,a=i[0],o=i[1];e.call(t,o,a,this)}},t.merge=function(e){var t=this;return Mn(e)&&(e=new Map(e)),Ht((function(){A(e)?function(e){var t=Object.keys(e);if(!E)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return u.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):M(e)?(e.constructor!==Map&&r(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&r(20,e)})),this},t.clear=function(){var e=this;Ht((function(){Ke((function(){for(var t,n=N(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return Ht((function(){for(var n,i=function(e){if(M(e)||Mn(e))return e;if(Array.isArray(e))return new Map(e);if(A(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return r(21,e)}(e),a=new Map,o=!1,s=N(t.data_.keys());!(n=s()).done;){var l=n.value;if(!i.has(l))if(t.delete(l))o=!0;else{var u=t.data_.get(l);a.set(l,u)}}for(var c,f=N(i.entries());!(c=f()).done;){var d=c.value,h=d[0],p=d[1],m=t.data_.has(h);if(t.set(h,p),t.data_.has(h)){var g=t.data_.get(h);a.set(h,g),m||(o=!0)}}if(!o)if(t.data_.size!==a.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),b=a.keys(),y=v.next(),w=b.next();!y.done;){if(y.value!==w.value){t.keysAtom_.reportChanged();break}y=v.next(),w=b.next()}t.data_=a})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return tn(this,e)},t.intercept_=function(e){return Kt(this,e)},D(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:gn,get:function(){return"Map"}}]),e}(),Mn=S("ObservableMap",Sn),kn={};_n=Symbol.iterator,xn=Symbol.toStringTag;var En=function(){function e(e,t,n){void 0===t&&(t=H),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[V]=kn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,v(Set)||r(22),this.atom_=Y(this.name_),this.enhancer_=function(e,r){return t(e,r,n)},e&&this.replace(e)}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Ht((function(){Ke((function(){for(var t,n=N(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=N(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if(this.atom_,Zt(this)&&!Jt(this,{type:An,object:this,newValue:e}))return this;if(!this.has(e)){Ht((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=en(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:An,object:this,newValue:e}:null;n&&nn(this,r)}return this},t.delete=function(e){var t=this;if(Zt(this)&&!Jt(this,{type:wn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=en(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:wn,object:this,oldValue:e}:null;return Ht((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&nn(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Kn({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Kn({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Cn(e)&&(e=new Set(e)),Ht((function(){Array.isArray(e)||k(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&r("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return tn(this,e)},t.intercept_=function(e){return Kt(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[_n]=function(){return this.values()},D(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:xn,get:function(){return"Set"}}]),e}(),Cn=S("ObservableSet",En),In=Object.create(null),On="remove",Tn=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=de),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new W("ObservableObject.keys"),this.isPlainObject_=A(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof qe)return n.set(t),!0;if(Zt(this)){var r=Jt(this,{type:on,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==st.UNCHANGED){var i=en(this),a=i?{type:on,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&nn(this,a)}return!0},t.get_=function(e){return st.trackingDerivation&&!O(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),O(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!st.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ue(e in this.target_,G,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[F])&&n[e])return;r(1,t.annotationType_,this.name_+"."+e.toString())}for(var i=this.target_;i&&i!==u;){var a=s(i,e);if(a){var o=t.make_(this,e,a,i);if(0===o)return;if(1===o)break}i=Object.getPrototypeOf(i)}jn(this,0,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&jn(this,0,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{ft();var r=this.delete_(e);if(!r)return r;if(Zt(this)){var i=Jt(this,{object:this.proxy_||this.target_,name:e,type:An,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=P({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else l(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{dt()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1);try{ft();var i=this.delete_(e);if(!i)return i;if(Zt(this)){var a=Jt(this,{object:this.proxy_||this.target_,name:e,type:An,newValue:t});if(!a)return null;t=a.newValue}var o=Pn(e),s={configurable:!st.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else l(this.target_,e,s);var u=new Ue(t,n,"ObservableObject.key",!1);this.values_.set(e,u),this.notifyPropertyAddition_(e,u.value_)}finally{dt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{ft();var r=this.delete_(e);if(!r)return r;if(Zt(this)&&!Jt(this,{object:this.proxy_||this.target_,name:e,type:An,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=Pn(e),a={configurable:!st.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else l(this.target_,e,a);this.values_.set(e,new qe(t)),this.notifyPropertyAddition_(e,void 0)}finally{dt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!O(this.target_,e))return!0;if(Zt(this)&&!Jt(this,{object:this.proxy_||this.target_,name:e,type:On}))return null;try{var n,r;ft();var i,a=en(this),o=this.values_.get(e),l=void 0;if(!o&&a&&(l=null==(i=s(this.target_,e))?void 0:i.value),t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof Ue&&(l=o.value_),pt(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),a){var u={type:On,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:l,name:e};a&&nn(this,u)}}finally{dt()}return!0},t.observe_=function(e,t){return tn(this,e)},t.intercept_=function(e){return Kt(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=en(this);if(i){var a=i?{type:An,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&nn(this,a)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),C(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Bn(e,t){var n;if(O(e,V))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new Tn(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:he(e):void 0}(t));return _(e,V,i),e}var Dn=S("ObservableObjectAdministration",Tn);function Pn(e){return In[e]||(In[e]={get:function(){return this[V].getObservablePropValue_(e)},set:function(t){return this[V].setObservablePropValue_(e,t)}})}function zn(e){return!!y(e)&&Dn(e[V])}function jn(e,t,n){var r;null==(r=e.target_[F])||delete r[n]}var Rn,Ln,Nn=0,Fn=function(){};Rn=Fn,Ln=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Rn.prototype,Ln):void 0!==Rn.prototype.__proto__?Rn.prototype.__proto__=Ln:Rn.prototype=Ln;var Qn=function(e,t,n){function r(t,n,r,i){var a;void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),a=e.call(this)||this;var o=new ln(r,n,i,!0);if(o.proxy_=R(a),x(R(a),V,o),t&&t.length){var s=Ne(!0);a.spliceWithArray(0,0,t),Fe(s)}return a}z(r,e);var i=r.prototype;return i.concat=function(){this[V].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return bn(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return Kn({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},D(r,[{key:"length",get:function(){return this[V].getArrayLength_()},set:function(e){this[V].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Fn,Symbol.toStringTag,Symbol.iterator);function Un(e){l(Qn.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[V].get_(e)},set:function(t){this[V].set_(e,t)}}}(e))}function Vn(e){if(e>Nn){for(var t=Nn;t<e+100;t++)Un(t);Nn=e}}function Wn(e,t,n){return new Qn(e,t,n)}function qn(e,t){if("object"==typeof e&&null!==e){if(bn(e))return void 0!==t&&r(23),e[V].atom_;if(Cn(e))return e[V];if(Mn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||r(25,t,Xn(e)),n}if(zn(e)){if(!t)return r(26);var i=e[V].values_.get(t);return i||r(27,t,Xn(e)),i}if(q(e)||Ye(e)||yt(e))return e}else if(v(e)&&yt(e[V]))return e[V];r(28)}function Yn(e,t){return e||r(29),void 0!==t?Yn(qn(e,t)):q(e)||Ye(e)||yt(e)||Mn(e)||Cn(e)?e:e[V]?e[V]:void r(24,e)}function Xn(e,t){var n;if(void 0!==t)n=qn(e,t);else{if(Ot(e))return e.name;n=zn(e)||Mn(e)||Cn(e)?Yn(e):qn(e)}return n.name_}Object.entries(cn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&_(Qn.prototype,t,n)})),Vn(1e3);var Hn=u.toString;function Gn(e,t,n){return void 0===n&&(n=-1),$n(e,t,n)}function $n(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var o=Hn.call(e);if(o!==Hn.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Zn(e),t=Zn(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(v(l)&&l instanceof l&&v(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!$n(e[c],t[c],n-1,r,i))return!1}else{var f,d=Object.keys(e);if(c=d.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!O(t,f=d[c])||!$n(e[f],t[f],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Zn(e){return bn(e)?e.slice():M(e)||Mn(e)||k(e)||Cn(e)?Array.from(e.entries()):e}function Kn(e){return e[Symbol.iterator]=Jn,e}function Jn(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===a()[e]&&r("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Xn},$mobx:V})},703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},448:(e,t,n)=>{"use strict";var r=n(294),i=n(840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var A=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),B=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=P&&e[P]||e["@@iterator"])?e:null}var j,R=Object.assign;function L(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var N=!1;function F(e,t){if(!e||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function Q(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return F(e.type,!1);case 11:return F(e.type.render,!1);case 1:return F(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case M:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return U(e(t))}catch(e){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function K(e,t){Z(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ve=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function Me(e){if(e=yi(e)){if("function"!=typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function ke(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Se;if(Se=xe=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Oe=!1;function Te(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ce(e,t,n)}finally{Oe=!1,(null!==xe||null!==Se)&&(Ie(),Ee())}}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){De=!1}function ze(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var je=!1,Re=null,Le=!1,Ne=null,Fe={onError:function(e){je=!0,Re=e}};function Qe(e,t,n,r,i,a,o,s,l){je=!1,Re=null,ze.apply(Fe,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ze=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2,ut=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!=(a&=o)&&(r=ft(a))}else 0!=(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0==(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function At(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,Mt,kt=!1,Et=[],Ct=null,It=null,Ot=null,Tt=new Map,Bt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function jt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=yi(t))&&_t(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Rt(e){var t=bi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Mt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ae=r,n.target.dispatchEvent(r),Ae=null,t.shift()}return!0}function Nt(e,t,n){Lt(e)&&n.delete(t)}function Ft(){kt=!1,null!==Ct&&Lt(Ct)&&(Ct=null),null!==It&&Lt(It)&&(It=null),null!==Ot&&Lt(Ot)&&(Ot=null),Tt.forEach(Nt),Bt.forEach(Nt)}function Qt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Ut(e){function t(t){return Qt(t,e)}if(0<Et.length){Qt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Qt(Ct,e),null!==It&&Qt(It,e),null!==Ot&&Qt(Ot,e),Tt.forEach(t),Bt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Rt(n),null===n.blockedOn&&Dt.shift()}var Vt=A.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Xt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Yt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Xt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Xt(e,t,n,r){if(Wt){var i=Gt(e,t,n,r);if(null===i)Wr(e,t,r,Ht,n),zt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=jt(Ct,e,t,n,r,i),!0;case"dragenter":return It=jt(It,e,t,n,r,i),!0;case"mouseover":return Ot=jt(Ot,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,jt(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Bt.set(a,jt(Bt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(zt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Gt(e,t,n,r))&&Wr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Ht=null;function Gt(e,t,n,r){if(Ht=null,null!==(e=bi(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Kt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Kt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),fn=R({},un,{view:0,detail:0}),dn=an(fn),hn=R({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),mn=an(R({},hn,{dataTransfer:0})),gn=an(R({},fn,{relatedTarget:0})),vn=an(R({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=R({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(bn),An=an(R({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Mn(){return Sn}var kn=R({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(kn),Cn=an(R({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(R({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),On=an(R({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=R({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bn=an(Tn),Dn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,zn=null;c&&"documentMode"in document&&(zn=document.documentMode);var jn=c&&"TextEvent"in window&&!zn,Rn=c&&(!Pn||zn&&8<zn&&11>=zn),Ln=String.fromCharCode(32),Nn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1,Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,r){ke(r),0<(t=Yr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function Hn(e){Lr(e,0)}function Gn(e){if(X(Ai(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(c){var Kn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"==typeof er.oninput}Kn=Jn}else Kn=!1;Zn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Xn=Yn=null)}function nr(e){if("value"===e.propertyName&&Gn(Xn)){var t=[];qn(t,Xn,e,we(e)),Te(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Xn)}function ar(e,t){if("click"===e)return Gn(t)}function or(e,t){if("input"===e||"change"===e)return Gn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,br=null,yr=!1;function Ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==H(r)||(r="selectionStart"in(r=gr)&&hr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Yr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Sr={};function Mr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var kr=Mr("animationend"),Er=Mr("animationiteration"),Cr=Mr("animationstart"),Ir=Mr("transitionend"),Or=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(e,t){Or.set(e,t),l(t,[e])}for(var Dr=0;Dr<Tr.length;Dr++){var Pr=Tr[Dr];Br(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Br(kr,"onAnimationEnd"),Br(Er,"onAnimationIteration"),Br(Cr,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Qe.apply(this,arguments),je){if(!je)throw Error(a(198));var c=Re;je=!1,Re=null,Le||(Le=!0,Ne=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Rr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Rr(i,s,u),a=l}}}if(Le)throw e=Ne,Le=!1,Ne=null,e}function Nr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Qr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Qr]){e[Qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qr]||(t[Qr]=!0,Fr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch($t(t)){case 1:var i=qt;break;case 4:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=bi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Te((function(){var r=a,i=we(n),o=[];e:{var s=Or.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case kr:case Er:case Cr:l=vn;break;case Ir:l=On;break;case"scroll":l=dn;break;case"wheel":l=Bn;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&null!=(m=Be(p,d))&&c.push(qr(p,m,h))),f)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ae||!(u=n.relatedTarget||n.fromElement)||!bi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?bi(u):null)&&(u!==(f=Ue(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==l?s:Ai(l),h=null==u?s:Ai(u),(s=new c(m,p+"leave",l,n,i)).target=f,s.relatedTarget=h,m=null,bi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=h,c.relatedTarget=f,m=c),f=m,l&&u)e:{for(d=u,p=0,h=c=l;h;h=Xr(h))p++;for(h=0,m=d;m;m=Xr(m))h++;for(;0<p-h;)c=Xr(c),p--;for(;0<h-p;)d=Xr(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==l&&Hr(o,s,l,c,!1),null!==u&&null!==f&&Hr(o,f,u,c,!0)}if("select"===(l=(s=r?Ai(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=$n;else if(Wn(s))if(Zn)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?qn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?Ai(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,br=null);break;case"focusout":br=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,Ar(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Ar(o,n,i)}var b;if(Pn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Un?Fn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Rn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==y?"onCompositionEnd"===y&&Un&&(b=en()):(Kt="value"in(Zt=i)?Zt.value:Zt.textContent,Un=!0)),0<(v=Yr(r,y)).length&&(y=new An(y,e,null,n,i),o.push({event:y,listeners:v}),(b||null!==(b=Qn(n)))&&(y.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return Qn(t);case"keypress":return 32!==t.which?null:(Nn=!0,Ln);case"textInput":return(e=t.data)===Ln&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Pn&&Fn(e,t)?(e=en(),Jt=Kt=Zt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Yr(r,"onBeforeInput")).length&&(i=new An("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=b)}Lr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Be(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Be(n,a))&&o.unshift(qr(n,l,s)):i||null!=(l=Be(n,a))&&o.push(qr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"==typeof e?e:""+e).replace(Gr,"\n").replace($r,"")}function Kr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,mi="__reactEvents$"+fi,gi="__reactListeners$"+fi,vi="__reactHandles$"+fi;function bi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ai(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[hi]||null}var _i=[],xi=-1;function Si(e){return{current:e}}function Mi(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function ki(e,t){xi++,_i[xi]=e.current,e.current=t}var Ei={},Ci=Si(Ei),Ii=Si(!1),Oi=Ei;function Ti(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Bi(e){return null!=e.childContextTypes}function Di(){Mi(Ii),Mi(Ci)}function Pi(e,t,n){if(Ci.current!==Ei)throw Error(a(168));ki(Ci,t),ki(Ii,n)}function zi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return R({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Oi=Ci.current,ki(Ci,e),ki(Ii,Ii.current),!0}function Ri(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=zi(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Mi(Ii),Mi(Ci),ki(Ci,e)):Mi(Ii),ki(Ii,n)}var Li=null,Ni=!1,Fi=!1;function Qi(e){null===Li?Li=[e]:Li.push(e)}function Ui(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=yt;try{var n=Li;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Ni=!1}catch(t){throw null!==Li&&(Li=Li.slice(e+1)),Xe(Je,Ui),t}finally{yt=t,Fi=!1}}return null}var Vi=[],Wi=0,qi=null,Yi=0,Xi=[],Hi=0,Gi=null,$i=1,Zi="";function Ki(e,t){Vi[Wi++]=Yi,Vi[Wi++]=qi,qi=e,Yi=t}function Ji(e,t,n){Xi[Hi++]=$i,Xi[Hi++]=Zi,Xi[Hi++]=Gi,Gi=e;var r=$i;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Zi=a+e}else $i=1<<a|n<<i|r,Zi=e}function ea(e){null!==e.return&&(Ki(e,1),Ji(e,1,0))}function ta(e){for(;e===qi;)qi=Vi[--Wi],Vi[Wi]=null,Yi=Vi[--Wi],Vi[Wi]=null;for(;e===Gi;)Gi=Xi[--Hi],Xi[Hi]=null,Zi=Xi[--Hi],Xi[Hi]=null,$i=Xi[--Hi],Xi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Tu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:$i,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ui(e.nextSibling)}function ha(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=A.ReactCurrentBatchConfig;function ga(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var va=Si(null),ba=null,ya=null,Aa=null;function wa(){Aa=ya=ba=null}function _a(e){var t=va.current;Mi(va),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ba=e,Aa=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(As=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===ba)throw Error(a(308));ya=e,ba.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var ka=null;function Ea(e){null===ka?ka=[e]:ka.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function Ta(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ia(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ia(e,n)}function za(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ra(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==a){var f=i.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(h,f,d):p))break e;f=R({},f,d);break e;case 2:Oa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=f):c=c.next=h,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=f}}function La(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var Na=(new r.Component).refs;function Fa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Qa={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Da(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nu(t,e,i,r),za(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Da(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(nu(t,e,i,r),za(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Da(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(nu(t,e,r,n),za(t,e,r))}};function Ua(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,a))}function Va(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"==typeof a&&null!==a?a=Ma(a):(i=Bi(t)?Oi:Ci.current,a=(r=null!=(r=t.contextTypes))?Ti(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qa.enqueueReplaceState(t,t.state,null)}function qa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Na,Ta(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Ma(a):(a=Bi(t)?Oi:Ci.current,i.context=Ti(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Fa(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Qa.enqueueReplaceState(i,i.state,null),Ra(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Ya(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Na&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function Ga(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ru(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===B&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Ya(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=Ya(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=zu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ru(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=Ya(e,null,t),n.return=e,n;case _:return(t=Lu(t,e.mode,n)).return=e,t;case B:return d(e,(0,t._init)(t._payload),n)}if(te(t)||z(t))return(t=zu(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case B:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||z(n))return null!==i?null:f(e,t,n,r,null);Xa(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case B:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);Xa(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,f=a,m=a=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(i,f,s[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,f=g}if(m===s.length)return n(i,f),ia&&Ki(i,m),u;if(null===f){for(;m<s.length;m++)null!==(f=d(i,s[m],l))&&(a=o(f,a,m),null===c?u=f:c.sibling=f,c=f);return ia&&Ki(i,m),u}for(f=r(i,f);m<s.length;m++)null!==(g=p(f,i,m,s[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ki(i,m),u}function g(i,s,l,u){var c=z(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var f=c=null,m=s,g=s=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=h(i,m,b.value,u);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),s=o(y,s,g),null===f?c=y:f.sibling=y,f=y,m=v}if(b.done)return n(i,m),ia&&Ki(i,g),c;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=d(i,b.value,u))&&(s=o(b,s,g),null===f?c=b:f.sibling=b,f=b);return ia&&Ki(i,g),c}for(m=r(i,m);!b.done;g++,b=l.next())null!==(b=p(m,i,g,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=o(b,s,g),null===f?c=b:f.sibling=b,f=b);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ki(i,g),c}return function e(r,a,o,l){if("object"==typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===x){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===B&&Ha(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ya(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===x?((a=zu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Pu(o.type,o.key,o.props,null,r.mode,l)).ref=Ya(r,a,o),l.return=r,r=l)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Lu(o,r.mode,l)).return=r,r=a}return s(r);case B:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(z(o))return g(r,a,o,l);Xa(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ru(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var $a=Ga(!0),Za=Ga(!1),Ka={},Ja=Si(Ka),eo=Si(Ka),to=Si(Ka);function no(e){if(e===Ka)throw Error(a(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Ja,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Mi(Ja),ki(Ja,t)}function io(){Mi(Ja),Mi(eo),Mi(to)}function ao(e){no(to.current);var t=no(Ja.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Ja,n))}function oo(e){eo.current===e&&(Mi(Ja),Mi(eo))}var so=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var fo=A.ReactCurrentDispatcher,ho=A.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,bo=!1,yo=!1,Ao=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),yo){o=0;do{if(yo=!1,Ao=0,25<=o)throw Error(a(301));o+=1,vo=go=null,t.updateQueue=null,fo.current=us,e=n(r,i)}while(yo)}if(fo.current=os,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,bo=!1,t)throw Error(a(300));return e}function Mo(){var e=0!==Ao;return Ao=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Eo(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(a(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"==typeof t?t(e):t}function Io(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var f=c.lane;if((po&f)===f)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,mo.lanes|=f,jl|=f}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(As=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(As=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Bo(e,t){var n=mo,r=Eo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,As=!0),r=r.queue,Wo(zo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,No(9,Po.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(a(349));0!=(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Ro(e)}function zo(e,t,n){return n((function(){jo(t)&&Ro(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Ro(e){var t=Ia(e,1);null!==t&&nu(t,e,1,-1)}function Lo(e){var t=ko();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function No(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return Eo().memoizedState}function Qo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=No(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=No(t,n,a,r))}mo.flags|=e,i.memoizedState=No(1|t,n,a,r)}function Vo(e,t){return Qo(8390656,8,e,t)}function Wo(e,t){return Uo(2048,8,e,t)}function qo(e,t){return Uo(4,2,e,t)}function Yo(e,t){return Uo(4,4,e,t)}function Xo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!=n?n.concat([e]):null,Uo(4,4,Xo.bind(null,t,e),n)}function Go(){}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,jl|=n,e.baseState=!0),t)}function Jo(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{yt=n,ho.transition=r}}function es(){return Eo().memoizedState}function ts(e,t,n){var r=tu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e)?is(t,n):null!==(n=Ca(e,t,n,r))&&(nu(n,e,r,eu()),as(n,t,r))}function ns(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ea(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Ca(e,t,i,r))&&(nu(n,e,r,i=eu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){yo=bo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var os={readContext:Ma,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ma,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Qo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Lo,useDebugValue:Go,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Lo(!1),t=e[0];return e=Jo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!=(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(zo.bind(null,r,o,e),[e]),r.flags|=2048,No(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Il.identifierPrefix;if(ia){var n=Zi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=Ao++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Ma,useCallback:$o,useContext:Ma,useEffect:Wo,useImperativeHandle:Ho,useInsertionEffect:qo,useLayoutEffect:Yo,useMemo:Zo,useReducer:Io,useRef:Fo,useState:function(){return Io(Co)},useDebugValue:Go,useDeferredValue:function(e){return Ko(Eo(),go.memoizedState,e)},useTransition:function(){return[Io(Co)[0],Eo().memoizedState]},useMutableSource:To,useSyncExternalStore:Bo,useId:es,unstable_isNewReconciler:!1},us={readContext:Ma,useCallback:$o,useContext:Ma,useEffect:Wo,useImperativeHandle:Ho,useInsertionEffect:qo,useLayoutEffect:Yo,useMemo:Zo,useReducer:Oo,useRef:Fo,useState:function(){return Oo(Co)},useDebugValue:Go,useDeferredValue:function(e){var t=Eo();return null===go?t.memoizedState=e:Ko(t,go.memoizedState,e)},useTransition:function(){return[Oo(Co)[0],Eo().memoizedState]},useMutableSource:To,useSyncExternalStore:Bo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=Q(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var hs="function"==typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),ds(0,t)},n}function ms(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Mu.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bs(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=A.ReactCurrentOwner,As=!1;function ws(e,t,n,r){t.child=null===e?Za(t,null,n,r):$a(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Mo(),null===e||As?(ia&&n&&ea(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Bu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Du(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(As=!1,t.pendingProps=r=a,0==(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!=(131072&e.flags)&&(As=!0)}}return Es(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dl,Bl),Bl|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dl,Bl),Bl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Dl,Bl),Bl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ki(Dl,Bl),Bl|=r;return ws(e,t,i,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var a=Bi(n)?Oi:Ci.current;return a=Ti(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Mo(),null===e||As?(ia&&r&&ea(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Cs(e,t,n,r,i){if(Bi(n)){var a=!0;ji(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Vs(e,t),Va(t,n,r),qa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?Ma(u):Ti(t,u=Bi(n)?Oi:Ci.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Wa(t,o,r,u),Oa=!1;var d=t.memoizedState;o.state=d,Ra(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Ii.current||Oa?("function"==typeof c&&(Fa(t,n,c,r),l=t.memoizedState),(s=Oa||Ua(t,n,s,r,d,l,u))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ba(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ga(t.type,s),o.props=u,f=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?Ma(l):Ti(t,l=Bi(n)?Oi:Ci.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==f||d!==l)&&Wa(t,o,r,l),Oa=!1,d=t.memoizedState,o.state=d,Ra(t,r,o,i);var p=t.memoizedState;s!==f||d!==p||Ii.current||Oa?("function"==typeof h&&(Fa(t,n,h,r),p=t.memoizedState),(u=Oa||Ua(t,n,u,r,d,p,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,a,i)}function Is(e,t,n,r,i,a){ks(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Ri(t,n,!1),Ws(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):ws(e,t,s,a),t.memoizedState=r.state,i&&Ri(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Ts(e,t,n,r,i){return ha(),pa(i),t.flags|=256,ws(e,t,n,r),t.child}var Bs,Ds,Ps,zs={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=ju(l,i,0,null),e=zu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=zs,e):Ls(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(o=zu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=zs,o);if(0==(1&t.mode))return Ns(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ns(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(l=0!=(s&e.childLanes),As||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(e,i),nu(r,e,i,-1))}return mu(),Ns(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Eu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Hi++]=$i,Xi[Hi++]=Zi,Xi[Hi++]=Gi,$i=e.id,Zi=e.overflow,Gi=t),(t=Ls(t,r.children)).flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Du(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Du(r,s):(s=zu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=zs,i}return e=(s=e.child).sibling,i=Du(s,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Qs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(ws(e,t,r.children,n),0!=(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(so,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qs(t,!0,n,null,a);break;case"together":Qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Bi(t.type)&&Di(),Ys(t),null;case 3:return r=t.stateNode,io(),Mi(Ii),Mi(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Ys(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ys(t),null}if(e=no(Ja.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[hi]=o,e=0!=(1&t.mode),n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(i=0;i<zr.length;i++)Nr(zr[i],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":$(r,o),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Nr("invalid",r);break;case"textarea":ie(r,o),Nr("invalid",r)}for(var l in be(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"==typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),i=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Nr("scroll",r)}switch(n){case"input":Y(r),J(r,o,!0);break;case"textarea":Y(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[hi]=r,Bs(e,t),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),i=r;break;case"iframe":case"object":case"embed":Nr("load",e),i=r;break;case"video":case"audio":for(i=0;i<zr.length;i++)Nr(zr[i],e);i=r;break;case"source":Nr("error",e),i=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),i=r;break;case"details":Nr("toggle",e),i=r;break;case"input":$(e,r),i=G(e,r),Nr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Nr("invalid",e)}for(o in be(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"==typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Nr("scroll",e):null!=c&&y(e,o,c,l))}switch(n){case"input":Y(e),J(e,r,!1);break;case"textarea":Y(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ps(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Kr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ys(t),null;case 13:if(Mi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!=(1&t.mode)&&0==(128&t.flags))da(),ha(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else ha(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&so.current)?0===Pl&&(Pl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return io(),null===e&&Ur(t.stateNode.containerInfo),Ys(t),null;case 10:return _a(t.type._context),Ys(t),null;case 19:if(Mi(so),null===(o=t.memoizedState))return Ys(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)qs(o,!1);else{if(0!==Pl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>Ul&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Ys(t),null}else 2*Ze()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,qs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=so.current,ki(so,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Bl)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Hs(e,t){switch(ta(t),t.tag){case 1:return Bi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Mi(Ii),Mi(Ci),co(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Mi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Mi(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Bs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=G(e,i),r=G(e,r),o=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Jr)}for(c in be(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!=typeof u&&"number"!=typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Nr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,$s=!1,Zs="function"==typeof WeakSet?WeakSet:Set,Ks=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Su(e,t,n)}else n.current=null}function el(e,t,n){try{n()}catch(n){Su(e,t,n)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[di],delete t[hi],delete t[mi],delete t[gi],delete t[vi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,fl=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:$s||Js(n,t);case 6:var r=cl,i=fl;cl=null,dl(e,t,n),fl=i,null!==(cl=r)&&(fl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(fl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(cl,n.stateNode));break;case 4:r=cl,i=fl,cl=n.stateNode.containerInfo,fl=!0,dl(e,t,n),cl=r,fl=i;break;case 0:case 11:case 14:case 15:if(!$s&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!=(2&a)||0!=(4&a))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!$s&&(Js(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Su(n,t,e)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,dl(e,t,n),$s=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,fl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));hl(o,s,i),cl=null,fl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(e){Su(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(t){Su(e,e.return,t)}try{nl(5,e,e.return)}catch(t){Su(e,e.return,t)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(t){Su(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Z(i,o),ye(l,s);var c=ye(l,o);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];"style"===f?ge(i,d):"dangerouslySetInnerHTML"===f?fe(i,d):"children"===f?de(i,d):y(i,f,d,c)}switch(l){case"input":K(i,o);break;case"textarea":ae(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[hi]=o}catch(t){Su(e,e.return,t)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){Su(e,e.return,t)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(t){Su(e,e.return,t)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ql=Ze())),4&r&&pl(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(c=$s)||f,ml(t,e),$s=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!=(1&e.mode))for(Ks=e,f=e.child;null!==f;){for(d=Ks=f;null!==Ks;){switch(p=(h=Ks).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:Js(h,h.return);var m=h.stateNode;if("function"==typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Su(r,n,e)}}break;case 5:Js(h,h.return);break;case 22:if(null!==h.memoizedState){wl(d);continue}}null!==p?(p.return=h,Ks=p):wl(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{i=d.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=null!=(u=d.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(t){Su(e,e.return,t)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(t){Su(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(t){Su(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ks=e,yl(e,t,n)}function yl(e,t,n){for(var r=0!=(1&e.mode);null!==Ks;){var i=Ks,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Gs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||$s;s=Gs;var u=$s;if(Gs=o,($s=l)&&!u)for(Ks=i;null!==Ks;)l=(o=Ks).child,22===o.tag&&null!==o.memoizedState?_l(i):null!==l?(l.return=o,Ks=l):_l(i);for(;null!==a;)Ks=a,yl(a,t,n),a=a.sibling;Ks=i,Gs=s,$s=u}Al(e)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ks=a):Al(e)}}function Al(e){for(;null!==Ks;){var t=Ks;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ga(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&La(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}La(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(a(163))}$s||512&t.flags&&il(t)}catch(e){Su(t,t.return,e)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function wl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function _l(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(e){Su(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Su(t,i,e)}}var a=t.return;try{il(t)}catch(e){Su(t,a,e)}break;case 5:var o=t.return;try{il(t)}catch(e){Su(t,o,e)}}}catch(e){Su(t,t.return,e)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var xl,Sl=Math.ceil,Ml=A.ReactCurrentDispatcher,kl=A.ReactCurrentOwner,El=A.ReactCurrentBatchConfig,Cl=0,Il=null,Ol=null,Tl=0,Bl=0,Dl=Si(0),Pl=0,zl=null,jl=0,Rl=0,Ll=0,Nl=null,Fl=null,Ql=0,Ul=1/0,Vl=null,Wl=!1,ql=null,Yl=null,Xl=!1,Hl=null,Gl=0,$l=0,Zl=null,Kl=-1,Jl=0;function eu(){return 0!=(6&Cl)?Ze():-1!==Kl?Kl:Kl=Ze()}function tu(e){return 0==(1&e.mode)?1:0!=(2&Cl)&&0!==Tl?Tl&-Tl:null!==ma.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nu(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(a(185));vt(e,n,r),0!=(2&Cl)&&e===Il||(e===Il&&(0==(2&Cl)&&(Rl|=n),4===Pl&&su(e,Tl)),ru(e,r),1===n&&0===Cl&&0==(1&t.mode)&&(Ul=Ze()+500,Ni&&Ui()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!=(s&n)&&0==(s&r)||(i[o]=ht(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Il?Tl:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Ni=!0,Qi(e)}(lu.bind(null,e)):Qi(lu.bind(null,e)),oi((function(){0==(6&Cl)&&Ui()})),n=null;else{switch(At(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Kl=-1,Jl=0,0!=(6&Cl))throw Error(a(327));var n=e.callbackNode;if(_u()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Tl:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Cl;Cl|=2;var o=pu();for(Il===e&&Tl===t||(Vl=null,Ul=Ze()+500,du(e,t));;)try{bu();break}catch(t){hu(e,t)}wa(),Ml.current=o,Cl=i,null!==Ol?t=0:(Il=null,Tl=0,t=Pl)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=au(e,i)),1===t)throw n=zl,du(e,0),su(e,r),ru(e,Ze()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&0!==(o=pt(e))&&(r=o,t=au(e,o)),1===t))throw n=zl,du(e,0),su(e,r),ru(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,Fl,Vl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Ql+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,Fl,Vl),t);break}wu(e,Fl,Vl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,Fl,Vl),r);break}wu(e,Fl,Vl);break;default:throw Error(a(329))}}}return ru(e,Ze()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=Nl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Fl,Fl=n,null!==t&&ou(t)),e}function ou(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function su(e,t){for(t&=~Ll,t&=~Rl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!=(6&Cl))throw Error(a(327));_u();var t=dt(e,0);if(0==(1&t))return ru(e,Ze()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=zl,du(e,0),su(e,t),ru(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Fl,Vl),ru(e,Ze()),null}function uu(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Ul=Ze()+500,Ni&&Ui())}}function cu(e){null!==Hl&&0===Hl.tag&&0==(6&Cl)&&_u();var t=Cl;Cl|=1;var n=El.transition,r=yt;try{if(El.transition=null,yt=1,e)return e()}finally{yt=r,El.transition=n,0==(6&(Cl=t))&&Ui()}}function fu(){Bl=Dl.current,Mi(Dl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Di();break;case 3:io(),Mi(Ii),Mi(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Mi(so);break;case 10:_a(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Il=e,Ol=e=Du(e.current,null),Tl=Bl=t,Pl=0,zl=null,Ll=Rl=jl=0,Fl=Nl=null,null!==ka){for(t=0;t<ka.length;t++)if(null!==(r=(n=ka[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ka=null}return e}function hu(e,t){for(;;){var n=Ol;try{if(wa(),fo.current=os,bo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}bo=!1}if(po=0,vo=go=mo=null,yo=!1,Ao=0,kl.current=null,null===n||null===n.return){Pl=1,zl=t,Ol=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Tl,l.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u,f=l,d=f.tag;if(0==(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,bs(p,s,l,0,t),1&p.mode&&gs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0==(1&t)){gs(o,c,t),mu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var v=vs(s);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),bs(v,s,l,0,t),pa(cs(u,l));break e}}o=u=cs(u,l),4!==Pl&&(Pl=2),null===Nl?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ja(o,ps(0,u,t));break e;case 1:l=u;var b=o.type,y=o.stateNode;if(0==(128&o.flags)&&("function"==typeof b.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Yl||!Yl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,ja(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}Au(n)}catch(e){t=e,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function pu(){var e=Ml.current;return Ml.current=os,null===e?os:e}function mu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Il||0==(268435455&jl)&&0==(268435455&Rl)||su(Il,Tl)}function gu(e,t){var n=Cl;Cl|=2;var r=pu();for(Il===e&&Tl===t||(Vl=null,du(e,t));;)try{vu();break}catch(t){hu(e,t)}if(wa(),Cl=n,Ml.current=r,null!==Ol)throw Error(a(261));return Il=null,Tl=0,Pl}function vu(){for(;null!==Ol;)yu(Ol)}function bu(){for(;null!==Ol&&!Ge();)yu(Ol)}function yu(e){var t=xl(e.alternate,e,Bl);e.memoizedProps=e.pendingProps,null===t?Au(e):Ol=t,kl.current=null}function Au(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Xs(n,t,Bl)))return void(Ol=n)}else{if(null!==(n=Hs(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Pl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Pl&&(Pl=5)}function wu(e,t,n){var r=yt,i=El.transition;try{El.transition=null,yt=1,function(e,t,n,r){do{_u()}while(null!==Hl);if(0!=(6&Cl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Il&&(Ol=Il=null,Tl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Xl||(Xl=!0,Iu(tt,(function(){return _u(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=El.transition,El.transition=null;var s=yt;yt=1;var l=Cl;Cl|=4,kl.current=null,function(e,t){if(ei=Wt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===i&&(l=s),h===o&&++f===r&&(u=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ga(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var A=t.stateNode.containerInfo;1===A.nodeType?A.textContent="":9===A.nodeType&&A.documentElement&&A.removeChild(A.documentElement);break;default:throw Error(a(163))}}catch(e){Su(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),$e(),Cl=l,yt=s,El.transition=o}else e.current=n;if(Xl&&(Xl=!1,Hl=e,Gl=i),0===(o=e.pendingLanes)&&(Yl=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ru(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!=(1&Gl)&&0!==e.tag&&_u(),0!=(1&(o=e.pendingLanes))?e===Zl?$l++:($l=0,Zl=e):$l=0,Ui()}(e,t,n,r)}finally{El.transition=i,yt=r}return null}function _u(){if(null!==Hl){var e=At(Gl),t=El.transition,n=yt;try{if(El.transition=null,yt=16>e?16:e,null===Hl)var r=!1;else{if(e=Hl,Hl=null,Gl=0,0!=(6&Cl))throw Error(a(331));var i=Cl;for(Cl|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!=(16&Ks.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ks=c;null!==Ks;){var f=Ks;switch(f.tag){case 0:case 11:case 15:nl(8,f,o)}var d=f.child;if(null!==d)d.return=f,Ks=d;else for(;null!==Ks;){var h=(f=Ks).sibling,p=f.return;if(al(f),f===c){Ks=null;break}if(null!==h){h.return=p,Ks=h;break}Ks=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ks=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!=(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Ks=b;break e}Ks=o.return}}var y=e.current;for(Ks=y;null!==Ks;){var A=(s=Ks).child;if(0!=(2064&s.subtreeFlags)&&null!==A)A.return=s,Ks=A;else e:for(s=y;null!==Ks;){if(0!=(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(e){Su(l,l.return,e)}if(l===s){Ks=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ks=w;break e}Ks=l.return}}if(Cl=i,Ui(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{yt=n,El.transition=t}}return!1}function xu(e,t,n){e=Pa(e,t=ps(0,t=cs(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Su(e,t,n){if(3===e.tag)xu(e,e,n);else for(;null!==t;){if(3===t.tag){xu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Pa(t,e=ms(t,e=cs(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Tl&n)===n&&(4===Pl||3===Pl&&(130023424&Tl)===Tl&&500>Ze()-Ql?du(e,0):Ll|=n),ru(e,t)}function ku(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ct,0==(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ia(e,t))&&(vt(e,t,n),ru(e,n))}function Eu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),ku(e,n)}function Iu(e,t){return Xe(e,t)}function Ou(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tu(e,t,n,r){return new Ou(e,t,n,r)}function Bu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=Tu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)Bu(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case x:return zu(n.children,i,o,t);case S:s=8,i|=8;break;case M:return(e=Tu(12,n,t,2|i)).elementType=M,e.lanes=o,e;case I:return(e=Tu(13,n,t,i)).elementType=I,e.lanes=o,e;case O:return(e=Tu(19,n,t,i)).elementType=O,e.lanes=o,e;case D:return ju(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case E:s=9;break e;case C:s=11;break e;case T:s=14;break e;case B:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zu(e,t,n,r){return(e=Tu(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Tu(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Ru(e,t,n){return(e=Tu(6,e,null,t)).lanes=n,e}function Lu(e,t,n){return(t=Tu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fu(e,t,n,r,i,a,o,s,l){return e=new Nu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ta(a),e}function Qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Uu(e){if(!e)return Ei;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Bi(n))return zi(e,n,t)}return t}function Vu(e,t,n,r,i,a,o,s,l){return(e=Fu(n,r,!0,e,0,a,0,s,l)).context=Uu(null),n=e.current,(a=Da(r=eu(),i=tu(n))).callback=null!=t?t:null,Pa(n,a,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Wu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=Uu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(nu(e,i,o,a),za(e,i,o)),o}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xu(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}xl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)As=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:Os(t),ha();break;case 5:ao(t);break;case 1:Bi(t.type)&&ji(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(va,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(so,1&so.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Rs(e,t,n):(ki(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);ki(so,1&so.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return Ws(e,t,n)}(e,t,n);As=0!=(131072&e.flags)}else As=!1,ia&&0!=(1048576&t.flags)&&Ji(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Ti(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Mo();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bi(r)?(o=!0,ji(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ta(t),i.updater=Qa,t.stateNode=i,i._reactInternals=t,qa(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Bu(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(r),e=ga(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ga(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 3:e:{if(Os(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ba(e,t),Ra(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ts(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Ts(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Za(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===i){t=Ws(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),ks(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Rs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:ga(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,ki(va,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Da(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),xa(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ma(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=ga(r=t.type,t.pendingProps),xs(e,t,r,i=ga(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ga(r,i),Vs(e,t),t.tag=1,Bi(r)?(e=!0,ji(t)):e=!1,Sa(t,n),Va(t,r,i),qa(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Ms(e,t,n)}throw Error(a(156,t.tag))};var Hu="function"==typeof reportError?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}function $u(e){this._internalRoot=e}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ku(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof i){var s=i;i=function(){var e=qu(o);s.call(e)}}Wu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=qu(o);a.call(e)}}var o=Vu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[pi]=o.current,Ur(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=qu(l);s.call(e)}}var l=Fu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[pi]=l.current,Ur(8===e.nodeType?e.parentNode:e),cu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return qu(o)}$u.prototype.render=Gu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wu(e,t,null,null)},$u.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Wu(null,e,null,null)})),t[pi]=null}},$u.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Rt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(bt(t,1|n),ru(t,Ze()),0==(6&Cl)&&(Ul=Ze()+500,Ui()))}break;case 13:cu((function(){var t=Ia(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Xu(e,1)}},_t=function(e){if(13===e.tag){var t=Ia(e,134217728);null!==t&&nu(t,e,134217728,eu()),Xu(e,134217728)}},xt=function(e){if(13===e.tag){var t=tu(e),n=Ia(e,t);null!==n&&nu(n,e,t,eu()),Xu(e,t)}},St=function(){return yt},Mt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));X(r),K(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uu,Ie=cu;var tc={usingClientEntryPoint:!1,Events:[yi,Ai,wi,ke,Ee,uu]},nc={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(a(200));return Qu(e,t,null,n)},t.createRoot=function(e,t){if(!Zu(e))throw Error(a(299));var n=!1,r="",i=Hu;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Gu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Ku(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Hu;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $u(t)},t.render=function(e,t,n){if(!Ku(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ku(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ku(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var r=n(935);t.s=r.createRoot,r.hydrateRoot},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},251:(e,t,n)=>{"use strict";var r=n(294),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var A=y.prototype=new b;A.constructor=y,m(A,v.prototype),A.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+C(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var c=a+C(s=e[u],u);l+=I(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,c=a+C(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B={current:null},D={transition:null},P={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return B.current.useCallback(e,t)},t.useContext=function(e){return B.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return B.current.useDeferredValue(e)},t.useEffect=function(e,t){return B.current.useEffect(e,t)},t.useId=function(){return B.current.useId()},t.useImperativeHandle=function(e,t,n){return B.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return B.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return B.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return B.current.useMemo(e,t)},t.useReducer=function(e,t,n){return B.current.useReducer(e,t,n)},t.useRef=function(e){return B.current.useRef(e)},t.useState=function(e){return B.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return B.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return B.current.useTransition()},t.version="18.2.0"},294:(e,t,n)=>{"use strict";e.exports=n(408)},893:(e,t,n)=>{"use strict";e.exports=n(251)},452:e=>{e.exports=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";const r=e("glslify"),i=e("primitive-cube"),a=e("unindex-mesh"),o=e("regl-render-envmap");t.exports=function(e){const t=a(i(1)),n=e({vert:r(["\n      precision highp float;\n#define GLSLIFY 1\n\n\n      attribute vec3 position;\n\n      uniform mat4 view, projection;\n\n      varying vec3 pos;\n\n      void main() {\n        gl_Position = projection * view * vec4(position, 1);\n        pos = position;\n      }\n    "]),frag:r(["\n      precision highp float;\n#define GLSLIFY 1\n\n\n      uniform vec3 sundir;\n\n      varying vec3 pos;\n\n      #define PI 3.141592\n#define iSteps 16\n#define jSteps 8\n\nvec2 rsi(vec3 r0, vec3 rd, float sr) {\n    // ray-sphere intersection that assumes\n    // the sphere is centered at the origin.\n    // No intersection when result.x > result.y\n    float a = dot(rd, rd);\n    float b = 2.0 * dot(rd, r0);\n    float c = dot(r0, r0) - (sr * sr);\n    float d = (b*b) - 4.0*a*c;\n    if (d < 0.0) return vec2(1e5,-1e5);\n    return vec2(\n        (-b - sqrt(d))/(2.0*a),\n        (-b + sqrt(d))/(2.0*a)\n    );\n}\n\nvec3 atmosphere(vec3 r, vec3 r0, vec3 pSun, float iSun, float rPlanet, float rAtmos, vec3 kRlh, float kMie, float shRlh, float shMie, float g) {\n    // Normalize the sun and view directions.\n    pSun = normalize(pSun);\n    r = normalize(r);\n\n    // Calculate the step size of the primary ray.\n    vec2 p = rsi(r0, r, rAtmos);\n    if (p.x > p.y) return vec3(0,0,0);\n    p.y = min(p.y, rsi(r0, r, rPlanet).x);\n    float iStepSize = (p.y - p.x) / float(iSteps);\n\n    // Initialize the primary ray time.\n    float iTime = 0.0;\n\n    // Initialize accumulators for Rayleigh and Mie scattering.\n    vec3 totalRlh = vec3(0,0,0);\n    vec3 totalMie = vec3(0,0,0);\n\n    // Initialize optical depth accumulators for the primary ray.\n    float iOdRlh = 0.0;\n    float iOdMie = 0.0;\n\n    // Calculate the Rayleigh and Mie phases.\n    float mu = dot(r, pSun);\n    float mumu = mu * mu;\n    float gg = g * g;\n    float pRlh = 3.0 / (16.0 * PI) * (1.0 + mumu);\n    float pMie = 3.0 / (8.0 * PI) * ((1.0 - gg) * (mumu + 1.0)) / (pow(1.0 + gg - 2.0 * mu * g, 1.5) * (2.0 + gg));\n\n    // Sample the primary ray.\n    for (int i = 0; i < iSteps; i++) {\n\n        // Calculate the primary ray sample position.\n        vec3 iPos = r0 + r * (iTime + iStepSize * 0.5);\n\n        // Calculate the height of the sample.\n        float iHeight = length(iPos) - rPlanet;\n\n        // Calculate the optical depth of the Rayleigh and Mie scattering for this step.\n        float odStepRlh = exp(-iHeight / shRlh) * iStepSize;\n        float odStepMie = exp(-iHeight / shMie) * iStepSize;\n\n        // Accumulate optical depth.\n        iOdRlh += odStepRlh;\n        iOdMie += odStepMie;\n\n        // Calculate the step size of the secondary ray.\n        float jStepSize = rsi(iPos, pSun, rAtmos).y / float(jSteps);\n\n        // Initialize the secondary ray time.\n        float jTime = 0.0;\n\n        // Initialize optical depth accumulators for the secondary ray.\n        float jOdRlh = 0.0;\n        float jOdMie = 0.0;\n\n        // Sample the secondary ray.\n        for (int j = 0; j < jSteps; j++) {\n\n            // Calculate the secondary ray sample position.\n            vec3 jPos = iPos + pSun * (jTime + jStepSize * 0.5);\n\n            // Calculate the height of the sample.\n            float jHeight = length(jPos) - rPlanet;\n\n            // Accumulate the optical depth.\n            jOdRlh += exp(-jHeight / shRlh) * jStepSize;\n            jOdMie += exp(-jHeight / shMie) * jStepSize;\n\n            // Increment the secondary ray time.\n            jTime += jStepSize;\n        }\n\n        // Calculate attenuation.\n        vec3 attn = exp(-(kMie * (iOdMie + jOdMie) + kRlh * (iOdRlh + jOdRlh)));\n\n        // Accumulate scattering.\n        totalRlh += odStepRlh * attn;\n        totalMie += odStepMie * attn;\n\n        // Increment the primary ray time.\n        iTime += iStepSize;\n\n    }\n\n    // Calculate and return the final color.\n    return iSun * (pRlh * kRlh * totalRlh + pMie * kMie * totalMie);\n}\n\n      void main() {\n        vec3 color = atmosphere(\n          normalize(pos),\n          vec3(0,6372e3,0),\n          normalize(sundir),\n          22.0,\n          6371e3,\n          6471e3,\n          vec3(5.5e-6, 13.0e-6, 22.4e-6),\n          21e-6,\n          8e3,\n          1.2e3,\n          0.758\n        );\n\n        gl_FragColor = vec4(color, 1);\n      }\n    "]),attributes:{position:t},uniforms:{sundir:e.prop("sundir"),view:e.prop("view"),projection:e.prop("projection")},viewport:e.prop("viewport"),framebuffer:e.prop("framebuffer"),count:t.length/3});return function(t){return(t=t||{}).sunDirection=void 0===t.sunDirection?[0,.25,-1]:t.sunDirection,t.resolution=void 0===t.resolution?1024:t.resolution,o(e,(function(r){e.clear({color:[0,0,0,1],depth:1,framebuffer:r.framebuffer}),n({view:r.view,projection:r.projection,viewport:r.viewport,framebuffer:r.framebuffer,sundir:t.sunDirection})}),{resolution:t.resolution,cubeFBO:t.cubeFBO})}}},{glslify:3,"primitive-cube":4,"regl-render-envmap":5,"unindex-mesh":6}],2:[function(e,t,n){!function(e,r){if("object"==typeof n&&"object"==typeof t)t.exports=r();else{var i=r();for(var a in i)("object"==typeof n?n:e)[a]=i[a]}}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixArrayType=function(e){t.ARRAY_TYPE=e},t.toRadian=function(e){return e*i},t.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))};var r=t.EPSILON=1e-6;t.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,t.RANDOM=Math.random;var i=Math.PI/180},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=i,t.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,n,i){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=i,a},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=a,t.multiply=o,t.divide=s,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.distance=l,t.squaredDistance=u,t.length=c,t.squaredLength=f,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e},t.random=function(e,t){var n,i,a,o,s,l;t=t||1;do{s=(n=2*r.RANDOM()-1)*n+(i=2*r.RANDOM()-1)*i}while(s>=1);do{l=(a=2*r.RANDOM()-1)*a+(o=2*r.RANDOM()-1)*o}while(l>=1);var u=Math.sqrt((1-s)/l);return e[0]=t*n,e[1]=t*i,e[2]=t*a*u,e[3]=t*o*u,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e},t.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*i,f=u*i+l*r-o*a,d=u*a+o*i-s*r,h=-o*r-s*i-l*a;return e[0]=c*u+h*-o+f*-l-d*-s,e[1]=f*u+h*-s+d*-o-c*-l,e[2]=d*u+h*-l+c*-s-f*-o,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function o(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function s(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function c(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function f(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}t.sub=a,t.mul=o,t.div=s,t.dist=l,t.sqrDist=u,t.len=c,t.sqrLen=f,t.forEach=function(){var e=i();return function(t,n,r,i,a,o){var s,l=void 0;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,t.length):t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.len=t.sqrDist=t.dist=t.div=t.mul=t.sub=void 0,t.create=i,t.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.length=a,t.fromValues=o,t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},t.subtract=s,t.multiply=l,t.divide=u,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},t.distance=c,t.squaredDistance=f,t.squaredLength=d,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=h,t.dot=p,t.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e},t.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e},t.hermite=function(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,l=o*(a-2)+a,u=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+n[0]*l+r[0]*u+i[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+i[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+i[2]*c,e},t.bezier=function(e,t,n,r,i,a){var o=1-a,s=o*o,l=a*a,u=s*o,c=3*a*s,f=3*l*o,d=l*a;return e[0]=t[0]*u+n[0]*c+r[0]*f+i[0]*d,e[1]=t[1]*u+n[1]*c+r[1]*f+i[1]*d,e[2]=t[2]*u+n[2]*c+r[2]*f+i[2]*d,e},t.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,a=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=i*t,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e},t.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},t.transformQuat=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],l=t[1],u=t[2],c=i*u-a*l,f=a*s-r*u,d=r*l-i*s,h=i*d-a*f,p=a*c-r*d,m=r*f-i*c,g=2*o;return c*=g,f*=g,d*=g,h*=2,p*=2,m*=2,e[0]=s+c+h,e[1]=l+f+p,e[2]=u+d+m,e},t.rotateX=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.rotateY=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.rotateZ=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},t.angle=function(e,t){var n=o(e[0],e[1],e[2]),r=o(t[0],t[1],t[2]);h(n,n),h(r,r);var i=p(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=t[0],s=t[1],l=t[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function o(e,t,n){var i=new r.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=n,i}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function l(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function u(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function f(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function d(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function h(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function p(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.sub=s,t.mul=l,t.div=u,t.dist=c,t.sqrDist=f,t.len=a,t.sqrLen=d,t.forEach=function(){var e=i();return function(t,n,r,i,a,o){var s,l=void 0;for(n||(n=3),r||(r=0),s=i?Math.min(i*n+r,t.length):t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],a(e,e,o),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAxes=t.sqlerp=t.rotationTo=t.equals=t.exactEquals=t.normalize=t.sqrLen=t.squaredLength=t.len=t.length=t.lerp=t.dot=t.scale=t.mul=t.add=t.set=t.copy=t.fromValues=t.clone=void 0,t.create=l,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=u,t.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>r.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n},t.multiply=c,t.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-r*s,e},t.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-a*s,e[1]=i*l+o*s,e[2]=a*l+r*s,e[3]=o*l-i*s,e},t.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},t.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},t.slerp=f,t.random=function(e){var t=r.RANDOM(),n=r.RANDOM(),i=r.RANDOM(),a=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*n),e[1]=a*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*i),e[3]=o*Math.cos(2*Math.PI*i),e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=d,t.fromEuler=function(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return e[0]=a*l*c-o*s*u,e[1]=o*s*c+a*l*u,e[2]=o*l*u-a*s*c,e[3]=o*l*c+a*s*u,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"};var r=s(n(0)),i=s(n(5)),a=s(n(2)),o=s(n(1));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function l(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function u(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+o*s+i*u-a*l,e[1]=i*c+o*l+a*s-r*u,e[2]=a*c+o*u+r*l-i*s,e[3]=o*c-r*s-i*l-a*u,e}function f(e,t,n,i){var a=t[0],o=t[1],s=t[2],l=t[3],u=n[0],c=n[1],f=n[2],d=n[3],h=void 0,p=void 0,m=void 0,g=void 0,v=void 0;return(p=a*u+o*c+s*f+l*d)<0&&(p=-p,u=-u,c=-c,f=-f,d=-d),1-p>r.EPSILON?(h=Math.acos(p),m=Math.sin(h),g=Math.sin((1-i)*h)/m,v=Math.sin(i*h)/m):(g=1-i,v=i),e[0]=g*a+v*u,e[1]=g*o+v*c,e[2]=g*s+v*f,e[3]=g*l+v*d,e}function d(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}t.clone=o.clone,t.fromValues=o.fromValues,t.copy=o.copy,t.set=o.set,t.add=o.add,t.mul=c,t.scale=o.scale,t.dot=o.dot,t.lerp=o.lerp;var h=t.length=o.length,p=(t.len=h,t.squaredLength=o.squaredLength),m=(t.sqrLen=p,t.normalize=o.normalize);t.exactEquals=o.exactEquals,t.equals=o.equals,t.rotationTo=function(){var e=a.create(),t=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,i,o){var s=a.dot(i,o);return s<-.999999?(a.cross(e,t,i),a.len(e)<1e-6&&a.cross(e,n,i),a.normalize(e,e),u(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(e,i,o),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,m(r,r))}}(),t.sqlerp=function(){var e=l(),t=l();return function(n,r,i,a,o,s){return f(e,r,o,s),f(t,i,a,s),f(n,e,t,2*s*(1-s)),n}}(),t.setAxes=function(){var e=i.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],m(t,d(t,e))}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function(e,t,n,i,a,o,s,l,u,c,f,d,h,p,m,g){var v=new r.ARRAY_TYPE(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=a,v[5]=o,v[6]=s,v[7]=l,v[8]=u,v[9]=c,v[10]=f,v[11]=d,v[12]=h,v[13]=p,v[14]=m,v[15]=g,v},t.set=function(e,t,n,r,i,a,o,s,l,u,c,f,d,h,p,m,g){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=d,e[12]=h,e[13]=p,e[14]=m,e[15]=g,e},t.identity=i,t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15],b=n*s-r*o,y=n*l-i*o,A=n*u-a*o,w=r*l-i*s,_=r*u-a*s,x=i*u-a*l,S=c*m-f*p,M=c*g-d*p,k=c*v-h*p,E=f*g-d*m,C=f*v-h*m,I=d*v-h*g,O=b*I-y*C+A*E+w*k-_*M+x*S;return O?(O=1/O,e[0]=(s*I-l*C+u*E)*O,e[1]=(i*C-r*I-a*E)*O,e[2]=(m*x-g*_+v*w)*O,e[3]=(d*_-f*x-h*w)*O,e[4]=(l*k-o*I-u*M)*O,e[5]=(n*I-i*k+a*M)*O,e[6]=(g*A-p*x-v*y)*O,e[7]=(c*x-d*A+h*y)*O,e[8]=(o*C-s*k+u*S)*O,e[9]=(r*k-n*C-a*S)*O,e[10]=(p*_-m*A+v*b)*O,e[11]=(f*A-c*_-h*b)*O,e[12]=(s*M-o*E-l*S)*O,e[13]=(n*E-r*M+i*S)*O,e[14]=(m*y-p*w-g*b)*O,e[15]=(c*w-f*y+d*b)*O,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(d*v-h*g)-f*(l*v-u*g)+m*(l*h-u*d),e[1]=-(r*(d*v-h*g)-f*(i*v-a*g)+m*(i*h-a*d)),e[2]=r*(l*v-u*g)-s*(i*v-a*g)+m*(i*u-a*l),e[3]=-(r*(l*h-u*d)-s*(i*h-a*d)+f*(i*u-a*l)),e[4]=-(o*(d*v-h*g)-c*(l*v-u*g)+p*(l*h-u*d)),e[5]=n*(d*v-h*g)-c*(i*v-a*g)+p*(i*h-a*d),e[6]=-(n*(l*v-u*g)-o*(i*v-a*g)+p*(i*u-a*l)),e[7]=n*(l*h-u*d)-o*(i*h-a*d)+c*(i*u-a*l),e[8]=o*(f*v-h*m)-c*(s*v-u*m)+p*(s*h-u*f),e[9]=-(n*(f*v-h*m)-c*(r*v-a*m)+p*(r*h-a*f)),e[10]=n*(s*v-u*m)-o*(r*v-a*m)+p*(r*u-a*s),e[11]=-(n*(s*h-u*f)-o*(r*h-a*f)+c*(r*u-a*s)),e[12]=-(o*(f*g-d*m)-c*(s*g-l*m)+p*(s*d-l*f)),e[13]=n*(f*g-d*m)-c*(r*g-i*m)+p*(r*d-i*f),e[14]=-(n*(s*g-l*m)-o*(r*g-i*m)+p*(r*l-i*s)),e[15]=n*(s*d-l*f)-o*(r*d-i*f)+c*(r*l-i*s),e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],h=e[12],p=e[13],m=e[14],g=e[15];return(t*o-n*a)*(f*g-d*m)-(t*s-r*a)*(c*g-d*p)+(t*l-i*a)*(c*m-f*p)+(n*s-r*o)*(u*g-d*h)-(n*l-i*o)*(u*m-f*h)+(r*l-i*s)*(u*p-c*h)},t.multiply=a,t.translate=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],h=t[7],p=t[8],m=t[9],g=t[10],v=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=d,e[7]=h,e[8]=p,e[9]=m,e[10]=g,e[11]=v,e[12]=o*r+c*i+p*a+t[12],e[13]=s*r+f*i+m*a+t[13],e[14]=l*r+d*i+g*a+t[14],e[15]=u*r+h*i+v*a+t[15]),e},t.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,n,i){var a=i[0],o=i[1],s=i[2],l=Math.sqrt(a*a+o*o+s*s),u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,g=void 0,v=void 0,b=void 0,y=void 0,A=void 0,w=void 0,_=void 0,x=void 0,S=void 0,M=void 0,k=void 0,E=void 0,C=void 0,I=void 0,O=void 0,T=void 0,B=void 0;return l<r.EPSILON?null:(a*=l=1/l,o*=l,s*=l,u=Math.sin(n),f=1-(c=Math.cos(n)),d=t[0],h=t[1],p=t[2],m=t[3],g=t[4],v=t[5],b=t[6],y=t[7],A=t[8],w=t[9],_=t[10],x=t[11],S=a*a*f+c,M=o*a*f+s*u,k=s*a*f-o*u,E=a*o*f-s*u,C=o*o*f+c,I=s*o*f+a*u,O=a*s*f+o*u,T=o*s*f-a*u,B=s*s*f+c,e[0]=d*S+g*M+A*k,e[1]=h*S+v*M+w*k,e[2]=p*S+b*M+_*k,e[3]=m*S+y*M+x*k,e[4]=d*E+g*C+A*I,e[5]=h*E+v*C+w*I,e[6]=p*E+b*C+_*I,e[7]=m*E+y*C+x*I,e[8]=d*O+g*T+A*B,e[9]=h*O+v*T+w*B,e[10]=p*O+b*T+_*B,e[11]=m*O+y*T+x*B,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+f*r,e[7]=l*i+d*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=f*i-s*r,e[11]=d*i-l*r,e},t.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-f*r,e[3]=l*i-d*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+f*i,e[11]=l*r+d*i,e},t.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+f*r,e[3]=l*i+d*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=f*i-s*r,e[7]=d*i-l*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,n){var i=n[0],a=n[1],o=n[2],s=Math.sqrt(i*i+a*a+o*o),l=void 0,u=void 0,c=void 0;return s<r.EPSILON?null:(i*=s=1/s,a*=s,o*=s,l=Math.sin(t),c=1-(u=Math.cos(t)),e[0]=i*i*c+u,e[1]=a*i*c+o*l,e[2]=o*i*c-a*l,e[3]=0,e[4]=i*a*c-o*l,e[5]=a*a*c+u,e[6]=o*a*c+i*l,e[7]=0,e[8]=i*o*c+a*l,e[9]=a*o*c-i*l,e[10]=o*o*c+u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=o,t.fromQuat2=function(e,t){var n=new r.ARRAY_TYPE(3),i=-t[0],a=-t[1],s=-t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7],h=i*i+a*a+s*s+l*l;return h>0?(n[0]=2*(u*l+d*i+c*s-f*a)/h,n[1]=2*(c*l+d*a+f*i-u*s)/h,n[2]=2*(f*l+d*s+u*a-c*i)/h):(n[0]=2*(u*l+d*i+c*s-f*a),n[1]=2*(c*l+d*a+f*i-u*s),n[2]=2*(f*l+d*s+u*a-c*i)),o(e,t,n),e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(l*l+u*u+c*c),e},t.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},t.fromRotationTranslationScale=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],l=i+i,u=a+a,c=o+o,f=i*l,d=i*u,h=i*c,p=a*u,m=a*c,g=o*c,v=s*l,b=s*u,y=s*c,A=r[0],w=r[1],_=r[2];return e[0]=(1-(p+g))*A,e[1]=(d+y)*A,e[2]=(h-b)*A,e[3]=0,e[4]=(d-y)*w,e[5]=(1-(f+g))*w,e[6]=(m+v)*w,e[7]=0,e[8]=(h+b)*_,e[9]=(m-v)*_,e[10]=(1-(f+p))*_,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],l=t[3],u=a+a,c=o+o,f=s+s,d=a*u,h=a*c,p=a*f,m=o*c,g=o*f,v=s*f,b=l*u,y=l*c,A=l*f,w=r[0],_=r[1],x=r[2],S=i[0],M=i[1],k=i[2],E=(1-(m+v))*w,C=(h+A)*w,I=(p-y)*w,O=(h-A)*_,T=(1-(d+v))*_,B=(g+b)*_,D=(p+y)*x,P=(g-b)*x,z=(1-(d+m))*x;return e[0]=E,e[1]=C,e[2]=I,e[3]=0,e[4]=O,e[5]=T,e[6]=B,e[7]=0,e[8]=D,e[9]=P,e[10]=z,e[11]=0,e[12]=n[0]+S-(E*S+O*M+D*k),e[13]=n[1]+M-(C*S+T*M+P*k),e[14]=n[2]+k-(I*S+B*M+z*k),e[15]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,f=r*s,d=i*o,h=i*s,p=i*l,m=a*o,g=a*s,v=a*l;return e[0]=1-f-p,e[1]=c+v,e[2]=d-g,e[3]=0,e[4]=c-v,e[5]=1-u-p,e[6]=h+m,e[7]=0,e[8]=d+g,e[9]=h-m,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,n,r,i,a,o){var s=1/(n-t),l=1/(i-r),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e},t.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=void 0;return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},t.perspectiveFromFieldOfView=function(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(i+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(i-a)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},t.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*u,e[15]=1,e},t.lookAt=function(e,t,n,a){var o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,f=void 0,d=void 0,h=void 0,p=void 0,m=void 0,g=t[0],v=t[1],b=t[2],y=a[0],A=a[1],w=a[2],_=n[0],x=n[1],S=n[2];return Math.abs(g-_)<r.EPSILON&&Math.abs(v-x)<r.EPSILON&&Math.abs(b-S)<r.EPSILON?i(e):(d=g-_,h=v-x,p=b-S,o=A*(p*=m=1/Math.sqrt(d*d+h*h+p*p))-w*(h*=m),s=w*(d*=m)-y*p,l=y*h-A*d,(m=Math.sqrt(o*o+s*s+l*l))?(o*=m=1/m,s*=m,l*=m):(o=0,s=0,l=0),u=h*l-p*s,c=p*o-d*l,f=d*s-h*o,(m=Math.sqrt(u*u+c*c+f*f))?(u*=m=1/m,c*=m,f*=m):(u=0,c=0,f=0),e[0]=o,e[1]=u,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=l,e[9]=f,e[10]=p,e[11]=0,e[12]=-(o*g+s*v+l*b),e[13]=-(u*g+c*v+f*b),e[14]=-(d*g+h*v+p*b),e[15]=1,e)},t.targetTo=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],l=r[1],u=r[2],c=i-n[0],f=a-n[1],d=o-n[2],h=c*c+f*f+d*d;h>0&&(c*=h=1/Math.sqrt(h),f*=h,d*=h);var p=l*d-u*f,m=u*c-s*d,g=s*f-l*c;return(h=p*p+m*m+g*g)>0&&(p*=h=1/Math.sqrt(h),m*=h,g*=h),e[0]=p,e[1]=m,e[2]=g,e[3]=0,e[4]=f*g-d*m,e[5]=d*p-c*g,e[6]=c*m-f*p,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},t.subtract=s,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=e[9],h=e[10],p=e[11],m=e[12],g=e[13],v=e[14],b=e[15],y=t[0],A=t[1],w=t[2],_=t[3],x=t[4],S=t[5],M=t[6],k=t[7],E=t[8],C=t[9],I=t[10],O=t[11],T=t[12],B=t[13],D=t[14],P=t[15];return Math.abs(n-y)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(i-A)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(a-w)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-x)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-k)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(f-E)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(h-I)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-O)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(m-T)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(g-B)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(v-D)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(b-P)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(P))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],b=t[15],y=n[0],A=n[1],w=n[2],_=n[3];return e[0]=y*r+A*s+w*f+_*m,e[1]=y*i+A*l+w*d+_*g,e[2]=y*a+A*u+w*h+_*v,e[3]=y*o+A*c+w*p+_*b,y=n[4],A=n[5],w=n[6],_=n[7],e[4]=y*r+A*s+w*f+_*m,e[5]=y*i+A*l+w*d+_*g,e[6]=y*a+A*u+w*h+_*v,e[7]=y*o+A*c+w*p+_*b,y=n[8],A=n[9],w=n[10],_=n[11],e[8]=y*r+A*s+w*f+_*m,e[9]=y*i+A*l+w*d+_*g,e[10]=y*a+A*u+w*h+_*v,e[11]=y*o+A*c+w*p+_*b,y=n[12],A=n[13],w=n[14],_=n[15],e[12]=y*r+A*s+w*f+_*m,e[13]=y*i+A*l+w*d+_*g,e[14]=y*a+A*u+w*h+_*v,e[15]=y*o+A*c+w*p+_*b,e}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,u=a+a,c=r*s,f=r*l,d=r*u,h=i*l,p=i*u,m=a*u,g=o*s,v=o*l,b=o*u;return e[0]=1-(h+m),e[1]=f+b,e[2]=d-v,e[3]=0,e[4]=f-b,e[5]=1-(c+m),e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-(c+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function s(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}t.mul=a,t.sub=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},t.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},t.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromValues=function(e,t,n,i,a,o,s,l,u){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=a,c[5]=o,c[6]=s,c[7]=l,c[8]=u,c},t.set=function(e,t,n,r,i,a,o,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*o-s*u,d=-c*a+s*l,h=u*a-o*l,p=n*f+r*d+i*h;return p?(p=1/p,e[0]=f*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*o)*p,e[3]=d*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*a)*p,e[6]=h*p,e[7]=(-u*n+r*l)*p,e[8]=(o*n-r*a)*p,e):null},t.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*o,e[3]=s*l-a*c,e[4]=n*c-i*l,e[5]=i*a-n*s,e[6]=a*u-o*l,e[7]=r*l-n*u,e[8]=n*o-r*a,e},t.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-o*l)+n*(-u*i+o*s)+r*(l*i-a*s)},t.multiply=i,t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=n[0],h=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=d*r+h*o+u,e[7]=d*i+h*s+c,e[8]=d*a+h*l+f,e},t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=Math.sin(n),h=Math.cos(n);return e[0]=h*r+d*o,e[1]=h*i+d*s,e[2]=h*a+d*l,e[3]=h*o-d*r,e[4]=h*s-d*i,e[5]=h*l-d*a,e[6]=u,e[7]=c,e[8]=f,e},t.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,f=r*s,d=i*o,h=i*s,p=i*l,m=a*o,g=a*s,v=a*l;return e[0]=1-f-p,e[3]=c-v,e[6]=d+g,e[1]=c+v,e[4]=1-u-p,e[7]=h-m,e[2]=d-g,e[5]=h+m,e[8]=1-u-f,e},t.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15],b=n*s-r*o,y=n*l-i*o,A=n*u-a*o,w=r*l-i*s,_=r*u-a*s,x=i*u-a*l,S=c*m-f*p,M=c*g-d*p,k=c*v-h*p,E=f*g-d*m,C=f*v-h*m,I=d*v-h*g,O=b*I-y*C+A*E+w*k-_*M+x*S;return O?(O=1/O,e[0]=(s*I-l*C+u*E)*O,e[1]=(l*k-o*I-u*M)*O,e[2]=(o*C-s*k+u*S)*O,e[3]=(i*C-r*I-a*E)*O,e[4]=(n*I-i*k+a*M)*O,e[5]=(r*k-n*C-a*S)*O,e[6]=(m*x-g*_+v*w)*O,e[7]=(g*A-p*x-v*y)*O,e[8]=(p*_-m*A+v*b)*O,e):null},t.projection=function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},t.subtract=a,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=e[8],d=t[0],h=t[1],p=t[2],m=t[3],g=t[4],v=t[5],b=t[6],y=t[7],A=t[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-p)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-m)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-g)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-y)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-A)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=n[0],h=n[1],p=n[2],m=n[3],g=n[4],v=n[5],b=n[6],y=n[7],A=n[8];return e[0]=d*r+h*o+p*u,e[1]=d*i+h*s+p*c,e[2]=d*a+h*l+p*f,e[3]=m*r+g*o+v*u,e[4]=m*i+g*s+v*c,e[5]=m*a+g*l+v*f,e[6]=b*r+y*o+A*u,e[7]=b*i+y*s+A*c,e[8]=b*a+y*l+A*f,e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}t.mul=i,t.sub=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=t.sqrLen=t.sqrDist=t.dist=t.div=t.mul=t.sub=t.len=void 0,t.create=i,t.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.subtract=a,t.multiply=o,t.divide=s,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},t.distance=l,t.squaredDistance=u,t.length=c,t.squaredLength=f,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},t.lerp=function(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e},t.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},t.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},t.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},t.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},t.rotate=function(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=i*s-a*o+n[0],e[1]=i*o+a*s+n[1],e},t.angle=function(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var l=(n*i+r*a)*o*s;return l>1?0:l<-1?Math.PI:Math.acos(l)},t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(e,t){var n=e[0],i=e[1],a=t[0],o=t[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(){var e=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function o(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function s(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function c(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function f(e){var t=e[0],n=e[1];return t*t+n*n}t.len=c,t.sub=a,t.mul=o,t.div=s,t.dist=l,t.sqrDist=u,t.sqrLen=f,t.forEach=function(){var e=i();return function(t,n,r,i,a,o){var s,l=void 0;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,t.length):t.length,l=r;l<s;l+=n)e[0]=t[l],e[1]=t[l+1],a(e,e,o),t[l]=e[0],t[l+1]=e[1];return t}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sqrLen=t.squaredLength=t.len=t.length=t.dot=t.mul=t.setReal=t.getReal=void 0,t.create=function(){var e=new r.ARRAY_TYPE(8);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},t.fromValues=function(e,t,n,i,a,o,s,l){var u=new r.ARRAY_TYPE(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=i,u[4]=a,u[5]=o,u[6]=s,u[7]=l,u},t.fromRotationTranslationValues=function(e,t,n,i,a,o,s){var l=new r.ARRAY_TYPE(8);l[0]=e,l[1]=t,l[2]=n,l[3]=i;var u=.5*a,c=.5*o,f=.5*s;return l[4]=u*i+c*n-f*t,l[5]=c*i+f*e-u*n,l[6]=f*i+u*t-c*e,l[7]=-u*e-c*t-f*n,l},t.fromRotationTranslation=s,t.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},t.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.fromMat4=function(e,t){var n=i.create();a.getRotation(n,t);var o=new r.ARRAY_TYPE(3);return a.getTranslation(o,t),s(e,n,o),e},t.copy=l,t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},t.set=function(e,t,n,r,i,a,o,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e},t.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},t.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},t.getTranslation=function(e,t){var n=t[4],r=t[5],i=t[6],a=t[7],o=-t[0],s=-t[1],l=-t[2],u=t[3];return e[0]=2*(n*u+a*o+r*l-i*s),e[1]=2*(r*u+a*s+i*o-n*l),e[2]=2*(i*u+a*l+n*s-r*o),e},t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=.5*n[0],l=.5*n[1],u=.5*n[2],c=t[4],f=t[5],d=t[6],h=t[7];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=o*s+i*u-a*l+c,e[5]=o*l+a*s-r*u+f,e[6]=o*u+r*l-i*s+d,e[7]=-r*s-i*l-a*u+h,e},t.rotateX=function(e,t,n){var r=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*r+u*o-c*a,h=u*s+f*a+c*r-l*o,p=c*s+f*o+l*a-u*r,m=f*s-l*r-u*a-c*o;return i.rotateX(e,t,n),r=e[0],a=e[1],o=e[2],s=e[3],e[4]=d*s+m*r+h*o-p*a,e[5]=h*s+m*a+p*r-d*o,e[6]=p*s+m*o+d*a-h*r,e[7]=m*s-d*r-h*a-p*o,e},t.rotateY=function(e,t,n){var r=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*r+u*o-c*a,h=u*s+f*a+c*r-l*o,p=c*s+f*o+l*a-u*r,m=f*s-l*r-u*a-c*o;return i.rotateY(e,t,n),r=e[0],a=e[1],o=e[2],s=e[3],e[4]=d*s+m*r+h*o-p*a,e[5]=h*s+m*a+p*r-d*o,e[6]=p*s+m*o+d*a-h*r,e[7]=m*s-d*r-h*a-p*o,e},t.rotateZ=function(e,t,n){var r=-t[0],a=-t[1],o=-t[2],s=t[3],l=t[4],u=t[5],c=t[6],f=t[7],d=l*s+f*r+u*o-c*a,h=u*s+f*a+c*r-l*o,p=c*s+f*o+l*a-u*r,m=f*s-l*r-u*a-c*o;return i.rotateZ(e,t,n),r=e[0],a=e[1],o=e[2],s=e[3],e[4]=d*s+m*r+h*o-p*a,e[5]=h*s+m*a+p*r-d*o,e[6]=p*s+m*o+d*a-h*r,e[7]=m*s-d*r-h*a-p*o,e},t.rotateByQuatAppend=function(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],l=t[1],u=t[2],c=t[3];return e[0]=s*o+c*r+l*a-u*i,e[1]=l*o+c*i+u*r-s*a,e[2]=u*o+c*a+s*i-l*r,e[3]=c*o-s*r-l*i-u*a,s=t[4],l=t[5],u=t[6],c=t[7],e[4]=s*o+c*r+l*a-u*i,e[5]=l*o+c*i+u*r-s*a,e[6]=u*o+c*a+s*i-l*r,e[7]=c*o-s*r-l*i-u*a,e},t.rotateByQuatPrepend=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+o*s+i*u-a*l,e[1]=i*c+o*l+a*s-r*u,e[2]=a*c+o*u+r*l-i*s,e[3]=o*c-r*s-i*l-a*u,s=n[4],l=n[5],u=n[6],c=n[7],e[4]=r*c+o*s+i*u-a*l,e[5]=i*c+o*l+a*s-r*u,e[6]=a*c+o*u+r*l-i*s,e[7]=o*c-r*s-i*l-a*u,e},t.rotateAroundAxis=function(e,t,n,i){if(Math.abs(i)<r.EPSILON)return l(e,t);var a=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);i*=.5;var o=Math.sin(i),s=o*n[0]/a,u=o*n[1]/a,c=o*n[2]/a,f=Math.cos(i),d=t[0],h=t[1],p=t[2],m=t[3];e[0]=d*f+m*s+h*c-p*u,e[1]=h*f+m*u+p*s-d*c,e[2]=p*f+m*c+d*u-h*s,e[3]=m*f-d*s-h*u-p*c;var g=t[4],v=t[5],b=t[6],y=t[7];return e[4]=g*f+y*s+v*c-b*u,e[5]=v*f+y*u+b*s-g*c,e[6]=b*f+y*c+g*u-v*s,e[7]=y*f-g*s-v*u-b*c,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e},t.multiply=u,t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e},t.lerp=function(e,t,n,r){var i=1-r;return c(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e},t.invert=function(e,t){var n=d(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},t.normalize=function(e,t){var n=d(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,a=t[2]/n,o=t[3]/n,s=t[4],l=t[5],u=t[6],c=t[7],f=r*s+i*l+a*u+o*c;e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=(s-r*f)/n,e[5]=(l-i*f)/n,e[6]=(u-a*f)/n,e[7]=(c-o*f)/n}return e},t.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],f=t[0],d=t[1],h=t[2],p=t[3],m=t[4],g=t[5],v=t[6],b=t[7];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))};var r=o(n(0)),i=o(n(3)),a=o(n(4));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=t[0],s=t[1],l=t[2],u=t[3];return e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=r*u+i*l-a*s,e[5]=i*u+a*o-r*l,e[6]=a*u+r*s-i*o,e[7]=-r*o-i*s-a*l,e}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function u(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[4],l=n[5],u=n[6],c=n[7],f=t[4],d=t[5],h=t[6],p=t[7],m=n[0],g=n[1],v=n[2],b=n[3];return e[0]=r*b+o*m+i*v-a*g,e[1]=i*b+o*g+a*m-r*v,e[2]=a*b+o*v+r*g-i*m,e[3]=o*b-r*m-i*g-a*v,e[4]=r*c+o*s+i*u-a*l+f*b+p*m+d*v-h*g,e[5]=i*c+o*l+a*s-r*u+d*b+p*g+h*m-f*v,e[6]=a*c+o*u+r*l-i*s+h*b+p*v+f*g-d*m,e[7]=o*c-r*s-i*l-a*u+p*b-f*m-d*g-h*v,e}t.getReal=i.copy,t.setReal=i.copy,t.mul=u;var c=t.dot=i.dot,f=t.length=i.length,d=(t.len=f,t.squaredLength=i.squaredLength);t.sqrLen=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(6);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},t.fromValues=function(e,t,n,i,a,o){var s=new r.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=n,s[3]=i,s[4]=a,s[5]=o,s},t.set=function(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=n*a-r*i;return l?(l=1/l,e[0]=a*l,e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-a*o)*l,e[5]=(r*o-n*s)*l,e):null},t.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},t.multiply=i,t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=i*c+o*u,e[2]=r*-u+a*c,e[3]=i*-u+o*c,e[4]=s,e[5]=l,e},t.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=i*u,e[2]=a*c,e[3]=o*c,e[4]=s,e[5]=l,e},t.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*u+a*c+s,e[5]=i*u+o*c+l,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},t.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},t.subtract=a,t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=t[0],c=t[1],f=t[2],d=t[3],h=t[4],p=t[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-p)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1],f=n[2],d=n[3],h=n[4],p=n[5];return e[0]=r*u+a*c,e[1]=i*u+o*c,e[2]=r*f+a*d,e[3]=i*f+o*d,e[4]=r*h+a*p+s,e[5]=i*h+o*p+l,e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}t.mul=i,t.sub=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.mul=void 0,t.create=function(){var e=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},t.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},t.fromValues=function(e,t,n,i){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=i,a},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},t.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null},t.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},t.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},t.multiply=i,t.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=r*-s+a*l,e[3]=i*-s+o*l,e},t.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*s,e[2]=a*l,e[3]=o*l,e},t.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},t.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},t.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=a,t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))},t.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+a*l,e[1]=i*s+o*l,e[2]=r*u+a*c,e[3]=i*u+o*c,e}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}t.mul=i,t.sub=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=t.vec3=t.vec2=t.quat2=t.quat=t.mat4=t.mat3=t.mat2d=t.mat2=t.glMatrix=void 0;var r=h(n(0)),i=h(n(9)),a=h(n(8)),o=h(n(5)),s=h(n(4)),l=h(n(3)),u=h(n(7)),c=h(n(6)),f=h(n(2)),d=h(n(1));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.glMatrix=r,t.mat2=i,t.mat2d=a,t.mat3=o,t.mat4=s,t.quat=l,t.quat2=u,t.vec2=c,t.vec3=f,t.vec4=d}])}))},{}],3:[function(e,t,n){t.exports=function(e){"string"==typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")}},{}],4:[function(e,t,n){t.exports=function(e,t,n,r,i,a){void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=e),void 0===r&&(r=1),void 0===i&&(i=r),void 0===a&&(a=r);var o=0,s=[],l=[],u=[],c=[];function f(e,t,n,r,i,a,f,d,h,p){for(var m=o,g=0;g<=f;g++)for(var v=0;v<=a;v++){var b=s[o]=[0,0,0];b[e]=(-r/2+v*r/a)*h,b[t]=(-i/2+g*i/f)*p,b[n]=d;var y=l[o]=[0,0,0];y[e]=0,y[t]=0,y[n]=d/Math.abs(d);var A=u[o]=[0,0];A[0]=v/a,A[1]=1-g/f,++o}for(g=0;g<f;g++)for(v=0;v<a;v++){var w=m+g*(a+1)+v;c.push([w,w+a+1,w+a+2]),c.push([w,w+a+2,w+1])}}return f(0,1,2,e,t,r,i,n/2,1,-1),f(0,1,2,e,t,r,i,-n/2,-1,-1),f(2,1,0,n,t,a,i,-e/2,1,-1),f(2,1,0,n,t,a,i,e/2,-1,-1),f(0,2,1,e,n,r,a,t/2,1,1),f(0,2,1,e,n,r,a,-t/2,1,-1),{positions:s,normals:l,uvs:u,cells:c}}},{}],5:[function(e,t,n){"use strict";const r=e("gl-matrix").mat4,i=e("gl-matrix").vec3;t.exports=function(e,t,n){(n=n||{}).resolution=void 0===n.resolution?1024:n.resolution,n.near=void 0===n.near?.1:n.near,n.far=void 0===n.far?1e3:n.far,n.eye=void 0===n.eye?[0,0,0]:n.eye,n.cubeFBO=void 0===n.cubeFBO?e.framebufferCube(n.resolution):n.cubeFBO;const a=[{center:[1,0,0],up:[0,-1,0],fbo:n.cubeFBO.faces[0]},{center:[-1,0,0],up:[0,-1,0],fbo:n.cubeFBO.faces[1]},{center:[0,1,0],up:[0,0,1],fbo:n.cubeFBO.faces[2]},{center:[0,-1,0],up:[0,0,-1],fbo:n.cubeFBO.faces[3]},{center:[0,0,1],up:[0,-1,0],fbo:n.cubeFBO.faces[4]},{center:[0,0,-1],up:[0,-1,0],fbo:n.cubeFBO.faces[5]}];for(let e of a)t({view:r.lookAt([],n.eye,i.add([],n.eye,e.center),e.up),projection:r.perspective([],Math.PI/2,1,n.near,n.far),viewport:{x:0,y:0,width:n.cubeFBO.width,height:n.cubeFBO.height},framebuffer:e.fbo});return n.cubeFBO}},{"gl-matrix":2}],6:[function(e,t,n){t.exports=function(e,t,n){e.positions&&e.cells&&(n=t,t=e.cells,e=e.positions);var r=e.length?e[0].length:0,i=t.length?t[0].length:0;if(n=n||new Float32Array(t.length*i*r),3===i&&2===r)for(var a=0,o=0,s=t.length;a<s;a+=1){var l=t[a];n[o++]=e[l[0]][0],n[o++]=e[l[0]][1],n[o++]=e[l[1]][0],n[o++]=e[l[1]][1],n[o++]=e[l[2]][0],n[o++]=e[l[2]][1]}else if(3===i&&3===r)for(a=0,o=0,s=t.length;a<s;a+=1)l=t[a],n[o++]=e[l[0]][0],n[o++]=e[l[0]][1],n[o++]=e[l[0]][2],n[o++]=e[l[1]][0],n[o++]=e[l[1]][1],n[o++]=e[l[1]][2],n[o++]=e[l[2]][0],n[o++]=e[l[2]][1],n[o++]=e[l[2]][2];else for(a=0,o=0,s=t.length;a<s;a+=1){l=t[a];for(var u=0;u<l.length;u++)for(var c=l[u],f=0;f<r;f++)n[o++]=e[c][f]}return n}},{}]},{},[1])(1)},550:function(e){e.exports=function(){"use strict";var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){var t=new Error("(regl) "+e);throw console.error(t),t}function i(e,t){e||r(t)}function a(e){return e?": "+e:""}function o(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"==typeof e}}function s(e,t,n){t.indexOf(e)<0&&r("invalid value"+a(n)+". must be one of: "+t)}var l=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(e,t){for(e+="";e.length<t;)e=" "+e;return e}function c(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(e,t){this.number=e,this.line=t,this.errors=[]}function d(e,t,n){this.file=e,this.line=t,this.message=n}function h(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function p(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function m(e,t){var n,r=e.split("\n"),i=1,a=0,o={unknown:new c,0:new c};o.unknown.name=o[0].name=t||h(),o.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var l=r[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(u)switch(u[1]){case"line":var d=/(\d+)(\s+\d+)?/.exec(u[2]);d&&(i=0|d[1],d[2]&&((a=0|d[2])in o||(o[a]=new c)));break;case"define":var p=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);p&&(o[a].name=p[1]?(n=p[2],"undefined"!=typeof atob?atob(n):"base64:"+n):p[2])}o[a].lines.push(new f(i++,l))}return Object.keys(o).forEach((function(e){var t=o[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),o}function g(e){e._commandRef=h()}function v(e,t){var n=p();r(e+" in command "+(t||h())+("unknown"===n?"":" called from "+n))}function b(e,t,n,r){o(e,t)||v("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e,r||h())}var y=33071,A={};function w(e,t){return 32820===e||32819===e||33635===e?2:34042===e?4:A[e]*t}function _(e){return!(e&e-1||!e)}A[5120]=A[5121]=1,A[5122]=A[5123]=A[36193]=A[33635]=A[32819]=A[32820]=2,A[5124]=A[5125]=A[5126]=A[34042]=4;var x=t(i,{optional:function(e){e()},raise:r,commandRaise:v,command:function(e,t,n){e||v(t,n||h())},parameter:function(e,t,n){e in t||r("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join())},commandParameter:function(e,t,n,r){e in t||v("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join(),r||h())},constructor:function(e){Object.keys(e).forEach((function(e){l.indexOf(e)<0&&r('invalid regl constructor argument "'+e+'". must be one of '+l)}))},type:function(e,t,n){o(e,t)||r("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e)},commandType:b,isTypedArray:function(t,n){e(t)||r("invalid parameter type"+a(n)+". must be a typed array")},nni:function(e,t){e>=0&&(0|e)===e||r("invalid parameter type, ("+e+")"+a(t)+". must be a nonnegative integer")},oneOf:s,shaderError:function(e,t,r,a,o){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),l=a===e.FRAGMENT_SHADER?"fragment":"vertex";b(r,"string",l+" shader source must be a string",o);var c=m(r,o),f=function(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new d(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new d("unknown",0,e))}})),t}(s);(function(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))})(c,f),Object.keys(c).forEach((function(e){var t=c[e];if(t.hasErrors){var r=[""],i=[""];a("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){a(u(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),a(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(r){var i=r.message,o=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(o){var s=o[1];i=o[2],"assign"===s&&(s="="),t=Math.max(e.line.indexOf(s,t),0)}else t=0;a(u("| ",6)),a(u("^^^",t+3)+n,"font-weight:bold"),a(u("| ",6)),a(i+n,"font-weight:bold")})),a(u("| ",6)+n)}else a(u(e.number,4)+"|  "),a(e.line+n,"color:red")})),"undefined"==typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}function a(e,t){r.push(e),i.push(t||"")}})),i.raise("Error compiling "+l+" shader, "+c[0].name)}},linkError:function(e,t,r,a,o){if(!e.getProgramParameter(t,e.LINK_STATUS)){var s=e.getProgramInfoLog(t),l=m(r,o),u='Error linking program with vertex shader, "'+m(a,o)[0].name+'", and fragment shader "'+l[0].name+'"';"undefined"!=typeof document?console.log("%c"+u+"\n%c"+s,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(u+n+s),i.raise(u)}},callSite:p,saveCommandRef:g,saveDrawInfo:function(e,t,n,r){function i(e){return e?r.id(e):0}function a(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}g(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var o=e._uniformSet={};a(o,t.static),a(o,t.dynamic);var s=e._attributeSet={};a(s,n.static),a(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic},framebufferFormat:function(e,t,n){e.texture?s(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):s(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:h,texture2D:function(e,t,n){var r,a=t.width,o=t.height,s=t.channels;i(a>0&&a<=n.maxTextureSize&&o>0&&o<=n.maxTextureSize,"invalid texture shape"),e.wrapS===y&&e.wrapT===y||i(_(a)&&_(o),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==a&&1!==o&&i(9984!==e.minFilter&&9986!==e.minFilter&&9985!==e.minFilter&&9987!==e.minFilter,"min filter requires mipmap"):(i(_(a)&&_(o),"texture must be a square power of 2 to support mipmapping"),i(t.mipmask===(a<<1)-1,"missing or incomplete mipmap data")),5126===t.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&i(9728===e.minFilter&&9728===e.magFilter,"filter not supported, must enable oes_texture_float_linear"),i(!e.genMipmaps,"mipmap generation not supported with float textures"));var l=t.images;for(r=0;r<16;++r)if(l[r]){var u=a>>r,c=o>>r;i(t.mipmask&1<<r,"missing mipmap data");var f=l[r];if(i(f.width===u&&f.height===c,"invalid shape for mip images"),i(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed);else if(f.data){var d=Math.ceil(w(f.type,s)*u/f.unpackAlignment)*f.unpackAlignment;i(f.data.byteLength===d*c,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else e.genMipmaps||i(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&i(!e.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(e,t,n,r){var a=e.width,o=e.height,s=e.channels;i(a>0&&a<=r.maxTextureSize&&o>0&&o<=r.maxTextureSize,"invalid texture shape"),i(a===o,"cube map must be square"),i(t.wrapS===y&&t.wrapT===y,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var u=n[l];i(u.width===a&&u.height===o,"inconsistent cube map face shape"),t.genMipmaps&&(i(!u.compressed,"can not generate mipmap for compressed textures"),i(1===u.mipmask,"can not specify mipmaps and generate mipmaps"));for(var c=u.images,f=0;f<16;++f){var d=c[f];if(d){var h=a>>f,p=o>>f;i(u.mipmask&1<<f,"missing mipmap data"),i(d.width===h&&d.height===p,"invalid shape for mip images"),i(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed||(d.data?i(d.data.byteLength===h*p*Math.max(w(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}}),S=0;function M(e,t){this.id=S++,this.type=e,this.data=t}function k(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function E(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+k(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return E(e.substr(0,r.index)).concat(E(r[1])).concat(E(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+k(e)+'"'];for(var a=[],o=0;o<i.length;++o)a=a.concat(E(i[o]));return a}function C(e){return"["+E(e).join("][")+"]"}var I={DynamicVariable:M,define:function(e,t){return new M(e,C(t+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof M},unbox:function e(t,n){return"function"==typeof t?new M(0,t):"number"==typeof t||"boolean"==typeof t?new M(5,t):Array.isArray(t)?new M(6,t.map((function(t,r){return e(t,n+"["+r+"]")}))):t instanceof M?t:void x(!1,"invalid option type in uniform "+n)},accessor:C},O={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},T="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function B(e){return"string"==typeof e?e.split():(x(Array.isArray(e),"invalid extension array"),e)}function D(e){return"string"==typeof e?(x("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function P(e){var n,r,i,a,o,s=e||{},l={},u=[],c=[],f="undefined"==typeof window?1:window.devicePixelRatio,d=!1,h=function(e){e&&x.raise(e)},p=function(){};if("string"==typeof s?(x("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),n=document.querySelector(s),x(n,"invalid query string for element")):"object"==typeof s?"string"==typeof(o=s).nodeName&&"function"==typeof o.appendChild&&"function"==typeof o.getBoundingClientRect?n=s:function(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}(s)?i=(a=s).canvas:(x.constructor(s),"gl"in s?a=s.gl:"canvas"in s?i=D(s.canvas):"container"in s&&(r=D(s.container)),"attributes"in s&&(l=s.attributes,x.type(l,"object","invalid context attributes")),"extensions"in s&&(u=B(s.extensions)),"optionalExtensions"in s&&(c=B(s.optionalExtensions)),"onDone"in s&&(x.type(s.onDone,"function","invalid or missing onDone callback"),h=s.onDone),"profile"in s&&(d=!!s.profile),"pixelRatio"in s&&(f=+s.pixelRatio,x(f>0,"invalid pixel ratio"))):x.raise("invalid arguments to regl"),n&&("canvas"===n.nodeName.toLowerCase()?i=n:r=n),!a){if(!i){x("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var m=function(e,n,r){var i,a=document.createElement("canvas");function o(){var t=window.innerWidth,n=window.innerHeight;if(e!==document.body){var i=a.getBoundingClientRect();t=i.right-i.left,n=i.bottom-i.top}a.width=r*t,a.height=r*n}return t(a.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),e.appendChild(a),e===document.body&&(a.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(o)}))).observe(e):window.addEventListener("resize",o,!1),o(),{canvas:a,onDestroy:function(){i?i.disconnect():window.removeEventListener("resize",o),e.removeChild(a)}}}(r||document.body,0,f);if(!m)return null;i=m.canvas,p=m.onDestroy}void 0===l.premultipliedAlpha&&(l.premultipliedAlpha=!0),a=function(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(i,l)}return a?{gl:a,canvas:i,container:r,extensions:u,optionalExtensions:c,pixelRatio:f,profile:d,onDone:h,onDestroy:p}:(p(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function z(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function j(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function R(){var e=z(8,(function(){return[]}));function t(t){var n=function(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}(t),r=e[j(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[j(t.byteLength)>>2].push(t)}return{alloc:t,free:n,allocType:function(e,n){var r=null;switch(e){case 5120:r=new Int8Array(t(n),0,n);break;case 5121:r=new Uint8Array(t(n),0,n);break;case 5122:r=new Int16Array(t(2*n),0,n);break;case 5123:r=new Uint16Array(t(2*n),0,n);break;case 5124:r=new Int32Array(t(4*n),0,n);break;case 5125:r=new Uint32Array(t(4*n),0,n);break;case 5126:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){n(e.buffer)}}}var L=R();L.zero=R();var N=3553,F=6408,Q=5126,U=36160;function V(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var W=function(e){return Object.keys(e).map((function(t){return e[t]}))},q={shape:function(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;var o=r||L.allocType(n,i);switch(t.length){case 0:break;case 1:!function(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}(e,t[0],o);break;case 2:!function(e,t,n,r){for(var i=0,a=0;a<t;++a)for(var o=e[a],s=0;s<n;++s)r[i++]=o[s]}(e,t[0],t[1],o);break;case 3:Y(e,t[0],t[1],t[2],o,0);break;default:X(e,t,0,o,0)}return o}};function Y(e,t,n,r,i,a){for(var o=a,s=0;s<t;++s)for(var l=e[s],u=0;u<n;++u)for(var c=l[u],f=0;f<r;++f)i[o++]=c[f]}function X(e,t,n,r,i){for(var a=1,o=n+1;o<t.length;++o)a*=t[o];var s=t[n];if(t.length-n==4){var l=t[n+1],u=t[n+2],c=t[n+3];for(o=0;o<s;++o)Y(e[o],l,u,c,r,i),i+=a}else for(o=0;o<s;++o)X(e[o],t,n+1,r,i),i+=a}var H={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},G={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},$={dynamic:35048,stream:35040,static:35044},Z=q.flatten,K=q.shape,J=5121,ee=5126,te=[];function ne(e){return 0|H[Object.prototype.toString.call(e)]}function re(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function ie(e,t,n,r,i,a,o){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)e[s++]=t[i*l+a*u+o]}te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},oe=5121,se=5123,le=5125,ue=34963;var ce=new Float32Array(1),fe=new Uint32Array(ce.buffer);function de(e){for(var t=L.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{ce[0]=e[n];var r=fe[0],i=r>>>31<<15,a=(r<<1>>>24)-127,o=r>>13&1023;if(a<-24)t[n]=i;else if(a<-14){var s=-14-a;t[n]=i+(o+1024>>s)}else t[n]=a>15?i+31744:i+(a+15<<10)+o}return t}function he(t){return Array.isArray(t)||e(t)}var pe=function(e){return!(e&e-1||!e)},me=3553,ge=34067,ve=34069,be=6408,ye=6406,Ae=6407,we=6409,_e=6410,xe=32855,Se=6402,Me=34041,ke=35904,Ee=35906,Ce=36193,Ie=33776,Oe=33777,Te=33778,Be=33779,De=5121,Pe=5123,ze=5125,je=5126,Re=33071,Le=9728,Ne=9984,Fe=9987,Qe=4352,Ue=33984,Ve=[Ne,9986,9985,Fe],We=[0,we,_e,Ae,be],qe={};function Ye(e){return"[object "+e+"]"}qe[6409]=qe[6406]=qe[6402]=1,qe[34041]=qe[6410]=2,qe[6407]=qe[35904]=3,qe[6408]=qe[35906]=4;var Xe=Ye("HTMLCanvasElement"),He=Ye("OffscreenCanvas"),Ge=Ye("CanvasRenderingContext2D"),$e=Ye("ImageBitmap"),Ze=Ye("HTMLImageElement"),Ke=Ye("HTMLVideoElement"),Je=Object.keys(H).concat([Xe,He,Ge,$e,Ze,Ke]),et=[];et[5121]=1,et[5126]=4,et[36193]=2,et[5123]=2,et[5125]=4;var tt=[];function nt(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function rt(e){return!!Array.isArray(e)&&!(0===e.length||!he(e[0]))}function it(e){return Object.prototype.toString.call(e)}function at(e){return it(e)===Xe}function ot(e){return it(e)===He}function st(e){if(!e)return!1;var t=it(e);return Je.indexOf(t)>=0||nt(e)||rt(e)||V(e)}function lt(e){return 0|H[Object.prototype.toString.call(e)]}function ut(e,t){return L.allocType(e.type===Ce?je:e.type,t)}function ct(e,t){e.type===Ce?(e.data=de(t),L.freeType(t)):e.data=t}function ft(e,t,n,r,i,a){var o;if(o=void 0!==tt[e]?tt[e]:qe[e]*et[t],a&&(o*=6),i){for(var s=0,l=n;l>=1;)s+=o*l*l,l/=2;return s}return o*n*r}function dt(n,r,i,a,o,s,l){var u={"don't care":Qe,"dont care":Qe,nice:4354,fast:4353},c={repeat:10497,clamp:Re,mirror:33648},f={nearest:Le,linear:9729},d=t({mipmap:Fe,"nearest mipmap nearest":Ne,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":Fe},f),h={none:0,browser:37444},p={uint8:De,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:ye,luminance:we,"luminance alpha":_e,rgb:Ae,rgba:be,rgba4:32854,"rgb5 a1":xe,rgb565:36194},g={};r.ext_srgb&&(m.srgb=ke,m.srgba=Ee),r.oes_texture_float&&(p.float32=p.float=je),r.oes_texture_half_float&&(p.float16=p["half float"]=Ce),r.webgl_depth_texture&&(t(m,{depth:Se,"depth stencil":Me}),t(p,{uint16:Pe,uint32:ze,"depth stencil":34042})),r.webgl_compressed_texture_s3tc&&t(g,{"rgb s3tc dxt1":Ie,"rgba s3tc dxt1":Oe,"rgba s3tc dxt3":Te,"rgba s3tc dxt5":Be}),r.webgl_compressed_texture_atc&&t(g,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),r.webgl_compressed_texture_pvrtc&&t(g,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),r.webgl_compressed_texture_etc1&&(g["rgb etc1"]=36196);var v=Array.prototype.slice.call(n.getParameter(34467));Object.keys(g).forEach((function(e){var t=g[e];v.indexOf(t)>=0&&(m[e]=t)}));var b=Object.keys(m);i.textureFormats=b;var y=[];Object.keys(m).forEach((function(e){var t=m[e];y[t]=e}));var A=[];Object.keys(p).forEach((function(e){var t=p[e];A[t]=e}));var w=[];Object.keys(f).forEach((function(e){w[f[e]]=e}));var _=[];Object.keys(d).forEach((function(e){var t=d[e];_[t]=e}));var S=[];Object.keys(c).forEach((function(e){S[c[e]]=e}));var M=b.reduce((function(e,t){var n=m[t];return n===we||n===ye||n===we||n===_e||n===Se||n===Me||r.ext_srgb&&(n===ke||n===Ee)?e[n]=n:n===xe||t.indexOf("rgba")>=0?e[n]=be:e[n]=Ae,e}),{});function k(){this.internalformat=be,this.format=be,this.type=De,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function E(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function C(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(x.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(x.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(x.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(x.parameter(t.colorSpace,h,"invalid colorSpace"),e.colorSpace=h[t.colorSpace]),"type"in t){var n=t.type;x(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),x(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),x(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(n,p,"invalid texture type"),e.type=p[n]}var a=e.width,o=e.height,s=e.channels,l=!1;"shape"in t?(x(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),a=t.shape[0],o=t.shape[1],3===t.shape.length&&(s=t.shape[2],x(s>0&&s<=4,"invalid number of channels"),l=!0),x(a>=0&&a<=i.maxTextureSize,"invalid width"),x(o>=0&&o<=i.maxTextureSize,"invalid height")):("radius"in t&&(a=o=t.radius,x(a>=0&&a<=i.maxTextureSize,"invalid radius")),"width"in t&&(a=t.width,x(a>=0&&a<=i.maxTextureSize,"invalid width")),"height"in t&&(o=t.height,x(o>=0&&o<=i.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,x(s>0&&s<=4,"invalid number of channels"),l=!0)),e.width=0|a,e.height=0|o,e.channels=0|s;var u=!1;if("format"in t){var c=t.format;x(r.webgl_depth_texture||!("depth"===c||"depth stencil"===c),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),x.parameter(c,m,"invalid texture format");var f=e.internalformat=m[c];e.format=M[f],c in p&&("type"in t||(e.type=p[c])),c in g&&(e.compressed=!0),u=!0}!l&&u?e.channels=qe[e.format]:l&&!u?e.channels!==We[e.format]&&(e.format=e.internalformat=We[e.channels]):u&&l&&x(e.channels===qe[e.format],"number of channels inconsistent with specified format")}}function I(e){n.pixelStorei(37440,e.flipY),n.pixelStorei(37441,e.premultiplyAlpha),n.pixelStorei(37443,e.colorSpace),n.pixelStorei(3317,e.unpackAlignment)}function O(){k.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function T(t,n){var r=null;if(st(n)?r=n:n&&(x.type(n,"object","invalid pixel data type"),C(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),st(n.data)&&(r=n.data)),x(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){x(!r,"can not specify copy and data field for the same texture");var a=o.viewportWidth,s=o.viewportHeight;t.width=t.width||a-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,x(t.xOffset>=0&&t.xOffset<a&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=a&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==De||(t.type=lt(r));else if(nt(r))t.channels=t.channels||4,function(e,t){var n=t.length;switch(e.type){case De:case Pe:case ze:case je:var r=L.allocType(e.type,n);r.set(t),e.data=r;break;case Ce:e.data=de(t);break;default:x.raise("unsupported texture type, must specify a typed array")}}(t,r),t.alignment=1,t.needsFree=!0;else if(V(r)){var l=r.data;Array.isArray(l)||t.type!==De||(t.type=lt(l));var u,c,f,d,h,p,m=r.shape,g=r.stride;3===m.length?(f=m[2],p=g[2]):(x(2===m.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,p=1),u=m[0],c=m[1],d=g[0],h=g[1],t.alignment=1,t.width=u,t.height=c,t.channels=f,t.format=t.internalformat=We[f],t.needsFree=!0,function(e,t,n,r,i,a){for(var o=e.width,s=e.height,l=e.channels,u=ut(e,o*s*l),c=0,f=0;f<s;++f)for(var d=0;d<o;++d)for(var h=0;h<l;++h)u[c++]=t[n*d+r*f+i*h+a];ct(e,u)}(t,l,d,h,p,r.offset)}else if(at(r)||ot(r)||it(r)===Ge)at(r)||ot(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(function(e){return it(e)===$e}(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(function(e){return it(e)===Ze}(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(function(e){return it(e)===Ke}(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(rt(r)){var v=t.width||r[0].length,b=t.height||r.length,y=t.channels;y=he(r[0][0])?y||r[0][0].length:y||1;for(var A=q.shape(r),w=1,_=0;_<A.length;++_)w*=A[_];var S=ut(t,w);q.flatten(r,A,"",S),ct(t,S),t.alignment=1,t.width=v,t.height=b,t.channels=y,t.format=t.internalformat=We[y],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===je?x(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Ce&&x(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function B(e,t,r){var i=e.element,o=e.data,s=e.internalformat,l=e.format,u=e.type,c=e.width,f=e.height;I(e),i?n.texImage2D(t,r,l,l,u,i):e.compressed?n.compressedTexImage2D(t,r,s,c,f,0,o):e.needsCopy?(a(),n.copyTexImage2D(t,r,l,e.xOffset,e.yOffset,c,f,0)):n.texImage2D(t,r,l,c,f,0,l,u,o||null)}function D(e,t,r,i,o){var s=e.element,l=e.data,u=e.internalformat,c=e.format,f=e.type,d=e.width,h=e.height;I(e),s?n.texSubImage2D(t,o,r,i,c,f,s):e.compressed?n.compressedTexSubImage2D(t,o,r,i,u,d,h,l):e.needsCopy?(a(),n.copyTexSubImage2D(t,o,r,i,e.xOffset,e.yOffset,d,h)):n.texSubImage2D(t,o,r,i,d,h,c,f,l)}var P=[];function z(){return P.pop()||new O}function j(e){e.needsFree&&L.freeType(e.data),O.call(e),P.push(e)}function R(){k.call(this),this.genMipmaps=!1,this.mipmapHint=Qe,this.mipmask=0,this.images=Array(16)}function N(e,t,n){var r=e.images[0]=z();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function F(e,t){var n=null;if(st(t))E(n=e.images[0]=z(),e),T(n,t),e.mipmask=1;else if(C(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)E(n=e.images[i]=z(),e),n.width>>=i,n.height>>=i,T(n,r[i]),e.mipmask|=1<<i;else E(n=e.images[0]=z(),e),T(n,t),e.mipmask=1;E(e,e.images[0]),!e.compressed||e.internalformat!==Ie&&e.internalformat!==Oe&&e.internalformat!==Te&&e.internalformat!==Be||x(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Q(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;B(n[r],t,r)}}var U=[];function Y(){var e=U.pop()||new R;k.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function X(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&j(t[n]),t[n]=null;U.push(e)}function H(){this.minFilter=Le,this.magFilter=Le,this.wrapS=Re,this.wrapT=Re,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Qe}function G(e,t){if("min"in t){var n=t.min;x.parameter(n,d),e.minFilter=d[n],Ve.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;x.parameter(r,f),e.magFilter=f[r]}var a=e.wrapS,o=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(x.parameter(s,c),a=o=c[s]):Array.isArray(s)&&(x.parameter(s[0],c),x.parameter(s[1],c),a=c[s[0]],o=c[s[1]])}else{if("wrapS"in t){var l=t.wrapS;x.parameter(l,c),a=c[l]}if("wrapT"in t){var h=t.wrapT;x.parameter(h,c),o=c[h]}}if(e.wrapS=a,e.wrapT=o,"anisotropic"in t){var p=t.anisotropic;x("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var m=!1;switch(typeof t.mipmap){case"string":x.parameter(t.mipmap,u,"invalid mipmap hint"),e.mipmapHint=u[t.mipmap],e.genMipmaps=!0,m=!0;break;case"boolean":m=e.genMipmaps=t.mipmap;break;case"object":x(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,m=!0;break;default:x.raise("invalid mipmap type")}m&&!("min"in t)&&(e.minFilter=Ne)}}function $(e,t){n.texParameteri(t,10241,e.minFilter),n.texParameteri(t,10240,e.magFilter),n.texParameteri(t,10242,e.wrapS),n.texParameteri(t,10243,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,34046,e.anisotropic),e.genMipmaps&&(n.hint(33170,e.mipmapHint),n.generateMipmap(t))}var Z=0,K={},J=i.maxTextureUnits,ee=Array(J).map((function(){return null}));function te(e){k.call(this),this.mipmask=0,this.internalformat=be,this.id=Z++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new H,l.profile&&(this.stats={size:0})}function ne(e){n.activeTexture(Ue),n.bindTexture(e.target,e.texture)}function re(){var e=ee[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(me,null)}function ie(e){var t=e.texture;x(t,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(n.activeTexture(Ue+r),n.bindTexture(i,null),ee[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete K[e.id],s.textureCount--}return t(te.prototype,{bind:function(){var e=this;e.bindCount+=1;var t=e.unit;if(t<0){for(var r=0;r<J;++r){var i=ee[r];if(i){if(i.bindCount>0)continue;i.unit=-1}ee[r]=e,t=r;break}t>=J&&x.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),e.unit=t,n.activeTexture(Ue+t),n.bindTexture(e.target,e.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ie(this)}}),l.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(K).forEach((function(t){e+=K[t].stats.size})),e}),{create2D:function(e,t){var r=new te(me);function a(e,t){var n=r.texInfo;H.call(n);var o=Y();return"number"==typeof e?N(o,0|e,"number"==typeof t?0|t:0|e):e?(x.type(e,"object","invalid arguments to regl.texture"),G(n,e),F(o,e)):N(o,1,1),n.genMipmaps&&(o.mipmask=(o.width<<1)-1),r.mipmask=o.mipmask,E(r,o),x.texture2D(n,o,i),r.internalformat=o.internalformat,a.width=o.width,a.height=o.height,ne(r),Q(o,me),$(n,me),re(),X(o),l.profile&&(r.stats.size=ft(r.internalformat,r.type,o.width,o.height,n.genMipmaps,!1)),a.format=y[r.internalformat],a.type=A[r.type],a.mag=w[n.magFilter],a.min=_[n.minFilter],a.wrapS=S[n.wrapS],a.wrapT=S[n.wrapT],a}return K[r.id]=r,s.textureCount++,a(e,t),a.subimage=function(e,t,n,i){x(!!e,"must specify image data");var o=0|t,s=0|n,l=0|i,u=z();return E(u,r),u.width=0,u.height=0,T(u,e),u.width=u.width||(r.width>>l)-o,u.height=u.height||(r.height>>l)-s,x(r.type===u.type&&r.format===u.format&&r.internalformat===u.internalformat,"incompatible format for texture.subimage"),x(o>=0&&s>=0&&o+u.width<=r.width&&s+u.height<=r.height,"texture.subimage write out of bounds"),x(r.mipmask&1<<l,"missing mipmap data"),x(u.data||u.element||u.needsCopy,"missing image data"),ne(r),D(u,me,o,s,l),re(),j(u),a},a.resize=function(e,t){var i=0|e,o=0|t||i;if(i===r.width&&o===r.height)return a;a.width=r.width=i,a.height=r.height=o,ne(r);for(var s=0;r.mipmask>>s;++s){var u=i>>s,c=o>>s;if(!u||!c)break;n.texImage2D(me,s,r.format,u,c,0,r.format,r.type,null)}return re(),l.profile&&(r.stats.size=ft(r.internalformat,r.type,i,o,!1,!1)),a},a._reglType="texture2d",a._texture=r,l.profile&&(a.stats=r.stats),a.destroy=function(){r.decRef()},a},createCube:function(e,t,r,a,o,u){var c=new te(ge);K[c.id]=c,s.cubeCount++;var f=new Array(6);function d(e,t,n,r,a,o){var s,u=c.texInfo;for(H.call(u),s=0;s<6;++s)f[s]=Y();if("number"!=typeof e&&e)if("object"==typeof e)if(t)F(f[0],e),F(f[1],t),F(f[2],n),F(f[3],r),F(f[4],a),F(f[5],o);else if(G(u,e),C(c,e),"faces"in e){var h=e.faces;for(x(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),s=0;s<6;++s)x("object"==typeof h[s]&&!!h[s],"invalid input for cube map face"),E(f[s],c),F(f[s],h[s])}else for(s=0;s<6;++s)F(f[s],e);else x.raise("invalid arguments to cube map");else{var p=0|e||1;for(s=0;s<6;++s)N(f[s],p,p)}for(E(c,f[0]),x.optional((function(){i.npotTextureCube||x(pe(c.width)&&pe(c.height),"your browser does not support non power or two texture dimensions")})),u.genMipmaps?c.mipmask=(f[0].width<<1)-1:c.mipmask=f[0].mipmask,x.textureCube(c,u,f,i),c.internalformat=f[0].internalformat,d.width=f[0].width,d.height=f[0].height,ne(c),s=0;s<6;++s)Q(f[s],ve+s);for($(u,ge),re(),l.profile&&(c.stats.size=ft(c.internalformat,c.type,d.width,d.height,u.genMipmaps,!0)),d.format=y[c.internalformat],d.type=A[c.type],d.mag=w[u.magFilter],d.min=_[u.minFilter],d.wrapS=S[u.wrapS],d.wrapT=S[u.wrapT],s=0;s<6;++s)X(f[s]);return d}return d(e,t,r,a,o,u),d.subimage=function(e,t,n,r,i){x(!!t,"must specify image data"),x("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var a=0|n,o=0|r,s=0|i,l=z();return E(l,c),l.width=0,l.height=0,T(l,t),l.width=l.width||(c.width>>s)-a,l.height=l.height||(c.height>>s)-o,x(c.type===l.type&&c.format===l.format&&c.internalformat===l.internalformat,"incompatible format for texture.subimage"),x(a>=0&&o>=0&&a+l.width<=c.width&&o+l.height<=c.height,"texture.subimage write out of bounds"),x(c.mipmask&1<<s,"missing mipmap data"),x(l.data||l.element||l.needsCopy,"missing image data"),ne(c),D(l,ve+e,a,o,s),re(),j(l),d},d.resize=function(e){var t=0|e;if(t!==c.width){d.width=c.width=t,d.height=c.height=t,ne(c);for(var r=0;r<6;++r)for(var i=0;c.mipmask>>i;++i)n.texImage2D(ve+r,i,c.format,t>>i,t>>i,0,c.format,c.type,null);return re(),l.profile&&(c.stats.size=ft(c.internalformat,c.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=c,l.profile&&(d.stats=c.stats),d.destroy=function(){c.decRef()},d},clear:function(){for(var e=0;e<J;++e)n.activeTexture(Ue+e),n.bindTexture(me,null),ee[e]=null;W(K).forEach(ie),s.cubeCount=0,s.textureCount=0},getTexture:function(e){return null},restore:function(){for(var e=0;e<J;++e){var t=ee[e];t&&(t.bindCount=0,t.unit=-1,ee[e]=null)}W(K).forEach((function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===me)n.texImage2D(me,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(ve+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);$(e.texInfo,e.target)}))},refresh:function(){for(var e=0;e<J;++e){var t=ee[e];t&&(t.bindCount=0,t.unit=-1,ee[e]=null),n.activeTexture(Ue+e),n.bindTexture(me,null),n.bindTexture(ge,null)}}}}tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var ht=36161,pt=32854,mt=[];function gt(e,t,n){return mt[e]*t*n}mt[32854]=2,mt[32855]=2,mt[36194]=2,mt[33189]=2,mt[36168]=1,mt[34041]=4,mt[35907]=4,mt[34836]=16,mt[34842]=8,mt[34843]=6;var vt=36160,bt=36161,yt=3553,At=34069,wt=[6407,6408],_t=[];_t[6408]=4,_t[6407]=3;var xt=[];xt[5121]=1,xt[5126]=4,xt[36193]=2;var St=[32854,32855,36194,35907,34842,34843,34836],Mt={};Mt[36053]="complete",Mt[36054]="incomplete attachment",Mt[36057]="incomplete dimensions",Mt[36055]="incomplete, missing attachment",Mt[36061]="unsupported";var kt=34963,Et=["attributes","elements","offset","count","primitive","instances"];function Ct(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}var It=5121,Ot=5126;function Tt(t,n,r,i,a,o,s){function l(l){var u;null===n.next?(x(a.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=It):(x(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=n.next.colorAttachments[0].texture._texture.type,x.optional((function(){o.oes_texture_float?(x(u===It||u===Ot,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===Ot&&x(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):x(u===It,"Reading from a framebuffer is only allowed for the type 'uint8'")})));var c=0,f=0,d=i.framebufferWidth,h=i.framebufferHeight,p=null;e(l)?p=l:l&&(x.type(l,"object","invalid arguments to regl.read()"),c=0|l.x,f=0|l.y,x(c>=0&&c<i.framebufferWidth,"invalid x offset for regl.read"),x(f>=0&&f<i.framebufferHeight,"invalid y offset for regl.read"),d=0|(l.width||i.framebufferWidth-c),h=0|(l.height||i.framebufferHeight-f),p=l.data||null),p&&(u===It?x(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===Ot&&x(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),x(d>0&&d+c<=i.framebufferWidth,"invalid width for read pixels"),x(h>0&&h+f<=i.framebufferHeight,"invalid height for read pixels"),r();var m=d*h*4;return p||(u===It?p=new Uint8Array(m):u===Ot&&(p=p||new Float32Array(m))),x.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),x(p.byteLength>=m,"data buffer for regl.read() too small"),t.pixelStorei(3333,4),t.readPixels(c,f,d,h,6408,u,p),p}return function(e){return e&&"framebuffer"in e?function(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=l(e)})),t}(e):l(e)}}function Bt(e){return Array.prototype.slice.call(e)}function Dt(e){return Bt(e).join("")}var Pt="xyzw".split(""),zt="dither",jt="blend.enable",Rt="blend.color",Lt="blend.equation",Nt="blend.func",Ft="depth.enable",Qt="depth.func",Ut="depth.range",Vt="depth.mask",Wt="colorMask",qt="cull.enable",Yt="cull.face",Xt="frontFace",Ht="lineWidth",Gt="polygonOffset.enable",$t="polygonOffset.offset",Zt="sample.alpha",Kt="sample.enable",Jt="sample.coverage",en="stencil.enable",tn="stencil.mask",nn="stencil.func",rn="stencil.opFront",an="stencil.opBack",on="scissor.enable",sn="scissor.box",ln="viewport",un="profile",cn="framebuffer",fn="vert",dn="frag",hn="elements",pn="primitive",mn="count",gn="offset",vn="instances",bn="vao",yn="Width",An="Height",wn=cn+yn,_n=cn+An,xn="drawingBufferWidth",Sn="drawingBufferHeight",Mn=[Nt,Lt,nn,rn,an,Jt,ln,sn,$t],kn=34962,En=34963,Cn=5126,In=35664,On=35665,Tn=35666,Bn=5124,Dn=35667,Pn=35668,zn=35669,jn=35670,Rn=35671,Ln=35672,Nn=35673,Fn=35674,Qn=35675,Un=35676,Vn=35678,Wn=35680,qn=1028,Yn=1029,Xn=2305,Hn=7680,Gn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$n=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Zn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Kn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Jn={frag:35632,vert:35633},er={cw:2304,ccw:Xn};function tr(t){return Array.isArray(t)||e(t)||V(t)}function nr(e){return e.sort((function(e,t){return e===ln?-1:t===ln?1:e<t?-1:1}))}function rr(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function ir(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function ar(e){return new rr(!1,!1,!1,e)}function or(e,t){var n=e.type;if(0===n){var r=e.data.length;return new rr(!0,r>=1,r>=2,t)}if(4===n){var i=e.data;return new rr(i.thisDep,i.contextDep,i.propDep,t)}if(5===n)return new rr(!1,!1,!1,t);if(6===n){for(var a=!1,o=!1,s=!1,l=0;l<e.data.length;++l){var u=e.data[l];if(1===u.type)s=!0;else if(2===u.type)o=!0;else if(3===u.type)a=!0;else if(0===u.type){a=!0;var c=u.data;c>=1&&(o=!0),c>=2&&(s=!0)}else 4===u.type&&(a=a||u.data.thisDep,o=o||u.data.contextDep,s=s||u.data.propDep)}return new rr(a,o,s,t)}return new rr(3===n,2===n,1===n,t)}var sr=new rr(!1,!1,!1,(function(){}));function lr(e,n,r,i,a,o,s,l,u,c,f,d,h,p,m){var g=c.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=32775,v.max=32776);var b=r.angle_instanced_arrays,y=r.webgl_draw_buffers,A=r.oes_vertex_array_object,w={dirty:!0,profile:m.profile},_={},S=[],M={},k={};function E(e){return e.replace(".","_")}function C(e,t,n){var r=E(e);S.push(e),_[r]=w[r]=!!n,M[r]=t}function O(e,t,n){var r=E(e);S.push(e),Array.isArray(n)?(w[r]=n.slice(),_[r]=n.slice()):w[r]=_[r]=n,k[r]=t}C(zt,3024),C(jt,3042),O(Rt,"blendColor",[0,0,0,0]),O(Lt,"blendEquationSeparate",[32774,32774]),O(Nt,"blendFuncSeparate",[1,0,1,0]),C(Ft,2929,!0),O(Qt,"depthFunc",513),O(Ut,"depthRange",[0,1]),O(Vt,"depthMask",!0),O(Wt,Wt,[!0,!0,!0,!0]),C(qt,2884),O(Yt,"cullFace",Yn),O(Xt,Xt,Xn),O(Ht,Ht,1),C(Gt,32823),O($t,"polygonOffset",[0,0]),C(Zt,32926),C(Kt,32928),O(Jt,"sampleCoverage",[1,!1]),C(en,2960),O(tn,"stencilMask",-1),O(nn,"stencilFunc",[519,0,-1]),O(rn,"stencilOpSeparate",[qn,Hn,Hn,Hn]),O(an,"stencilOpSeparate",[Yn,Hn,Hn,Hn]),C(on,3089),O(sn,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),O(ln,ln,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var T={gl:e,context:h,strings:n,next:_,current:w,draw:d,elements:o,buffer:a,shader:f,attributes:c.state,vao:c,uniforms:u,framebuffer:l,extensions:r,timer:p,isBufferArgs:tr},B={primTypes:ae,compareFuncs:Zn,blendFuncs:Gn,blendEquations:v,stencilOps:Kn,glTypes:G,orientationType:er};x.optional((function(){T.isArrayLike=he})),y&&(B.backBuffer=[Yn],B.drawBuffer=z(i.maxDrawbuffers,(function(e){return 0===e?[0]:z(e,(function(e){return 36064+e}))})));var D=0;function P(){var e=function(){var e=0,n=[],r=[];function i(){var n=[],r=[];return t((function(){n.push.apply(n,Bt(arguments))}),{def:function(){var t="v"+e++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,Bt(arguments)),n.push(";")),t},toString:function(){return Dt([r.length>0?"var "+r.join(",")+";":"",Dt(n)])}})}function a(){var e=i(),n=i(),r=e.toString,a=n.toString;function o(t,r){n(t,r,"=",e.def(t,r),";")}return t((function(){e.apply(e,Bt(arguments))}),{def:e.def,entry:e,exit:n,save:o,set:function(t,n,r){o(t,n),e(t,n,"=",r,";")},toString:function(){return r()+a()}})}var o=i(),s={};return{global:o,link:function(t){for(var i=0;i<r.length;++i)if(r[i]===t)return n[i];var a="g"+e++;return n.push(a),r.push(t),a},block:i,proc:function(e,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var o=0;o<n;++o)i();var l=a(),u=l.toString;return s[e]=t(l,{arg:i,toString:function(){return Dt(["function(",r.join(),"){",u(),"}"])}})},scope:a,cond:function(){var e=Dt(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return t(n,{then:function(){return n.apply(n,Bt(arguments)),this},else:function(){return r.apply(r,Bt(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Dt(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',o,"return {"];Object.keys(s).forEach((function(t){e.push('"',t,'":',s[t].toString(),",")})),e.push("}");var t=Dt(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}}}(),r=e.link,i=e.global;e.id=D++,e.batchId="0";var a=r(T),o=e.shared={props:"a0"};Object.keys(T).forEach((function(e){o[e]=i.def(a,".",e)})),x.optional((function(){e.CHECK=r(x),e.commandStr=x.guessCommand(),e.command=r(e.commandStr),e.assert=function(e,t,n){e("if(!(",t,"))",this.CHECK,".commandRaise(",r(n),",",this.command,");")},B.invalidBlendCombinations=$n}));var s=e.next={},l=e.current={};Object.keys(k).forEach((function(e){Array.isArray(w[e])&&(s[e]=i.def(o.next,".",e),l[e]=i.def(o.current,".",e))}));var u=e.constants={};Object.keys(B).forEach((function(e){u[e]=i.def(JSON.stringify(B[e]))})),e.invoke=function(t,n){switch(n.type){case 0:var i=["this",o.context,o.props,e.batchId];return t.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case 1:return t.def(o.props,n.data);case 2:return t.def(o.context,n.data);case 3:return t.def("this",n.data);case 4:return n.data.append(e,t),n.data.ref;case 5:return n.data.toString();case 6:return n.data.map((function(n){return e.invoke(t,n)}))}},e.attribCache={};var f={};return e.scopeAttrib=function(e){var t=n.id(e);if(t in f)return f[t];var i=c.scope[t];return i||(i=c.scope[t]=new g),f[t]=r(i)},e}function j(e,t,s,u,d){var h=e.static,p=e.dynamic;x.optional((function(){var e=[cn,fn,dn,hn,pn,gn,mn,vn,un,bn].concat(S);function t(t){Object.keys(t).forEach((function(t){x.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',d.commandStr)}))}t(h),t(p)}));var m=function(e,t){var n=e.static;if("string"==typeof n[dn]&&"string"==typeof n[fn]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var a=[],o=0;o<i.length;++o)x("number"==typeof r[i[o]],"must specify all vertex attribute locations when using vaos"),a.push([0|r[i[o]],i[o]]);return a}}return null}(e,t),y=function(e,t){var n=e.static,r=e.dynamic;if(cn in n){var i=n[cn];return i?(i=l.getFramebuffer(i),x.command(i,"invalid framebuffer object"),ar((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var a=r.context;return t.set(a,"."+wn,n+".width"),t.set(a,"."+_n,n+".height"),n}))):ar((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+wn,r+"."+xn),t.set(r,"."+_n,r+"."+Sn),"null"}))}if(cn in r){var a=r[cn];return or(a,(function(e,t){var n=e.invoke(t,a),r=e.shared,i=r.framebuffer,o=t.def(i,".getFramebuffer(",n,")");x.optional((function(){e.assert(t,"!"+n+"||"+o,"invalid framebuffer object")})),t.set(i,".next",o);var s=r.context;return t.set(s,"."+wn,o+"?"+o+".width:"+s+"."+xn),t.set(s,"."+_n,o+"?"+o+".height:"+s+"."+Sn),o}))}return null}(e),A=function(e,t,n){var r=e.static,i=e.dynamic;function a(e){if(e in r){var a=r[e];x.commandType(a,"object","invalid "+e,n.commandStr);var o,s,l=!0,u=0|a.x,c=0|a.y;return"width"in a?(o=0|a.width,x.command(o>=0,"invalid "+e,n.commandStr)):l=!1,"height"in a?(s=0|a.height,x.command(s>=0,"invalid "+e,n.commandStr)):l=!1,new rr(!l&&t&&t.thisDep,!l&&t&&t.contextDep,!l&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=o;"width"in a||(r=t.def(n,".",wn,"-",u));var i=s;return"height"in a||(i=t.def(n,".",_n,"-",c)),[u,c,r,i]}))}if(e in i){var f=i[e],d=or(f,(function(t,n){var r=t.invoke(n,f);x.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var i=t.shared.context,a=n.def(r,".x|0"),o=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",wn,"-",a,")"),l=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",_n,"-",o,")");return x.optional((function(){t.assert(n,s+">=0&&"+l+">=0","invalid "+e)})),[a,o,s,l]}));return t&&(d.thisDep=d.thisDep||t.thisDep,d.contextDep=d.contextDep||t.contextDep,d.propDep=d.propDep||t.propDep),d}return t?new rr(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",wn),t.def(n,".",_n)]})):null}var o=a(ln);if(o){var s=o;o=new rr(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n}))}return{viewport:o,scissor_box:a(sn)}}(e,y,d),w=function(e,t){var n=e.static,r=e.dynamic,i={},a=!1,s=function(){if(bn in n){var e=n[bn];return null!==e&&null===c.getVAO(e)&&(e=c.createVAO(e)),a=!0,i.vao=e,ar((function(t){var n=c.getVAO(e);return n?t.link(n):"null"}))}if(bn in r){a=!0;var t=r[bn];return or(t,(function(e,n){var r=e.invoke(n,t);return n.def(e.shared.vao+".getVAO("+r+")")}))}return null}(),l=!1,u=function(){if(hn in n){var e=n[hn];if(i.elements=e,tr(e)){var u=i.elements=o.create(e,!0);e=o.getElements(u),l=!0}else e&&(e=o.getElements(e),l=!0,x.command(e,"invalid elements",t.commandStr));var c=ar((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return c.value=e,c}if(hn in r){l=!0;var f=r[hn];return or(f,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,f),o=t.def("null"),s=t.def(r,"(",a,")"),l=e.cond(s).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");");return x.optional((function(){e.assert(l.else,"!"+a+"||"+o,"invalid elements")})),t.entry(l),t.exit(e.cond(s).then(i,".destroyStream(",o,");")),e.ELEMENTS=o,o}))}return a?new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.elements+".getElements("+e.shared.vao+".currentVAO.elements):null")})):null}();function f(e,o){if(e in n){var u=0|n[e];return o?i.offset=u:i.instances=u,x.command(!o||u>=0,"invalid "+e,t.commandStr),ar((function(e,t){return o&&(e.OFFSET=u),u}))}if(e in r){var c=r[e];return or(c,(function(t,n){var r=t.invoke(n,c);return o&&(t.OFFSET=r,x.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}if(o){if(l)return ar((function(e,t){return e.OFFSET=0,0}));if(a)return new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.offset:0")}))}else if(a)return new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.instances:-1")}));return null}var d=f(gn,!0),h=function(){if(pn in n){var e=n[pn];return i.primitive=e,x.commandParameter(e,ae,"invalid primitve",t.commandStr),ar((function(t,n){return ae[e]}))}if(pn in r){var o=r[pn];return or(o,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,o);return x.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(ae))})),t.def(n,"[",r,"]")}))}return l?ir(u)?u.value?ar((function(e,t){return t.def(e.ELEMENTS,".primType")})):ar((function(){return 4})):new rr(u.thisDep,u.contextDep,u.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)})):a?new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao+".currentVAO?"+e.shared.vao+".currentVAO.primitive:4")})):null}(),p=function(){if(mn in n){var e=0|n[mn];return i.count=e,x.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),ar((function(){return e}))}if(mn in r){var o=r[mn];return or(o,(function(e,t){var n=e.invoke(t,o);return x.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(l){if(ir(u)){if(u)return d?new rr(d.thisDep,d.contextDep,d.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return x.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):ar((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var c=ar((function(){return-1}));return x.optional((function(){c.MISSING=!0})),c}var f=new rr(u.thisDep||d.thisDep,u.contextDep||d.contextDep,u.propDep||d.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return x.optional((function(){f.DYNAMIC=!0})),f}if(a){var h=new rr(s.thisDep,s.contextDep,s.propDep,(function(e,t){return t.def(e.shared.vao,".currentVAO?",e.shared.vao,".currentVAO.count:-1")}));return h}return null}(),m=f(vn,!1);return{elements:u,primitive:h,count:p,instances:m,offset:d,vao:s,vaoActive:a,elementsActive:l,static:i}}(e,d),_=function(e,t){var n=e.static,r=e.dynamic,a={};return S.forEach((function(e){var o=E(e);function s(t,i){if(e in n){var s=t(n[e]);a[o]=ar((function(){return s}))}else if(e in r){var l=r[e];a[o]=or(l,(function(e,t){return i(e,t,e.invoke(t,l))}))}}switch(e){case qt:case jt:case zt:case en:case Ft:case on:case Gt:case Zt:case Kt:case Vt:return s((function(n){return x.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return x.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case Qt:return s((function(n){return x.commandParameter(n,Zn,"invalid "+e,t.commandStr),Zn[n]}),(function(t,n,r){var i=t.constants.compareFuncs;return x.optional((function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(Zn))})),n.def(i,"[",r,"]")}));case Ut:return s((function(e){return x.command(he(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){return x.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case Nt:return s((function(e){x.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,a="dstAlpha"in e?e.dstAlpha:e.dst;return x.commandParameter(n,Gn,o+".srcRGB",t.commandStr),x.commandParameter(r,Gn,o+".srcAlpha",t.commandStr),x.commandParameter(i,Gn,o+".dstRGB",t.commandStr),x.commandParameter(a,Gn,o+".dstAlpha",t.commandStr),x.command(-1===$n.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[Gn[n],Gn[i],Gn[r],Gn[a]]}),(function(t,n,r){var i=t.constants.blendFuncs;function a(a,o){var s=n.def('"',a,o,'" in ',r,"?",r,".",a,o,":",r,".",a);return x.optional((function(){t.assert(n,s+" in "+i,"invalid "+e+"."+a+o+", must be one of "+Object.keys(Gn))})),s}x.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var o=a("src","RGB"),s=a("dst","RGB");x.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+o+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(i,"[",o,"]"),u=n.def(i,"[",a("src","Alpha"),"]");return[l,n.def(i,"[",s,"]"),u,n.def(i,"[",a("dst","Alpha"),"]")]}));case Lt:return s((function(n){return"string"==typeof n?(x.commandParameter(n,v,"invalid "+e,t.commandStr),[v[n],v[n]]):"object"==typeof n?(x.commandParameter(n.rgb,v,e+".rgb",t.commandStr),x.commandParameter(n.alpha,v,e+".alpha",t.commandStr),[v[n.rgb],v[n.alpha]]):void x.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var i=t.constants.blendEquations,a=n.def(),o=n.def(),s=t.cond("typeof ",r,'==="string"');return x.optional((function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")})),s.then(a,"=",o,"=",i,"[",r,"];"),s.else(a,"=",i,"[",r,".rgb];",o,"=",i,"[",r,".alpha];"),n(s),[a,o]}));case Rt:return s((function(e){return x.command(he(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),z(4,(function(t){return+e[t]}))}),(function(e,t,n){return x.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),z(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case tn:return s((function(e){return x.commandType(e,"number",o,t.commandStr),0|e}),(function(e,t,n){return x.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case nn:return s((function(n){x.commandType(n,"object",o,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,a="mask"in n?n.mask:-1;return x.commandParameter(r,Zn,e+".cmp",t.commandStr),x.commandType(i,"number",e+".ref",t.commandStr),x.commandType(a,"number",e+".mask",t.commandStr),[Zn[r],i,a]}),(function(e,t,n){var r=e.constants.compareFuncs;return x.optional((function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Hn),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case rn:case an:return s((function(n){x.commandType(n,"object",o,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",a=n.zpass||"keep";return x.commandParameter(r,Kn,e+".fail",t.commandStr),x.commandParameter(i,Kn,e+".zfail",t.commandStr),x.commandParameter(a,Kn,e+".zpass",t.commandStr),[e===an?Yn:qn,Kn[r],Kn[i],Kn[a]]}),(function(t,n,r){var i=t.constants.stencilOps;function a(a){return x.optional((function(){t.assert(n,'!("'+a+'" in '+r+")||("+r+"."+a+" in "+i+")","invalid "+e+"."+a+", must be one of "+Object.keys(Kn))})),n.def('"',a,'" in ',r,"?",i,"[",r,".",a,"]:",Hn)}return x.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===an?Yn:qn,a("fail"),a("zfail"),a("zpass")]}));case $t:return s((function(e){x.commandType(e,"object",o,t.commandStr);var n=0|e.factor,r=0|e.units;return x.commandType(n,"number",o+".factor",t.commandStr),x.commandType(r,"number",o+".units",t.commandStr),[n,r]}),(function(t,n,r){return x.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case Yt:return s((function(e){var n=0;return"front"===e?n=qn:"back"===e&&(n=Yn),x.command(!!n,o,t.commandStr),n}),(function(e,t,n){return x.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',qn,":",Yn)}));case Ht:return s((function(e){return x.command("number"==typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return x.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case Xt:return s((function(e){return x.commandParameter(e,er,o,t.commandStr),er[e]}),(function(e,t,n){return x.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?2304:'+Xn)}));case Wt:return s((function(e){return x.command(he(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return x.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),z(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Jt:return s((function(e){x.command("object"==typeof e&&e,o,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return x.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){return x.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),a}(e,d),M=function(e,t,r){var i=e.static,a=e.dynamic;function o(e){if(e in i){var t=n.id(i[e]);x.optional((function(){f.shader(Jn[e],t,x.guessCommand())}));var r=ar((function(){return t}));return r.id=t,r}if(e in a){var o=a[e];return or(o,(function(t,n){var r=t.invoke(n,o),i=n.def(t.shared.strings,".id(",r,")");return x.optional((function(){n(t.shared.shader,".shader(",Jn[e],",",i,",",t.command,");")})),i}))}return null}var s,l=o(dn),u=o(fn),c=null;return ir(l)&&ir(u)?(c=f.program(u.id,l.id,null,r),s=ar((function(e,t){return e.link(c)}))):s=new rr(l&&l.thisDep||u&&u.thisDep,l&&l.contextDep||u&&u.contextDep,l&&l.propDep||u&&u.propDep,(function(e,t){var n,r=e.shared.shader;n=l?l.append(e,t):t.def(r,".",dn);var i=r+".program("+(u?u.append(e,t):t.def(r,".",fn))+","+n;return x.optional((function(){i+=","+e.command})),t.def(i+")")})),{frag:l,vert:u,progVar:s,program:c}}(e,0,m);function k(e){var t=A[e];t&&(_[e]=t)}k(ln),k(E(sn));var C=Object.keys(_).length>0,I={framebuffer:y,draw:w,shader:M,state:_,dirty:C,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(I.profile=function(e){var t,n=e.static,r=e.dynamic;if(un in n){var i=!!n[un];(t=ar((function(e,t){return i}))).enable=i}else if(un in r){var a=r[un];t=or(a,(function(e,t){return e.invoke(t,a)}))}return t}(e),I.uniforms=function(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var r,a=n[e];if("number"==typeof a||"boolean"==typeof a)r=ar((function(){return a}));else if("function"==typeof a){var o=a._reglType;"texture2d"===o||"textureCube"===o?r=ar((function(e){return e.link(a)})):"framebuffer"===o||"framebufferCube"===o?(x.command(a.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=ar((function(e){return e.link(a.color[0])}))):x.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else he(a)?r=ar((function(t){return t.global.def("[",z(a.length,(function(n){return x.command("number"==typeof a[n]||"boolean"==typeof a[n],"invalid uniform "+e,t.commandStr),a[n]})),"]")})):x.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=a,i[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=or(t,(function(e,n){return e.invoke(n,t)}))})),i}(s,d),I.drawVAO=I.scopeVAO=w.vao,!I.drawVAO&&M.program&&!m&&r.angle_instanced_arrays&&w.static.elements){var O=!0,T=M.program.attributes.map((function(e){var n=t.static[e];return O=O&&!!n,n}));if(O&&T.length>0){var B=c.getVAO(c.createVAO({attributes:T,elements:w.static.elements}));I.drawVAO=new rr(null,null,null,(function(e,t){return e.link(B)})),I.useVAO=!0}}return m?I.useVAO=!0:I.attributes=function(e,t){var r=e.static,i=e.dynamic,o={};return Object.keys(r).forEach((function(e){var i=r[e],s=n.id(e),l=new g;if(tr(i))l.state=1,l.buffer=a.getBuffer(a.create(i,kn,!1,!0)),l.type=0;else{var u=a.getBuffer(i);if(u)l.state=1,l.buffer=u,l.type=0;else if(x.command("object"==typeof i&&i,"invalid data for attribute "+e,t.commandStr),"constant"in i){var c=i.constant;l.buffer="null",l.state=2,"number"==typeof c?l.x=c:(x.command(he(c)&&c.length>0&&c.length<=4,"invalid constant for attribute "+e,t.commandStr),Pt.forEach((function(e,t){t<c.length&&(l[e]=c[t])})))}else{u=tr(i.buffer)?a.getBuffer(a.create(i.buffer,kn,!1,!0)):a.getBuffer(i.buffer),x.command(!!u,'missing buffer for attribute "'+e+'"',t.commandStr);var f=0|i.offset;x.command(f>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var d=0|i.stride;x.command(d>=0&&d<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var h=0|i.size;x.command(!("size"in i)||h>0&&h<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!i.normalized,m=0;"type"in i&&(x.commandParameter(i.type,G,"invalid type for attribute "+e,t.commandStr),m=G[i.type]);var v=0|i.divisor;x.optional((function(){"divisor"in i&&(x.command(0===v||b,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),x.command(v>=0,'invalid divisor for attribute "'+e+'"',t.commandStr));var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(t){x.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)}))})),l.buffer=u,l.state=1,l.size=h,l.normalized=p,l.type=m||u.dtype,l.offset=f,l.stride=d,l.divisor=v}}o[e]=ar((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(l).forEach((function(e){r[e]=l[e]})),l.buffer&&(r.buffer=e.link(l.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];o[e]=or(t,(function(n,r){var i=n.invoke(r,t),a=n.shared,o=n.constants,s=a.isBufferArgs,l=a.buffer;x.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+l+".getBuffer("+i+")||"+l+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+a.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')}));var u={isStream:r.def(!1)},c=new g;c.state=1,Object.keys(c).forEach((function(e){u[e]=r.def(""+c[e])}));var f=u.buffer,d=u.type;function h(e){r(u[e],"=",i,".",e,"|0;")}return r("if(",s,"(",i,")){",u.isStream,"=true;",f,"=",l,".createStream(",kn,",",i,");",d,"=",f,".dtype;","}else{",f,"=",l,".getBuffer(",i,");","if(",f,"){",d,"=",f,".dtype;",'}else if("constant" in ',i,"){",u.state,"=",2,";","if(typeof "+i+'.constant === "number"){',u[Pt[0]],"=",i,".constant;",Pt.slice(1).map((function(e){return u[e]})).join("="),"=0;","}else{",Pt.map((function(e,t){return u[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",f,"=",l,".createStream(",kn,",",i,".buffer);","}else{",f,"=",l,".getBuffer(",i,".buffer);","}",d,'="type" in ',i,"?",o.glTypes,"[",i,".type]:",f,".dtype;",u.normalized,"=!!",i,".normalized;"),h("size"),h("offset"),h("stride"),h("divisor"),r("}}"),r.exit("if(",u.isStream,"){",l,".destroyStream(",f,");","}"),u}))})),o}(t,d),I.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=ar((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=or(t,(function(e,n){return e.invoke(n,t)}))})),r}(u),I}function R(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(a){t.save(r,"."+a);var o=n[a].append(e,t);Array.isArray(o)?i(r,".",a,"=[",o.join(),"];"):i(r,".",a,"=",o,";")})),t(i)}function L(e,t,n,r){var i,a=e.shared,o=a.gl,s=a.framebuffer;y&&(i=t.def(a.extensions,".webgl_draw_buffers"));var l,u=e.constants,c=u.drawBuffer,f=u.backBuffer;l=n?n.append(e,t):t.def(s,".next"),r||t("if(",l,"!==",s,".cur){"),t("if(",l,"){",o,".bindFramebuffer(",36160,",",l,".framebuffer);"),y&&t(i,".drawBuffersWEBGL(",c,"[",l,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),y&&t(i,".drawBuffersWEBGL(",f,");"),t("}",s,".cur=",l,";"),r||t("}")}function N(e,t,n){var r=e.shared,i=r.gl,a=e.current,o=e.next,s=r.current,l=r.next,u=e.cond(s,".dirty");S.forEach((function(t){var r,c,f=E(t);if(!(f in n.state))if(f in o){r=o[f],c=a[f];var d=z(w[f].length,(function(e){return u.def(r,"[",e,"]")}));u(e.cond(d.map((function(e,t){return e+"!=="+c+"["+t+"]"})).join("||")).then(i,".",k[f],"(",d,");",d.map((function(e,t){return c+"["+t+"]="+e})).join(";"),";"))}else{r=u.def(l,".",f);var h=e.cond(r,"!==",s,".",f);u(h),f in M?h(e.cond(r).then(i,".enable(",M[f],");").else(i,".disable(",M[f],");"),s,".",f,"=",r,";"):h(i,".",k[f],"(",r,");",s,".",f,"=",r,";")}})),0===Object.keys(n.state).length&&u(s,".dirty=false;"),t(u)}function F(e,t,n,r){var i=e.shared,a=e.current,o=i.current,s=i.gl;nr(Object.keys(n)).forEach((function(i){var l=n[i];if(!r||r(l)){var u=l.append(e,t);if(M[i]){var c=M[i];ir(l)?t(s,u?".enable(":".disable(",c,");"):t(e.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",i,"=",u,";")}else if(he(u)){var f=a[i];t(s,".",k[i],"(",u,");",u.map((function(e,t){return f+"["+t+"]="+e})).join(";"),";")}else t(s,".",k[i],"(",u,");",o,".",i,"=",u,";")}}))}function Q(e,t){b&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function U(e,t,n,r,i){var a,o,s,l=e.shared,u=e.stats,c=l.current,f=l.timer,d=n.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function m(e){e(a=t.def(),"=",h(),";"),"string"==typeof i?e(u,".count+=",i,";"):e(u,".count++;"),p&&(r?e(o=t.def(),"=",f,".getNumPendingQueries();"):e(f,".beginQuery(",u,");"))}function g(e){e(u,".cpuTime+=",h(),"-",a,";"),p&&(r?e(f,".pushScopeStats(",o,",",f,".getNumPendingQueries(),",u,");"):e(f,".endQuery();"))}function v(e){var n=t.def(c,".profile");t(c,".profile=",e,";"),t.exit(c,".profile=",n,";")}if(d){if(ir(d))return void(d.enable?(m(t),g(t.exit),v("true")):v("false"));v(s=d.append(e,t))}else s=t.def(c,".profile");var b=e.block();m(b),t("if(",s,"){",b,"}");var y=e.block();g(y),t.exit("if(",s,"){",y,"}")}function V(e,t,n,r,i){var a=e.shared;r.forEach((function(r){var o,s=r.name,l=n.attributes[s];if(l){if(!i(l))return;o=l.append(e,t)}else{if(!i(sr))return;var u=e.scopeAttrib(s);x.optional((function(){e.assert(t,u+".state","missing attribute "+s)})),o={},Object.keys(new g).forEach((function(e){o[e]=t.def(u,".",e)}))}!function(n,r,i){var o=a.gl,s=t.def(n,".location"),l=t.def(a.attributes,"[",s,"]"),u=i.state,c=i.buffer,f=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function h(){t("if(!",l,".buffer){",o,".enableVertexAttribArray(",s,");}");var n,a=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",l,".type!==",a,"||",l,".size!==",n,"||",d.map((function(e){return l+"."+e+"!=="+i[e]})).join("||"),"){",o,".bindBuffer(",kn,",",c,".buffer);",o,".vertexAttribPointer(",[s,n,a,i.normalized,i.stride,i.offset],");",l,".type=",a,";",l,".size=",n,";",d.map((function(e){return l+"."+e+"="+i[e]+";"})).join(""),"}"),b){var u=i.divisor;t("if(",l,".divisor!==",u,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,u],");",l,".divisor=",u,";}")}}function p(){t("if(",l,".buffer){",o,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",Pt.map((function(e,t){return l+"."+e+"!=="+f[t]})).join("||"),"){",o,".vertexAttrib4f(",s,",",f,");",Pt.map((function(e,t){return l+"."+e+"="+f[t]+";"})).join(""),"}")}1===u?h():2===u?p():(t("if(",u,"===",1,"){"),h(),t("}else{"),p(),t("}"))}(e.link(r),function(e){switch(e){case In:case Dn:case Rn:return 2;case On:case Pn:case Ln:return 3;case Tn:case zn:case Nn:return 4;default:return 1}}(r.info.type),o)}))}function W(e,t,r,i,a,o){for(var s,l=e.shared,u=l.gl,c={},f=0;f<i.length;++f){var d=i[f],h=d.name,p=d.info.type,m=d.info.size,g=r.uniforms[h];if(m>1){if(!g)continue;var v=h.replace("[0]","");if(c[v])continue;c[v]=1}var b,y=e.link(d)+".location";if(g){if(!a(g))continue;if(ir(g)){var A=g.value;if(x.command(null!=A,'missing uniform "'+h+'"',e.commandStr),p===Vn||p===Wn){x.command("function"==typeof A&&(p===Vn&&("texture2d"===A._reglType||"framebuffer"===A._reglType)||p===Wn&&("textureCube"===A._reglType||"framebufferCube"===A._reglType)),"invalid texture for uniform "+h,e.commandStr);var w=e.link(A._texture||A.color[0]._texture);t(u,".uniform1i(",y,",",w+".bind());"),t.exit(w,".unbind();")}else if(p===Fn||p===Qn||p===Un){x.optional((function(){x.command(he(A),"invalid matrix for uniform "+h,e.commandStr),x.command(p===Fn&&4===A.length||p===Qn&&9===A.length||p===Un&&16===A.length,"invalid length for matrix uniform "+h,e.commandStr)}));var _=e.global.def("new Float32Array(["+Array.prototype.slice.call(A)+"])"),S=2;p===Qn?S=3:p===Un&&(S=4),t(u,".uniformMatrix",S,"fv(",y,",false,",_,");")}else{switch(p){case Cn:1===m?x.commandType(A,"number","uniform "+h,e.commandStr):x.command(he(A)&&A.length===m,"uniform "+h,e.commandStr),s="1f";break;case In:x.command(he(A)&&A.length&&A.length%2==0&&A.length<=2*m,"uniform "+h,e.commandStr),s="2f";break;case On:x.command(he(A)&&A.length&&A.length%3==0&&A.length<=3*m,"uniform "+h,e.commandStr),s="3f";break;case Tn:x.command(he(A)&&A.length&&A.length%4==0&&A.length<=4*m,"uniform "+h,e.commandStr),s="4f";break;case jn:1===m?x.commandType(A,"boolean","uniform "+h,e.commandStr):x.command(he(A)&&A.length===m,"uniform "+h,e.commandStr),s="1i";break;case Bn:1===m?x.commandType(A,"number","uniform "+h,e.commandStr):x.command(he(A)&&A.length===m,"uniform "+h,e.commandStr),s="1i";break;case Rn:case Dn:x.command(he(A)&&A.length&&A.length%2==0&&A.length<=2*m,"uniform "+h,e.commandStr),s="2i";break;case Ln:case Pn:x.command(he(A)&&A.length&&A.length%3==0&&A.length<=3*m,"uniform "+h,e.commandStr),s="3i";break;case Nn:case zn:x.command(he(A)&&A.length&&A.length%4==0&&A.length<=4*m,"uniform "+h,e.commandStr),s="4i"}m>1?(s+="v",A=e.global.def("["+Array.prototype.slice.call(A)+"]")):A=he(A)?Array.prototype.slice.call(A):A,t(u,".uniform",s,"(",y,",",A,");")}continue}b=g.append(e,t)}else{if(!a(sr))continue;b=t.def(l.uniforms,"[",n.id(h),"]")}p===Vn?(x(!Array.isArray(b),"must specify a scalar prop for textures"),t("if(",b,"&&",b,'._reglType==="framebuffer"){',b,"=",b,".color[0];","}")):p===Wn&&(x(!Array.isArray(b),"must specify a scalar prop for cube maps"),t("if(",b,"&&",b,'._reglType==="framebufferCube"){',b,"=",b,".color[0];","}")),x.optional((function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+h+'".  '+r)}function r(e,t){1===t&&x(!Array.isArray(b),"must not specify an array type for uniform"),n("Array.isArray("+b+") && typeof "+b+'[0]===" '+e+'" || typeof '+b+'==="'+e+'"',"invalid type, expected "+e)}function i(t,r,i){Array.isArray(b)?x(b.length&&b.length%t==0&&b.length<=t*i,"must have length of "+(1===i?"":"n * ")+t):n(l.isArrayLike+"("+b+")&&"+b+".length && "+b+".length % "+t+" === 0 && "+b+".length<="+t*i,"invalid vector, should have length of "+(1===i?"":"n * ")+t,e.commandStr)}function a(t){x(!Array.isArray(b),"must not specify a value type"),n("typeof "+b+'==="function"&&'+b+'._reglType==="texture'+(3553===t?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(p){case Bn:r("number",m);break;case Dn:i(2,0,m);break;case Pn:i(3,0,m);break;case zn:i(4,0,m);break;case Cn:r("number",m);break;case In:i(2,0,m);break;case On:i(3,0,m);break;case Tn:i(4,0,m);break;case jn:r("boolean",m);break;case Rn:i(2,0,m);break;case Ln:i(3,0,m);break;case Nn:case Fn:i(4,0,m);break;case Qn:i(9,0,m);break;case Un:i(16,0,m);break;case Vn:a(3553);break;case Wn:a(34067)}}));var M=1;switch(p){case Vn:case Wn:var k=t.def(b,"._texture");t(u,".uniform1i(",y,",",k,".bind());"),t.exit(k,".unbind();");continue;case Bn:case jn:s="1i";break;case Dn:case Rn:s="2i",M=2;break;case Pn:case Ln:s="3i",M=3;break;case zn:case Nn:s="4i",M=4;break;case Cn:s="1f";break;case In:s="2f",M=2;break;case On:s="3f",M=3;break;case Tn:s="4f",M=4;break;case Fn:s="Matrix2fv";break;case Qn:s="Matrix3fv";break;case Un:s="Matrix4fv"}if(-1===s.indexOf("Matrix")&&m>1&&(s+="v",M=1),"M"===s.charAt(0)){t(u,".uniform",s,"(",y,",");var E=Math.pow(p-Fn+2,2),C=e.global.def("new Float32Array(",E,")");Array.isArray(b)?t("false,(",z(E,(function(e){return C+"["+e+"]="+b[e]})),",",C,")"):t("false,(Array.isArray(",b,")||",b," instanceof Float32Array)?",b,":(",z(E,(function(e){return C+"["+e+"]="+b+"["+e+"]"})),",",C,")"),t(");")}else if(M>1){for(var I=[],O=[],T=0;T<M;++T)Array.isArray(b)?O.push(b[T]):O.push(t.def(b+"["+T+"]")),o&&I.push(t.def());o&&t("if(!",e.batchId,"||",I.map((function(e,t){return e+"!=="+O[t]})).join("||"),"){",I.map((function(e,t){return e+"="+O[t]+";"})).join("")),t(u,".uniform",s,"(",y,",",O.join(","),");"),o&&t("}")}else{if(x(!Array.isArray(b),"uniform value must not be an array"),o){var B=t.def();t("if(!",e.batchId,"||",B,"!==",b,"){",B,"=",b,";")}t(u,".uniform",s,"(",y,",",b,");"),o&&t("}")}}}function q(e,t,n,r){var i=e.shared,a=i.gl,o=i.draw,s=r.draw;var l=function(){var l,u=s.elements,c=t;return u?((u.contextDep&&r.contextDynamic||u.propDep)&&(c=n),l=u.append(e,c),s.elementsActive&&c("if("+l+")"+a+".bindBuffer("+"34963,"+l+".buffer.buffer);")):(l=c.def(),c(l,"=",o,".",hn,";","if(",l,"){",a,".bindBuffer(",En,",",l,".buffer.buffer);}","else if(",i.vao,".currentVAO){",l,"=",e.shared.elements+".getElements("+i.vao,".currentVAO.elements);",A?"":"if("+l+")"+a+".bindBuffer("+"34963,"+l+".buffer.buffer);","}")),l}();function u(i){var a=s[i];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(o,".",i)}var c,f,d=u(pn),h=u(gn),p=function(){var i,a=s.count,l=t;return a?((a.contextDep&&r.contextDynamic||a.propDep)&&(l=n),i=a.append(e,l),x.optional((function(){a.MISSING&&e.assert(t,"false","missing vertex count"),a.DYNAMIC&&e.assert(l,i+">=0","missing vertex count")}))):(i=l.def(o,".",mn),x.optional((function(){e.assert(l,i+">=0","missing vertex count")}))),i}();if("number"==typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");b&&(c=u(vn),f=e.instancing);var m=l+".type",g=s.elements&&ir(s.elements)&&!s.vaoActive;function v(){function e(){n(f,".drawElementsInstancedANGLE(",[d,p,m,h+"<<(("+m+"-5121)>>1)",c],");")}function t(){n(f,".drawArraysInstancedANGLE(",[d,h,p,c],");")}l&&"null"!==l?g?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}function y(){function e(){n(a+".drawElements("+[d,p,m,h+"<<(("+m+"-5121)>>1)"]+");")}function t(){n(a+".drawArrays("+[d,h,p]+");")}l&&"null"!==l?g?e():(n("if(",l,"){"),e(),n("}else{"),t(),n("}")):t()}b&&("number"!=typeof c||c>=0)?"string"==typeof c?(n("if(",c,">0){"),v(),n("}else if(",c,"<0){"),y(),n("}")):v():y()}function Y(e,t,n,r,i){var a=P(),o=a.proc("body",i);return x.optional((function(){a.commandStr=t.commandStr,a.command=a.link(t.commandStr)})),b&&(a.instancing=o.def(a.shared.extensions,".angle_instanced_arrays")),e(a,o,n,r),a.compile().body}function X(e,t,n,r){Q(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),V(e,t,n,r.attributes,(function(){return!0}))),W(e,t,n,r.uniforms,(function(){return!0}),!1),q(e,t,t,n)}function H(e,t,n,r){function i(){return!0}e.batchId="a1",Q(e,t),V(e,t,n,r.attributes,i),W(e,t,n,r.uniforms,i,!1),q(e,t,t,n)}function $(e,t,n,r){Q(e,t);var i=n.contextDep,a=t.def(),o=t.def();e.shared.props=o,e.batchId=a;var s=e.scope(),l=e.scope();function u(e){return e.contextDep&&i||e.propDep}function c(e){return!u(e)}if(t(s.entry,"for(",a,"=0;",a,"<","a1",";++",a,"){",o,"=","a0","[",a,"];",l,"}",s.exit),n.needsContext&&R(e,l,n.context),n.needsFramebuffer&&L(e,l,n.framebuffer),F(e,l,n.state,u),n.profile&&u(n.profile)&&U(e,l,n,!1,!0),r)n.useVAO?n.drawVAO?u(n.drawVAO)?l(e.shared.vao,".setVAO(",n.drawVAO.append(e,l),");"):s(e.shared.vao,".setVAO(",n.drawVAO.append(e,s),");"):s(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(s(e.shared.vao,".setVAO(null);"),V(e,s,n,r.attributes,c),V(e,l,n,r.attributes,u)),W(e,s,n,r.uniforms,c,!1),W(e,l,n,r.uniforms,u,!0),q(e,s,l,n);else{var f=e.global.def("{}"),d=n.shader.progVar.append(e,l),h=l.def(d,".id"),p=l.def(f,"[",h,"]");l(e.shared.gl,".useProgram(",d,".program);","if(!",p,"){",p,"=",f,"[",h,"]=",e.link((function(t){return Y(H,e,n,t,2)})),"(",d,");}",p,".call(this,a0[",a,"],",a,");")}}function Z(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!he(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(I.isDynamic(e[t[n]]))return!0;return!1}}(r)){var i=e.global,a=Object.keys(r),o=!1,s=!1,l=!1,u=e.global.def("{}");a.forEach((function(t){var n=r[t];if(I.isDynamic(n)){"function"==typeof n&&(n=r[t]=I.unbox(n));var a=or(n,null);o=o||a.thisDep,l=l||a.propDep,s=s||a.contextDep}else{switch(i(u,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new I.DynamicVariable(4,{thisDep:o,contextDep:s,propDep:l,ref:u,append:function(e,t){a.forEach((function(n){var i=r[n];if(I.isDynamic(i)){var a=e.invoke(t,i);t(u,".",n,"=",a,";")}}))}}),delete t.static[n]}}return{next:_,current:w,procs:function(){var e=P(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var o,s=e.shared,l=s.gl,u=s.next,c=s.current;a(c,".dirty=false;"),L(e,t),L(e,n,null,!0),b&&(o=e.link(b)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<i.maxAttributes;++f){var d=n.def(s.attributes,"[",f,"]"),h=e.cond(d,".buffer");h.then(l,".enableVertexAttribArray(",f,");",l,".bindBuffer(",kn,",",d,".buffer.buffer);",l,".vertexAttribPointer(",f,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",f,");",l,".vertexAttrib4f(",f,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(h),b&&n(o,".vertexAttribDivisorANGLE(",f,",",d,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(M).forEach((function(r){var i=M[r],o=a.def(u,".",r),s=e.block();s("if(",o,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",c,".",r,"=",o,";"),n(s),t("if(",o,"!==",c,".",r,"){",s,"}")})),Object.keys(k).forEach((function(r){var i,o,s=k[r],f=w[r],d=e.block();if(d(l,".",s,"("),he(f)){var h=f.length;i=e.global.def(u,".",r),o=e.global.def(c,".",r),d(z(h,(function(e){return i+"["+e+"]"})),");",z(h,(function(e){return o+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",z(h,(function(e){return i+"["+e+"]!=="+o+"["+e+"]"})).join("||"),"){",d,"}")}else i=a.def(u,".",r),o=a.def(c,".",r),d(i,");",c,".",r,"=",i,";"),t("if(",i,"!==",o,"){",d,"}");n(d)})),e.compile()}(),compile:function(e,r,i,a,o){var s=P();s.stats=s.link(o),Object.keys(r.static).forEach((function(e){Z(s,r,e)})),Mn.forEach((function(t){Z(s,e,t)}));var l=j(e,r,i,a,s);return function(e,t){var n=e.proc("draw",1);Q(e,n),R(e,n,t.context),L(e,n,t.framebuffer),N(e,n,t),F(e,n,t.state),U(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)X(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),a=n.def(r,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link((function(n){return Y(X,e,t,n,1)})),"(",r,");",o,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(s,l),function(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,a=i.current;function o(n){var a=t.shader[n];a&&r.set(i.shader,"."+n,a.append(e,r))}R(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),nr(Object.keys(t.state)).forEach((function(n){var a=t.state[n].append(e,r);he(a)?a.forEach((function(t,i){r.set(e.next[n],"["+i+"]",t)})):r.set(i.next,"."+n,a)})),U(e,r,t,!0,!0),[hn,gn,mn,vn,pn].forEach((function(n){var a=t.draw[n];a&&r.set(i.draw,"."+n,""+a.append(e,r))})),Object.keys(t.uniforms).forEach((function(a){var o=t.uniforms[a].append(e,r);Array.isArray(o)&&(o="["+o.join()+"]"),r.set(i.uniforms,"["+n.id(a)+"]",o)})),Object.keys(t.attributes).forEach((function(n){var i=t.attributes[n].append(e,r),a=e.scopeAttrib(n);Object.keys(new g).forEach((function(e){r.set(a,"."+e,i[e])}))})),t.scopeVAO&&r.set(i.vao,".targetVAO",t.scopeVAO.append(e,r)),o(fn),o(dn),Object.keys(t.state).length>0&&(r(a,".dirty=true;"),r.exit(a,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}(s,l),function(e,t){var n=e.proc("batch",2);e.batchId="0",Q(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(R(e,n,t.context),i=!1);var a=t.framebuffer,o=!1;function s(e){return e.contextDep&&r||e.propDep}a?(a.propDep?r=o=!0:a.contextDep&&r&&(o=!0),o||L(e,n,a)):L(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),N(e,n,t),F(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||U(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=o;var l=t.shader.progVar;if(l.contextDep&&r||l.propDep)$(e,n,t,null);else{var u=l.append(e,n);if(n(e.shared.gl,".useProgram(",u,".program);"),t.shader.program)$(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var c=e.global.def("{}"),f=n.def(u,".id"),d=n.def(c,"[",f,"]");n(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",c,"[",f,"]=",e.link((function(n){return Y($,e,t,n,2)})),"(",u,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;"),e.shared.vao&&n(e.shared.vao,".setVAO(null);")}(s,l),t(s.compile(),{destroy:function(){l.shader.program.destroy()}})}}}var ur=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(e){n.push(e)}var i=[];function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var o=[];function s(e){o.push(e)}var l=[];function u(e,t,n){var r=o.pop()||new a;r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,l.push(r)}var c=[],f=[];return{beginQuery:function(e){var r=n.pop()||t.ext_disjoint_timer_query.createQueryEXT();t.ext_disjoint_timer_query.beginQueryEXT(35007,r),i.push(r),u(i.length-1,i.length,e)},endQuery:function(){t.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:u,update:function(){var e,n,a=i.length;if(0!==a){f.length=Math.max(f.length,a+1),c.length=Math.max(c.length,a+1),c[0]=0,f[0]=0;var o=0;for(e=0,n=0;n<i.length;++n){var u=i[n];t.ext_disjoint_timer_query.getQueryObjectEXT(u,34919)?(o+=t.ext_disjoint_timer_query.getQueryObjectEXT(u,34918),r(u)):i[e++]=u,c[n+1]=o,f[n+1]=e}for(i.length=e,e=0,n=0;n<l.length;++n){var d=l[n],h=d.startQueryIndex,p=d.endQueryIndex;d.sum+=c[p]-c[h];var m=f[h],g=f[p];g===m?(d.stats.gpuTime+=d.sum/1e6,s(d)):(d.startQueryIndex=m,d.endQueryIndex=g,l[e++]=d)}l.length=e}},getNumPendingQueries:function(){return i.length},clear:function(){n.push.apply(n,i);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);i.length=0,n.length=0},restore:function(){i.length=0,n.length=0}}},cr="webglcontextlost",fr="webglcontextrestored";function dr(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}return function(n){var r=P(n);if(!r)return null;var i=r.gl,a=i.getContextAttributes(),o=i.isContextLost(),s=function(e,t){var n={};function r(t){x.type(t,"string","extension name must be string");var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e){}return!!r}for(var i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!r(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}(i,r);if(!s)return null;var l,u,c=(l={"":0},u=[""],{id:function(e){var t=l[e];return t||(t=l[e]=u.length,u.push(e),t)},str:function(e){return u[e]}}),f={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},d=s.extensions,h=ur(0,d),p=T(),m=i.drawingBufferWidth,g=i.drawingBufferHeight,v={tick:0,time:0,viewportWidth:m,viewportHeight:g,framebufferWidth:m,framebufferHeight:g,drawingBufferWidth:m,drawingBufferHeight:g,pixelRatio:r.pixelRatio},b={elements:null,primitive:4,count:-1,offset:0,instances:-1},y=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){var o=e.createTexture();e.bindTexture(N,o),e.texImage2D(N,0,F,1,1,0,F,Q,null);var s=e.createFramebuffer();if(e.bindFramebuffer(U,s),e.framebufferTexture2D(U,36064,N,o,0),e.bindTexture(N,null),36053!==e.checkFramebufferStatus(U))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var l=L.allocType(Q,4);e.readPixels(0,0,1,1,F,Q,l),e.getError()?a=!1:(e.deleteFramebuffer(s),e.deleteTexture(o),a=1===l[0]),L.freeType(l)}}var u=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var c=e.createTexture(),f=L.allocType(5121,36);e.activeTexture(33984),e.bindTexture(34067,c),e.texImage2D(34069,0,F,3,3,0,F,5121,f),L.freeType(f),e.bindTexture(34067,null),e.deleteTexture(c),u=!e.getError()}return{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:u}}(i,d),A=function(t,n,r,i){var a=0,o={};function s(e){this.id=a++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=J,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function u(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function c(t,n,r,i,a,o){var s,l;if(t.usage=r,Array.isArray(n)){if(t.dtype=i||ee,n.length>0)if(Array.isArray(n[0])){s=K(n);for(var c=1,f=1;f<s.length;++f)c*=s[f];t.dimension=c,u(t,l=Z(n,s,t.dtype),r),o?t.persistentData=l:L.freeType(l)}else if("number"==typeof n[0]){t.dimension=a;var d=L.allocType(t.dtype,n.length);re(d,n),u(t,d,r),o?t.persistentData=d:L.freeType(d)}else e(n[0])?(t.dimension=n[0].length,t.dtype=i||ne(n[0])||ee,u(t,l=Z(n,[n.length,n[0].length],t.dtype),r),o?t.persistentData=l:L.freeType(l)):x.raise("invalid buffer data")}else if(e(n))t.dtype=i||ne(n),t.dimension=a,u(t,n,r),o&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(V(n)){s=n.shape;var h=n.stride,p=n.offset,m=0,g=0,v=0,b=0;1===s.length?(m=s[0],g=1,v=h[0],b=0):2===s.length?(m=s[0],g=s[1],v=h[0],b=h[1]):x.raise("invalid shape"),t.dtype=i||ne(n.data)||ee,t.dimension=g;var y=L.allocType(t.dtype,m*g);ie(y,n.data,m,g,v,b,p),u(t,y,r),o?t.persistentData=y:L.freeType(y)}else n instanceof ArrayBuffer?(t.dtype=J,t.dimension=a,u(t,n,r),o&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):x.raise("invalid buffer data")}function f(e){n.bufferCount--,i(e);var r=e.buffer;x(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete o[e.id]}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(o).forEach((function(t){e+=o[t].stats.size})),e}),{create:function(i,a,l,u){n.bufferCount++;var d=new s(a);function h(n){var i=35044,a=null,o=0,s=0,l=1;return Array.isArray(n)||e(n)||V(n)||n instanceof ArrayBuffer?a=n:"number"==typeof n?o=0|n:n&&(x.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(x(null===a||Array.isArray(a)||e(a)||V(a),"invalid data for buffer"),a=n.data),"usage"in n&&(x.parameter(n.usage,$,"invalid buffer usage"),i=$[n.usage]),"type"in n&&(x.parameter(n.type,G,"invalid buffer type"),s=G[n.type]),"dimension"in n&&(x.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(x.nni(o,"buffer length must be a nonnegative integer"),o=0|n.length)),d.bind(),a?c(d,a,i,s,l,u):(o&&t.bufferData(d.type,o,i),d.dtype=s||J,d.usage=i,d.dimension=l,d.byteLength=o),r.profile&&(d.stats.size=d.byteLength*te[d.dtype]),h}function p(e,n){x(n+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,n,e)}return o[d.id]=d,l||h(i),h._reglType="buffer",h._buffer=d,h.subdata=function(t,n){var r,i=0|(n||0);if(d.bind(),e(t)||t instanceof ArrayBuffer)p(t,i);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var a=L.allocType(d.dtype,t.length);re(a,t),p(a,i),L.freeType(a)}else if(Array.isArray(t[0])||e(t[0])){r=K(t);var o=Z(t,r,d.dtype);p(o,i),L.freeType(o)}else x.raise("invalid buffer data")}else if(V(t)){r=t.shape;var s=t.stride,l=0,u=0,c=0,f=0;1===r.length?(l=r[0],u=1,c=s[0],f=0):2===r.length?(l=r[0],u=r[1],c=s[0],f=s[1]):x.raise("invalid shape");var m=Array.isArray(t.data)?d.dtype:ne(t.data),g=L.allocType(m,l*u);ie(g,t.data,l,u,c,f,t.offset),p(g,i),L.freeType(g)}else x.raise("invalid data for buffer subdata");return h},r.profile&&(h.stats=d.stats),h.destroy=function(){f(d)},h},createStream:function(e,t){var n=l.pop();return n||(n=new s(e)),n.bind(),c(n,t,35040,0,1,!1),n},destroyStream:function(e){l.push(e)},clear:function(){W(o).forEach(f),l.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:function(){W(o).forEach((function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)}))},_initBuffer:c}}(i,f,r,(function(e){return _.destroyBuffer(e)})),w=function(t,n,r,i){var a={},o=0,s={uint8:oe,uint16:se};function l(e){this.id=o++,a[this.id]=this,this.buffer=e,this.primType=4,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=le),l.prototype.bind=function(){this.buffer.bind()};var u=[];function c(i,a,o,s,l,u,c){var f;if(i.buffer.bind(),a){var d=c;c||e(a)&&(!V(a)||e(a.data))||(d=n.oes_element_index_uint?le:se),r._initBuffer(i.buffer,a,o,d,3)}else t.bufferData(ue,u,o),i.buffer.dtype=f||oe,i.buffer.usage=o,i.buffer.dimension=3,i.buffer.byteLength=u;if(f=c,!c){switch(i.buffer.dtype){case oe:case 5120:f=oe;break;case se:case 5122:f=se;break;case le:case 5124:f=le;break;default:x.raise("unsupported type for element array")}i.buffer.dtype=f}i.type=f,x(f!==le||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=l;h<0&&(h=i.buffer.byteLength,f===se?h>>=1:f===le&&(h>>=2)),i.vertCount=h;var p=s;if(s<0){p=4;var m=i.buffer.dimension;1===m&&(p=0),2===m&&(p=1),3===m&&(p=4)}i.primType=p}function f(e){i.elementsCount--,x(null!==e.buffer,"must not double destroy elements"),delete a[e.id],e.buffer.destroy(),e.buffer=null}return{create:function(t,n){var a=r.create(null,ue,!0),o=new l(a._buffer);function u(t){if(t)if("number"==typeof t)a(t),o.primType=4,o.vertCount=0|t,o.type=oe;else{var n=null,r=35044,i=-1,l=-1,f=0,d=0;Array.isArray(t)||e(t)||V(t)?n=t:(x.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,x(Array.isArray(n)||e(n)||V(n),"invalid data for element buffer")),"usage"in t&&(x.parameter(t.usage,$,"invalid element buffer usage"),r=$[t.usage]),"primitive"in t&&(x.parameter(t.primitive,ae,"invalid element buffer primitive"),i=ae[t.primitive]),"count"in t&&(x("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),l=0|t.count),"type"in t&&(x.parameter(t.type,s,"invalid buffer type"),d=s[t.type]),"length"in t?f=0|t.length:(f=l,d===se||5122===d?f*=2:d!==le&&5124!==d||(f*=4))),c(o,n,r,i,l,f,d)}else a(),o.primType=4,o.vertCount=0,o.type=oe;return u}return i.elementsCount++,u(t),u._reglType="elements",u._elements=o,u.subdata=function(e,t){return a.subdata(e,t),u},u.destroy=function(){f(o)},u},createStream:function(e){var t=u.pop();return t||(t=new l(r.create(null,ue,!0,!1)._buffer)),c(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){u.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof l?e._elements:null},clear:function(){W(a).forEach(f)}}}(i,d,A,f),_=function(t,n,r,i,a,o,s){for(var l=r.maxAttributes,u=new Array(l),c=0;c<l;++c)u[c]=new Ct;var f=0,d={},h={Record:Ct,scope:{},state:u,currentVAO:null,targetVAO:null,restore:p()?function(){p()&&W(d).forEach((function(e){e.refresh()}))}:function(){},createVAO:function(t){var r=new g;function s(t){var i;if(Array.isArray(t))i=t,r.elements&&r.ownsElements&&r.elements.destroy(),r.elements=null,r.ownsElements=!1,r.offset=0,r.count=0,r.instances=-1,r.primitive=4;else{if(x("object"==typeof t,"invalid arguments for create vao"),x("attributes"in t,"must specify attributes for vao"),t.elements){var u=t.elements;r.ownsElements?"function"==typeof u&&"elements"===u._reglType?(r.elements.destroy(),r.ownsElements=!1):(r.elements(u),r.ownsElements=!1):o.getElements(t.elements)?(r.elements=t.elements,r.ownsElements=!1):(r.elements=o.create(t.elements),r.ownsElements=!0)}else r.elements=null,r.ownsElements=!1;i=t.attributes,r.offset=0,r.count=-1,r.instances=-1,r.primitive=4,r.elements&&(r.count=r.elements._elements.vertCount,r.primitive=r.elements._elements.primType),"offset"in t&&(r.offset=0|t.offset),"count"in t&&(r.count=0|t.count),"instances"in t&&(r.instances=0|t.instances),"primitive"in t&&(x(t.primitive in ae,"bad primitive type: "+t.primitive),r.primitive=ae[t.primitive]),x.optional((()=>{for(var e=Object.keys(t),n=0;n<e.length;++n)x(Et.indexOf(e[n])>=0,'invalid option for vao: "'+e[n]+'" valid options are '+Et)})),x(Array.isArray(i),"attributes must be an array")}x(i.length<l,"too many attributes"),x(i.length>0,"must specify at least one attribute");var c={},f=r.attributes;f.length=i.length;for(var d=0;d<i.length;++d){var h,p=i[d],m=f[d]=new Ct,g=p.data||p;Array.isArray(g)||e(g)||V(g)?(r.buffers[d]&&(h=r.buffers[d],e(g)&&h._buffer.byteLength>=g.byteLength?h.subdata(g):(h.destroy(),r.buffers[d]=null)),r.buffers[d]||(h=r.buffers[d]=a.create(p,34962,!1,!0)),m.buffer=a.getBuffer(h),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1,c[d]=1):a.getBuffer(p)?(m.buffer=a.getBuffer(p),m.size=0|m.buffer.dimension,m.normalized=!1,m.type=m.buffer.dtype,m.offset=0,m.stride=0,m.divisor=0,m.state=1):a.getBuffer(p.buffer)?(m.buffer=a.getBuffer(p.buffer),m.size=0|(+p.size||m.buffer.dimension),m.normalized=!!p.normalized||!1,"type"in p?(x.parameter(p.type,G,"invalid buffer type"),m.type=G[p.type]):m.type=m.buffer.dtype,m.offset=0|(p.offset||0),m.stride=0|(p.stride||0),m.divisor=0|(p.divisor||0),m.state=1,x(m.size>=1&&m.size<=4,"size must be between 1 and 4"),x(m.offset>=0,"invalid offset"),x(m.stride>=0&&m.stride<=255,"stride must be between 0 and 255"),x(m.divisor>=0,"divisor must be positive"),x(!m.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in p?(x(d>0,"first attribute must not be a constant"),m.x=+p.x||0,m.y=+p.y||0,m.z=+p.z||0,m.w=+p.w||0,m.state=2):x(!1,"invalid attribute spec for location "+d)}for(var v=0;v<r.buffers.length;++v)!c[v]&&r.buffers[v]&&(r.buffers[v].destroy(),r.buffers[v]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.ownsElements&&(r.elements.destroy(),r.elements=null,r.ownsElements=!1),r.destroy()},s._vao=r,s._reglType="vao",s(t)},getVAO:function(e){return"function"==typeof e&&e._vao?e._vao:null},destroyBuffer:function(e){for(var n=0;n<u.length;++n){var r=u[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}},setVAO:p()?function(e){if(e!==h.currentVAO){var t=p();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),h.currentVAO=e}}:function(e){if(e!==h.currentVAO){if(e)e.bindAttrs();else{for(var n=m(),r=0;r<u.length;++r){var i=u[r];i.buffer?(t.enableVertexAttribArray(r),i.buffer.bind(),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}s.elements?t.bindBuffer(kt,s.elements.buffer.buffer):t.bindBuffer(kt,null)}h.currentVAO=e}},clear:p()?function(){W(d).forEach((function(e){e.destroy()}))}:function(){}};function p(){return n.oes_vertex_array_object}function m(){return n.angle_instanced_arrays}function g(){this.id=++f,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var e=p();this.vao=e?e.createVertexArrayOES():null,d[this.id]=this,this.buffers=[]}return g.prototype.bindAttrs=function(){for(var e=m(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(34962,i.buffer.buffer),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),e&&i.divisor&&e.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var a=n.length;a<l;++a)t.disableVertexAttribArray(a);var s=o.getElements(this.elements);s?t.bindBuffer(kt,s.buffer.buffer):t.bindBuffer(kt,null)},g.prototype.refresh=function(){var e=p();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=null,e.bindVertexArrayOES(null))},g.prototype.destroy=function(){if(this.vao){var e=p();this===h.currentVAO&&(h.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),d[this.id]&&(delete d[this.id],i.vaoCount-=1)},h}(i,d,y,f,A,w,b),S=function(e,n,r,i){var a={},o={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function l(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function u(t,r,i){var s=35632===t?a:o,l=s[r];if(!l){var u=n.str(r);l=e.createShader(t),e.shaderSource(l,u),e.compileShader(l),x.shaderError(e,l,u,t,i),s[r]=l}return l}var c={},f=[],d=0;function h(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(t,r,a){var o,c,f=u(35632,t.fragId),d=u(35633,t.vertId),h=t.program=e.createProgram();if(e.attachShader(h,f),e.attachShader(h,d),a)for(o=0;o<a.length;++o){var p=a[o];e.bindAttribLocation(h,p[0],p[1])}e.linkProgram(h),x.linkError(e,h,n.str(t.fragId),n.str(t.vertId),r);var m=e.getProgramParameter(h,35718);i.profile&&(t.stats.uniformsCount=m);var g=t.uniforms;for(o=0;o<m;++o)if(c=e.getActiveUniform(h,o)){if(c.size>1)for(var v=0;v<c.size;++v){var b=c.name.replace("[0]","["+v+"]");l(g,new s(b,n.id(b),e.getUniformLocation(h,b),c))}var y=c.name;c.size>1&&(y=y.replace("[0]","")),l(g,new s(y,n.id(y),e.getUniformLocation(h,y),c))}var A=e.getProgramParameter(h,35721);i.profile&&(t.stats.attributesCount=A);var w=t.attributes;for(o=0;o<A;++o)(c=e.getActiveAttrib(h,o))&&l(w,new s(c.name,n.id(c.name),e.getAttribLocation(h,c.name),c))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return f.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return f.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);W(a).forEach(t),a={},W(o).forEach(t),o={},f.forEach((function(t){e.deleteProgram(t.program)})),f.length=0,c={},r.shaderCount=0},program:function(n,i,s,l){x.command(n>=0,"missing vertex shader",s),x.command(i>=0,"missing fragment shader",s);var u=c[i];u||(u=c[i]={});var d=u[n];if(d&&(d.refCount++,!l))return d;var m=new h(i,n);return r.shaderCount++,p(m,s,l),d||(u[n]=m),f.push(m),t(m,{destroy:function(){if(m.refCount--,m.refCount<=0){e.deleteProgram(m.program);var t=f.indexOf(m);f.splice(t,1),r.shaderCount--}u[m.vertId].refCount<=0&&(e.deleteShader(o[m.vertId]),delete o[m.vertId],delete c[m.fragId][m.vertId]),Object.keys(c[m.fragId]).length||(e.deleteShader(a[m.fragId]),delete a[m.fragId],delete c[m.fragId])}})},restore:function(){a={},o={};for(var e=0;e<f.length;++e)p(f[e],null,f[e].attributes.map((function(e){return[e.location,e.name]})))},shader:u,frag:-1,vert:-1}}(i,c,f,r),M=dt(i,d,y,(function(){C.procs.poll()}),v,f,r),k=function(e,t,n,r,i){var a={rgba4:pt,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(a.srgba=35907),t.ext_color_buffer_half_float&&(a.rgba16f=34842,a.rgb16f=34843),t.webgl_color_buffer_float&&(a.rgba32f=34836);var o=[];Object.keys(a).forEach((function(e){var t=a[e];o[t]=e}));var s=0,l={};function u(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=pt,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function c(t){var n=t.renderbuffer;x(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(ht,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete l[t.id],r.renderbufferCount--}return u.prototype.decRef=function(){--this.refCount<=0&&c(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach((function(t){e+=l[t].stats.size})),e}),{create:function(t,s){var c=new u(e.createRenderbuffer());function f(t,r){var s=0,l=0,u=pt;if("object"==typeof t&&t){var d=t;if("shape"in d){var h=d.shape;x(Array.isArray(h)&&h.length>=2,"invalid renderbuffer shape"),s=0|h[0],l=0|h[1]}else"radius"in d&&(s=l=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(l=0|d.height);"format"in d&&(x.parameter(d.format,a,"invalid renderbuffer format"),u=a[d.format])}else"number"==typeof t?(s=0|t,l="number"==typeof r?0|r:s):t?x.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(x(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==c.width||l!==c.height||u!==c.format)return f.width=c.width=s,f.height=c.height=l,c.format=u,e.bindRenderbuffer(ht,c.renderbuffer),e.renderbufferStorage(ht,u,s,l),x(0===e.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=gt(c.format,c.width,c.height)),f.format=o[c.format],f}return l[c.id]=c,r.renderbufferCount++,f(t,s),f.resize=function(t,r){var a=0|t,o=0|r||a;return a===c.width&&o===c.height||(x(a>0&&o>0&&a<=n.maxRenderbufferSize&&o<=n.maxRenderbufferSize,"invalid renderbuffer size"),f.width=c.width=a,f.height=c.height=o,e.bindRenderbuffer(ht,c.renderbuffer),e.renderbufferStorage(ht,c.format,a,o),x(0===e.getError(),"invalid render buffer format"),i.profile&&(c.stats.size=gt(c.format,c.width,c.height))),f},f._reglType="renderbuffer",f._renderbuffer=c,i.profile&&(f.stats=c.stats),f.destroy=function(){c.decRef()},f},clear:function(){W(l).forEach(c)},restore:function(){W(l).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(ht,t.renderbuffer),e.renderbufferStorage(ht,t.format,t.width,t.height)})),e.bindRenderbuffer(ht,null)}}}(i,d,y,f,r),E=function(e,n,r,i,a,o){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],u=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&u.push("srgba"),n.ext_color_buffer_half_float&&u.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&u.push("rgba32f");var c=["uint8"];function f(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function h(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),a=Math.max(1,r.height);x(i===t&&a===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var o=e.renderbuffer._renderbuffer;x(o.width===t&&o.height===n,"inconsistent width/height for renderbuffer"),o.refCount+=1}}function p(t,n){n&&(n.texture?e.framebufferTexture2D(vt,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(vt,t,bt,n.renderbuffer._renderbuffer.renderbuffer))}function m(e){var t=yt,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),x.type(i,"function","invalid attachment data");var a=i._reglType;return"texture2d"===a?(n=i,x(t===yt)):"textureCube"===a?(n=i,x(t>=At&&t<34075,"invalid cube map target")):"renderbuffer"===a?(r=i,t=bt):x.raise("invalid regl object for attachment"),new f(t,n,r)}function g(e,t,n,r,o){if(n){var s=i.create2D({width:e,height:t,format:r,type:o});return s._texture.refCount=0,new f(yt,s,null)}var l=a.create({width:e,height:t,format:r});return l._renderbuffer.refCount=0,new f(bt,null,l)}function v(e){return e&&(e.texture||e.renderbuffer)}function b(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&c.push("half float","float16"),n.oes_texture_float&&c.push("float","float32");var y=0,A={};function w(){this.id=y++,A[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function _(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function S(t){var n=t.framebuffer;x(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,o.framebufferCount--,delete A[t.id]}function M(t){var n;e.bindFramebuffer(vt,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)p(36064+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(vt,36064+n,yt,null,0);e.framebufferTexture2D(vt,33306,yt,null,0),e.framebufferTexture2D(vt,36096,yt,null,0),e.framebufferTexture2D(vt,36128,yt,null,0),p(36096,t.depthAttachment),p(36128,t.stencilAttachment),p(33306,t.depthStencilAttachment);var a=e.checkFramebufferStatus(vt);e.isContextLost()||36053===a||x.raise("framebuffer configuration not supported, status = "+Mt[a]),e.bindFramebuffer(vt,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function k(e,i){var a=new w;function f(e,t){var i;x(s.next!==a,"can not update framebuffer which is currently in use");var o=0,d=0,p=!0,b=!0,y=null,A=!0,w="rgba",S="uint8",k=1,E=null,C=null,I=null,O=!1;if("number"==typeof e)o=0|e,d=0|t||o;else if(e){x.type(e,"object","invalid arguments for framebuffer");var T=e;if("shape"in T){var B=T.shape;x(Array.isArray(B)&&B.length>=2,"invalid shape for framebuffer"),o=B[0],d=B[1]}else"radius"in T&&(o=d=T.radius),"width"in T&&(o=T.width),"height"in T&&(d=T.height);("color"in T||"colors"in T)&&(y=T.color||T.colors,Array.isArray(y)&&x(1===y.length||n.webgl_draw_buffers,"multiple render targets not supported")),y||("colorCount"in T&&(k=0|T.colorCount,x(k>0,"invalid color buffer count")),"colorTexture"in T&&(A=!!T.colorTexture,w="rgba4"),"colorType"in T&&(S=T.colorType,A?(x(n.oes_texture_float||!("float"===S||"float32"===S),"you must enable OES_texture_float in order to use floating point framebuffer objects"),x(n.oes_texture_half_float||!("half float"===S||"float16"===S),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===S||"float16"===S?(x(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==S&&"float32"!==S||(x(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),x.oneOf(S,c,"invalid color type")),"colorFormat"in T&&(w=T.colorFormat,l.indexOf(w)>=0?A=!0:u.indexOf(w)>=0?A=!1:x.optional((function(){A?x.oneOf(T.colorFormat,l,"invalid color format for texture"):x.oneOf(T.colorFormat,u,"invalid color format for renderbuffer")})))),("depthTexture"in T||"depthStencilTexture"in T)&&(O=!(!T.depthTexture&&!T.depthStencilTexture),x(!O||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in T&&("boolean"==typeof T.depth?p=T.depth:(E=T.depth,b=!1)),"stencil"in T&&("boolean"==typeof T.stencil?b=T.stencil:(C=T.stencil,p=!1)),"depthStencil"in T&&("boolean"==typeof T.depthStencil?p=b=T.depthStencil:(I=T.depthStencil,p=!1,b=!1))}else o=d=1;var D=null,P=null,z=null,j=null;if(Array.isArray(y))D=y.map(m);else if(y)D=[m(y)];else for(D=new Array(k),i=0;i<k;++i)D[i]=g(o,d,A,w,S);x(n.webgl_draw_buffers||D.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),x(D.length<=r.maxColorAttachments,"too many color attachments, not supported"),o=o||D[0].width,d=d||D[0].height,E?P=m(E):p&&!b&&(P=g(o,d,O,"depth","uint32")),C?z=m(C):b&&!p&&(z=g(o,d,!1,"stencil","uint8")),I?j=m(I):!E&&!C&&b&&p&&(j=g(o,d,O,"depth stencil","depth stencil")),x(!!E+!!C+!!I<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var R=null;for(i=0;i<D.length;++i)if(h(D[i],o,d),x(!D[i]||D[i].texture&&wt.indexOf(D[i].texture._texture.format)>=0||D[i].renderbuffer&&St.indexOf(D[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),D[i]&&D[i].texture){var L=_t[D[i].texture._texture.format]*xt[D[i].texture._texture.type];null===R?R=L:x(R===L,"all color attachments much have the same number of bits per pixel.")}return h(P,o,d),x(!P||P.texture&&6402===P.texture._texture.format||P.renderbuffer&&33189===P.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),h(z,o,d),x(!z||z.renderbuffer&&36168===z.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),h(j,o,d),x(!j||j.texture&&34041===j.texture._texture.format||j.renderbuffer&&34041===j.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),_(a),a.width=o,a.height=d,a.colorAttachments=D,a.depthAttachment=P,a.stencilAttachment=z,a.depthStencilAttachment=j,f.color=D.map(v),f.depth=v(P),f.stencil=v(z),f.depthStencil=v(j),f.width=a.width,f.height=a.height,M(a),f}return o.framebufferCount++,f(e,i),t(f,{resize:function(e,t){x(s.next!==a,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===a.width&&r===a.height)return f;for(var i=a.colorAttachments,o=0;o<i.length;++o)b(i[o],n,r);return b(a.depthAttachment,n,r),b(a.stencilAttachment,n,r),b(a.depthStencilAttachment,n,r),a.width=f.width=n,a.height=f.height=r,M(a),f},_reglType:"framebuffer",_framebuffer:a,destroy:function(){S(a),_(a)},use:function(e){s.setFBO({framebuffer:f},e)}})}return t(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof w)return t}return null},create:k,createCube:function(e){var a=Array(6);function o(e){var r;x(a.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var u,f={color:null},d=0,h=null,p="rgba",m="uint8",g=1;if("number"==typeof e)d=0|e;else if(e){x.type(e,"object","invalid arguments for framebuffer");var v=e;if("shape"in v){var b=v.shape;x(Array.isArray(b)&&b.length>=2,"invalid shape for framebuffer"),x(b[0]===b[1],"cube framebuffer must be square"),d=b[0]}else"radius"in v&&(d=0|v.radius),"width"in v?(d=0|v.width,"height"in v&&x(v.height===d,"must be square")):"height"in v&&(d=0|v.height);("color"in v||"colors"in v)&&(h=v.color||v.colors,Array.isArray(h)&&x(1===h.length||n.webgl_draw_buffers,"multiple render targets not supported")),h||("colorCount"in v&&(g=0|v.colorCount,x(g>0,"invalid color buffer count")),"colorType"in v&&(x.oneOf(v.colorType,c,"invalid color type"),m=v.colorType),"colorFormat"in v&&(p=v.colorFormat,x.oneOf(v.colorFormat,l,"invalid color format for texture"))),"depth"in v&&(f.depth=v.depth),"stencil"in v&&(f.stencil=v.stencil),"depthStencil"in v&&(f.depthStencil=v.depthStencil)}else d=1;if(h)if(Array.isArray(h))for(u=[],r=0;r<h.length;++r)u[r]=h[r];else u=[h];else{u=Array(g);var y={radius:d,format:p,type:m};for(r=0;r<g;++r)u[r]=i.createCube(y)}for(f.color=Array(u.length),r=0;r<u.length;++r){var A=u[r];x("function"==typeof A&&"textureCube"===A._reglType,"invalid cube map"),d=d||A.width,x(A.width===d&&A.height===d,"invalid cube map shape"),f.color[r]={target:At,data:u[r]}}for(r=0;r<6;++r){for(var w=0;w<u.length;++w)f.color[w].target=At+r;r>0&&(f.depth=a[0].depth,f.stencil=a[0].stencil,f.depthStencil=a[0].depthStencil),a[r]?a[r](f):a[r]=k(f)}return t(o,{width:d,height:d,color:u})}return o(e),t(o,{faces:a,resize:function(e){var t,n=0|e;if(x(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===o.width)return o;var i=o.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)a[t].resize(n);return o.width=o.height=n,o},_reglType:"framebufferCube",destroy:function(){a.forEach((function(e){e.destroy()}))}})},clear:function(){W(A).forEach(S)},restore:function(){s.cur=null,s.next=null,s.dirty=!0,W(A).forEach((function(t){t.framebuffer=e.createFramebuffer(),M(t)}))}})}(i,d,y,M,k,f),C=lr(i,c,d,y,A,w,0,E,{},_,S,b,v,h,r),B=Tt(i,E,C.procs.poll,v,a,d,y),D=C.next,z=i.canvas,j=[],R=[],q=[],Y=[r.onDestroy],X=null;function H(){if(0===j.length)return h&&h.update(),void(X=null);X=O.next(H),ye();for(var e=j.length-1;e>=0;--e){var t=j[e];t&&t(v,null,0)}i.flush(),h&&h.update()}function ce(){!X&&j.length>0&&(X=O.next(H))}function fe(){X&&(O.cancel(H),X=null)}function de(e){e.preventDefault(),o=!0,fe(),R.forEach((function(e){e()}))}function he(e){i.getError(),o=!1,s.restore(),S.restore(),A.restore(),M.restore(),k.restore(),E.restore(),_.restore(),h&&h.restore(),C.procs.refresh(),ce(),q.forEach((function(e){e()}))}function pe(e){function n(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var a=e[i];if(I.isDynamic(a))r[i]=I.unbox(a,i);else{if(t&&Array.isArray(a))for(var o=0;o<a.length;++o)if(I.isDynamic(a[o]))return void(r[i]=I.unbox(a,i));n[i]=a}})),{dynamic:r,static:n}}x(!!e,"invalid args to regl({...})"),x.type(e,"object","invalid args to regl({...})");var r=n(e.context||{},!0),i=n(e.uniforms||{},!0),a=n(e.attributes||{},!1),s=n(function(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(n.vao=e.vao),n}(e),!1),l={gpuTime:0,cpuTime:0,count:0},u=C.compile(s,a,i,r,l),c=u.draw,f=u.batch,d=u.scope,h=[];return t((function(e,t){var n;if(o&&x.raise("context lost"),"function"==typeof e)return d.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)d.call(this,null,t,n);else{if(!Array.isArray(e))return d.call(this,e,t,0);for(n=0;n<e.length;++n)d.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return f.call(this,function(e){for(;h.length<e;)h.push(null);return h}(0|e),0|e)}else{if(!Array.isArray(e))return c.call(this,e);if(e.length)return f.call(this,e,e.length)}}),{stats:l,destroy:function(){u.destroy()}})}z&&(z.addEventListener(cr,de,!1),z.addEventListener(fr,he,!1));var me=E.setFBO=pe({framebuffer:I.define.call(null,1,"framebuffer")});function ge(e,t){var n=0;C.procs.poll();var r=t.color;r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(i.clearDepth(+t.depth),n|=256),"stencil"in t&&(i.clearStencil(0|t.stencil),n|=1024),x(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function ve(e){return x.type(e,"function","regl.frame() callback must be a function"),j.push(e),ce(),{cancel:function(){var t=dr(j,e);x(t>=0,"cannot cancel a frame twice"),j[t]=function e(){var t=dr(j,e);j[t]=j[j.length-1],j.length-=1,j.length<=0&&fe()}}}}function be(){var e=D.viewport,t=D.scissor_box;e[0]=e[1]=t[0]=t[1]=0,v.viewportWidth=v.framebufferWidth=v.drawingBufferWidth=e[2]=t[2]=i.drawingBufferWidth,v.viewportHeight=v.framebufferHeight=v.drawingBufferHeight=e[3]=t[3]=i.drawingBufferHeight}function ye(){v.tick+=1,v.time=we(),be(),C.procs.poll()}function Ae(){M.refresh(),be(),C.procs.refresh(),h&&h.update()}function we(){return(T()-p)/1e3}Ae();var _e=t(pe,{clear:function(e){if(x("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)me(t({framebuffer:e.framebuffer.faces[n]},e),ge);else me(e,ge);else ge(0,e)},prop:I.define.bind(null,1),context:I.define.bind(null,2),this:I.define.bind(null,3),draw:pe({}),buffer:function(e){return A.create(e,34962,!1,!1)},elements:function(e){return w.create(e,!1)},texture:M.create2D,cube:M.createCube,renderbuffer:k.create,framebuffer:E.create,framebufferCube:E.createCube,vao:_.createVAO,attributes:a,frame:ve,on:function(e,t){var n;switch(x.type(t,"function","listener callback must be a function"),e){case"frame":return ve(t);case"lost":n=R;break;case"restore":n=q;break;case"destroy":n=Y;break;default:x.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}},limits:y,hasExtension:function(e){return y.extensions.indexOf(e.toLowerCase())>=0},read:B,destroy:function(){j.length=0,fe(),z&&(z.removeEventListener(cr,de),z.removeEventListener(fr,he)),S.clear(),E.clear(),k.clear(),_.clear(),M.clear(),w.clear(),A.clear(),h&&h.clear(),Y.forEach((function(e){e()}))},_gl:i,_refresh:Ae,poll:function(){ye(),h&&h.update()},now:we,stats:f});return r.onDone(null,_e),_e}}()},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],f=1,d=null,h=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function A(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,A(e),!m)if(null!==r(u))m=!0,D(_);else{var t=r(c);null!==t&&P(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,b(k),k=-1),p=!0;var a=h;try{for(A(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"==typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?d.callback=s:d===r(u)&&i(u),A(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var f=r(c);null!==f&&P(w,f.startTime-n),l=!1}return l}finally{d=null,h=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,M=null,k=-1,E=5,C=-1;function I(){return!(t.unstable_now()-C<E)}function O(){if(null!==M){var e=t.unstable_now();C=e;var n=!0;try{n=M(!0,e)}finally{n?x():(S=!1,M=null)}}else S=!1}if("function"==typeof y)x=function(){y(O)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,B=T.port2;T.port1.onmessage=O,x=function(){B.postMessage(null)}}else x=function(){v(O,0)};function D(e){M=e,S||(S=!0,x())}function P(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(b(k),k=-1):g=!0,P(w,a-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},377:(e,t,n)=>{var r=n(832),i=n(652),a=n(801),o=n(30),s=n(618),l=n(49),u=n(971);u.alea=r,u.xor128=i,u.xorwow=a,u.xorshift7=o,u.xor4096=s,u.tychei=l,e.exports=u},832:function(e,t,n){var r;!function(e,i,a){function o(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,i))||(i.exports=r):this.alea=l}(0,e=n.nmd(e),n.amdD)},49:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,i))||(i.exports=r):this.tychei=l}(0,e=n.nmd(e),n.amdD)},652:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,i))||(i.exports=r):this.xor128=l}(0,e=n.nmd(e),n.amdD)},618:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,i))||(i.exports=r):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},30:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,i))||(i.exports=r):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=l:n.amdD&&n.amdO?void 0===(r=function(){return l}.call(t,n,t,i))||(i.exports=r):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},971:function(e,t,n){var r;!function(i,a,o){var s,l=256,u=o.pow(l,6),c=o.pow(2,52),f=2*c,d=255;function h(e,t,n){var r=[],d=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,b(a)]}}():e,3),r),h=new p(r),y=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,v(b(h.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,h),e.state=function(){return m(h,{})}),n?(o.random=e,t):e})(y,d,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<l;)o[i]=i++;for(i=0;i<l;i++)o[i]=o[a=d&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=d&i+1],n=n*l+o[d&(o[i]=o[a=d&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function v(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(v(o.random(),a),e.exports){e.exports=h;try{s=n(42)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],s=0;s<e.length;s++){var l=e[s],u=r.base?l[0]+r.base:l[0],c=a[u]||0,f="".concat(u," ").concat(c);a[u]=c+1;var d=n(f),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var p=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:f,updater:p,references:1})}o.push(f)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var a=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var s=n(a[o]);t[s].references--}for(var l=r(e,i),u=0;u<a.length;u++){var c=n(a[u]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},613:(e,t,n)=>{"use strict";n.d(t,{H:()=>u,QL:()=>r,WN:()=>a,Z3:()=>p,_6:()=>l,dX:()=>s,tH:()=>o,zN:()=>c});class r{check(e){e<0||e>=this.length||Number.isInteger(e)}get(e){return Boolean(this.buf[e>>>3]&1<<e%8)}set(e,t){let n=1<<e%8;t?this.buf[e>>>3]|=n:this.buf[e>>>3]&=255^n}fill(){this.buf.fill(255)}clear(){this.buf.fill(0)}copy(e){if(this.length!==e.length)throw Error("Mismatched dimension");this.buf.set(e.buf)}constructor(e){this.length=e,this.buf=new Uint8Array(Math.ceil(e/8))}}class i{get(e){return this.ref.get(e,this.y)}set(e,t){this.ref.set(e,this.y,t)}constructor(e,t){this.ref=e,this.y=t}}class a{get ROWS(){return this.MY}get COLS(){return this.MX}check(e,t){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||Number.isInteger(t)}get(e,t){let n=t*this.MX+e;return Boolean(this.buf[n>>>3]&1<<n%8)}set(e,t,n){let r=t*this.MX+e,i=1<<r%8;n?this.buf[r>>>3]|=i:this.buf[r>>>3]&=255^i}row(e){return new i(this,e)}fill(){this.buf.fill(255)}clear(){this.buf.fill(0)}copy(e){if(this.MX!==e.MX||this.MY!==e.MY)throw Error("Mismatched dimension");this.buf.set(e.buf)}constructor(e,t){this.MX=e,this.MY=t,this.buf=new Uint8Array(Math.ceil(e*t/8))}}class o{check(e,t,n){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||!Number.isInteger(t)||n<0||n>=this.MX||Number.isInteger(n)}get(e,t,n){let r=n*this.MY*this.MX+t*this.MX+e;return Boolean(this.buf[r>>>3]&1<<r%8)}set(e,t,n,r){let i=n*this.MY*this.MX+t*this.MX+e,a=1<<i%8;r?this.buf[i>>>3]|=a:this.buf[i>>>3]&=255^a}fill(){this.buf.fill(255)}clear(){this.buf.fill(0)}constructor(e,t,n,r){this.MX=e,this.MY=t,this.MZ=n,this.buf=new Uint8Array(Math.ceil(e*t*n/8)),r?this.fill():this.clear()}}class s{get ROWS(){return this.MY}get COLS(){return this.MX}check(e,t){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||Number.isInteger(t)}get(e,t){return this.arr[t*this.MX+e]}set(e,t,n){this.arr[t*this.MX+e]=n}fill(e){this.arr.fill(e)}row(e){return this.arr.subarray(e*this.MX,(e+1)*this.MX)}incre(e,t){this.arr[t*this.MX+e]++}static from(e,t){if(!t?.length)return null;let n=new s(e,t[0].length,t.length);for(let e=0;e<t.length;e++)n.row(e).set(t[e]);return n}copy(e){if(this.MX!==e.MX||this.MY!==e.MY)throw Error("Mismatched dimension");this.arr.set(e.arr)}constructor(e,t,n,r){if(this.arr=new e(t*n),"number"==typeof r)this.arr.fill(r);else if("function"==typeof r)for(let e=0;e<n;e++)for(let n=0;n<t;n++)this.arr[e*t+n]=r(n,e);this.MX=t,this.MY=n}}class l{check(e,t,n){e<0||e>=this.MX||!Number.isInteger(e)||t<0||t>=this.MX||!Number.isInteger(t)||n<0||n>=this.MX||Number.isInteger(n)}get(e,t,n){return this.arr[n*this.MX*this.MY+t*this.MX+e]}set(e,t,n,r){this.arr[n*this.MX*this.MY+t*this.MX+e]=r}copy(e){if(this.MX!==e.MX||this.MY!==e.MY||this.MZ!==e.MZ)throw Error("Mismatched dimension");this.arr.set(e.arr)}constructor(e,t,n,r,i){if(this.arr=new e(t*n*r),i)for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let a=0;a<t;a++)this.arr[e*t*n+r*t+a]=i(a,r,e);this.MX=t,this.MY=n,this.MZ=r}}const u=(e,t,n,r,i)=>{let a=new e(t*n*r);for(let e=0;e<r;e++)for(let r=0;r<n;r++)for(let o=0;o<t;o++)a[e*t*n+r*t+o]=i(o,r,e);return a};class c{get size(){return this._size}clear(){this.map.clear()}get(e){let t=this.hashFunc(e),n=this.map.get(t);if(!n)return null;let r=n.find((t=>this.eqFunc(e,t.k)));return r?r.v:null}set(e,t){let n=this.hashFunc(e),r=this.map.get(n);if(r){let n=r.findIndex((t=>this.eqFunc(e,t.k)));n<0?(r.push({k:this.copyFunc(e),v:t}),this._size++):r[n].v=t}else this.map.set(n,[{k:this.copyFunc(e),v:t}]),this._size++}delete(e){let t=this.hashFunc(e),n=this.map.get(t);if(!n)return!1;if(1===n.length)return this.map.delete(t),this._size--,!0;let r=n.findIndex((t=>this.eqFunc(e,t.k)));return!(r<0||(n.splice(r,1),this._size--,0))}keys(){return[...this.map.values()].flat().map((e=>e.k))}values(){return[...this.map.values()].flat().map((e=>e.v))}entries(){return[...this.map.values()].flat().map((e=>[e.k,e.v]))}constructor(e,t,n){this._size=0,this.map=new Map,this.copyFunc=e,this.hashFunc=t,this.eqFunc=n}}let f=e=>(e+1>>>1)-1,d=e=>1+(e<<1),h=e=>e+1<<1;class p{get size(){return this.heap.length}isEmpty(){return!this.heap.length}peek(){return this.heap[0]}enqueue(...e){return e.forEach((e=>{this.heap.push(e),this._siftUp()})),this.size}dequeue(){let e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this.heap.pop(),this._siftDown(),e}_greater(e,t){return this.comparator(this.heap[e],this.heap[t])}_swap(e,t){[this.heap[e],this.heap[t]]=[this.heap[t],this.heap[e]]}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,f(e));)this._swap(e,f(e)),e=f(e)}_siftDown(){let e=0;for(;d(e)<this.size&&this._greater(d(e),e)||h(e)<this.size&&this._greater(h(e),e);){let t=h(e)<this.size&&this._greater(h(e),d(e))?h(e):d(e);this._swap(e,t),e=t}}constructor(e=((e,t)=>e>t)){this.heap=[],this.heap=[],this.comparator=e}}},930:(e,t,n)=>{"use strict";n.d(t,{W:()=>r,w:()=>i});class r{static split2(e,t,n){return e.split(t).map((e=>e.split(n)))}static firstNonZeroPosition(e){for(let t=0;t<32;t++,e>>=1)if(1==(1&e))return t;return 255}static nonZeroPositions(e){let t=[];for(let n=0;n<32;n++,e>>=1)1==(1&e)&&t.push(n);return t}static sampleWeights(e,t){let n=0;for(let t=0;t<e.length;t++)n+=e[t];let r=t*n,i=0;for(let t=0;t<e.length;t++)if((i+=e[t])>=r)return t;return 0}static*childrenByTag(e,t){for(let n of r.collectionIter(e.children))n.tagName===t&&(yield n)}static*childrenByTags(e,t){for(let n of r.collectionIter(e.children))t.includes(n.tagName)&&(yield n)}static collectionToArr(e){let t=[];for(let n=0;n<e.length;n++)t.push(e.item(n));return t}static*collectionIter(e){for(let t=0;t<e.length;t++)yield e.item(t)}static*matchTags(e,...t){let n=[e];for(;n.length;){let r=n.shift();for(let i of(r!==e&&(yield r),this.childrenByTags(r,t)))n.push(i)}}static matchTag(e,t){for(let n of r.collectionIter(e.children))if(n.tagName===t)return n;return null}static maxPositiveIndex(e){let t=-1,n=-1;for(let r=0;r<e.length;r++){let i=e[r];i>0&&i>t&&(t=i,n=r)}return n}static shuffleFill(e,t){for(let n=0;n<e.length;n++){let r=i(t,n+1);e[n]=e[r],e[r]=n}}static pick(e,t){return e[i(t,e.length)]}static indexBoolArr(e){let t=0,n=1;for(let r=0;r<e.length;r++,n*=2)e[r]&&(t+=n);return t}static indexByteArr(e,t){let n=0n,r=1n;for(let i=0;i<e.length;i++,r*=t)n+=BigInt(e[e.length-1-i])*r;return n}static ords(e,t=[]){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let i=e[r],a=t.indexOf(i);-1==a&&(a=t.length,t.push(i)),n[r]=a}return[n,t.length]}static intPower(e,t){let n=1;for(let r=0;r<t;r++)n*=e;return n}static compareArr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}static hex2rgba(e,t=255){let n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(n){var r=parseInt(n[1],16),i=parseInt(n[2],16),a=parseInt(n[3],16);return new Uint8ClampedArray([r,i,a,t])}return null}static rgb2hex(e){if(e.length<3)return"#000000";let t="#";for(let n=0;n<3;n++)t+=e[n].toString(16).padStart(2,"0");return t}}const i=(e,t)=>Math.floor(e()*t)},999:(e,t,n)=>{"use strict";n.d(t,{TT:()=>s,uD:()=>l.u,Th:()=>o,j:()=>L});var r=n(949),i=n(930),a=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};class o{get colorHex(){return Array.from({length:this.colors.length>>2},((e,t)=>i.W.rgb2hex(this.colors.subarray(t<<2,4+(t<<2)))))}get characters(){return this._chars}setCharacters(e){this._chars!==e&&(this._chars=e,this.updateColors())}updateSymbol(e,t){this.palette.set(e,t)}updateColors(){let e=this._chars.split("").map((e=>this.palette.get(e)));this.colors=new Uint8Array(4*e.length);for(let t=0;t<e.length;t++)this.colors.set(e[t],4*t);this.render()}render(e=this._cache){e&&(this._cache=e,this.forcedState?this._render(this.forcedState):this._render(e))}constructor(){this._chars="",this.palette=new Map,this.colors=new Uint8Array,(0,r.rC)(this)}}a([r.LO],o.prototype,"_chars",void 0),a([r.LO],o.prototype,"palette",void 0),a([r.LO.ref],o.prototype,"colors",void 0),a([r.Fl],o.prototype,"colorHex",null),a([r.Fl],o.prototype,"characters",null),a([r.aD],o.prototype,"setCharacters",null),a([r.aD],o.prototype,"updateSymbol",null),a([r.aD],o.prototype,"updateColors",null);class s extends o{get canvas(){return s._canvas}get ctx(){return s._ctx}update(e,t,n){(this.MX!==e||this.MY!==t)&&(this.MX=e,this.MY=t,this.img=new ImageData(e,t))}_render(e){let{MX:t,MY:n,img:r,colors:i,canvas:a,ctx:o}=this;if(!(a&&o&&i&&r))return;let{data:s}=r,l=t*n;for(let t=0;t<l;t++){let n=e[t]<<2,r=t<<2;s[r+0]=i[n+0],s[r+1]=i[n+1],s[r+2]=i[n+2],s[r+3]=i[n+3]}a.width=t,a.height=n,a.style.width="256px",o.putImageData(r,0,0)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}dispose(){}constructor(){super(),this.canvas.style.imageRendering="pixelated",this.canvas.style.objectFit="contain"}}s._canvas=document.createElement("canvas"),s._ctx=s._canvas.getContext("2d");var l=n(852),u=n(550),c=n.n(u),f=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,h=Math.random,p=Math.PI/180;function m(e){return e*p}function g(){var e=new d(3);return d!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function v(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function b(e,t){t=t||1;var n=2*h()*Math.PI,r=2*h()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),g();var y,A,w,_,x=n(452),S=n.n(x);class M{get ping(){return this.fbo[this.index]}get pong(){return this.fbo[1-this.index]}swap(){this.index=1-this.index}resize(e,t){e<=this.width&&t<=this.height||(this.ping.resize(e,t),this.pong.resize(e,t))}constructor(e,t,n,r){this.index=0,this.width=e,this.height=t;let i={width:e,height:t,colorType:r};this.fbo=[n.framebuffer(i),n.framebuffer(i)]}}let k={};const E=(e,t)=>{let n=e._gl.canvas,r=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}(g(),v(g(),[1.11,-0,.25]),1496e8),i=S()(e),a=i({sunDirection:v(g(),r),resolution:1024}),o=new M(n.width,n.height,e,t),s=[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1];(y=k).t2Sphere||(y.t2Sphere=(()=>{let t=new Float32Array(3145728);for(let e=0;e<1048576;e++){let n=b(g());t[3*e+0]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]}return e.texture({width:1024,height:1024,format:"rgb",type:"float",data:t,wrap:"repeat"})})()),(A=k).t3Sphere||(A.t3Sphere=(()=>{let t=new Float32Array(3145728);for(let e=0;e<1048576;e++){let n=b(g(),Math.random());t[3*e+0]=n[0],t[3*e+1]=n[1],t[3*e+2]=n[2]}return e.texture({width:1024,height:1024,format:"rgb",type:"float",data:t,wrap:"repeat"})})()),(w=k).tUniform2||(w.tUniform2=(()=>{let t=new Float32Array(2097152);for(let e=0;e<1048576;e++)t[2*e+0]=Math.random(),t[2*e+1]=Math.random();return e.texture({width:1024,height:1024,format:"luminance alpha",type:"float",data:t,wrap:"repeat"})})()),(_=k).tUniform1||(_.tUniform1=(()=>{let t=new Float32Array(1048576);for(let e=0;e<1048576;e++)t[e]=Math.random();return e.texture({width:1024,height:1024,format:"luminance",type:"float",data:t,wrap:"repeat"})})());let l=t=>e.prop(t),u=e({vert:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nvoid main() {\n    gl_Position = vec4(position, 0, 1);\n}\n",frag:"precision highp float;\n#define GLSLIFY 1\nuniform highp sampler2D tRGB, tRMET, tRi, tIndex, t2Sphere, t3Sphere, tUniform2, tUniform1, source;\nuniform samplerCube tSky;\nuniform mat4 invpv;\nuniform vec3 eye, bounds, lightPosition, groundColor;\nuniform vec2 res, tOffset, invResRand;\nuniform float resStage, lightRadius, groundRoughness, groundMetalness, dofDist, dofMag, lightIntensity;\n\nconst float epsilon = 0.0001;\nconst int nBounces = 4;\n\nfloat randUniform1(inout vec2 randOffset) {\n    float r = texture2D(tUniform1, randOffset + tOffset).r;\n    randOffset += r;\n    return r;\n}\n\nvec2 randUniform2(inout vec2 randOffset) {\n    vec2 r = texture2D(tUniform2, randOffset + tOffset).ra;\n    randOffset += r;\n    return r;\n}\n\nvec3 rand2Sphere(inout vec2 randOffset) {\n    vec3 r = texture2D(t2Sphere, randOffset + tOffset).xyz;\n    randOffset += r.xy;\n    return r;\n}\n\nvec3 rand3Sphere(inout vec2 randOffset) {\n    vec3 r = texture2D(t3Sphere, randOffset + tOffset).xyz;\n    randOffset += r.xy;\n    return r;\n}\n\nbool inBounds(vec3 p) {\n    if (p.x < 0.0 || p.y < 0.0 || p.z < 0.0) {\n        return false;\n    }\n    if (p.x >= bounds.x || p.y >= bounds.y || p.z >= bounds.z) {\n        return false;\n    }\n    return true;\n}\n\nbool rayAABB(vec3 origin, vec3 direction, vec3 bMin, vec3 bMax, out float t0) {\n    vec3 invDir = 1.0 / direction;\n    vec3 omin = (bMin - origin) * invDir;\n    vec3 omax = (bMax - origin) * invDir;\n    vec3 imax = max(omax, omin);\n    vec3 imin = min(omax, omin);\n    float t1 = min(imax.x, min(imax.y, imax.z));\n    t0 = max(imin.x, max(imin.y, imin.z));\n    t0 = max(t0, 0.0);\n    return t1 > t0;\n}\n\nvec3 rayAABBNorm(vec3 p, vec3 v) {\n    vec3 d = p - (v + 0.5);\n    vec3 dabs = abs(d);\n    if (dabs.x > dabs.y) {\n        if (dabs.x > dabs.z) {\n            return vec3(sign(d.x), 0.0, 0.0);\n        } else {\n            return vec3(0, 0, sign(d.z));\n        }\n    } else {\n        if (dabs.y > dabs.z) {\n            return vec3(0.0, sign(d.y), 0.0);\n        } else {\n            return vec3(0.0, 0.0, sign(d.z));\n        }\n    }\n}\n\nvec2 samplePoint(vec3 v) {\n    float invResStage = 1.0 / resStage;\n    float i = v.y * bounds.x * bounds.z + v.z * bounds.x + v.x;\n    i = i * invResStage;\n    float y = floor(i);\n    float x = fract(i) * resStage;\n    x = (x + 0.5) * invResStage;\n    y = (y + 0.5) * invResStage;\n    return vec2(x, y);\n}\n\nstruct VoxelData {\n  vec3 xyz;\n  vec3 rgb;\n  vec2 index;\n  float roughness;\n  float metalness;\n  float emission;\n  float transparent;\n  float ri;\n};\n\nVoxelData floorData(vec3 v) {\n  return VoxelData(v, groundColor, vec2(1.0 / 255.0, 0.0), groundRoughness, groundMetalness, 0.0, 0.0, 1.0);\n}\n\nVoxelData airData(vec3 v) {\n  return VoxelData(v, vec3(1.0), vec2(0.0), 0.0, 0.0, 0.0, 1.0, 1.0);\n}\n\nVoxelData voxelData(vec3 v) {\n    VoxelData vd;\n    vd.xyz = v;\n    if (v.y == -1.0) {\n        return floorData(v);\n    }\n    if (!inBounds(v)) {\n        return airData(v);\n    }\n    vec2 s = samplePoint(v);\n    vd.index = texture2D(tIndex, s).ra;\n    if (vd.index == vec2(0.0)) return airData(v);\n    vd.rgb = texture2D(tRGB, vd.index).rgb;\n    vec4 rmet = texture2D(tRMET, vd.index);\n    vd.roughness = rmet.r;\n    vd.metalness = rmet.g;\n    vd.emission = rmet.b;\n    vd.transparent = rmet.a;\n    vd.ri = texture2D(tRi, vd.index).r;\n    return vd;\n}\n\nVoxelData intersectFloor(vec3 r0, vec3 r) {\n    // NOTE: Assumes this ray actually hits the floor.\n    vec3 v = floor(r0 + r * -r0.y / r.y);\n    v.y = -1.0;\n    return floorData(v);\n}\n\nfloat raySphereIntersect(vec3 r0, vec3 rd, vec3 s0, float sr) {\n    float a = dot(rd, rd);\n    vec3 s0_r0 = r0 - s0;\n    float b = 2.0 * dot(rd, s0_r0);\n    float c = dot(s0_r0, s0_r0) - (sr * sr);\n    if (b * b - 4.0 * a * c < 0.0) {\n        return -1.0;\n    }\n    return (-b - sqrt((b * b) - 4.0 * a * c)) / (2.0 * a);\n}\n\nvec3 skyColor(vec3 r0, vec3 r, float sunScale) {\n    if (r.y < 0.0) {\n        return vec3(0.0);\n    }\n    vec3 sky = textureCube(tSky, r).rgb;\n    if (raySphereIntersect(r0, r, lightPosition, lightRadius) > 0.0) {\n        sky += vec3(lightIntensity) * sunScale;\n    }\n    return sky;\n}\n\nbool intersect(vec3 r0, vec3 r, inout VoxelData vd) {\n    float tBounds = 0.0;\n    vec3 v = vec3(0.0);\n    \n    if (!inBounds(r0)) {\n        if (!rayAABB(r0, r, vec3(0.0), bounds, tBounds)) {\n            if (r.y >= 0.0) {\n                return false;\n            }\n            vd = intersectFloor(r0, r);\n            return true;\n        }\n        r0 = r0 + r * tBounds + r * epsilon;\n    }\n\n    v = floor(r0);\n    vec3 stp = sign(r);\n    vec3 tDelta = 1.0 / abs(r);\n    vec3 tMax = step(0.0, r) * (1.0 - fract(r0)) + (1.0 - step(0.0, r)) * fract(r0);\n    tMax = tMax/abs(r);\n\n    for (int i = 0; i < 8192; i++) {\n\n        if (!inBounds(v)) {\n            if (r.y >= 0.0) {\n                return false;\n            }\n            vd = intersectFloor(r0, r);\n            return true;\n        }\n\n        vec2 lastIndex = vd.index;\n        vd = voxelData(v);\n\n        if (lastIndex != vd.index) {\n            return true;\n        }\n\n        vec3 s = vec3(\n            step(tMax.x, tMax.y) * step(tMax.x, tMax.z),\n            step(tMax.y, tMax.x) * step(tMax.y, tMax.z),\n            step(tMax.z, tMax.x) * step(tMax.z, tMax.y)\n        );\n\n        v += s * stp;\n        tMax += s * tDelta;\n    }\n\n    return false;\n}\n\nvoid main() {\n\n    vec4 src = texture2D(source, gl_FragCoord.xy / res);\n\n    vec2 randOffset = vec2(0.0);\n\n    // Recover NDC\n    vec2 jitter = randUniform2(randOffset) - 0.5;\n    vec4 ndc = vec4(\n      2.0 * (gl_FragCoord.xy + jitter) / res - 1.0,\n      2.0 * gl_FragCoord.z - 1.0,\n      1.0\n    );\n\n    // Calculate clip\n    vec4 clip = invpv * ndc;\n\n    // Calculate 3D position\n    vec3 p3d = clip.xyz / clip.w;\n\n    vec3 ray = normalize(p3d - eye);\n    vec3 r0 = eye;\n\n    float ddof = dofDist * length(bounds) + length(0.5 * bounds - eye) - length(bounds) * 0.5;\n    vec3 tdof = r0 + ddof * ray;\n    r0 += rand2Sphere(randOffset) * dofMag;\n    ray = normalize(tdof - r0);\n\n    vec3 mask = vec3(1.0);\n    vec3 accm = vec3(0.0);\n\n    VoxelData vd = airData(floor(r0));\n\n    bool reflected = false;\n    for (int b = 0; b < nBounces; b++) {\n        bool refracted = false;\n        float lastRi = vd.ri;\n\n        if (intersect(r0, ray, vd)) {\n            if (vd.emission > 0.0) {\n                accm += mask * vd.emission * vd.rgb;\n                break;\n            }\n\n            float tVoxel = 0.0;\n            rayAABB(r0, ray, vd.xyz, vd.xyz + 1.0, tVoxel);\n            vec3 r1 = r0 + tVoxel * ray;\n            vec3 n = rayAABBNorm(r1, vd.xyz);\n            vec3 m = normalize(n + rand3Sphere(randOffset) * vd.roughness);\n            vec3 diffuse = normalize(m + rand2Sphere(randOffset));\n            vec3 ref = reflect(ray, m);\n            if (randUniform1(randOffset) <= vd.metalness) {\n                // metallic\n                ray = ref;\n                reflected = true;\n                mask *= vd.rgb;\n            } else {\n                // nonmetallic\n                const float F0 = 0.0;\n                float F = F0 + (1.0 - F0) * pow(1.0 - dot(-ray, n), 5.0);\n                if (randUniform1(randOffset) <= F) {\n                    // reflect\n                    ray = ref;\n                    reflected = true;\n                } else {\n                    // diffuse\n                    mask *= vd.rgb;\n                    if (randUniform1(randOffset) <= vd.transparent) {\n                        // attempt refraction\n                        ray = refract(ray, m, lastRi/vd.ri);\n                        if (ray != vec3(0.0)) {\n                            // refracted\n                            ray = normalize(ray);\n                            refracted = true;\n                            reflected = false;\n                        } else {\n                            // total internal refraction, use reflection.\n                            ray = ref;\n                            refracted = false;\n                            reflected = true;\n                        }\n                    } else {\n                        // diffuse reflection\n                        ray = diffuse;\n                        reflected = false;\n                    }\n                }\n            }\n\n            if (!refracted && dot(ray, n) < 0.0) {\n                accm = vec3(0.0);\n                break;\n            }\n\n            r0 = r1 + ray * epsilon;\n            vd = voxelData(floor(r0));\n\n            if (ray == diffuse) {\n                // Perform next event estimation when a diffuse bounce occurs.\n                vec3 pLight = lightPosition + rand2Sphere(randOffset) * lightRadius;\n                vec3 rLight = normalize(pLight - r0);\n                VoxelData _vd;\n                if (!intersect(r0, rLight, _vd)) {\n                    accm += mask * skyColor(r0, rLight, 0.5) * clamp(dot(rLight, m), 0.0, 1.0);\n                }\n            }\n        } else {\n            accm += mask * skyColor(r0, ray, b == 0 ? 1.0 : 0.0).rgb;\n            break;\n        }\n    }\n\n    gl_FragColor = vec4(accm, 1) + src;\n}\n",attributes:{position:s},uniforms:{source:l("source"),invpv:l("invpv"),eye:l("eye"),res:l("res"),resFrag:l("resFrag"),tSky:a,tUniform1:k.tUniform1,tUniform2:k.tUniform2,t2Sphere:k.t2Sphere,t3Sphere:k.t3Sphere,tOffset:l("tOffset"),tRGB:l("tRGB"),tRMET:l("tRMET"),tRi:l("tRi"),tIndex:l("tIndex"),dofDist:l("dofDist"),dofMag:l("dofMag"),resStage:l("resStage"),invResRand:[.0009765625,.0009765625],lightPosition:l("lightPosition"),lightIntensity:l("lightIntensity"),lightRadius:l("lightRadius"),groundColor:l("groundColor"),groundRoughness:l("groundRoughness"),groundMetalness:l("groundMetalness"),bounds:l("bounds")},depth:{enable:!1,mask:!1},viewport:l("viewport"),framebuffer:l("destination"),count:6}),c=e({vert:"precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nvarying vec2 vPos;\n\nvoid main() {\n    gl_Position = vec4(position, 0, 1);\n    vPos = 0.5 * position + 0.5;\n}\n",frag:"precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D source;\n\nvarying vec2 vPos;\n\nvoid main() {\n    vec4 src = texture2D(source, vPos);\n    // Gamma correction\n    vec3 color = src.rgb / max(src.a, 1.0);\n    color = pow(color, vec3(1.0 / 2.2));\n    gl_FragColor = vec4(color, 1);\n}\n",attributes:{position:s},uniforms:{source:l("source"),fraction:l("fraction"),tUniform1:k.tUniform1,tUniform1Res:[k.tUniform1.width,k.tUniform1.height]},depth:{enable:!1,mask:!1},viewport:l("viewport"),count:6}),f=0,d=n.width,h=n.height;return{context:e,sample:function(e,t,s){let l=function(e,t){let n=2*Math.PI*(e-6)/24;return[1496e8*Math.cos(t)*Math.cos(n),1496e8*Math.sin(n),1496e8*Math.sin(t)*Math.cos(n)]}(s.time,s.azimuth);(function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)})(l,r)>.001&&(r=l,i({sunDirection:v(g(),r),cubeFBO:a}));for(let i=0;i<s.count;i++)u({eye:t.position,invpv:t.inverse,res:[n.width,n.height],tOffset:[Math.random(),Math.random()],tRGB:e.tRGB,tRMET:e.tRMET,tRi:e.tRi,tIndex:e.tIndex,resStage:e.tIndex.width,bounds:e.dim,lightPosition:r,lightIntensity:s.lightIntensity,lightRadius:695508e3*s.lightRadius,groundRoughness:s.groundRoughness,groundColor:s.groundColor,groundMetalness:s.groundMetalness,dofDist:s.dofDist,dofMag:s.dofMag,source:o.ping,destination:o.pong,viewport:{x:0,y:0,width:n.width,height:n.height}}),o.swap(),f++},display:function(){c({source:o.ping,viewport:{x:0,y:0,width:n.width,height:n.height}})},reset:function(){(d<n.width||h<n.height)&&(o.ping({width:d,height:h,colorType:t}),o.pong({width:n.width,height:n.height,colorType:t}),d=n.width,h=n.height),e.clear({color:[0,0,0,1],framebuffer:o.ping}),e.clear({color:[0,0,0,1],framebuffer:o.pong}),f=0},sampleCount:()=>f,destroy(){o.ping.destroy(),o.pong.destroy()}}};class C{resize(e){let t=this.regl;for(this.dim=e,this.textureSize=1;this.textureSize*this.textureSize<this.dim[0]*this.dim[1]*this.dim[2];)this.textureSize*=2;this.ind_buf=new Uint8Array(this.textureSize*this.textureSize*2),this.tIndex=t.texture({width:this.textureSize,height:this.textureSize,format:"luminance alpha"})}setMaterial(e,t,n,r,i=1,a=0,o=0,s=0,l=1){this.rgb_buf[3*e+0]=t,this.rgb_buf[3*e+1]=n,this.rgb_buf[3*e+2]=r,this.pbr_buf[4*e+0]=i,this.pbr_buf[4*e+1]=a,this.pbr_buf[4*e+2]=o,this.pbr_buf[4*e+3]=s,this.ri_buf[4*e+0]=l}setGrid(e){for(let t=0;t<e.length;t++)this.ind_buf[2*t]=e[t];this.tIndex.subimage(this.ind_buf)}updateBuffers(){this.tRGB.subimage(this.rgb_buf),this.tRMET.subimage(this.pbr_buf),this.tRi.subimage(this.ri_buf)}clearMaterial(){this.rgb_buf.fill(0),this.pbr_buf.fill(0),this.ri_buf.fill(0)}clearGrid(){this.ind_buf.fill(0),this.tIndex.subimage(this.ind_buf)}constructor(e){this.rgb_buf=new Uint8Array(196608),this.pbr_buf=new Float32Array(262144),this.ri_buf=new Float32Array(262144),this.regl=e,this.tRGB=e.texture({width:256,height:256,format:"rgb"}),this.tRMET=e.texture({width:256,height:256,format:"rgba",type:"float"}),this.tRi=e.texture({width:256,height:256,format:"rgba",type:"float"}),this.resize([0,0,0])}}function I(){var e=new d(16);return d!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}var O=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],m=t[12],g=t[13],v=t[14],b=t[15],y=n[0],A=n[1],w=n[2],_=n[3];return e[0]=y*r+A*s+w*f+_*m,e[1]=y*i+A*l+w*d+_*g,e[2]=y*a+A*u+w*h+_*v,e[3]=y*o+A*c+w*p+_*b,y=n[4],A=n[5],w=n[6],_=n[7],e[4]=y*r+A*s+w*f+_*m,e[5]=y*i+A*l+w*d+_*g,e[6]=y*a+A*u+w*h+_*v,e[7]=y*o+A*c+w*p+_*b,y=n[8],A=n[9],w=n[10],_=n[11],e[8]=y*r+A*s+w*f+_*m,e[9]=y*i+A*l+w*d+_*g,e[10]=y*a+A*u+w*h+_*v,e[11]=y*o+A*c+w*p+_*b,y=n[12],A=n[13],w=n[14],_=n[15],e[12]=y*r+A*s+w*f+_*m,e[13]=y*i+A*l+w*d+_*g,e[14]=y*a+A*u+w*h+_*v,e[15]=y*o+A*c+w*p+_*b,e};let T=new Float32Array([0,1,0]);class B{set distance(e){this._distance=Math.max(.001,Math.min(e,this.maxDistance))}get distance(){return this._distance}get view(){return this._buf.subarray(0,16)}get inverse(){return this._buf.subarray(16,32)}get position(){return this._buf.subarray(32,35)}update(){let e=this._buf.slice(),t=I(),n=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(I(),m(-this.azimuth)),r=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(I(),m(-this.incline));O(t,n,r);let i=I();i[14]=this._distance;let a=O(I(),t,i),o=this._buf.subarray(32,35);var s,l;l=a,(s=o)[0]=l[12],s[1]=l[13],s[2]=l[14],function(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}(o,o,this.center);let u=function(e,t,n,r){var i,a,o,s,l,u,c,d,h,p,m=t[0],g=t[1],v=t[2],b=r[0],y=r[1],A=r[2],w=n[0],_=n[1],x=n[2];return Math.abs(m-w)<f&&Math.abs(g-_)<f&&Math.abs(v-x)<f?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(c=m-w,d=g-_,h=v-x,i=y*(h*=p=1/Math.hypot(c,d,h))-A*(d*=p),a=A*(c*=p)-b*h,o=b*d-y*c,(p=Math.hypot(i,a,o))?(i*=p=1/p,a*=p,o*=p):(i=0,a=0,o=0),s=d*o-h*a,l=h*i-c*o,u=c*a-d*i,(p=Math.hypot(s,l,u))?(s*=p=1/p,l*=p,u*=p):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*m+a*g+o*v),e[13]=-(s*m+l*g+u*v),e[14]=-(c*m+d*g+h*v),e[15]=1,e)}(I(),o,this.center,T),c=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}(I(),m(this.fov),this.aspect,this.nearClip,this.farClip);O(this._buf,c,u),function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],g=t[14],v=t[15],b=n*s-r*o,y=n*l-i*o,A=n*u-a*o,w=r*l-i*s,_=r*u-a*s,x=i*u-a*l,S=c*m-f*p,M=c*g-d*p,k=c*v-h*p,E=f*g-d*m,C=f*v-h*m,I=d*v-h*g,O=b*I-y*C+A*E+w*k-_*M+x*S;O&&(O=1/O,e[0]=(s*I-l*C+u*E)*O,e[1]=(i*C-r*I-a*E)*O,e[2]=(m*x-g*_+v*w)*O,e[3]=(d*_-f*x-h*w)*O,e[4]=(l*k-o*I-u*M)*O,e[5]=(n*I-i*k+a*M)*O,e[6]=(g*A-p*x-v*y)*O,e[7]=(c*x-d*A+h*y)*O,e[8]=(o*C-s*k+u*S)*O,e[9]=(r*k-n*C-a*S)*O,e[10]=(p*_-m*A+v*b)*O,e[11]=(f*A-c*_-h*b)*O,e[12]=(s*M-o*E-l*S)*O,e[13]=(n*E-r*M+i*S)*O,e[14]=(m*y-p*w-g*b)*O,e[15]=(c*w-f*y+d*b)*O)}(this._buf.subarray(16),this._buf);for(let t=0;t<e.length;t++)if(this._buf[t]!==e[t])return!0;return!1}reset(){this.fov=60,this.aspect=1.33,this.nearClip=.1,this.farClip=1e3,this._distance=10,this.maxDistance=1e3,this.azimuth=0,this.incline=0,this.center.fill(0),this.update()}constructor(){this.fov=0,this.aspect=0,this.nearClip=0,this.farClip=0,this._distance=0,this.maxDistance=0,this.azimuth=0,this.incline=0,this.center=new Float32Array(3),this._buf=new Float32Array(36),this.reset()}}class D{get sampleCount(){return this._renderer.sampleCount()}ground(e,t,n){(function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]})(this._ground.color,e),this._ground.rough=t,this._ground.metal=n,this._renderDirty=!0}sun(e,t,n,r){this._sun.time=e,this._sun.azimuth=t,this._sun.radius=n,this._sun.intensity=r,this._renderDirty=!0}dof(e,t){this._dof.distance=e,this._dof.magnitude=t,this._renderDirty=!0}grid(e){this.stage.setGrid(e),this._renderDirty=!0}sample(e){this.frame++,(this.oldDim[0]!==this._canvas.width||this.oldDim[1]!==this._canvas.height)&&(this.oldDim[0]=this._canvas.width,this.oldDim[1]=this._canvas.height,this._renderDirty=!0),this.camera.aspect=this._canvas.width/this._canvas.height,this.camera.update()&&(this._renderDirty=!0),this._renderDirty&&!(this.frame%4)&&(this._renderer.reset(),this._renderDirty=!1),this._renderer.sampleCount()>=1024||this._renderer.sample(this.stage,this.camera,{groundColor:this._ground.color,groundRoughness:this._ground.rough,groundMetalness:this._ground.metal,time:this._sun.time,azimuth:this._sun.azimuth,lightRadius:this._sun.radius,lightIntensity:this._sun.intensity,dofDist:this._dof.distance,dofMag:this._dof.magnitude,count:e})}display(){this._renderer.sampleCount()>=1024||this._renderer.display()}destroy(){this.stage.tIndex.destroy(),this.stage.tRGB.destroy(),this.stage.tRMET.destroy(),this.stage.tRi.destroy(),this._renderer.destroy()}constructor(e,t,n){this._ground={color:[1,1,1],rough:1,metal:0},this._sun={time:6,azimuth:0,radius:8,intensity:1},this._dof={distance:.5,magnitude:0},this._renderDirty=!0,this.frame=0,this._canvas=e,this._renderer=E(t,n),this.stage=new C(this._renderer.context),this.camera=new B,this.oldDim=[this._canvas.width,this._canvas.height]}}var P,z;let j=(e,t,n)=>e<t?t:e>n?n:e;!function(e){e[e.MOUSE_UP=0]="MOUSE_UP",e[e.MOUSE_DOWN=1]="MOUSE_DOWN"}(P||(P={})),function(e){e[e.MOUSE_LEFT=0]="MOUSE_LEFT",e[e.MOUSE_MIDDLE=1]="MOUSE_MIDDLE",e[e.MOUSE_RIGHT=2]="MOUSE_RIGHT"}(z||(z={}));var R=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};class L extends o{loop(){this.vixel.sample(this.samples),this.vixel.display(),this.raf=requestAnimationFrame((()=>this.loop()))}setCharacters(e){super.setCharacters(e),this.updateMaterial()}updateColors(){super.updateColors(),this.updateMaterial()}updateMaterial(){let{characters:e,colors:t,vixel:n}=this;for(let r=0;r<e.length;r++){let i=e.charAt(r),[a,o,s]=t.subarray(4*r,4*r+3);"Y"===i?n.stage.setMaterial(r,a,o,s,.5,.5,2):"U"===i?n.stage.setMaterial(r,a,o,s,0,.25,0,1,1.333):n.stage.setMaterial(r,a,o,s)}n.stage.updateBuffers()}get canvas(){return L.canvas}update(e,t,n){if(this.MX===e&&this.MY===t&&this.MZ===n)return;this.MX=e,this.MY=t,this.MZ=n;let r=Math.sqrt(e*e+t*t+n*n);this.vixel.camera.azimuth=-45,this.vixel.camera.incline=30,n>e&&n>t?this.vixel.camera.center.set([e/2,n/2,t/2]):this.vixel.camera.center.set([e/2,n/4,t/2]),this.vixel.camera.maxDistance=2*r,this.vixel.camera.distance=r,this.vixel.stage.resize([e,n,t])}_render(e){this.vixel.grid(e)}clear(){this.vixel.stage.clearGrid()}dispose(){cancelAnimationFrame(this.raf),this.vixel.destroy()}constructor(){super(),this.raf=0,this.samples=16,this.canvas.width=512,this.canvas.height=512,this.vixel=new D(this.canvas,L.gfx,L.colorType),L.cam_ctrl.camera=this.vixel.camera,this.vixel.dof(.5,.25),this.vixel.sun(17,1.5*Math.PI/2,1,1),this.clear(),this.raf=requestAnimationFrame((()=>this.loop())),(0,r.rC)(this)}}L.canvas=document.createElement("canvas"),L.gfx=c()({canvas:L.canvas,optionalExtensions:["OES_texture_float","OES_texture_half_float","WEBGL_color_buffer_float","EXT_color_buffer_half_float"],attributes:{antialias:!1,preserveDrawingBuffer:!0}}),L.cam_ctrl=new class{set camera(e){e&&(this.cam=e)}onMouseWheel(e){this.cam.distance*=1+e/1e3}onOnePointerMove(e,t,n){let r=this.pointers.get(e);if(!r)return;let i=100,a=j(t-r.ox,-i,i),o=j(-(n-r.oy),-i,i);r.ox=r.nx,r.oy=r.ny,r.nx=t,r.ny=n,this.cam.azimuth=this.cam.azimuth+1*a,this.cam.incline=j(this.cam.incline-1*o,-89,89)}constructor(e){this.pointers=new Map,e.addEventListener("wheel",(e=>{this.cam&&this.onMouseWheel(e.deltaY)})),e.addEventListener("pointerdown",(e=>{this.cam&&(this.pointers.size>=2||this.pointers.set(e.pointerId,{nx:e.clientX,ny:e.clientY,ox:e.clientX,oy:e.clientY,ts:Date.now()}))})),e.addEventListener("pointermove",(e=>{this.cam&&this.onOnePointerMove(e.pointerId,e.clientX,e.clientY)}));let t=e=>{this.cam&&this.pointers.delete(e.pointerId)};e.addEventListener("pointercancel",t),e.addEventListener("pointerleave",t),e.addEventListener("pointerout",t),e.addEventListener("pointerup",t)}}(L.canvas),L.supported=!1,L.colorType=L.gfx.hasExtension("OES_texture_float")&&L.gfx.hasExtension("WEBGL_color_buffer_float")?(L.supported=!0,"float"):L.gfx.hasExtension("OES_texture_half_float")||L.gfx.hasExtension("EXT_color_buffer_half_float")?(L.supported=!0,"half float"):null,R([r.KG],L.prototype,"setCharacters",null),R([r.KG],L.prototype,"updateColors",null)},852:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>IsometricRenderer});var ___WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(999),_helpers_datastructures__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(613);class IsometricRenderer extends ___WEBPACK_IMPORTED_MODULE_0__.Th{get canvas(){return IsometricRenderer._canvas}get ctx(){return IsometricRenderer._ctx}static voxel(e,t,n,r){let i=this.pool,a=this.pool_ptr;return this.pool_ptr+=5,i[a+0]=e,i[a+1]=t,i[a+2]=n,i[a+3]=r,a}update(e,t,n){if(this.MX===e&&this.MY===t&&this.MZ===n)return;this.MX=e,this.MY=t,this.MZ=n,this.visible=new _helpers_datastructures__WEBPACK_IMPORTED_MODULE_1__.QL(e*t*n),this.hash=new _helpers_datastructures__WEBPACK_IMPORTED_MODULE_1__.WN(e+t+2*n-3,e+t-1);let r=(e+t)*this.sprite.size,i=~~(((e+t)/2+n)*this.sprite.size),a=r+2*this.sprite.size,o=i+2*this.sprite.size;this.img=new ImageData(a,o)}_render(e){let{MX:t,MY:n,MZ:r,visible:i,hash:a,ctx:o,sprite:s,colors:l,img:u}=this;if(!(o&&s&&l&&u))return;i.clear(),a.clear();let c=Array.from({length:t+n+r-2},(e=>[])),f=Array.from({length:t+n+r-2},(e=>[]));IsometricRenderer.pool.fill(0),IsometricRenderer.pool_ptr=0,(()=>{for(let a=0;a<r;a++)for(let r=0;r<n;r++)for(let o=0;o<t;o++){let s=o+r*t+a*t*n,l=e[s];i.set(s,0!==l),0!==l&&c[o+r+a].push(IsometricRenderer.voxel(l,o,r,a))}let o=IsometricRenderer.pool;for(let e=c.length-1;e>=0;e--){let s=c[e];for(let l=0;l<s.length;l++){let u=s[l],c=o[u+1],d=o[u+2],h=o[u+3],p=c-d+n-1,m=c+d-2*h+2*r-2;if(!a.get(m,p)){let s=0===c||!i.get(c-1+d*t+h*t*n),l=0===d||!i.get(c+(d-1)*t+h*t*n),g=0===h||!i.get(c+d*t+(h-1)*t*n);o[u+4]=Number(d===n-1||!i.get(c+(d+1)*t+h*t*n))<<0|Number(c===t-1||!i.get(c+1+d*t+h*t*n))<<1|Number(s||d!=n-1&&i.get(c-1+(d+1)*t+h*t*n))<<2|Number(s||h!=r-1&&i.get(c-1+d*t+(h+1)*t*n))<<3|Number(l||c!=t-1&&i.get(c+1+(d-1)*t+h*t*n))<<4|Number(l||h!=r-1&&i.get(c+(d-1)*t+(h+1)*t*n))<<5|Number(g||c!=t-1&&i.get(c+1+d*t+(h-1)*t*n))<<6|Number(g||d!=n-1&&i.get(c+(d+1)*t+(h-1)*t*n))<<7,f[e].push(u),a.set(m,p,!0)}}}})();let d=this.sprite.size,h=~~(((t+n)/2+r)*d),p=(t+n)*d+2*d,m=h+2*d;this.canvas.width=p,this.canvas.height=m,(()=>{let{data:e}=u,t=IsometricRenderer.pool;for(let n of(e.fill(0),f))for(let i of n){let n=t[i+0],a=t[i+1],o=t[i+2],u=t[i+3],c=t[i+4],f=p/2+d*(a-o)-d,g=(m-h)/2+(r-1)*d+~~(d*(a+o)/2-d*u),v=n<<2,b=l[v+0],y=l[v+1],A=l[v+2];s.draw(e,b,y,A,~~f,~~g,p,c)}o.putImageData(u,0,0)})()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}dispose(){}constructor(){super(),this.sprite=new VoxelSprite(IsometricRenderer.BLOCK_SIZE),this.canvas.style.imageRendering="auto",this.canvas.style.objectFit="contain"}}IsometricRenderer.BLOCK_SIZE=6,IsometricRenderer._canvas=document.createElement("canvas"),IsometricRenderer._ctx=IsometricRenderer._canvas.getContext("2d"),IsometricRenderer.pool=new Uint8Array(10485760),IsometricRenderer.pool_ptr=0;let C1=215,C2=143,C3=71,transparent=255,black=0,frag_funcs=Array(8);frag_funcs[0]="x == 1 && y <= 0 ? C1 : expr",frag_funcs[1]="x == 0 && y <= 0 ? C1 : expr",frag_funcs[2]="x == 1 - s && 2 * y < s && 2 * y >= -s ? black : expr",frag_funcs[3]="x <= 0 && y == ~~(x / 2) + s - 1 ? black : expr",frag_funcs[4]="x == s && 2 * y < s && 2 * y >= -s ? black : expr",frag_funcs[5]="x > 0 && y == -~~((x + 1) / 2) + s ? black : expr",frag_funcs[6]="x > 0 && y == ~~((x + 1) / 2) - s ? black : expr",frag_funcs[7]="x <= 0 && y == -~~(x / 2) - s + 1 ? black : expr";class VoxelSprite{draw(e,t,n,r,i,a,o,s){let{width:l,height:u,edge_func_table:c,size:f}=this,d=c[s];for(let s=0;s<u;s++)for(let u=0;u<l;u++){let l=d(u-f+1,f-s-1);if(l===transparent)continue;let c=(a+s)*o+(i+u)<<2;e[c+0]=t*l/256,e[c+1]=n*l/256,e[c+2]=r*l/256,e[c+3]=255}}constructor(size){this.size=size,this.width=2*size,this.height=2*size-1,this.edge_func_table=Array.from({length:256},((_,index)=>{let funcs=[];for(let e=0;e<8;e++)1<<e&index&&funcs.push(frag_funcs[e]);let nested=funcs.reduce(((e,t)=>e.replaceAll("expr",`(${t})`)),"(x, y) => {\n                    const c = expr;\n                    if (c !== transparent) return c;\n\n                    if (\n                        2 * y - x >= 2 * s ||\n                        2 * y + x > 2 * s ||\n                        2 * y - x < -2 * s ||\n                        2 * y + x <= -2 * s\n                    ) {\n                        return transparent;\n                    } else if (x > 0 && 2 * y < x) {\n                        return C3;\n                    } else if (x <= 0 && 2 * y <= -x) {\n                        return C2;\n                    } else {\n                        return C1;\n                    }\n                }"),cleaned=nested.replaceAll(/\bs\b/g,this.size.toString()).replaceAll("C1",C1.toString()).replaceAll("C2",C2.toString()).replaceAll("C3",C3.toString()).replaceAll("black",black.toString()).replaceAll("expr","transparent").replaceAll("transparent",transparent.toString());return eval(cleaned)}))}}},42:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>ji});var e=__webpack_require__(893),t=__webpack_require__(949),n=__webpack_require__(294),r=__webpack_require__(697),i=__webpack_require__.n(r),a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function s(){if(!a)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}for(var l=[],u=0;u<256;++u)l[u]=(u+256).toString(16).substr(1);const c=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[r+a]=i[a];return t||function(e,t){var n=t||0,r=l;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}(i)};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}var y="__react_tooltip_hide_event",A="__react_tooltip_rebuild_event",w="__react_tooltip_show_event",_=function(e,t){var n;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):(n=document.createEvent("Event")).initEvent(e,!1,!0,t),window.dispatchEvent(n)},x=function(e,t){var n=this.state.show,r=this.props.id,i=this.isCapture(t.currentTarget),a=t.currentTarget.getAttribute("currentItem");i||t.stopPropagation(),n&&"true"===a?e||this.hideTooltip(t):(t.currentTarget.setAttribute("currentItem","true"),S(t.currentTarget,this.getTargetArray(r)),this.showTooltip(t))},S=function(e,t){for(var n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")},M={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(e,t,n){this.id in e?e[this.id][t]=n:Object.defineProperty(e,this.id,{configurable:!0,value:h({},t,n)})},get:function(e,t){var n=e[this.id];if(void 0!==n)return n[t]}},k=function(e,t,n){var r=t.respectEffect,i=void 0!==r&&r,a=t.customEvent,o=void 0!==a&&a,s=this.props.id,l=n.target.getAttribute("data-tip")||null,u=n.target.getAttribute("data-for")||null,c=n.target;if(!this.isCustomEvent(c)||o){var f=null==s&&null==u||u===s;if(null!=l&&(!i||"float"===this.getEffect(c))&&f){var d=function(e){var t={};for(var n in e)"function"==typeof e[n]?t[n]=e[n].bind(e):t[n]=e[n];return t}(n);d.currentTarget=c,e(d)}}},E=function(e,t){var n={};return e.forEach((function(e){var r=e.getAttribute(t);r&&r.split(" ").forEach((function(e){return n[e]=!0}))})),n},C=function(){return document.getElementsByTagName("body")[0]};function I(e,t,n,r,i,a,o){for(var s=O(n),l=s.width,u=s.height,c=O(t),f=c.width,d=c.height,h=T(e,t,a),p=h.mouseX,m=h.mouseY,g=B(a,f,d,l,u),v=D(o),b=v.extraOffsetX,y=v.extraOffsetY,A=window.innerWidth,w=window.innerHeight,_=P(n),x=_.parentTop,S=_.parentLeft,M=function(e){var t=g[e].l;return p+t+b},k=function(e){var t=g[e].t;return m+t+y},E=function(e){return function(e){return M(e)<0}(e)||function(e){return function(e){var t=g[e].r;return p+t+b}(e)>A}(e)||function(e){return k(e)<0}(e)||function(e){return function(e){var t=g[e].b;return m+t+y}(e)>w}(e)},C=function(e){return!E(e)},I=["top","bottom","left","right"],z=[],j=0;j<4;j++){var R=I[j];C(R)&&z.push(R)}var L,N=!1,F=i!==r;return C(i)&&F?(N=!0,L=i):z.length>0&&E(i)&&E(r)&&(N=!0,L=z[0]),N?{isNewState:!0,newState:{place:L}}:{isNewState:!1,position:{left:parseInt(M(r)-S,10),top:parseInt(k(r)-x,10)}}}var O=function(e){var t=e.getBoundingClientRect(),n=t.height,r=t.width;return{height:parseInt(n,10),width:parseInt(r,10)}},T=function(e,t,n){var r=t.getBoundingClientRect(),i=r.top,a=r.left,o=O(t),s=o.width,l=o.height;return"float"===n?{mouseX:e.clientX,mouseY:e.clientY}:{mouseX:a+s/2,mouseY:i+l/2}},B=function(e,t,n,r,i){var a,o,s,l;return"float"===e?(a={l:-r/2,r:r/2,t:-(i+3+2),b:-3},s={l:-r/2,r:r/2,t:15,b:i+3+2+12},l={l:-(r+3+2),r:-3,t:-i/2,b:i/2},o={l:3,r:r+3+2,t:-i/2,b:i/2}):"solid"===e&&(a={l:-r/2,r:r/2,t:-(n/2+i+2),b:-n/2},s={l:-r/2,r:r/2,t:n/2,b:n/2+i+2},l={l:-(r+t/2+2),r:-t/2,t:-i/2,b:i/2},o={l:t/2,r:r+t/2+2,t:-i/2,b:i/2}),{top:a,bottom:s,left:l,right:o}},D=function(e){var t=0,n=0;for(var r in"[object String]"===Object.prototype.toString.apply(e)&&(e=JSON.parse(e.toString().replace(/'/g,'"'))),e)"top"===r?n-=parseInt(e[r],10):"bottom"===r?n+=parseInt(e[r],10):"left"===r?t-=parseInt(e[r],10):"right"===r&&(t+=parseInt(e[r],10));return{extraOffsetX:t,extraOffsetY:n}},P=function(e){for(var t=e;t;){var n=window.getComputedStyle(t);if("none"!==n.getPropertyValue("transform")||"transform"===n.getPropertyValue("will-change"))break;t=t.parentElement}return{parentTop:t&&t.getBoundingClientRect().top||0,parentLeft:t&&t.getBoundingClientRect().left||0}};function z(e,t,r,i){if(t)return t;if(null!=r)return r;if(null===r)return null;var a=/<br\s*\/?>/;return i&&"false"!==i&&a.test(e)?e.split(a).map((function(e,t){return n.createElement("span",{key:t,className:"multi-line"},e)})):e}function j(e){var t={};return Object.keys(e).filter((function(e){return/(^aria-\w+$|^role$)/.test(e)})).forEach((function(n){t[n]=e[n]})),t}function R(e){var t=e.length;return e.hasOwnProperty?Array.prototype.slice.call(e):new Array(t).fill().map((function(t){return e[t]}))}var L={dark:{text:"#fff",background:"#222",border:"transparent",arrow:"#222"},success:{text:"#fff",background:"#8DC572",border:"transparent",arrow:"#8DC572"},warning:{text:"#fff",background:"#F0AD4E",border:"transparent",arrow:"#F0AD4E"},error:{text:"#fff",background:"#BE6464",border:"transparent",arrow:"#BE6464"},info:{text:"#fff",background:"#337AB7",border:"transparent",arrow:"#337AB7"},light:{text:"#222",background:"#fff",border:"transparent",arrow:"#fff"}};var N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function F(e,t){return e(t={exports:{}},t.exports),t.exports}var Q=function(e){return e&&e.Math==Math&&e},U=Q("object"==typeof globalThis&&globalThis)||Q("object"==typeof window&&window)||Q("object"==typeof self&&self)||Q("object"==typeof N&&N)||function(){return this}()||Function("return this")(),V=function(e){try{return!!e()}catch(e){return!0}},W=!V((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),q={}.propertyIsEnumerable,Y=Object.getOwnPropertyDescriptor,X={f:Y&&!q.call({1:2},1)?function(e){var t=Y(this,e);return!!t&&t.enumerable}:q},H=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},G={}.toString,$=function(e){return G.call(e).slice(8,-1)},Z="".split,K=V((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==$(e)?Z.call(e,""):Object(e)}:Object,J=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},ee=function(e){return K(J(e))},te=function(e){return"object"==typeof e?null!==e:"function"==typeof e},ne=function(e,t){if(!te(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!te(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!te(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!te(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},re=function(e){return Object(J(e))},ie={}.hasOwnProperty,ae=function(e,t){return ie.call(re(e),t)},oe=U.document,se=te(oe)&&te(oe.createElement),le=function(e){return se?oe.createElement(e):{}},ue=!W&&!V((function(){return 7!=Object.defineProperty(le("div"),"a",{get:function(){return 7}}).a})),ce=Object.getOwnPropertyDescriptor,fe={f:W?ce:function(e,t){if(e=ee(e),t=ne(t,!0),ue)try{return ce(e,t)}catch(e){}if(ae(e,t))return H(!X.f.call(e,t),e[t])}},de=function(e){if(!te(e))throw TypeError(String(e)+" is not an object");return e},he=Object.defineProperty,pe={f:W?he:function(e,t,n){if(de(e),t=ne(t,!0),de(n),ue)try{return he(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},me=W?function(e,t,n){return pe.f(e,t,H(1,n))}:function(e,t,n){return e[t]=n,e},ge=function(e,t){try{me(U,e,t)}catch(n){U[e]=t}return t},ve="__core-js_shared__",be=U[ve]||ge(ve,{}),ye=Function.toString;"function"!=typeof be.inspectSource&&(be.inspectSource=function(e){return ye.call(e)});var Ae,we,_e,xe=be.inspectSource,Se=U.WeakMap,Me="function"==typeof Se&&/native code/.test(xe(Se)),ke=F((function(e){(e.exports=function(e,t){return be[e]||(be[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})})),Ee=0,Ce=Math.random(),Ie=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Ee+Ce).toString(36)},Oe=ke("keys"),Te=function(e){return Oe[e]||(Oe[e]=Ie(e))},Be={},De="Object already initialized",Pe=U.WeakMap;if(Me||be.state){var ze=be.state||(be.state=new Pe),je=ze.get,Re=ze.has,Le=ze.set;Ae=function(e,t){if(Re.call(ze,e))throw new TypeError(De);return t.facade=e,Le.call(ze,e,t),t},we=function(e){return je.call(ze,e)||{}},_e=function(e){return Re.call(ze,e)}}else{var Ne=Te("state");Be[Ne]=!0,Ae=function(e,t){if(ae(e,Ne))throw new TypeError(De);return t.facade=e,me(e,Ne,t),t},we=function(e){return ae(e,Ne)?e[Ne]:{}},_e=function(e){return ae(e,Ne)}}var Fe,Qe,Ue={set:Ae,get:we,has:_e,enforce:function(e){return _e(e)?we(e):Ae(e,{})},getterFor:function(e){return function(t){var n;if(!te(t)||(n=we(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Ve=F((function(e){var t=Ue.get,n=Ue.enforce,r=String(String).split("String");(e.exports=function(e,t,i,a){var o,s=!!a&&!!a.unsafe,l=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||ae(i,"name")||me(i,"name",t),(o=n(i)).source||(o.source=r.join("string"==typeof t?t:""))),e!==U?(s?!u&&e[t]&&(l=!0):delete e[t],l?e[t]=i:me(e,t,i)):l?e[t]=i:ge(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||xe(this)}))})),We=U,qe=function(e){return"function"==typeof e?e:void 0},Ye=function(e,t){return arguments.length<2?qe(We[e])||qe(U[e]):We[e]&&We[e][t]||U[e]&&U[e][t]},Xe=Math.ceil,He=Math.floor,Ge=function(e){return isNaN(e=+e)?0:(e>0?He:Xe)(e)},$e=Math.min,Ze=function(e){return e>0?$e(Ge(e),9007199254740991):0},Ke=Math.max,Je=Math.min,et=function(e){return function(t,n,r){var i,a=ee(t),o=Ze(a.length),s=function(e,t){var n=Ge(e);return n<0?Ke(n+t,0):Je(n,t)}(r,o);if(e&&n!=n){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},tt=(et(!0),et(!1)),nt=function(e,t){var n,r=ee(e),i=0,a=[];for(n in r)!ae(Be,n)&&ae(r,n)&&a.push(n);for(;t.length>i;)ae(r,n=t[i++])&&(~tt(a,n)||a.push(n));return a},rt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],it=rt.concat("length","prototype"),at={f:Object.getOwnPropertyNames||function(e){return nt(e,it)}},ot={f:Object.getOwnPropertySymbols},st=Ye("Reflect","ownKeys")||function(e){var t=at.f(de(e)),n=ot.f;return n?t.concat(n(e)):t},lt=function(e,t){for(var n=st(t),r=pe.f,i=fe.f,a=0;a<n.length;a++){var o=n[a];ae(e,o)||r(e,o,i(t,o))}},ut=/#|\.prototype\./,ct=function(e,t){var n=dt[ft(e)];return n==pt||n!=ht&&("function"==typeof t?V(t):!!t)},ft=ct.normalize=function(e){return String(e).replace(ut,".").toLowerCase()},dt=ct.data={},ht=ct.NATIVE="N",pt=ct.POLYFILL="P",mt=ct,gt=fe.f,vt=Array.isArray||function(e){return"Array"==$(e)},bt=Ye("navigator","userAgent")||"",yt=U.process,At=yt&&yt.versions,wt=At&&At.v8;wt?Qe=(Fe=wt.split("."))[0]<4?1:Fe[0]+Fe[1]:bt&&(!(Fe=bt.match(/Edge\/(\d+)/))||Fe[1]>=74)&&(Fe=bt.match(/Chrome\/(\d+)/))&&(Qe=Fe[1]);var _t,xt=Qe&&+Qe,St=!!Object.getOwnPropertySymbols&&!V((function(){return!String(Symbol())||!Symbol.sham&&xt&&xt<41})),Mt=St&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,kt=ke("wks"),Et=U.Symbol,Ct=Mt?Et:Et&&Et.withoutSetter||Ie,It=function(e){return ae(kt,e)&&(St||"string"==typeof kt[e])||(St&&ae(Et,e)?kt[e]=Et[e]:kt[e]=Ct("Symbol."+e)),kt[e]},Ot=It("species"),Tt=function(e,t){var n;return vt(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!vt(n.prototype)?te(n)&&null===(n=n[Ot])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Bt=[].push,Dt=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,a=6==e,o=7==e,s=5==e||a;return function(l,u,c,f){for(var d,h,p=re(l),m=K(p),g=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function")}(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}(u,c,3),v=Ze(m.length),b=0,y=f||Tt,A=t?y(l,v):n||o?y(l,0):void 0;v>b;b++)if((s||b in m)&&(h=g(d=m[b],b,p),e))if(t)A[b]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return b;case 2:Bt.call(A,d)}else switch(e){case 4:return!1;case 7:Bt.call(A,d)}return a?-1:r||i?i:A}},Pt={forEach:Dt(0),map:Dt(1),filter:Dt(2),some:Dt(3),every:Dt(4),find:Dt(5),findIndex:Dt(6),filterOut:Dt(7)},zt=Object.keys||function(e){return nt(e,rt)},jt=W?Object.defineProperties:function(e,t){de(e);for(var n,r=zt(t),i=r.length,a=0;i>a;)pe.f(e,n=r[a++],t[n]);return e},Rt=Ye("document","documentElement"),Lt=Te("IE_PROTO"),Nt=function(){},Ft=function(e){return"<script>"+e+"<\/script>"},Qt=function(){try{_t=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Qt=_t?function(e){e.write(Ft("")),e.close();var t=e.parentWindow.Object;return e=null,t}(_t):((t=le("iframe")).style.display="none",Rt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Ft("document.F=Object")),e.close(),e.F);for(var n=rt.length;n--;)delete Qt.prototype[rt[n]];return Qt()};Be[Lt]=!0;var Ut=Object.create||function(e,t){var n;return null!==e?(Nt.prototype=de(e),n=new Nt,Nt.prototype=null,n[Lt]=e):n=Qt(),void 0===t?n:jt(n,t)},Vt=It("unscopables"),Wt=Array.prototype;null==Wt[Vt]&&pe.f(Wt,Vt,{configurable:!0,value:Ut(null)});var qt,Yt,Xt,Ht=Pt.find,Gt="find",$t=!0;Gt in[]&&Array(1).find((function(){$t=!1})),function(e,t){var n,r,i,a,o,s=e.target,l=e.global,u=e.stat;if(n=l?U:u?U[s]||ge(s,{}):(U[s]||{}).prototype)for(r in t){if(a=t[r],i=e.noTargetGet?(o=gt(n,r))&&o.value:n[r],!mt(l?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;lt(a,i)}(e.sham||i&&i.sham)&&me(a,"sham",!0),Ve(n,r,a,e)}}({target:"Array",proto:!0,forced:$t},{find:function(e){return Ht(this,e,arguments.length>1?arguments[1]:void 0)}}),Wt[Vt].find=!0;var Zt,Kt=function(e){e.hide=function(e){_(y,{target:e})},e.rebuild=function(){_(A)},e.show=function(e){_(w,{target:e})},e.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},e.prototype.globalShow=function(e){if(this.mount){var t=!!(e&&e.detail&&e.detail.target);this.showTooltip({currentTarget:t&&e.detail.target},!0)}},e.prototype.globalHide=function(e){if(this.mount){var t=!!(e&&e.detail&&e.detail.target);this.hideTooltip({currentTarget:t&&e.detail.target},t)}}}(qt=function(e){e.prototype.bindWindowEvents=function(e){window.removeEventListener(y,this.globalHide),window.addEventListener(y,this.globalHide,!1),window.removeEventListener(A,this.globalRebuild),window.addEventListener(A,this.globalRebuild,!1),window.removeEventListener(w,this.globalShow),window.addEventListener(w,this.globalShow,!1),e&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},e.prototype.unbindWindowEvents=function(){window.removeEventListener(y,this.globalHide),window.removeEventListener(A,this.globalRebuild),window.removeEventListener(w,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},e.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}}(qt=function(e){e.prototype.isCustomEvent=function(e){return this.state.event||!!e.getAttribute("data-event")},e.prototype.customBindListener=function(e){var t=this,n=this.state,r=n.event,i=n.eventOff,a=e.getAttribute("data-event")||r,o=e.getAttribute("data-event-off")||i;a.split(" ").forEach((function(n){e.removeEventListener(n,M.get(e,n));var r=x.bind(t,o);M.set(e,n,r),e.addEventListener(n,r,!1)})),o&&o.split(" ").forEach((function(n){e.removeEventListener(n,t.hideTooltip),e.addEventListener(n,t.hideTooltip,!1)}))},e.prototype.customUnbindListener=function(e){var t=this.state,n=t.event,r=t.eventOff,i=n||e.getAttribute("data-event"),a=r||e.getAttribute("data-event-off");e.removeEventListener(i,M.get(e,n)),a&&e.removeEventListener(a,this.hideTooltip)}}(qt=function(e){e.prototype.isCapture=function(e){return e&&"true"===e.getAttribute("data-iscapture")||this.props.isCapture||!1}}(qt=function(e){e.prototype.getEffect=function(e){return e.getAttribute("data-effect")||this.props.effect||"float"}}(qt=function(e){e.prototype.isBodyMode=function(){return!!this.props.bodyMode},e.prototype.bindBodyListener=function(e){var t=this,n=this.state,r=n.event,i=n.eventOff,a=n.possibleCustomEvents,o=n.possibleCustomEventsOff,s=C(),l=E(e,"data-event"),u=E(e,"data-event-off");null!=r&&(l[r]=!0),null!=i&&(u[i]=!0),a.split(" ").forEach((function(e){return l[e]=!0})),o.split(" ").forEach((function(e){return u[e]=!0})),this.unbindBodyListener(s);var c=this.bodyModeListeners={};for(var f in null==r&&(c.mouseover=k.bind(this,this.showTooltip,{}),c.mousemove=k.bind(this,this.updateTooltip,{respectEffect:!0}),c.mouseout=k.bind(this,this.hideTooltip,{})),l)c[f]=k.bind(this,(function(e){var n=e.currentTarget.getAttribute("data-event-off")||i;x.call(t,n,e)}),{customEvent:!0});for(var d in u)c[d]=k.bind(this,this.hideTooltip,{customEvent:!0});for(var h in c)s.addEventListener(h,c[h])},e.prototype.unbindBodyListener=function(e){e=e||C();var t=this.bodyModeListeners;for(var n in t)e.removeEventListener(n,t[n])}}((Xt=Yt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,v(t).call(this,e))).state={uuid:e.uuid||"t"+c(),place:e.place||"top",desiredPlace:e.place||"top",type:"dark",effect:"float",show:!1,border:!1,customColors:{},offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null,eventOff:e.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:j(e),isEmptyTip:!1,disable:!1,possibleCustomEvents:e.possibleCustomEvents||"",possibleCustomEventsOff:e.possibleCustomEventsOff||"",originTooltip:null,isMultiline:!1},n.bind(["showTooltip","updateTooltip","hideTooltip","hideTooltipOnScroll","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),n.mount=!0,n.delayShowLoop=null,n.delayHideLoop=null,n.delayReshow=null,n.intervalUpdateContent=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),d(t,null,[{key:"propTypes",get:function(){return{uuid:i().string,children:i().any,place:i().string,type:i().string,effect:i().string,offset:i().object,multiline:i().bool,border:i().bool,textColor:i().string,backgroundColor:i().string,borderColor:i().string,arrowColor:i().string,insecure:i().bool,class:i().string,className:i().string,id:i().string,html:i().bool,delayHide:i().number,delayUpdate:i().number,delayShow:i().number,event:i().string,eventOff:i().string,isCapture:i().bool,globalEventOff:i().string,getContent:i().any,afterShow:i().func,afterHide:i().func,overridePosition:i().func,disable:i().bool,scrollHide:i().bool,resizeHide:i().bool,wrapper:i().string,bodyMode:i().bool,possibleCustomEvents:i().string,possibleCustomEventsOff:i().string,clickable:i().bool}}}]),d(t,[{key:"bind",value:function(e){var t=this;e.forEach((function(e){t[e]=t[e].bind(t)}))}},{key:"componentDidMount",value:function(){var e=this.props,t=(e.insecure,e.resizeHide);this.bindListener(),this.bindWindowEvents(t),this.injectStyles()}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(this.state.currentTarget),this.unbindWindowEvents()}},{key:"injectStyles",value:function(){var e=this.tooltipRef;if(e){for(var t,n=e.parentNode;n.parentNode;)n=n.parentNode;switch(n.constructor.name){case"Document":case"HTMLDocument":case void 0:t=n.head;break;default:t=n}if(!t.querySelector("style[data-react-tooltip]")){var r=document.createElement("style");r.textContent='.__react_component_tooltip {\n  border-radius: 3px;\n  display: inline-block;\n  font-size: 13px;\n  left: -999em;\n  opacity: 0;\n  padding: 8px 21px;\n  position: fixed;\n  pointer-events: none;\n  transition: opacity 0.3s ease-out;\n  top: -999em;\n  visibility: hidden;\n  z-index: 999;\n}\n.__react_component_tooltip.allow_hover, .__react_component_tooltip.allow_click {\n  pointer-events: auto;\n}\n.__react_component_tooltip::before, .__react_component_tooltip::after {\n  content: "";\n  width: 0;\n  height: 0;\n  position: absolute;\n}\n.__react_component_tooltip.show {\n  opacity: 0.9;\n  margin-top: 0;\n  margin-left: 0;\n  visibility: visible;\n}\n.__react_component_tooltip.place-top::before {\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  bottom: -8px;\n  left: 50%;\n  margin-left: -10px;\n}\n.__react_component_tooltip.place-bottom::before {\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  top: -8px;\n  left: 50%;\n  margin-left: -10px;\n}\n.__react_component_tooltip.place-left::before {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  right: -8px;\n  top: 50%;\n  margin-top: -5px;\n}\n.__react_component_tooltip.place-right::before {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  left: -8px;\n  top: 50%;\n  margin-top: -5px;\n}\n.__react_component_tooltip .multi-line {\n  display: block;\n  padding: 2px 0;\n  text-align: center;\n}',r.setAttribute("data-react-tooltip","true"),t.appendChild(r)}}}},{key:"mouseOnToolTip",value:function(){return!(!this.state.show||!this.tooltipRef)&&(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(":hover"))}},{key:"getTargetArray",value:function(e){var t,n=[];if(e){var r=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');t='[data-tip][data-for="'.concat(r,'"]')}else t="[data-tip]:not([data-for])";return R(document.getElementsByTagName("*")).filter((function(e){return e.shadowRoot})).forEach((function(e){n=n.concat(R(e.shadowRoot.querySelectorAll(t)))})),n.concat(R(document.querySelectorAll(t)))}},{key:"bindListener",value:function(){var e=this,t=this.props,n=t.id,r=t.globalEventOff,i=t.isCapture,a=this.getTargetArray(n);a.forEach((function(t){null===t.getAttribute("currentItem")&&t.setAttribute("currentItem","false"),e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)})),this.isBodyMode()?this.bindBodyListener(a):a.forEach((function(t){var n=e.isCapture(t),r=e.getEffect(t);e.isCustomEvent(t)?e.customBindListener(t):(t.addEventListener("mouseenter",e.showTooltip,n),t.addEventListener("focus",e.showTooltip,n),"float"===r&&t.addEventListener("mousemove",e.updateTooltip,n),t.addEventListener("mouseleave",e.hideTooltip,n),t.addEventListener("blur",e.hideTooltip,n))})),r&&(window.removeEventListener(r,this.hideTooltip),window.addEventListener(r,this.hideTooltip,i)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var e=this,t=this.props,n=t.id,r=t.globalEventOff;this.isBodyMode()?this.unbindBodyListener():this.getTargetArray(n).forEach((function(t){e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)})),r&&window.removeEventListener(r,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(e){var t=this.isCapture(e);e.removeEventListener("mouseenter",this.showTooltip,t),e.removeEventListener("mousemove",this.updateTooltip,t),e.removeEventListener("mouseleave",this.hideTooltip,t)}},{key:"getTooltipContent",value:function(){var e,t=this.props,n=t.getContent,r=t.children;return n&&(e=Array.isArray(n)?n[0]&&n[0](this.state.originTooltip):n(this.state.originTooltip)),z(this.state.originTooltip,r,e,this.state.isMultiline)}},{key:"isEmptyTip",value:function(e){return"string"==typeof e&&""===e||null===e}},{key:"showTooltip",value:function(e,t){if(this.tooltipRef){if(t&&!this.getTargetArray(this.props.id).some((function(t){return t===e.currentTarget})))return;var n=this.props,r=n.multiline,i=n.getContent,a=e.currentTarget.getAttribute("data-tip"),o=e.currentTarget.getAttribute("data-multiline")||r||!1,s=e instanceof window.FocusEvent||t,l=!0;e.currentTarget.getAttribute("data-scroll-hide")?l="true"===e.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(l=this.props.scrollHide),e&&e.currentTarget&&e.currentTarget.setAttribute&&e.currentTarget.setAttribute("aria-describedby",this.state.uuid);var u=e.currentTarget.getAttribute("data-place")||this.props.place||"top",c=s?"solid":this.getEffect(e.currentTarget),f=e.currentTarget.getAttribute("data-offset")||this.props.offset||{},d=I(e,e.currentTarget,this.tooltipRef,u,u,c,f);d.position&&this.props.overridePosition&&(d.position=this.props.overridePosition(d.position,e,e.currentTarget,this.tooltipRef,u,u,c,f));var h=d.isNewState?d.newState.place:u;this.clearTimer();var p=e.currentTarget,m=this.state.show?p.getAttribute("data-delay-update")||this.props.delayUpdate:0,g=this,v=function(){g.setState({originTooltip:a,isMultiline:o,desiredPlace:u,place:h,type:p.getAttribute("data-type")||g.props.type||"dark",customColors:{text:p.getAttribute("data-text-color")||g.props.textColor||null,background:p.getAttribute("data-background-color")||g.props.backgroundColor||null,border:p.getAttribute("data-border-color")||g.props.borderColor||null,arrow:p.getAttribute("data-arrow-color")||g.props.arrowColor||null},effect:c,offset:f,html:(p.getAttribute("data-html")?"true"===p.getAttribute("data-html"):g.props.html)||!1,delayShow:p.getAttribute("data-delay-show")||g.props.delayShow||0,delayHide:p.getAttribute("data-delay-hide")||g.props.delayHide||0,delayUpdate:p.getAttribute("data-delay-update")||g.props.delayUpdate||0,border:(p.getAttribute("data-border")?"true"===p.getAttribute("data-border"):g.props.border)||!1,extraClass:p.getAttribute("data-class")||g.props.class||g.props.className||"",disable:(p.getAttribute("data-tip-disable")?"true"===p.getAttribute("data-tip-disable"):g.props.disable)||!1,currentTarget:p},(function(){l&&g.addScrollListener(g.state.currentTarget),g.updateTooltip(e),i&&Array.isArray(i)&&(g.intervalUpdateContent=setInterval((function(){if(g.mount){var e=g.props.getContent,t=z(a,"",e[0](),o),n=g.isEmptyTip(t);g.setState({isEmptyTip:n}),g.updatePosition()}}),i[1]))}))};m?this.delayReshow=setTimeout(v,m):v()}}},{key:"updateTooltip",value:function(e){var t=this,n=this.state,r=n.delayShow,i=n.disable,a=this.props.afterShow,o=this.getTooltipContent(),s=e.currentTarget||e.target;if(!this.mouseOnToolTip()&&!this.isEmptyTip(o)&&!i){var l=this.state.show?0:parseInt(r,10),u=function(){if(Array.isArray(o)&&o.length>0||o){var n=!t.state.show;t.setState({currentEvent:e,currentTarget:s,show:!0},(function(){t.updatePosition(),n&&a&&a(e)}))}};clearTimeout(this.delayShowLoop),l?this.delayShowLoop=setTimeout(u,l):u()}}},{key:"listenForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isScroll:!1},i=this.state.disable,a=r.isScroll,o=a?0:this.state.delayHide,s=this.props.afterHide,l=this.getTooltipContent();if(this.mount&&!this.isEmptyTip(l)&&!i){if(t){var u=this.getTargetArray(this.props.id),c=u.some((function(t){return t===e.currentTarget}));if(!c||!this.state.show)return}e&&e.currentTarget&&e.currentTarget.removeAttribute&&e.currentTarget.removeAttribute("aria-describedby");var f=function(){var t=n.state.show;n.mouseOnToolTip()?n.listenForTooltipExit():(n.removeListenerForTooltipExit(),n.setState({show:!1},(function(){n.removeScrollListener(n.state.currentTarget),t&&s&&s(e)})))};this.clearTimer(),o?this.delayHideLoop=setTimeout(f,parseInt(o,10)):f()}}},{key:"hideTooltipOnScroll",value:function(e,t){this.hideTooltip(e,t,{isScroll:!0})}},{key:"addScrollListener",value:function(e){var t=this.isCapture(e);window.addEventListener("scroll",this.hideTooltipOnScroll,t)}},{key:"removeScrollListener",value:function(e){var t=this.isCapture(e);window.removeEventListener("scroll",this.hideTooltipOnScroll,t)}},{key:"updatePosition",value:function(){var e=this,t=this.state,n=t.currentEvent,r=t.currentTarget,i=t.place,a=t.desiredPlace,o=t.effect,s=t.offset,l=this.tooltipRef,u=I(n,r,l,i,a,o,s);if(u.position&&this.props.overridePosition&&(u.position=this.props.overridePosition(u.position,n,r,l,i,a,o,s)),u.isNewState)return this.setState(u.newState,(function(){e.updatePosition()}));l.style.left=u.position.left+"px",l.style.top=u.position.top+"px"}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearTimeout(this.delayReshow),clearInterval(this.intervalUpdateContent)}},{key:"hasCustomColors",value:function(){var e=this;return Boolean(Object.keys(this.state.customColors).find((function(t){return"border"!==t&&e.state.customColors[t]}))||this.state.border&&this.state.customColors.border)}},{key:"render",value:function(){var e=this,r=this.state,i=r.extraClass,a=r.html,o=r.ariaProps,s=r.disable,l=r.uuid,u=this.getTooltipContent(),c=this.isEmptyTip(u),f=function(e,t,n,r){return function(e,t){var n=t.text,r=t.background,i=t.border,a=t.arrow;return"\n  \t.".concat(e," {\n\t    color: ").concat(n,";\n\t    background: ").concat(r,";\n\t    border: 1px solid ").concat(i,";\n  \t}\n\n  \t.").concat(e,".place-top {\n        margin-top: -10px;\n    }\n    .").concat(e,".place-top::before {\n        border-top: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-top::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-top-color: ").concat(a,";\n        border-top-style: solid;\n        border-top-width: 6px;\n    }\n\n    .").concat(e,".place-bottom {\n        margin-top: 10px;\n    }\n    .").concat(e,".place-bottom::before {\n        border-bottom: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-bottom::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        top: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-bottom-color: ").concat(a,";\n        border-bottom-style: solid;\n        border-bottom-width: 6px;\n    }\n\n    .").concat(e,".place-left {\n        margin-left: -10px;\n    }\n    .").concat(e,".place-left::before {\n        border-left: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-left::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        right: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-left-color: ").concat(a,";\n        border-left-style: solid;\n        border-left-width: 6px;\n    }\n\n    .").concat(e,".place-right {\n        margin-left: 10px;\n    }\n    .").concat(e,".place-right::before {\n        border-right: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-right::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        left: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-right-color: ").concat(a,";\n        border-right-style: solid;\n        border-right-width: 6px;\n    }\n  ")}(e,function(e,t,n){var r=e.text,i=e.background,a=e.border,o=e.arrow?e.arrow:e.background,s=function(e){return L[e]?g({},L[e]):void 0}(t);return r&&(s.text=r),i&&(s.background=i),n&&(s.border=a||("light"===t?"black":"white")),o&&(s.arrow=o),s}(t,n,r))}(this.state.uuid,this.state.customColors,this.state.type,this.state.border),d="__react_component_tooltip"+" ".concat(this.state.uuid)+(!this.state.show||s||c?"":" show")+(this.state.border?" border":"")+" place-".concat(this.state.place)+" type-".concat(this.hasCustomColors()?"custom":this.state.type)+(this.props.delayUpdate?" allow_hover":"")+(this.props.clickable?" allow_click":""),h=this.props.wrapper;t.supportedWrappers.indexOf(h)<0&&(h=t.defaultProps.wrapper);var m=[d,i].filter(Boolean).join(" ");if(a){var v="".concat(u,'\n<style aria-hidden="true">').concat(f,"</style>");return n.createElement(h,p({className:"".concat(m),id:this.props.id||l,ref:function(t){return e.tooltipRef=t}},o,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:v}}))}return n.createElement(h,p({className:"".concat(m),id:this.props.id||l},o,{ref:function(t){return e.tooltipRef=t},"data-id":"tooltip"}),n.createElement("style",{dangerouslySetInnerHTML:{__html:f},"aria-hidden":"true"}),u)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.ariaProps,r=j(e);return Object.keys(r).some((function(e){return r[e]!==n[e]}))?g({},t,{ariaProps:r}):null}}]),t}(n.Component),h(Yt,"defaultProps",{insecure:!0,resizeHide:!0,wrapper:"div",clickable:!1}),h(Yt,"supportedWrappers",["div","span"]),h(Yt,"displayName","ReactTooltip"),(Zt=qt=Xt).prototype.bindRemovalTracker=function(){var e=this,t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(null!=t){var n=new t((function(t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.removedNodes.length;i++)if(r.removedNodes[i]===e.state.currentTarget)return void e.hideTooltip()}));n.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=n}},qt=void(Zt.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)})||qt))||qt)||qt)||qt)||qt)||qt)||qt;const Jt=Kt;var en=__webpack_require__(745),tn=__webpack_require__(377),nn=__webpack_require__.n(tn),rn=__webpack_require__(999),an=__webpack_require__(930);class on{get length(){return this.view.byteLength}get EOF(){return this.offset===this.view.byteLength}u8(){return this.view.getUint8(this.offset++)}i8(){return this.view.getInt8(this.offset++)}u16(){let e=this.view.getUint16(this.offset,this.le);return this.offset+=2,e}i16(){let e=this.view.getInt16(this.offset,this.le);return this.offset+=2,e}u32(){let e=this.view.getUint32(this.offset,this.le);return this.offset+=4,e}i32(){let e=this.view.getInt32(this.offset,this.le);return this.offset+=4,e}u64(){let e=this.view.getBigUint64(this.offset,this.le);return this.offset+=8,e}i64(){let e=this.view.getBigInt64(this.offset,this.le);return this.offset+=8,e}f32(){let e=this.view.getFloat32(this.offset,this.le);return this.offset+=4,e}f64(){let e=this.view.getFloat64(this.offset,this.le);return this.offset+=8,e}chars(e){return String.fromCharCode(...Array.from({length:e},(e=>this.u8())))}skip(e){this.offset+=e}utf8(e=!0){let t=[];for(;this.offset<this.view.byteLength;){let e=this.u8();if(!e)break;t.push(String.fromCharCode(e))}let n=t.join("");return e?decodeURIComponent(escape(n)):n}ucs2(e=!1,t=0){let n=[];if(e)for(;this.offset<this.view.byteLength;){let e=this.u16();if(!e)break;n.push(String.fromCharCode(255&e^t))}else for(;this.offset<this.view.byteLength;){let e=this.u16();if(!e)break;n.push(String.fromCharCode(e^t))}return n.join("")}raw(e=0){let t=this.view.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}constructor(e,t=!0){this.offset=0,this.view=e,this.le=t}}class sn{u8(e){return sn.BufferPool.setUint8(this.offset++,e),this}i8(e){return sn.BufferPool.setInt8(this.offset++,e),this}u16(e){return sn.BufferPool.setUint16(this.offset,e,this.le),this.offset+=2,this}i16(e){return sn.BufferPool.setInt16(this.offset,e,this.le),this.offset+=2,this}u32(e){return sn.BufferPool.setUint32(this.offset,e,this.le),this.offset+=4,this}i32(e){return sn.BufferPool.setInt32(this.offset,e,this.le),this.offset+=4,this}f32(e){return sn.BufferPool.setFloat32(this.offset,e,this.le),this.offset+=4,this}f64(e){return sn.BufferPool.setFloat64(this.offset,e,this.le),this.offset+=8,this}i64(e){return sn.BufferPool.setBigInt64(this.offset,BigInt(e),this.le),this.offset+=8,this}u64(e){return sn.BufferPool.setBigUint64(this.offset,BigInt(e),this.le),this.offset+=8,this}utf8(e,t=!1,n=!0){if("string"==typeof e){t&&(e=unescape(encodeURIComponent(e)));for(let t=0;t<e.length;t++)this.u8(e.charCodeAt(t));n&&this.u8(0)}else if(e?.byteLength)for(let t of e)this.u8(t);else n&&this.u8(0);return this}ucs2(e){for(let t=0;t<e.length;t++)this.u16(e.charCodeAt(t));this.u16(0)}skip(e=0){this.offset+=e}buf(e){new Uint8Array(sn.BufferPool.buffer,this.offset,e.length).set(e),this.offset+=e.length}output(){return sn.BufferPool.buffer.slice(0,this.offset)}constructor(e=!0){this.offset=0,this.le=e}}sn.BufferPool=new DataView(new ArrayBuffer(10485760));class ln{static read(e){let t=new on(new DataView(e)),n=null,r=-1,i=-1,a=-1;for(t.chars(4),t.i32();!t.EOF;){let e=t.chars(1);if("S"===e){if("IZE"!==t.chars(3))continue;let e=t.i32();t.skip(4),r=t.i32(),i=t.i32(),a=t.i32(),t.skip(e-12)}else if("X"===e){if("YZI"!==t.chars(3))continue;if(r<=0||i<=0||a<=0)return[null,r,i,a];(n=new Int32Array(r*i*a)).fill(-1),t.skip(8);let e=t.i32();for(let a=0;a<e;a++){let e=t.u8(),a=t.u8(),o=t.u8(),s=t.u8();n[e+a*r+o*r*i]=s}}}return[n,r,i,a]}static serialize(e,t,n,r,i){let a=new Uint8Array(t*n*r*4),o=0;for(let i=0;i<r;i++)for(let r=0;r<n;r++)for(let s=0;s<t;s++){let l=e[s+r*t+i*t*n];if(l){let e=o<<2;a[e+0]=s,a[e+1]=r,a[e+2]=i,a[e+3]=l+1,o++}}let s=new sn;for(let e of(s.utf8("VOX ",!1,!1),s.i32(150),s.utf8("MAIN",!1,!1),s.i32(0),s.i32(1092+4*o),s.utf8("PACK",!1,!1),s.i32(4),s.i32(0),s.i32(1),s.utf8("SIZE",!1,!1),s.i32(12),s.i32(0),s.i32(t),s.i32(n),s.i32(r),s.utf8("XYZI",!1,!1),s.i32(4+4*o),s.i32(0),s.i32(o),s.buf(a.subarray(0,4*o)),s.utf8("RGBA",!1,!1),s.i32(1024),s.i32(0),i))s.u8(e[0]),s.u8(e[1]),s.u8(e[2]),s.u8(0);for(let e=i.length;e<255;e++)s.u8(255-e-1),s.u8(255-e-1),s.u8(255-e-1),s.u8(255);return s.i32(0),s.output()}}class un{static async xml(e){let t=await fetch(e);if(200!==t.status)return null;let n=await t.text();try{return this.xmlParse(n)}catch(e){return console.error(e),null}}static xmlParse(e){return(new DOMParser).parseFromString(e,"text/xml").getRootNode().firstChild}static async vox(e){let t=await fetch(e);if(200!==t.status)return[null,-1,-1,-1];let n=await t.arrayBuffer();try{return ln.read(n)}catch(e){return console.error(e),[null,-1,-1,-1]}}static async bitmap(e){try{let t=await fetch(e),n=await t.blob(),r=await createImageBitmap(n),i=document.createElement("canvas");i.width=r.width,i.height=r.height;let a=i.getContext("2d");a.drawImage(r,0,0),r.close();let{data:o,width:s,height:l}=a.getImageData(0,0,i.width,i.height);return[new Int32Array(o.buffer),s,l,1]}catch(e){return console.error(e),[null,-1,-1,-1]}}}class cn{static build(e,t,n,r){let i=new cn;i.MX=t,i.MY=n,i.MZ=r;let a=e.getAttribute("values")?.replaceAll(" ","");if(!a)return console.error(e,"no values specified"),null;i.characters=a;for(let t=0;t<i.C;t++){let n=a.charCodeAt(t);if(i.values.has(n))return console.error(e,"contains repeating value"),null;i.values.set(n,t),i.waves.set(n,1<<t)}let o=e.getAttribute("transparent");o&&(i.transparent=i.wave(o));let s=[...an.W.matchTags(e,"markov","sequence","union")].filter((e=>"union"===e.tagName));for(let e of(i.waves.set(42,(1<<i.C)-1),s)){let t=e.getAttribute("symbol").charCodeAt(0);if(i.waves.has(t))return console.error(e,`repeating union type "${String.fromCharCode(t)}"`),null;{let n=i.wave(e.getAttribute("values"));i.waves.set(t,n)}}return i.state=new Uint8Array(t*n*r),i.statebuffer=new Uint8Array(t*n*r),i.mask=new Uint8Array(t*n*r),i.folder=e.getAttribute("folder"),i}get C(){return this.characters.length}clear(){this.state.fill(0)}wave(e){let t=0;for(let n=0;n<e.length;n++)t+=1<<this.values.get(e.charCodeAt(n));return t}matches(e,t,n,r){let{MX:i,MY:a,state:o}=this,{input:s,IMX:l,IMY:u}=e,c=0,f=0,d=0;for(let e=0;e<s.length;e++){if(0==(s[e]&1<<o[t+d+(n+f)*i+(r+c)*i*a]))return!1;++d===l&&(d=0,++f===u&&(f=0,c++))}return!0}constructor(){this.values=new Map,this.waves=new Map}}let fn=e=>new Uint8Array(Array.from({length:48},((t,n)=>e(n)?1:0)));class dn{static squareSymmetries(e,t,n,r,i=null){let a=Array(8);a[0]=e,a[1]=n(a[0]),a[2]=t(a[0]),a[3]=n(a[2]),a[4]=t(a[2]),a[5]=n(a[4]),a[6]=t(a[4]),a[7]=n(a[6]);let o=[];for(let e=0;e<8;e++)i&&!i[e]||o.some((t=>r(t,a[e])))||o.push(a[e]);return o}static cubeSymmetries(e,t,n,r,i,a=null){let o=Array(48);o[0]=e,o[1]=r(o[0]),o[2]=t(o[0]),o[3]=r(o[2]),o[4]=t(o[2]),o[5]=r(o[4]),o[6]=t(o[4]),o[7]=r(o[6]),o[8]=n(o[0]),o[9]=r(o[8]),o[10]=n(o[2]),o[11]=r(o[10]),o[12]=n(o[4]),o[13]=r(o[12]),o[14]=n(o[6]),o[15]=r(o[14]),o[16]=n(o[8]),o[17]=r(o[16]),o[18]=n(o[10]),o[19]=r(o[18]),o[20]=n(o[12]),o[21]=r(o[20]),o[22]=n(o[14]),o[23]=r(o[22]),o[24]=n(o[16]),o[25]=r(o[24]),o[26]=n(o[18]),o[27]=r(o[26]),o[28]=n(o[20]),o[29]=r(o[28]),o[30]=n(o[22]),o[31]=r(o[30]),o[32]=t(o[8]),o[33]=r(o[32]),o[34]=t(o[10]),o[35]=r(o[34]),o[36]=t(o[12]),o[37]=r(o[36]),o[38]=t(o[14]),o[39]=r(o[38]),o[40]=t(o[24]),o[41]=r(o[40]),o[42]=t(o[26]),o[43]=r(o[42]),o[44]=t(o[28]),o[45]=r(o[44]),o[46]=t(o[30]),o[47]=r(o[46]);let s=[];for(let e=0;e<48;e++)a&&!a[e]||s.some((t=>i(t,o[e])))||s.push(o[e]);return s}static getSymmetry(e,t,n){return t?e?this.squareSubgroups.get(t):this.cubeSubgroups.get(t):n}}dn.squareSubgroups=new Map([["()",new Uint8Array([1,0,0,0,0,0,0,0])],["(x)",new Uint8Array([1,1,0,0,0,0,0,0])],["(y)",new Uint8Array([1,0,0,0,0,1,0,0])],["(x)(y)",new Uint8Array([1,1,0,0,1,1,0,0])],["(xy+)",new Uint8Array([1,0,1,0,1,0,1,0])],["(xy)",new Uint8Array([1,1,1,1,1,1,1,1])]]),dn.cubeSubgroups=new Map([["()",fn((e=>0===e))],["(x)",fn((e=>0===e||1===e))],["(z)",fn((e=>0===e||17===e))],["(xy)",fn((e=>e<8))],["(xyz+)",fn((e=>e%2==0))],["(xyz)",fn((e=>!0))]]);class hn{static async factory(e,t,n,r){let i=e.tagName.toLowerCase();if(!hn.VALID_TAGS.includes(i))return console.error(e,`unknown node type: ${i}`),null;let a={one:()=>new sr,all:()=>new ar,prl:()=>new lr,markov:()=>new gn,sequence:()=>new mn,path:()=>new Cn,map:()=>new En,convolution:()=>new _n,convchain:()=>new vn,wfc:()=>e.getAttribute("sample")?new hr:e.getAttribute("tileset")?new dr:null}[i]();return a.ip=n,a.grid=r,a.source=e,a.comment=e.getAttribute("comment"),await a.load(e,t,r)?a:null}}hn.VALID_TAGS=["one","all","prl","markov","sequence","path","map","convolution","convchain","wfc"];class pn extends hn{async load(e,t,n){let r=e.getAttribute("symmetry"),i=dn.getSymmetry(1===this.ip.grid.MZ,r,t);if(!i)return console.error(e,`unknown symmetry ${r}`),!1;for(let t of an.W.collectionIter(e.children)){if(!hn.VALID_TAGS.includes(t.tagName))continue;let e=await hn.factory(t,i,this.ip,n);if(!e)return!1;e instanceof pn&&(e.parent=e instanceof En||e instanceof ur?null:this),this.children.push(e)}return!0}run(){for(;this.n<this.children.length;this.n++){let e=this.children[this.n];e instanceof pn&&(this.ip.current=e);let t=e.run();if(t===pr.SUCCESS)return pr.SUCCESS;if(t===pr.HALT)return pr.HALT}return this.ip.current=this.ip.current.parent,this.reset(),pr.FAIL}reset(){this.children.forEach((e=>e.reset())),this.n=0}constructor(...e){super(...e),this.children=[]}}class mn extends pn{}class gn extends pn{run(){return this.n=0,super.run()}constructor(e,t){super(),e&&(this.children=[e]),this.ip=t,this.grid=t?.grid}}class vn extends hn{async load(e,t,n){if(1!==n.MZ)return console.error("convchain currently works only for 2d"),!1;let r=`resources/samples/${e.getAttribute("sample")}.png`,i=await un.bitmap(r),a=i[0];if(this.SMX=i[1],this.SMY=i[2],!a)return console.error(`Failed to load ConvChain sample ${r}`),!1;this.sample=new Uint8Array(a.length);for(let e=0;e<this.sample.length;e++)this.sample[e]=Number(-1==a[e]);let o=this.N=parseInt(e.getAttribute("n"))||3;this.steps=parseInt(e.getAttribute("steps"))||-1,this.temperature=parseFloat(e.getAttribute("temperature"))||1,this.c0=n.values.get(e.getAttribute("black").charCodeAt(0)),this.c1=n.values.get(e.getAttribute("white").charCodeAt(0)),this.substrateColor=n.values.get(e.getAttribute("on").charCodeAt(0)),this.substrate=new Uint8Array(n.state.length),this.weights=new Float64Array(1<<o*o);let{SMX:s,SMY:l,sample:u,weights:c}=this;for(let e=0;e<l;e++)for(let t=0;t<s;t++){let n=bn(o,((n,r)=>u[(t+n)%s+(e+r)%l*s])),r=dn.squareSymmetries(n,(e=>yn(o,e)),(e=>An(o,e)),(e=>!1));for(let e of r)c[an.W.indexBoolArr(e)]+=1}for(let e=0;e<c.length;e++)c[e]<=0&&(c[e]=.1);return!0}toggle(e,t){e[t]=e[t]==this.c0?this.c1:this.c0}run(){if(this.steps>0&&this.counter>=this.steps)return pr.FAIL;let{grid:e,c0:t,c1:n,substrate:r,ip:i,N:a,weights:o,temperature:s,substrateColor:l}=this,{MX:u,MY:c,state:f}=e;if(!this.counter){let e=!1;for(let a=0;a<r.length;a++)f[a]===l&&(f[a]=0==(0,an.w)(i.rng,2)?t:n,r[a]=1,e=!0);return this.counter++,e?pr.SUCCESS:pr.FAIL}for(let e=0;e<f.length;e++){let e=(0,an.w)(i.rng,f.length);if(!r[e])continue;let t=e%u,l=~~(e/u),d=1;for(let e=l-a+1;e<=l+a-1;e++)for(let r=t-a+1;r<=t+a-1;r++){let i=0,s=0;for(let o=0;o<a;o++)for(let d=0;d<a;d++){let h=r+d;h<0?h+=u:h>=u&&(h-=u);let p=e+o;p<0?p+=c:p>=c&&(p-=c);let m=f[h+p*u]==n,g=1<<o*a+d;i+=m?g:0,h==t&&p==l&&(s=m?g:-g)}d*=o[i-s]/o[i]}d>=1?this.toggle(f,e):(1!=s&&(d=Math.pow(d,1/s)),d>i.rng.double()&&this.toggle(f,e))}return this.counter++,pr.SUCCESS}reset(){this.substrate.fill(0),this.counter=0}}let bn=(e,t)=>{let n=new Uint8Array(e*e);for(let r=0;r<e;r++)for(let i=0;i<e;i++)n[i+r*e]=t(i,r);return n},yn=(e,t)=>bn(e,((n,r)=>t[e-1-r+n*e])),An=(e,t)=>bn(e,((n,r)=>t[e-1-n+r*e]));var wn=__webpack_require__(613);class _n extends hn{async load(e,t,n){let r=[...an.W.childrenByTag(e,"rule")],i=r.length?r:[e];return this.rules=i.map((()=>new Sn)),!!this.rules.every(((e,t)=>e.load(i[t],n)))&&(this.neighborhood=e.getAttribute("neighborhood"),this.kernel=(1===n.MZ?_n.kernels2d:_n.kernels3d).get(this.neighborhood),this.kernel?(this.steps=parseInt(e.getAttribute("steps"))||-1,this.periodic="True"===e.getAttribute("periodic"),this.sumfield=new wn.dX(Int32Array,n.C,n.state.length,0),!0):(console.error(e,"unknown kernel"),!1))}reset(){this.counter=0}run(){if(this.steps>0&&this.counter>=this.steps)return pr.FAIL;let{grid:e,sumfield:t,periodic:n,kernel:r}=this,{MX:i,MY:a,MZ:o}=e;if(t.fill(0),1==o)for(let o=0;o<a;o++)for(let s=0;s<i;s++){let l=t.row(s+o*i);for(let t=-1;t<=1;t++)for(let u=-1;u<=1;u++){let c=s+u,f=o+t;if(n)c<0?c+=i:c>=i&&(c-=i),f<0?f+=a:f>=a&&(f-=a);else if(c<0||f<0||c>=i||f>=a)continue;l[e.state[c+f*i]]+=r[u+1+3*(t+1)]}}else for(let s=0;s<o;s++)for(let l=0;l<a;l++)for(let u=0;u<i;u++){let c=t.row(u+l*i+s*i*a);for(let t=-1;t<=1;t++)for(let f=-1;f<=1;f++)for(let d=-1;d<=1;d++){let h=u+d,p=l+f,m=s+t;if(n)h<0?h+=i:h>=i&&(h-=i),p<0?p+=a:p>=a&&(p-=a),m<0?m+=o:m>=o&&(m-=o);else if(h<0||p<0||m<0||h>=i||p>=a||m>=o)continue;c[e.state[h+p*i+m*i*a]]+=r[d+1+3*(f+1)+9*(t+1)]}}let s=!1;for(let n=0;n<t.ROWS;n++){let r=t.row(n),i=e.state[n];for(let t of this.rules)if(i==t.input&&t.output!=e.state[n]&&(1==t.p||this.ip.rng.double()<t.p)){let i=!0;if(null!=t.sums){let e=0;for(let n=0;n<t.values.length;n++)e+=r[t.values[n]];i=Boolean(t.sums[e])}if(i){e.state[n]=t.output,s=!0;break}}}return this.counter++,s?pr.SUCCESS:pr.FAIL}}function*xn(e){if(e.includes("..")){let t=e.split(".."),n=parseInt(t[0]),r=parseInt(t[1]);for(let e=n;e<=r;e++)yield e}else yield parseInt(e)}_n.kernels2d=new Map([["VonNeumann",new Uint8Array([0,1,0,1,0,1,0,1,0])],["Moore",new Uint8Array([1,1,1,1,0,1,1,1,1])]]),_n.kernels3d=new Map([["VonNeumann",new Uint8Array([0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,0])],["NoCorners",new Uint8Array([0,1,0,1,1,1,0,1,0,1,1,1,1,0,1,1,1,1,0,1,0,1,1,1,0,1,0])]]);class Sn{load(e,t){this.input=t.values.get(e.getAttribute("in").charCodeAt(0)),this.output=t.values.get(e.getAttribute("out").charCodeAt(0));let n=e.getAttribute("values"),r=e.getAttribute("sum");if(n&&!r)return console.error(e,'missing "sum" attribute'),!1;if(!n&&r)return console.error(e,'missing "value" attribute'),!1;if(n&&(this.values=new Uint8Array(Array.from({length:n.length},((e,r)=>t.values.get(n.charCodeAt(r)))))),this.p=parseFloat(e.getAttribute("p"))||1,r){this.sums=new Uint8Array(28);let e=r.split(",");for(let t of e)for(let e of xn(t))this.sums[e]=1}return!0}}class Mn{ZRotated(){let[e,t,n,r,i,a]=this.IO_DIM,o=new Int32Array(this.input.length);for(let r=0;r<n;r++)for(let n=0;n<e;n++)for(let i=0;i<t;i++)o[i+n*t+r*e*t]=this.input[e-1-n+i*e+r*e*t];let s=new Uint8Array(this.output.length);for(let e=0;e<a;e++)for(let t=0;t<r;t++)for(let n=0;n<i;n++)s[n+t*i+e*r*i]=this.output[r-1-t+n*r+e*r*i];return new Mn(o,s,[t,e,n,i,r,a],this.ishifts.length,this.p)}YRotated(){let[e,t,n,r,i,a]=this.IO_DIM,o=new Int32Array(this.input.length);for(let r=0;r<e;r++)for(let i=0;i<t;i++)for(let a=0;a<n;a++)o[a+i*n+r*n*t]=this.input[e-1-r+i*e+a*e*t];let s=new Uint8Array(this.output.length);for(let e=0;e<r;e++)for(let t=0;t<i;t++)for(let n=0;n<a;n++)s[n+t*a+e*a*i]=this.output[r-1-e+t*r+n*r*i];return new Mn(o,s,[n,t,e,a,i,r],this.ishifts.length,this.p)}reflected(){let[e,t,n,r,i,a]=this.IO_DIM,o=new Int32Array(this.input.length);for(let r=0;r<n;r++)for(let n=0;n<t;n++)for(let i=0;i<e;i++)o[i+n*e+r*e*t]=this.input[e-1-i+n*e+r*e*t];let s=new Uint8Array(this.output.length);for(let e=0;e<a;e++)for(let t=0;t<i;t++)for(let n=0;n<r;n++)s[n+t*r+e*r*i]=this.output[r-1-n+t*r+e*r*i];return new Mn(o,s,[e,t,n,r,i,a],this.ishifts.length,this.p)}static same(e,t){return an.W.compareArr(e.IO_DIM,t.IO_DIM)&&an.W.compareArr(e.input,t.input)&&an.W.compareArr(e.output,t.output)}symmetries(e,t){return t?dn.squareSymmetries(this,(e=>e.ZRotated()),(e=>e.reflected()),Mn.same,e):dn.cubeSymmetries(this,(e=>e.ZRotated()),(e=>e.YRotated()),(e=>e.reflected()),Mn.same,e)}static async loadResource(e,t,n){if(!t)return console.error(`no legend for ${e}`),[null,-1,-1,-1];let[r,i,a,o]=n?await un.bitmap(e):await un.vox(e);if(null===r)return console.error(`failed to load ${e}`),[null,i,a,o];let[s,l]=an.W.ords(r);if(l>t.length)return console.error(`the amount of colors ${l} in ${e} is more than ${t.length}`),[null,i,a,o];let u=new Int8Array(s.length);for(let e=0;e<s.length;e++)u[e]=t.charCodeAt(s[e]);return[u,i,a,o]}static parse(e){let t=an.W.split2(e," ","/"),n=t[0][0].length,r=t[0].length,i=t.length,a=new Int8Array(n*r*i);for(let e=0;e<i;e++){let o=t[i-1-e];if(o.length!==r)return console.error("non-rectangular pattern"),[null,-1,-1,-1];for(let t=0;t<r;t++){let i=o[t];if(i.length!==n)return console.error("non-rectangular pattern"),[null,-1,-1,-1];for(let o=0;o<n;o++){let s=i.charCodeAt(o);(s<=0||s>128)&&console.error(`invalid character code: ${s}`),a[o+t*n+e*n*r]=s}}}return[a,n,r,i]}static async load(e,t,n){let r,i,a=e=>{let r="resources/rules/";return null!=n.folder&&(r+=n.folder+"/"),r+=e,r+(1===t.MZ?".png":".vox")},o=e.getAttribute("in"),s=e.getAttribute("out"),l=e.getAttribute("fin"),u=e.getAttribute("fout"),c=e.getAttribute("file"),f=e.getAttribute("legend"),d=-1,h=-1,p=-1,m=-1,g=-1,v=-1;if(c){if(o||l||s||u)return console.error(e,"already contains a file attribute"),null;let[n,b,y,A]=await this.loadResource(a(c),f,1===t.MZ);if(!n)return console.error(e,"failed to load input"),null;if(b%2)return console.error(e,`odd width in ${c}`),null;d=m=b/2,h=g=y,p=v=A,r=(0,wn.H)(Int8Array,b/2,y,A,((e,t,r)=>n[e+t*b+r*b*y])),i=(0,wn.H)(Int8Array,b/2,y,A,((e,t,r)=>n[e+b/2+t*b+r*b*y]))}else{if(!o&&!l)return console.error(e,"no intput"),null;if(!s&&!u)return console.error(e,"no output"),null;if([r,d,h,p]=o?this.parse(o):await this.loadResource(a(l),f,1===t.MZ),!r||([i,m,g,v]=s?this.parse(s):await this.loadResource(a(u),f,1===n.MZ),!i))return console.error(e,"failed to load input"),null;if(t===n&&(v!=p||g!=h||m!=d))return console.error(e,"non-matching pattern sizes"),null}let b=new Int32Array(r.length);for(let n=0;n<r.length;n++){let i=r[n],a=t.waves.get(i);if(isNaN(a))return console.error(e,`input code ${i} is not found in codes`),null;b[n]=a}let y=new Uint8Array(i.length);for(let t=0;t<i.length;t++){let r=i[t];if(42===r)y[t]=255;else{let i=n.values.get(r);if(isNaN(i))return console.error(e,`output code ${r} is not found in codes`),null;y[t]=i}}let A=parseFloat(e.getAttribute("p"))||1;return new Mn(b,y,[d,h,p,m,g,v],t.C,A)}get IMX(){return this.IO_DIM[0]}get IMY(){return this.IO_DIM[1]}get IMZ(){return this.IO_DIM[2]}get OMX(){return this.IO_DIM[3]}get OMY(){return this.IO_DIM[4]}get OMZ(){return this.IO_DIM[5]}constructor(e,t,n,r,i){this.input=e,this.output=t,this.C=r,this.IO_DIM=new Int32Array(n),this.p=i;let a=Array.from({length:r},(e=>[])),[o,s,l,u,c,f]=this.IO_DIM;for(let t=0;t<l;t++)for(let n=0;n<s;n++)for(let i=0;i<o;i++){let l=e[i+n*o+t*o*s];for(let e=0;e<r;e++,l>>=1)1==(1&l)&&a[e].push([i,n,t])}this.ishifts=Array.from({length:r});for(let e=0;e<r;e++)this.ishifts[e]=a[e].concat([]);if(u===o&&c===s&&f===l){for(let e=0;e<r;e++)a[e]=[];for(let e=0;e<f;e++)for(let n=0;n<c;n++)for(let i=0;i<u;i++){let o=t[i+n*u+e*u*c];if(255!==o)a[o].push([i,n,e]);else for(let t=0;t<r;t++)a[t].push([i,n,e])}this.oshifts=Array.from({length:r});for(let e=0;e<r;e++)this.oshifts[e]=a[e].concat([])}this.wildcard=(1<<r)-1,this.binput=new Uint8Array(e.length);for(let t=0;t<e.length;t++){let n=e[t];this.binput[t]=n===this.wildcard?255:an.W.firstNonZeroPosition(n)}}}let kn=e=>{if(!e.includes("/"))return[parseInt(e),1];let t=e.split("/");return[parseInt(t[0]),parseInt(t[1])]};class En extends pn{async load(e,t,n){let r=e.getAttribute("scale");if(!r)return console.error(e,"scale should be specified in map node"),!1;let i=r.split(" ");if(3!==i.length)return console.error(e,`scale attribute ${r} should have 3 components separated by space`),!1;let[a,o]=kn(i[0]),[s,l]=kn(i[1]),[u,c]=kn(i[2]);if(this.ND.set([a,s,u,o,l,c]),this.newgrid=cn.build(e,~~(a*n.MX/o),~~(s*n.MY/l),~~(u*n.MZ/c)),!this.newgrid||!await super.load(e,t,this.newgrid))return!1;let f=dn.getSymmetry(1===n.MZ,e.getAttribute("symmetry"),t);for(let t of an.W.childrenByTag(e,"rule")){let e=await Mn.load(t,n,this.newgrid);if(e.original=!0,!e)return!1;e.symmetries(f,1===n.MZ).forEach((e=>this.rules.push(e)))}return!0}static matches(e,t,n,r,i,a,o,s){let{IMX:l,IMY:u,IMZ:c,input:f}=e;for(let e=0;e<c;e++)for(let c=0;c<u;c++)for(let d=0;d<l;d++){let h=t+d,p=n+c,m=r+e;if(h>=a&&(h-=a),p>=o&&(p-=o),m>=s&&(m-=s),0==(f[d+c*l+e*l*u]&1<<i[h+p*a+m*a*o]))return!1}return!0}static apply(e,t,n,r,i,a,o,s){let{OMZ:l,OMY:u,OMX:c,output:f}=e;for(let e=0;e<l;e++)for(let l=0;l<u;l++)for(let d=0;d<c;d++){let h=t+d,p=n+l,m=r+e;h>=a&&(h-=a),p>=o&&(p-=o),m>=s&&(m-=s);let g=f[d+l*c+e*c*u];255!=g&&(i[h+p*a+m*a*o]=g)}}run(){if(this.n>=0)return super.run();let e=this.grid,t=this.newgrid,[n,r,i,a,o,s]=this.ND,{MZ:l,MY:u,MX:c,state:f}=e;for(let e of(t.clear(),this.rules))for(let d=0;d<l;d++)for(let h=0;h<u;h++)for(let p=0;p<c;p++)En.matches(e,p,h,d,f,c,u,l)&&En.apply(e,~~(p*n/a),~~(h*r/o),~~(d*i/s),t.state,t.MX,t.MY,t.MZ);return this.ip.grid=t,this.n++,pr.SUCCESS}reset(){super.reset(),this.n=-1}constructor(...e){super(...e),this.rules=[],this.ND=new Int32Array(6)}}class Cn extends hn{async load(e,t,n){let r=e.getAttribute("from");return this.start=n.wave(r),this.value=n.values.get((e.getAttribute("color")||r).charCodeAt(0)),this.finish=n.wave(e.getAttribute("to")),this.inertia="True"===e.getAttribute("inertia"),this.longest="True"===e.getAttribute("longest"),this.edges="True"===e.getAttribute("edges"),this.vertices="True"===e.getAttribute("vertices"),this.substrate=n.wave(e.getAttribute("on")),!0}reset(){}run(){let{grid:e,substrate:t,start:n,finish:r,edges:i,vertices:a}=this,o=[],s=[],l=new Int32Array(e.state.length);l.fill(-1);let{MX:u,MY:c,MZ:f}=e;for(let t=0;t<f;t++)for(let i=0;i<c;i++)for(let a=0;a<u;a++){let f=a+i*u+t*u*c;l[f]=-1;let d=e.state[f];0!=(n&1<<d)&&s.push([a,i,t]),0!=(r&1<<d)&&(l[f]=0,o.push([0,a,i,t]))}if(!s.length||!o.length)return pr.FAIL;let d=(r,i,a,s)=>{let f=i+a*u+s*u*c,d=e.state[f];-1==l[f]&&(0!=(t&1<<d)||0!=(n&1<<d))&&(0!=(t&1<<d)&&o.push([r,i,a,s]),l[f]=r)};for(;o.length;){let[e,t,n,r]=o.shift();for(let[o,s,l]of Cn.directions(t,n,r,u,c,f,i,a))d(e+1,t+o,n+s,r+l)}if(!s.some((([e,t,n])=>l[e+t*u+n*u*c]>0)))return pr.FAIL;let h=nn()(this.ip.rng.int32().toString()),p=u*c*f,m=-1,g=[-1,-1,-1],v=[-1,-1,-1];for(let[e,t,n]of s){let r=l[e+t*u+n*u*c];if(-1==r)continue;let i=r,a=.1*h.double();i+a<p&&(p=i+a,g=[e,t,n]),i+a>m&&(m=i+a,v=[e,t,n])}let[b,y,A]=this.longest?v:g,[w,_,x]=this.direction(b,y,A,0,0,0,l,h);for(b+=w,y+=_,A+=x;l[b+y*u+A*u*c];)e.state[b+y*u+A*u*c]=this.value,this.ip.changes.push([b,y,A]),[w,_,x]=this.direction(b,y,A,w,_,x,l,h),b+=w,y+=_,A+=x;return pr.SUCCESS}direction(e,t,n,r,i,a,o,s){let l=[],{grid:u,vertices:c,edges:f,inertia:d}=this,{MX:h,MY:p,MZ:m}=u,g=o[e+t*h+n*h*p],v=(r,i,a)=>{o[e+r+(t+i)*h+(n+a)*h*p]==g-1&&l.push([r,i,a])};if(c||f){for(let r of Cn.directions(e,t,n,h,p,m,f,c))v(r[0],r[1],r[2]);let o=[-1,-1,-1];if(!d||0==r&&0==i&&0==a)o=an.W.pick(l,s);else{let e=-4;for(let[t,n,u]of l){let l=.1*s.double(),c=(t*r+n*i+u*a)/Math.sqrt((t*t+n*n+u*u)*(r*r+i*i+a*a));c+l>e&&(e=c+l,o=[t,n,u])}}return o}if(0!=r||0!=i||0!=a){let s=e+r,l=t+i,u=n+a;if(d&&s>=0&&l>=0&&u>=0&&s<h&&l<p&&u<m&&o[s+l*h+u*h*p]==g-1)return[r,i,a]}return e>0&&v(-1,0,0),e<h-1&&v(1,0,0),t>0&&v(0,-1,0),t<p-1&&v(0,1,0),n>0&&v(0,0,-1),n<m-1&&v(0,0,1),an.W.pick(l,s)}static directions(e,t,n,r,i,a,o,s){let l=[];return 1==a?(e>0&&l.push([-1,0,0]),e<r-1&&l.push([1,0,0]),t>0&&l.push([0,-1,0]),t<i-1&&l.push([0,1,0]),o&&(e>0&&t>0&&l.push([-1,-1,0]),e>0&&t<i-1&&l.push([-1,1,0]),e<r-1&&t>0&&l.push([1,-1,0]),e<r-1&&t<i-1&&l.push([1,1,0]))):(e>0&&l.push([-1,0,0]),e<r-1&&l.push([1,0,0]),t>0&&l.push([0,-1,0]),t<i-1&&l.push([0,1,0]),n>0&&l.push([0,0,-1]),n<a-1&&l.push([0,0,1]),o&&(e>0&&t>0&&l.push([-1,-1,0]),e>0&&t<i-1&&l.push([-1,1,0]),e<r-1&&t>0&&l.push([1,-1,0]),e<r-1&&t<i-1&&l.push([1,1,0]),e>0&&n>0&&l.push([-1,0,-1]),e>0&&n<a-1&&l.push([-1,0,1]),e<r-1&&n>0&&l.push([1,0,-1]),e<r-1&&n<a-1&&l.push([1,0,1]),t>0&&n>0&&l.push([0,-1,-1]),t>0&&n<a-1&&l.push([0,-1,1]),t<i-1&&n>0&&l.push([0,1,-1]),t<i-1&&n<a-1&&l.push([0,1,1])),s&&(e>0&&t>0&&n>0&&l.push([-1,-1,-1]),e>0&&t>0&&n<a-1&&l.push([-1,-1,1]),e>0&&t<i-1&&n>0&&l.push([-1,1,-1]),e>0&&t<i-1&&n<a-1&&l.push([-1,1,1]),e<r-1&&t>0&&n>0&&l.push([1,-1,-1]),e<r-1&&t>0&&n<a-1&&l.push([1,-1,1]),e<r-1&&t<i-1&&n>0&&l.push([1,1,-1]),e<r-1&&t<i-1&&n<a-1&&l.push([1,1,1]))),l}}class In{compute(e,t){let{zero:n,substrate:r}=this,{MX:i,MY:a,MZ:o,state:s}=t,l=[],u=0,c=0,f=0;for(let t=0;t<s.length;t++)e[t]=-1,n&1<<s[t]&&(e[t]=0,l.push([0,u,c,f])),++u===i&&(u=0,++c===a&&(c=0,f++));if(!l.length)return!1;for(;l.length;){let[t,n,u,c]=l.shift();In.neighbors(n,u,c,i,a,o,((n,o,u)=>{let c=n+o*i+u*i*a,f=s[c];-1===e[c]&&r&1<<f&&(l.push([t+1,n,o,u]),e[c]=t+1)}))}return!0}static neighbors(e,t,n,r,i,a,o){e>0&&o(e-1,t,n),e<r-1&&o(e+1,t,n),t>0&&o(e,t-1,n),t<i-1&&o(e,t+1,n),n>0&&o(e,t,n-1),n<a-1&&o(e,t,n+1)}static deltaPointwise(e,t,n,r,i,a,o,s,l){let u=0,c=0,f=0,d=0;for(let h=0;h<t.input.length;h++){let p=t.output[h];if(255!=p&&0==(t.input[h]&1<<p)){let t=n+d+(r+f)*s+(i+c)*s*l,h=o.get(t,p);if(-1==h)return null;let m=e[t],g=o.get(t,m);if(u+=h-g,a){let e=a[m];e&&e.inversed&&(u+=2*g);let t=a[p];t&&t.inversed&&(u-=2*h)}}++d==t.IMX&&(d=0,++f==t.IMY&&(f=0,c++))}return u}constructor(e,t){this.recompute="True"===e.getAttribute("recompute"),this.essential="True"===e.getAttribute("essential");let n=e.getAttribute("on");this.substrate=t.wave(n);let r=e.getAttribute("from");r?this.inversed=!0:(this.inversed=!1,r=e.getAttribute("to")),this.zero=t.wave(r)}}class On{static computeFutureSetPresent(e,t,n){let r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)n[e]||(r[e]=1);for(let i=0;i<t.length;i++){let a=t[i],o=n[a];r[a]=1,o?(e[i]=o.to,t[i]=o.from):e[i]=1<<a}for(let e=0;e<r.length;e++)if(!r[e])return!1;return!0}static computeForwardPotentials(e,t,n,r,i,a){e.fill(-1);for(let n=0;n<t.length;n++)e.set(n,t[n],0);this.computePotentials(e,n,r,i,a,!1)}static computeBackwardPotentials(e,t,n,r,i,a){for(let n=0;n<e.ROWS;n++){let r=e.row(n);for(let e=0;e<t.length;e++)r[e]=0!=(t[e]&1<<n)?0:-1}this.computePotentials(e,n,r,i,a,!0)}static computePotentials(e,t,n,r,i,a){let o=[];for(let r=0;r<e.ROWS;r++){let i=e.row(r);for(let e=0;e<i.length;e++)i[e]||o.push([r,e%t,~~(e%(t*n)/t),~~(e/(t*n))])}let s=new wn.WN(e.COLS,i.length);for(;o.length;){let[l,u,c,f]=o.shift(),d=u+c*t+f*t*n,h=e.get(d,l);for(let d=0;d<i.length;d++){let p=i[d],m=a?p.oshifts[l]:p.ishifts[l];for(let[i,l,g]of m){let m=u-i,v=c-l,b=f-g;if(m<0||v<0||b<0||m+p.IMX>t||v+p.IMY>n||b+p.IMZ>r)continue;let y=m+v*t+b*t*n;!s.get(y,d)&&this.forwardMatches(p,m,v,b,e,h,t,n,a)&&(s.set(y,d,!0),this.applyForward(p,m,v,b,e,h,t,n,o,a))}}}}static forwardMatches(e,t,n,r,i,a,o,s,l){let u=0,c=0,f=0,d=l?e.output:e.binput;for(let l=0;l<d.length;l++){let h=d[l];if(255!=h){let e=i.get(t+f+(n+c)*o+(r+u)*o*s,h);if(e>a||-1===e)return!1}++f==e.IMX&&(f=0,++c==e.IMY&&(c=0,u++))}return!0}static applyForward(e,t,n,r,i,a,o,s,l,u){let c=u?e.binput:e.output;for(let u=0;u<e.IMZ;u++){let f=r+u;for(let r=0;r<e.IMY;r++){let d=n+r;for(let n=0;n<e.IMX;n++){let h=t+n,p=h+d*o+f*o*s,m=c[n+r*e.IMX+u*e.IMX*e.IMY];255!==m&&-1===i.get(p,m)&&(i.set(p,m,a+1),l.push([m,h,d,f]))}}}}static IsGoalReached(e,t){for(let n=0;n<e.length;n++)if(0==(1<<e[n]&t[n]))return!1;return!0}static forwardPointwise(e,t){let n=0;for(let r=0;r<t.length;r++){let i=t[r],a=1e3,o=-1;for(let t=0;t<e.ROWS;t++,i>>=1){let n=e.get(r,t);1==(1&i)&&n>=0&&n<a&&(a=n,o=t)}if(o<0)return-1;n+=a}return n}static backwardPointwise(e,t){let n=0;for(let r=0;r<t.length;r++){let i=e.get(r,t[r]);if(i<0)return-1;n+=i}return n}constructor(e,t,n){this.from=n.values.get(e),this.to=n.wave(t)}}class Tn{static*run(e,t,n,r,i,a,o,s,l,u,c,f){let d=e.length,h=new wn.dX(Int32Array,d,o,-1),p=new wn.dX(Int32Array,d,o,-1);On.computeBackwardPotentials(h,t,r,i,a,n);let m=On.backwardPointwise(h,e);On.computeForwardPotentials(p,e,r,i,a,n);let g=On.forwardPointwise(p,t);if(m<0||g<0)return console.error("INCORRECT PROBLEM"),null;if(!m)return[];let v=new Fn(e,-1,0,m,g),b=[v],y=new wn.zN((e=>e.slice()),Vn,Qn);y.set(e,0);let A=new wn.Z3((({p:e},{p:t})=>e<=t)),w=nn()(c.toString());A.enqueue({v:0,p:v.rank(w,u)});let _=m+g,x=performance.now();for(;A.size>0&&(l<0||b.length<l);){let e=A.dequeue().v,o=b[e],c=s?this.allChildStates(o.state,r,i,n):this.oneChildStates(o.state,r,i,n);for(let s of c){let c=y.get(s);if(c in b){let t=b[c];o.depth+1<t.depth&&(t.depth=o.depth+1,t.parentIndex=e,t.backwardEstimate>=0&&t.forwardEstimate>=0&&A.enqueue({v:c,p:t.rank(w,u)}))}else{let d=On.backwardPointwise(h,s);On.computeForwardPotentials(p,s,r,i,a,n);let m=On.forwardPointwise(p,t);if(d<0||m<0)continue;let g=new Fn(s,e,o.depth+1,d,m);if(b.push(g),c=b.length-1,y.set(g.state,c),0===m){let e=Fn.trajectory(c,b).reverse();return f&&(Pr.instance.renderer.forcedState=null),yield y.size,e.map((e=>e.state))}if(l<0&&d+m<_){_=d+m;let e=`found a state of record estimate ${_} = ${d} + ${m}`;console.debug(e),f&&(Pr.instance.renderer.forcedState=s)}A.enqueue({v:c,p:g.rank(w,u)})}}f&&performance.now()-x>50&&(yield y.size,x=performance.now())}return null}static allChildStates(e,t,n,r){let i=[],a=new Int32Array(e.length);for(let o=0;o<e.length;o++){let s=o%t,l=~~(o/t);for(let u of r)if(Pn(u,s,l,e,n,n)){i.push([u,o]);for(let e=0;e<u.IMY;e++)for(let n=0;n<u.IMX;n++)a[s+n+(l+e)*t]++}}let o=i.concat([]),s=new Uint8Array(o.length);s.fill(1);let l=[];return this.enumerate(l,[],o,a,s,e,t),l}static*oneChildStates(e,t,n,r){for(let i of r)for(let r=0;r<n;r++)for(let a=0;a<t;a++)Bn(i,a,r,e,t,n)&&(yield Dn(i,a,r,e,t))}static enumerate(e,t,n,r,i,a,o){let s=an.W.maxPositiveIndex(r),l=s%o,u=~~(s/o);if(s<0)return void e.push(Rn(a,t,o));let c=[];for(let e=0;e<n.length;e++){let[t,r]=n[e];i[e]&&Ln(l,u,t,r%o,~~(r/o))&&c.push([t,r])}for(let[s,l]of c){t.push([s,l]);let u=[];for(let e=0;e<n.length;e++)if(i[e]){let[t,r]=n[e];Nn(s,l%o,~~(l/o),t,r%o,~~(r/o))&&u.push(e)}for(let e of u)zn(e,!1,n,r,i,o);for(let s of(this.enumerate(e,t,n,r,i,a,o),u))zn(s,!0,n,r,i,o);t.pop()}}}let Bn=(e,t,n,r,i,a)=>{if(t+e.IMX>i||n+e.IMY>a)return!1;let o=0,s=0;for(let a=0;a<e.input.length;a++){if(0==(e.input[a]&1<<r[t+s+(n+o)*i]))return!1;++s===e.IMX&&(s=0,o++)}return!0},Dn=(e,t,n,r,i)=>{let a=new Uint8Array(r.length);a.set(r);for(let r=0;r<e.OMZ;r++)for(let o=0;o<e.OMY;o++)for(let s=0;s<e.OMX;s++){let l=e.output[s+o*e.OMX+r*e.OMX*e.OMY];255!=l&&(a[t+s+(n+o)*i]=l)}return a},Pn=(e,t,n,r,i,a)=>{if(t+e.IMX>i||n+e.IMY>a)return!1;let o=0,s=0;for(let a=0;a<e.input.length;a++){if(0==(e.input[a]&1<<r[t+s+(n+o)*i]))return!1;++s==e.IMX&&(s=0,o++)}return!0},zn=(e,t,n,r,i,a)=>{i[e]=t?1:0;let[o,s]=n[e],l=s%a,u=~~(s/a),c=t?1:-1;for(let e=0;e<o.IMY;e++)for(let t=0;t<o.IMX;t++)r[l+t+(u+e)*a]+=c},jn=(e,t,n,r,i)=>{for(let a=0;a<e.OMY;a++)for(let o=0;o<e.OMX;o++)r[t+o+(n+a)*i]=e.output[o+a*e.OMX]},Rn=(e,t,n)=>{let r=new Uint8Array(e.length);for(let[i,a]of(r.set(e),t))jn(i,a%n,~~(a/n),r,n);return r},Ln=(e,t,n,r,i)=>r<=e&&e<r+n.IMX&&i<=t&&t<i+n.IMY,Nn=(e,t,n,r,i,a)=>{for(let o=0;o<e.IMY;o++)for(let s=0;s<e.IMX;s++)if(Ln(t+s,n+o,r,i,a))return!0;return!1};class Fn{rank(e,t){return(t<0?1e3-this.depth:this.forwardEstimate+this.backwardEstimate+2*t*this.depth)+1e-4*e.double()}static trajectory(e,t){let n=[];for(let r=t[e];r.parentIndex>=0;r=t[r.parentIndex])n.push(r);return n}constructor(e,t,n,r,i){this.state=e,this.parentIndex=t,this.depth=n,this.backwardEstimate=r,this.forwardEstimate=i}}let Qn=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Un=new Int32Array(1),Vn=e=>{Un[0]=17;for(let t=0;t<e.length;t++)Un[0]=29*Un[0]+e[t];return Un[0]};class Wn{get memory_size(){return this.memory.buffer.byteLength}get exports(){return this.instance.exports}async load(e,t){let n={memory:t},r=WebAssembly.Module.imports(e);for(let e of r)e.name in n||(n[e.name]=this[e.name]?this[e.name].bind(this):function(){console.log(`${e.name}: ${[...arguments].join(",")}`)});this.instance=await WebAssembly.instantiate(e,{env:n}),this.memory=t,this.view=new DataView(this.memory.buffer)}abort(){throw Error("abort")}get malloc_aligned(){return this.malloc}malloc(e,t=4){if(e<=0)return null;for(;this.ptr%t;)this.ptr++;let n=this.ptr;this.ptr+=e;let r=this.ptr-this.memory.buffer.byteLength;return r>=0&&(this.memory.grow(1+(r>>>16)),this.view=new DataView(this.memory.buffer)),n}typed_array(e,t,n){return new e(this.memory.buffer,t,n)}copy_to_external(e,t,n=t.length){return t.set(new t.constructor(this.memory.buffer,e,n)),t}copy_from_external(e,t,n=e.length){return new e.constructor(this.memory.buffer,t,n).set(e)}reset(){this.ptr=0,new Uint8Array(this.memory.buffer).fill(0)}constructor(){this.ptr=0}}class qn{async init(e=16){let t=new WebAssembly.Memory({initial:e}),n=new Wn;return await n.load(this.module,t),n}static async load(e){let t=await WebAssembly.compile(e);return new qn(t)}constructor(e){this.module=e}}class Yn{static get supported(){return!!this.obs_instance}static load_rule(e){let t=this.obs_instance,n=t.exports,{ishifts:r,oshifts:i,C:a}=e,[o,s,l,u,c,f]=e.IO_DIM,d=r.reduce(((e,t)=>e+t.length),0),h=i.reduce(((e,t)=>e+t.length),0),p=n.new_rule(o,s,l,u,c,f,a,d,h),m=n.shift_size();t.copy_from_external(e.binput,n.rule_binput(p)),t.copy_from_external(e.output,n.rule_output(p)),t.copy_from_external(e.input,n.rule_input(p));let g=n.rule_ishift_offset(p),v=n.rule_ishift_array(p);for(let e=0,n=0,i=0;n<r.length;n++)for(let[a,o,s]of(t.view.setUint16(g+2*n,i,!0),r[n]))t.view.setUint16(v+e+0,a,!0),t.view.setUint16(v+e+2,o,!0),t.view.setUint16(v+e+4,s,!0),e+=m,i++;let b=n.rule_oshift_offset(p),y=n.rule_oshift_array(p);for(let e=0,n=0,r=0;n<i.length;n++)for(let[a,o,s]of(t.view.setUint16(b+2*n,r,!0),i[n]))t.view.setUint16(y+e+0,a,!0),t.view.setUint16(y+e+2,o,!0),t.view.setUint16(y+e+4,s,!0),e+=m,r++;return p}}Yn.loadPromise=(async()=>{{let e=await fetch("data:application/wasm;base64,AGFzbQEAAAABeA5gAABgAX8Bf2AEf39/fwF/YAl/f39/f39/f38Bf2AAAX9gAX8AYAJ/fwF/YAN/f38Bf2AEf39/fwBgCn9/f39/f39/f38Bf2ALf39/f39/f39/f38AYAp/f39/f39/f39/AGAHf39/f39/fwF/YAd/f39/f39/AAI4BANlbnYGbWVtb3J5AgACA2VudgVhYm9ydAAAA2VudgZtYWxsb2MAAQNlbnYJbG9nX3NoaWZ0AAIDISAAAwEBAQEBAQEEBQUGAQYHCAUFAQEHBwQJCgsLAgIMDQQFAXABAQEGKwd/AUGAiAQLfwBBgAgLfwBBgAgLfwBBgAgLfwBBgIgEC38AQQALfwBBAQsHkgQmEV9fd2FzbV9jYWxsX2N0b3JzAAMIbmV3X3J1bGUABAtydWxlX2JpbnB1dAAFC3J1bGVfb3V0cHV0AAYKcnVsZV9pbnB1dAAHEnJ1bGVfaXNoaWZ0X29mZnNldAAIEnJ1bGVfb3NoaWZ0X29mZnNldAAJEXJ1bGVfaXNoaWZ0X2FycmF5AAoRcnVsZV9vc2hpZnRfYXJyYXkACwpzaGlmdF9zaXplAAwPbG9nX3J1bGVfaXNoaWZ0AA0PbG9nX3J1bGVfb3NoaWZ0AA4JbmV3X3F1ZXVlAA8KcXVldWVfZnVsbAAQC25ld19ib29sXzJkABELYm9vbF8yZF9nZXQAEgtib29sXzJkX3NldAATDGJvb2xfMmRfZmlsbAAUDWJvb2xfMmRfY2xlYXIAFQlib29sXzJkX3gAFglib29sXzJkX3kAFwJlcQAYBGhhc2gAGQhwdHJfc2l6ZQAaBW1hdGNoABsFYXBwbHkAHApjb21wdXRlX2ZkAB0KY29tcHV0ZV9iZAAeCWZkX3BvaW50cwAfCWJkX3BvaW50cwAgCm1hdGNoX3J1bGUAIQphcHBseV9ydWxlACIMX19kc29faGFuZGxlAwEKX19kYXRhX2VuZAMCDV9fZ2xvYmFsX2Jhc2UDAwtfX2hlYXBfYmFzZQMEDV9fbWVtb3J5X2Jhc2UDBQxfX3RhYmxlX2Jhc2UDBgqfIiACAAuPAgEBfwJAAkAgAEUNACABRQ0AIAJFDQAgA0UNACAERQ0AIAUNAQsQgICAgAAAC0E0EIGAgIAAIgkgAjsBBCAJIAE7AQIgCSAAOwEAIAkgBTsBCiAJIAQ7AQggCSADOwEGIAkgBjsBDCAJIAEgAGwgAmwiATYCECAJIAQgA2wgBWwiAjYCFCAJIAEQgYCAgAA2AhggCSACEIGAgIAANgIgIAkgAUECdBCBgICAADYCHCAJIAZBAXQiAUECaiICEIGAgIAAIgM2AiQgAhCBgICAACECIAMgAWogBzsBACAJIAI2AiggAiABaiAIOwEAIAkgB0EGbBCBgICAADYCLCAJIAhBBmwQgYCAgAA2AjAgCQsHACAAKAIYCwcAIAAoAiALBwAgACgCHAsHACAAKAIkCwcAIAAoAigLBwAgACgCLAsHACAAKAIwCwQAQQYLrgEBBn8CQCAALwEMIgFFDQBBACECA0ACQCAAKAIkIgMgAkEBdGovAQAiBCADIAJBAWoiBUEBdGovAQAiBk8NACAEQQFqIQMgBEEGbCEEA0AgAiAAKAIsIARqIgEuAQAgAUECai4BACABQQRqLgEAEIKAgIAAGiAEQQZqIQQgA0H//wNxIQEgA0EBaiEDIAYgAUcNAAsgAC8BDCEBCyAFIQIgBSABQf//A3FJDQALCwuuAQEGfwJAIAAvAQwiAUUNAEEAIQIDQAJAIAAoAigiAyACQQF0ai8BACIEIAMgAkEBaiIFQQF0ai8BACIGTw0AIARBAWohAyAEQQZsIQQDQCACIAAoAjAgBGoiAS4BACABQQJqLgEAIAFBBGouAQAQgoCAgAAaIARBBmohBCADQf//A3EhASADQQFqIQMgBiABRw0ACyAALwEMIQELIAUhAiAFIAFB//8DcUkNAAsLCz8BAX8CQAJAIABFDQAgAQ0BCxCAgICAAAALIAEgAGxBEGoQgYCAgAAiAiAANgIMIAJCADcCACACIAE2AgggAgsNACAAKAIEIAAoAghPC0YBAX8CQAJAIABFDQAgAQ0BCxCAgICAAAALIAEgAGwiAkEDdiACQQdxQQBHakEIahCBgICAACICIAE2AgQgAiAANgIAIAILJABBASAAKAIAIAJsIAFqIgFBB3F0IAAgAUEDdmpBCGotAABxCzoAIAAgACgCACACbCABaiIBQQN2akEIaiIAIAAtAAAiAEEBIAFBB3EiAXRyIABBfiABd3EgAxs6AAALJgAgAEEIakH/ASAAKAIEIAAoAgBsIgBBA3YgAEEHcUEAR2r8CwALJQAgAEEIakEAIAAoAgQgACgCAGwiAEEDdiAAQQdxQQBHavwLAAsHACAAKAIACwcAIAAoAgQLSAEBfwJAIAINAEEBDwsCQAJAA0AgAC0AACABLQAARw0BQQEhAyAAQQFqIQAgAUEBaiEBIAJBf2oiAkUNAgwACwtBACEDCyADC0kBAn8CQAJAIAINAEEAIQMMAQtBACEEQQAhAwNAIAEgBCAAIARqLQAAIAJsakECdGooAgAgA3MhAyACIARBAWoiBEcNAAsLIAMLBABBBAvmAQEGfwJAIABBFEEQIAkbaigCACIKDQBBAQ8LIABBIEEYIAkbaigCACELQQAhDEEAIQ1BACEJAkADQAJAIAstAAAiDkH/AUYNAEEAIQ8gBCAJQf//A3EgAWogDUH//wNxIAJqIAxB//8DcSADaiAHbGogBmxqIA4gCGxqQQJ0aigCACIOQX9GDQIgDiAFSg0CCwJAIAlBAWoiCUH//wNxIAAvAQBHDQBBACEJQQAgDUEBaiINIA1B//8DcSAALwECRiIPGyENIAwgD2ohDAtBASEPIAtBAWohCyAKQX9qIgoNAAsLIA8LrgMBDX8CQCAALwEEIgtFDQAgAEEYQSAgChtqKAIAIQwgByAGbCENIAlBEGohDiAFQQFqIQ8gAiADIAdsaiAGbCEQQQAhESAALwECIgohBwNAAkACQCAHQf//A3ENAEEAIQcMAQsgESADaiESQQAhEyAQIRQgAC8BACILIRUDQAJAAkAgFUH//wNxIgUNAEEAIRUMAQsgEyACaiEWIAEgFGohF0EAIQcCQANAAkAgDCAHIAUgEyARIApB//8DcWxqbGpqLQAAIgVB/wFGDQAgBCAXIAdqIAUgCGxqQQJ0aiIVKAIAQX9HDQAgFSAPNgIAIAkoAgQiCiAJKAIIIgtPDQIgDiAJKAIAIApqIAtwIAkoAgxsaiILIBI7AQYgCyAWOwEEIAsgASAHajsBAiALIAU7AQAgCSAKQQFqNgIEIAAvAQIhCiAALwEAIQsLIAshFSAHQQFqIgcgC0H//wNxIgVPDQIMAAsLEICAgIAAAAsgFCAGaiEUIBNBAWoiEyAKQf//A3FJDQALIAAvAQQhCyAKIQcLIBAgDWohECARQQFqIhEgC0H//wNxSQ0ACwsLhwcBGX8gAkIANwIAAkAgBSAEbCIKIAZsIgsgB2wiDEUNAEEAIQdBACENA0AgACAHQQJ0akF/NgIAIAwgDUEBaiINQf//A3EiB0sNAAsLAkACQCALRQ0AIAJBEGohDkEAIQdBACEMA0AgACALIAEgB2otAAAiD2wgB2pBAnRqQQA2AgAgAigCBCINIAIoAggiEE8NAiACIA1BAWo2AgQgDiACKAIAIA1qIBBwIAIoAgxsaiINIAcgCm4iEDsBBiANIAcgECAKbGsgBG47AQQgDSAMQf//A3EgBHA7AQIgDSAPOwEAIAsgDEEBaiIMQf//A3EiB0sNAAsLIANBCGoiEUEAIAMoAgQgAygCAGwiB0EDdiAHQQdxQQBHavwLAAJAIAIoAgQiB0UNACACQRBqIRIDQCACIAdBf2oiBzYCBCACIAIoAgAiDUEBaiACKAIIcDYCAAJAIAlFDQAgACALIBIgDSACKAIMbGoiBy8BACITbCAHLwECIhRqIAcvAQYiFSAFbCAHLwEEIhZqIARsakECdGooAgAhFyATQQFqIRhBACEZA0ACQCAIIBlBAnRqKAIAIgwoAiQiDSATQQF0ai8BACIHIA0gGEEBdGovAQAiDk8NAANAIAdBBmwhDSAHQQFqIQcCQCAWIA0gDCgCLGoiDS4BAmsiDyAUIA0uAQBrIgpyIBUgDS4BBGsiDXJBAEgNACAKIAwvAQAiGmogBEoNACAPIAwvAQIiG2ogBUoNACANIAwvAQRqIAZKDQBBASANIAVsIA9qIARsIApqIAMoAgAgGWxqIhBBB3F0IhwgESAQQQN2aiIdLQAAIh5xDQACQCAMKAIQIh9FDQAgDCgCGCEBQQAhIEEAISFBACEQA0ACQCABLQAAIiJB/wFGDQAgACAKIBBB//8DcWogDyAhQf//A3FqIA0gIEH//wNxaiAFbGogBGxqIAsgImxqQQJ0aigCACIiQX9GDQMgIiAXSg0DCwJAIBBBAWoiEEH//wNxIBpHDQBBACEQQQAgIUEBaiIhICFB//8DcSAbRiIiGyEhICAgImohIAsgAUEBaiEBIB9Bf2oiHw0ACwsgHSAeIBxyOgAAIAwgCiAPIA0gACAXIAQgBSALIAJBABCcgICAAAsgDiAHQf//A3FHDQALCyAZQQFqIhkgCUcNAAsgAigCBCEHCyAHDQALCw8LEICAgIAAAAuNBwEZfyACQgA3AgAgBSAEbCIKIAZsIQsCQAJAAkACQCAHRQ0AIAtFDQAgAkEQaiEMQQAhDQNAQQEgDXQhDiAAIA0gC2xBAnRqIQ9BACEQQQAhEQNAIA8gEEECdCISakEAQX8gASASaigCACAOcSISGzYCAAJAIBJFDQAgAigCBCISIAIoAggiE08NBCACIBJBAWo2AgQgDCACKAIAIBJqIBNwIAIoAgxsaiISIBAgCm4iEzsBBiASIBAgEyAKbGsgBG47AQQgEiARQf//A3EgBHA7AQIgEiANOwEACyALIBFBAWoiEUH//wNxIhBLDQALIA1BAWoiDSAHRw0ACwsgA0EIaiIUQQAgAygCBCADKAIAbCIQQQN2IBBBB3FBAEdq/AsAIAIoAgQiEEUNAiACQRBqIRUMAQsQgICAgAAACwNAIAIgEEF/aiIQNgIEIAIgAigCACIRQQFqIAIoAghwNgIAAkAgCUUNACAAIAsgFSARIAIoAgxsaiIQLwEAIhZsIBAvAQIiDWogEC8BBiIMIAVsIBAvAQQiB2ogBGxqQQJ0aigCACEXIBZBAWohGEEAIRkDQAJAIAggGUECdGooAgAiEigCKCIRIBZBAXRqLwEAIhAgESAYQQF0ai8BACIBTw0AA0AgEEEGbCERIBBBAWohEAJAIAcgESASKAIwaiIRLgECayITIA0gES4BAGsiCnIgDCARLgEEayIRckEASA0AIAogEi8BACIaaiAESg0AIBMgEi8BAiIbaiAFSg0AIBEgEi8BBGogBkoNAEEBIBEgBWwgE2ogBGwgCmogAygCACAZbGoiDkEHcXQiHCAUIA5BA3ZqIh0tAAAiHnENAAJAIBIoAhQiH0UNACASKAIgIQ9BACEgQQAhIUEAIQ4DQAJAIA8tAAAiIkH/AUYNACAAIAogDkH//wNxaiATICFB//8DcWogESAgQf//A3FqIAVsaiAEbGogCyAibGpBAnRqKAIAIiJBf0YNAyAiIBdKDQMLAkAgDkEBaiIOQf//A3EgGkcNAEEAIQ5BACAhQQFqIiEgIUH//wNxIBtGIiIbISEgICAiaiEgCyAPQQFqIQ8gH0F/aiIfDQALCyAdIB4gHHI6AAAgEiAKIBMgESAAIBcgBCAFIAsgAkEBEJyAgIAACyABIBBB//8DcUcNAAsLIBlBAWoiGSAJRw0ACyACKAIEIRALIBANAAsLC7YBAQp/AkAgAw0AQQAPCwJAIAINAEF/DwsgA0ECdCEEQQAhBUEAIQYDQCABIAVBAnRqKAIAIQdB6AchCCAAIQlBACEKQX8hCwNAIAogCyAHIAkoAgAiDEF/SnEgDCAISHEiDRshCyAMIAggDRshCCAJIARqIQkgB0EBdSEHIAIgCkEBaiIKRw0AC0F/IQcCQCALQX9MDQAgAEEEaiEAIAggBmoiBiEHIAVBAWoiBSADRw0BCwsgBwtSAQN/AkAgAw0AQQAPC0EAIQRBACEFA0ACQCAAIAQgASAEai0AACADbGpBAnRqKAIAIgZBAE4NAEF/DwsgBiAFaiEFIAMgBEEBaiIERw0ACyAFC7oBAQZ/QQAhBwJAIAAvAQAiCCABaiADSw0AIAggAmogBEsNAAJAIAAoAhAiCQ0AQQEPCyAAKAIcIQpBACELQQAhDEEAIQBBACEEA0ACQCAKIAtBAnRqKAIAIAYgAEH//wNxIAFqIARB//8DcSACaiADbGpqLQAAdkEBcQ0AQQAPC0EBIQdBACAAQQFqIgAgAEH//wNxIAhGIgsbIQAgBCALaiEEIAkgDEEBaiIMQf//A3EiC0sNAAsLIAcLigIBA38gBSAEIAb8CgAAAkAgAC8BCiIERQ0AIAUgAyACbCABamohB0EAIQggAC8BCCIBIQUDQAJAAkAgBUH//wNxDQBBACEFDAELQQAhAiAHIQkgAC8BBiIEIQYDQAJAAkAgBkH//wNxDQBBACEGDAELQQAhBQNAAkAgACgCICACIAggAUH//wNxbGogBkH//wNxbGogBWotAAAiBkH/AUYNACAJIAVqIAY6AAAgAC8BCCEBIAAvAQYhBAsgBCEGIAVBAWoiBSAEQf//A3FJDQALCyAJIANqIQkgAkEBaiICIAFB//8DcUkNAAsgAC8BCiEEIAEhBQsgCEEBaiIIIARB//8DcUkNAAsLCwC7AwRuYW1lAbMDIwAFYWJvcnQBBm1hbGxvYwIJbG9nX3NoaWZ0AxFfX3dhc21fY2FsbF9jdG9ycwQIbmV3X3J1bGUFC3J1bGVfYmlucHV0BgtydWxlX291dHB1dAcKcnVsZV9pbnB1dAgScnVsZV9pc2hpZnRfb2Zmc2V0CRJydWxlX29zaGlmdF9vZmZzZXQKEXJ1bGVfaXNoaWZ0X2FycmF5CxFydWxlX29zaGlmdF9hcnJheQwKc2hpZnRfc2l6ZQ0PbG9nX3J1bGVfaXNoaWZ0Dg9sb2dfcnVsZV9vc2hpZnQPCW5ld19xdWV1ZRAKcXVldWVfZnVsbBELbmV3X2Jvb2xfMmQSC2Jvb2xfMmRfZ2V0Ewtib29sXzJkX3NldBQMYm9vbF8yZF9maWxsFQ1ib29sXzJkX2NsZWFyFglib29sXzJkX3gXCWJvb2xfMmRfeRgCZXEZBGhhc2gaCHB0cl9zaXplGwVtYXRjaBwFYXBwbHkdCmNvbXB1dGVfZmQeCmNvbXB1dGVfYmQfCWZkX3BvaW50cyAJYmRfcG9pbnRzIQptYXRjaF9ydWxlIgphcHBseV9ydWxlAC8JcHJvZHVjZXJzAQxwcm9jZXNzZWQtYnkBBWNsYW5nDzEwLjAuMC00dWJ1bnR1MQAeD3RhcmdldF9mZWF0dXJlcwErC2J1bGstbWVtb3J5"),t=await e.arrayBuffer(),n=await qn.load(t),r=await n.init();Yn.obs_instance=r}})().catch((e=>Yn.obs_instance=null));let Xn=(e,t,n,r,i,a)=>{if(t+e.IMX>i||n+e.IMY>a)return!1;let o=0,s=0;for(let a=0;a<e.input.length;a++){if(0==(e.input[a]&1<<r[t+s+(n+o)*i]))return!1;++s===e.IMX&&(s=0,o++)}return!0},Hn=(e,t,n,r,i,a)=>{a||(a=new Uint8Array(r.length)),a.set(r);for(let r=0;r<e.OMZ;r++)for(let o=0;o<e.OMY;o++)for(let s=0;s<e.OMX;s++){let l=e.output[s+o*e.OMX+r*e.OMX*e.OMY];255!=l&&(a[t+s+(n+o)*i]=l)}return a},Gn=(e,t,n,r,i,a)=>{if(t+e.IMX>i||n+e.IMY>a)return!1;let o=0,s=0;for(let a=0;a<e.input.length;a++){if(0==(e.input[a]&1<<r[t+s+(n+o)*i]))return!1;++s==e.IMX&&(s=0,o++)}return!0},$n=(e,t,n,r,i,a)=>{i[e]=t?1:0;let[o,s]=n[e],l=s%a,u=~~(s/a),c=t?1:-1;for(let e=0;e<o.IMY;e++)for(let t=0;t<o.IMX;t++)r[l+t+(u+e)*a]+=c},Zn=(e,t,n,r,i)=>{for(let a=0;a<e.OMY;a++)for(let o=0;o<e.OMX;o++)r[t+o+(n+a)*i]=e.output[o+a*e.OMX]},Kn=(e,t,n,r,i)=>r<=e&&e<r+n.IMX&&i<=t&&t<i+n.IMY,Jn=(e,t,n,r,i,a)=>{for(let o=0;o<e.IMY;o++)for(let s=0;s<e.IMX;s++)if(Kn(t+s,n+o,r,i,a))return!0;return!1};class er{rank(e,t){return(t<0?1e3-this.depth:this.forwardEstimate+this.backwardEstimate+2*t*this.depth)+1e-4*e.double()}static trajectory(e,t){let n=[];for(let r=t[e];r.parentIndex>=0;r=t[r.parentIndex])n.push(r);return n}constructor(e,t,n,r,i){this.state=e,this.parentIndex=t,this.depth=n,this.backwardEstimate=r,this.forwardEstimate=i}}let tr=(e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},nr=new Int32Array(1),rr=e=>{nr[0]=17;for(let t=0;t<e.length;t++)nr[0]=29*nr[0]+e[t];return nr[0]};class ir extends hn{async load(e,t,n){let r=e.getAttribute("symmetry"),i=dn.getSymmetry(1===n.MZ,r,t);if(!i)return console.error(e,`unknown symmetry ${r}`),null;let a=[],o=[...an.W.childrenByTag(e,"rule")],s=o.length>0?o:[e];for(let e of s){let t=await Mn.load(e,n,n);if(!t)return!1;t.original=!0;let r=e.getAttribute("symmetry"),o=dn.getSymmetry(1===n.MZ,r,i);if(!o)return console.error(e,`unknown rule symmetry ${r}`),null;for(let e of t.symmetries(o,1===n.MZ))a.push(e)}this.rules=a.concat([]),this.last=new Uint8Array(this.rules.length),this.steps=parseInt(e.getAttribute("steps"))||0,this.temperature=parseFloat(e.getAttribute("temperature"))||0;let l=[...an.W.matchTags(e,"field")];if(l.length){for(let e of(this.fields=Array.from({length:n.C}),l))this.fields[n.values.get(e.getAttribute("for").charCodeAt(0))]=new In(e,n);this.potentials=new wn.dX(Int32Array,n.state.length,n.C),this.potentials.fill(0)}let u=[...an.W.childrenByTag(e,"observe")];if(u.length){for(let e of(this.observations=Array.from({length:n.C}),u)){let t=n.values.get(e.getAttribute("value").charCodeAt(0));this.observations[t]=new On(e.getAttribute("from")?.charCodeAt(0)||n.characters.charCodeAt(t),e.getAttribute("to"),n)}this.search="True"===e.getAttribute("search"),this.search?(this.limit=parseInt(e.getAttribute("limit"))||-1,this.depthCoefficient=parseFloat(e.getAttribute("depthCoefficient"))||.5,this.rules.map((e=>Yn.load_rule(e)))):this.potentials||(this.potentials=new wn.dX(Int32Array,n.state.length,n.C)),this.future=new Int32Array(n.state.length)}return!0}reset(){this.lastMatchedTurn=-1,this.counter=0,this.futureComputed=!1,this.searchTries=0,this.last.fill(0),this.searching?.throw(Error("reset")),this.searching=null,this.preObserve=null}add(e,t,n,r,i){i.set(t+n*this.grid.MX+r*this.grid.MX*this.grid.MY,!0);let a=this.matchCount<<2;if(a+4<this.matches.length)this.matches[a+0]=e,this.matches[a+1]=t,this.matches[a+2]=n,this.matches[a+3]=r;else{let i=this.matches;this.matches=new Uint32Array(i.length+4<<1),this.matches.set(i),this.matches[a+0]=e,this.matches[a+1]=t,this.matches[a+2]=n,this.matches[a+3]=r}this.matchCount++}run(){if(this.last.fill(0),this.steps>0&&this.counter>=this.steps)return pr.FAIL;let e=this.grid,{MX:t,MY:n,MZ:r}=e;if(this.observations&&!this.futureComputed)if(this.search){if(!this.searching){if(this.preObserve?this.grid.state.set(this.preObserve):(this.preObserve=new Uint8Array(this.grid.state.length),this.preObserve.set(this.grid.state)),!On.computeFutureSetPresent(this.future,e.state,this.observations))return this.preObserve=null,pr.FAIL;this.trajectory=null,this.searching=(Yn.supported?class{static*run(e,t,n,r,i,a,o,s,l,u,c,f){let d=Yn.obs_instance;d.reset();let h=d.exports,p=h.ptr_size(),m=n.map((e=>Yn.load_rule(e))),g=d.malloc(m.length*p);if(4===p)for(let e=0;e<m.length;e++)d.view.setUint32(g+4*e,m[e],!0);else{if(8!==p)throw Error(`ptr_size = ${p}?????`);for(let e=0;e<m.length;e++)d.view.setBigUint64(g+8*e,BigInt(m[e]),!0)}let v=e.length,b=n.length,y=d.malloc(t.byteLength);d.copy_from_external(t,y);let A=d.malloc(e.byteLength);d.copy_from_external(e,A);let w=d.malloc(v*o*Int32Array.BYTES_PER_ELEMENT),_=d.malloc(v*o*Int32Array.BYTES_PER_ELEMENT),x=h.new_queue(4*Uint16Array.BYTES_PER_ELEMENT,v*o),S=h.new_bool_2d(v,b);h.compute_bd(w,y,x,S,r,i,a,o,g,b);let M=h.bd_points(w,A,o,v);h.compute_fd(_,A,x,S,r,i,a,o,g,b);let k=h.fd_points(_,y,o,v);if(console.log(`root estimate = (${M}, ${k}), limit = ${l}`),M<0||k<0)return console.error("INCORRECT PROBLEM"),null;if(!M)return[];let E=new er(e,-1,0,M,k),C=[E],I=new wn.zN((e=>e),rr,tr);I.set(e,0);let O=new wn.Z3((({p:e},{p:t})=>e<=t)),T=nn()(c.toString());O.enqueue({v:0,p:E.rank(T,u)});let B={buffer:null},D=M+k,P=performance.now(),z=setInterval((()=>{}),1e3);for(;O.size>0&&(l<0||C.length<l);){let e=O.dequeue().v,t=C[e];if(s)for(let s of this.allChildStates(t.state,r,i,n)){let n=I.get(s);if(n in C){let r=C[n];t.depth+1<r.depth&&(r.depth=t.depth+1,r.parentIndex=e,r.backwardEstimate>=0&&r.forwardEstimate>=0&&O.enqueue({v:n,p:r.rank(T,u)}))}else{d.copy_from_external(s,A);let c=h.bd_points(w,A,o,v);h.compute_fd(_,A,x,S,r,i,a,o,g,b);let p=h.fd_points(_,y,o,v);if(c<0||p<0)continue;let m=new er(s,e,t.depth+1,c,p);if(C.push(m),n=C.length-1,I.set(m.state,n),p<=0){let e=er.trajectory(n,C).reverse();return f&&(Pr.instance.renderer.forcedState=null),yield I.size,clearInterval(z),e.map((e=>e.state))}l<0&&c+p<D&&(D=c+p,f&&(Pr.instance.renderer.forcedState=s)),O.enqueue({v:n,p:m.rank(T,u)})}}else for(let s of this.oneChildStates(t.state,r,i,n,B)){let n=I.get(s);if(n in C){let r=C[n];t.depth+1<r.depth&&(r.depth=t.depth+1,r.parentIndex=e,r.backwardEstimate>=0&&r.forwardEstimate>=0&&O.enqueue({v:n,p:r.rank(T,u)})),B.buffer=s}else{d.copy_from_external(s,A);let c=h.bd_points(w,A,o,v);h.compute_fd(_,A,x,S,r,i,a,o,g,b);let p=h.fd_points(_,y,o,v);if(c<0||p<0){B.buffer=s;continue}B.buffer=null;let m=new er(s,e,t.depth+1,c,p);if(C.push(m),n=C.length-1,I.set(m.state,n),0===p){let e=er.trajectory(n,C).reverse();return f&&(Pr.instance.renderer.forcedState=null),yield I.size,clearInterval(z),e.map((e=>e.state))}l<0&&c+p<D&&(D=c+p,f&&(Pr.instance.renderer.forcedState=s,yield I.size)),O.enqueue({v:n,p:m.rank(T,u)})}}f&&performance.now()-P>50&&(yield I.size,P=performance.now())}return null}static allChildStates(e,t,n,r){let i=[],a=new Int32Array(e.length);for(let o=0;o<e.length;o++){let s=o%t,l=~~(o/t);for(let u of r)if(Gn(u,s,l,e,n,n)){i.push([u,o]);for(let e=0;e<u.IMY;e++)for(let n=0;n<u.IMX;n++)a[s+n+(l+e)*t]++}}let o=i.concat([]),s=new Uint8Array(o.length);s.fill(1);let l=[];return this.enumerate(l,[],o,a,s,e,t),l}static*oneChildStates(e,t,n,r,i){for(let a of r)for(let r=0;r<n;r++)for(let o=0;o<t;o++)Xn(a,o,r,e,t,n)&&(yield Hn(a,o,r,e,t,i.buffer))}static enumerate(e,t,n,r,i,a,o){let s=an.W.maxPositiveIndex(r),l=s%o,u=~~(s/o);if(s<0)return void e.push(((e,t,n)=>{let r=new Uint8Array(e.length);for(let[i,a]of(r.set(e),t))Zn(i,a%n,~~(a/n),r,n);return r})(a,t,o));let c=[];for(let e=0;e<n.length;e++){let[t,r]=n[e];i[e]&&Kn(l,u,t,r%o,~~(r/o))&&c.push([t,r])}for(let[s,l]of c){t.push([s,l]);let u=[];for(let e=0;e<n.length;e++)if(i[e]){let[t,r]=n[e];Jn(s,l%o,~~(l/o),t,r%o,~~(r/o))&&u.push(e)}for(let e of u)$n(e,!1,n,r,i,o);for(let s of(this.enumerate(e,t,n,r,i,a,o),u))$n(s,!0,n,r,i,o);t.pop()}}}:Tn).run(e.state,this.future,this.rules,e.MX,e.MY,e.MZ,e.C,this instanceof ar,this.limit,this.depthCoefficient,this.ip.rng.int32(),!0)}let t=this.searching.next();if(!t.done&&"number"==typeof t.value)return this.visited=t.value,pr.HALT;if(t.done){if(this.searching=null,this.trajectory=wn.dX.from(Uint8Array,t.value),!this.trajectory){this.searchTries++;let e=this.limit<0?1:20;return this.searchTries>=e?(console.error(`no trajectory found after ${this.searchTries} attempts`),pr.FAIL):(console.log(`[${this.searchTries}/${e}] failed`),pr.HALT)}this.preObserve=null,this.futureComputed=!0}else console.error(t)}else{if(!On.computeFutureSetPresent(this.future,e.state,this.observations))return pr.FAIL;this.futureComputed=!0,On.computeBackwardPotentials(this.potentials,this.future,t,n,r,this.rules)}if(this.lastMatchedTurn>=0){let i=this.ip;for(let a=i.first[this.lastMatchedTurn];a<i.changes.length;a++){let[o,s,l]=i.changes[a],u=e.state[o+s*t+l*t*n];for(let i=0;i<this.rules.length;i++){let a=this.rules[i],c=this.matchMask.row(i),f=a.ishifts[u];for(let[u,d,h]of f){let f=o-u,p=s-d,m=l-h;if(f<0||p<0||m<0||f+a.IMX>t||p+a.IMY>n||m+a.IMZ>r)continue;let g=f+p*t+m*t*n;!c.get(g)&&e.matches(a,f,p,m)&&this.add(i,f,p,m,c)}}}}else{this.matchCount=0;for(let i=0;i<this.rules.length;i++){let a=this.rules[i],o=this.matchMask?.row(i);for(let s=a.IMZ-1;s<r;s+=a.IMZ)for(let l=a.IMY-1;l<n;l+=a.IMY)for(let u=a.IMX-1;u<t;u+=a.IMX){let c=u+l*t+s*t*n,f=e.state[c],d=a.ishifts[f];for(let[c,f,h]of d){let d=u-c,p=l-f,m=s-h;d<0||p<0||m<0||d+a.IMX>t||p+a.IMY>n||m+a.IMZ>r||!e.matches(a,d,p,m)||this.add(i,d,p,m,o)}}}}if(this.fields){let t=!1,n=!1;for(let r=0;r<this.fields.length;r++){let i=this.fields[r];if(i&&(!this.counter||i.recompute)){let a=i.compute(this.potentials.row(r),e);if(!a&&i.essential)return pr.FAIL;t||(t=a),n=!0}}if(n&&!t)return pr.FAIL}return pr.SUCCESS}constructor(...e){super(...e),this.visited=0,this.searchTries=0}}class ar extends ir{async load(e,t,n){return!!await super.load(e,t,n)&&(this.matches=new Uint32Array(1024),this.matchMask=new wn.WN(n.state.length,this.rules.length),this.matchMask.clear(),!0)}fit(e,t,n,r,i,a,o){let s=this.rules[e];for(let e=0;e<s.OMZ;e++)for(let l=0;l<s.OMY;l++)for(let u=0;u<s.OMX;u++)if(255!=s.output[u+l*s.OMX+e*s.OMX*s.OMY]&&i[t+u+(n+l)*a+(r+e)*a*o])return;this.last[e]=1;for(let e=0;e<s.OMZ;e++)for(let l=0;l<s.OMY;l++)for(let u=0;u<s.OMX;u++){let c=s.output[u+l*s.OMX+e*s.OMX*s.OMY];if(255!=c){let s=t+u,f=n+l,d=r+e,h=s+f*a+d*a*o;i[h]=1,this.grid.state[h]=c,this.ip.changes.push([s,f,d])}}}run(){let e=super.run();if(e!==pr.SUCCESS)return e;let t=this.grid;if(this.lastMatchedTurn=this.ip.counter,this.trajectory)return this.counter>=this.trajectory.ROWS?pr.FAIL:(t.state.set(this.trajectory.row(this.counter)),this.counter++,pr.SUCCESS);if(!this.matchCount)return pr.FAIL;let{MX:n,MY:r}=t;if(this.potentials){let e=0,i=!1,a=[];for(let o=0;o<this.matchCount;o++){let s=o<<2,[l,u,c,f]=this.matches.subarray(s,s+4),d=In.deltaPointwise(t.state,this.rules[l],u,c,f,this.fields,this.potentials,n,r);if(null!==d){i||(e=d,i=!0);let t=this.ip.rng.double();a.push([o,this.temperature>0?Math.pow(t,Math.exp((d-e)/this.temperature)):.001*t-d])}}for(let[e,i]of(a.sort((([,e],[,t])=>t-e)),a)){let i=e<<2,[a,o,s,l]=this.matches.subarray(i,i+4);this.matchMask.set(o+s*n+l*n*r,a,!1),this.fit(a,o,s,l,t.mask,n,r)}}else{let e=new Int32Array(this.matchCount);for(let i of(an.W.shuffleFill(e,this.ip.rng),e)){let e=i<<2,[a,o,s,l]=this.matches.subarray(e,e+4);this.matchMask.set(o+s*n+l*n*r,a,!1),this.fit(a,o,s,l,t.mask,n,r)}}for(let e=this.ip.first[this.lastMatchedTurn];e<this.ip.changes.length;e++){let[i,a,o]=this.ip.changes[e];t.mask[i+a*n+o*n*r]=0}return this.counter++,this.matchCount=0,pr.SUCCESS}}let or=[-1,-1,-1,-1];class sr extends ir{async load(e,t,n){return!!await super.load(e,t,n)&&(this.matches=new Uint32Array(1024),this.matchMask=new wn.WN(n.state.length,this.rules.length),this.matchMask.clear(),!0)}reset(){super.reset(),this.matchCount&&(this.matchMask.clear(),this.matchCount=0)}apply(e,t,n,r){let i=this.grid,{MX:a,MY:o}=i,s=this.ip.changes;for(let l=0;l<e.OMZ;l++)for(let u=0;u<e.OMY;u++)for(let c=0;c<e.OMX;c++){let f=e.output[c+u*e.OMX+l*e.OMX*e.OMY];if(255!==f){let e=t+c,d=n+u,h=r+l,p=e+d*a+h*a*o;f!==i.state[p]&&(i.state[p]=f,s.push([e,d,h]))}}}run(){let e=super.run();if(e!==pr.SUCCESS)return e;if(this.lastMatchedTurn=this.ip.counter,this.trajectory)return this.counter>=this.trajectory.ROWS?pr.FAIL:(this.grid.state.set(this.trajectory.row(this.counter)),this.counter++,pr.SUCCESS);let[t,n,r,i]=this.randomMatch(this.ip.rng);return t<0?pr.FAIL:(this.last[t]=1,this.apply(this.rules[t],n,r,i),this.counter++,pr.SUCCESS)}randomMatch(e){let{grid:t,matchMask:n,matches:r}=this;if(this.potentials){if(this.observations&&On.IsGoalReached(t.state,this.future))return this.futureComputed=!1,or;let n=-1e3,r=-1,i=0,a=!1;for(let o=0;o<this.matchCount;o++){let s=o<<2,[l,u,c,f]=this.matches.subarray(s,s+4),d=u+c*t.MX+f*t.MX*t.MY;if(t.matches(this.rules[l],u,c,f)){let s=In.deltaPointwise(t.state,this.rules[l],u,c,f,this.fields,this.potentials,t.MX,t.MY);if(null===s)continue;a||(i=s,a=!0);let d=e.double(),h=this.temperature>0?Math.pow(d,Math.exp((s-i)/this.temperature)):.001*d-s;h>n&&(n=h,r=o)}else{this.matchMask.set(d,l,!1),this.matchCount--;let e=this.matchCount<<2;this.matches.copyWithin(s,e,e+4),o--}}return r>=0?this.matches.subarray(r<<2,4+(r<<2)):or}for(;this.matchCount>0;){let i=(0,an.w)(e,this.matchCount)<<2,[a,o,s,l]=r.subarray(i,i+4),u=o+s*t.MX+l*t.MX*t.MY;n.set(u,a,!1),this.matchCount--;let c=this.matchCount<<2;if(this.matches.copyWithin(i,c,c+4),t.matches(this.rules[a],o,s,l))return[a,o,s,l]}return or}}class lr extends ir{async load(e,t,n){return!!await super.load(e,t,n)&&(this.newstate=new Uint8Array(n.state.length),!0)}add(e,t,n,r,i){let a=this.ip,o=this.grid,s=this.rules[e];if(a.rng.double()>s.p)return;this.last[e]=1;let{MX:l,MY:u}=o;for(let e=0;e<s.OMZ;e++)for(let i=0;i<s.OMY;i++)for(let c=0;c<s.OMX;c++){let f=s.output[c+i*s.OMX+e*s.OMX*s.OMY],d=t+c+(n+i)*l+(r+e)*l*u;255!==f&&f!==o.state[d]&&(this.newstate[d]=f,a.changes.push([t+c,n+i,r+e]))}this.matchCount++}run(){let e=super.run();if(e!==pr.SUCCESS)return e;let{ip:t,grid:n,newstate:r}=this;for(let e=t.first[t.counter];e<t.changes.length;e++){let[i,a,o]=t.changes[e],s=i+a*n.MX+o*n.MX*n.MY;n.state[s]=r[s]}return this.counter++,this.matchCount>0?pr.SUCCESS:pr.FAIL}}class ur extends pn{async load(e,t,n){if(this.shannon="True"===e.getAttribute("shannon"),this.tries=parseInt(e.getAttribute("tries"))||1e3,this.wave=new cr(n.state.length,this.P,this.propagator.length,this.shannon),this.startwave=new cr(n.state.length,this.P,this.propagator.length,this.shannon),this.stack=new Int32Array(this.wave.data.ROWS*this.P*2),this.shannon){this.weightLogWeights=new Float64Array(this.P);for(let e=0;e<this.P;e++)this.weightLogWeights[e]=this.weights[e]*Math.log(this.weights[e]),this.sumOfWeights+=this.weights[e],this.sumOfWeightLogWeights+=this.weightLogWeights[e];this.startingEntropy=Math.log(this.sumOfWeights)-this.sumOfWeightLogWeights/this.sumOfWeights}return this.distribution=new Float64Array(this.P),await super.load(e,t,this.newgrid)}reset(){super.reset(),this.n=-1,this.firstgo=!0}run(){if(this.n>=0)return super.run();if(this.firstgo){this.wave.init(this.propagator,this.sumOfWeights,this.sumOfWeightLogWeights,this.startingEntropy,this.shannon);for(let e=0;e<this.wave.data.ROWS;e++){let t=this.grid.state[e],n=this.map.get(t);if(n)for(let t=0;t<this.P;t++)n[t]||this.ban(e,t)}if(!this.propagate())return console.error("WFC initial conditions are contradictive"),pr.FAIL;this.startwave.copyFrom(this.wave,this.shannon);let e=this.goodSeed();return null===e?pr.FAIL:(this.rng=nn()(e.toString()),this.stacksize=0,this.wave.copyFrom(this.startwave,this.shannon),this.firstgo=!1,this.newgrid.clear(),this.ip.grid=this.newgrid,pr.SUCCESS)}{let e=this.nextUnobservedNode(this.rng);return e>=0?(this.observe(e,this.rng),this.propagate()):this.n++,this.n>=0&&this.updateState(),pr.SUCCESS}}goodSeed(){for(let e=0;e<this.tries;e++){let t=0,n=this.ip.rng.int32();for(this.rng=nn()(n.toString()),this.stacksize=0,this.wave.copyFrom(this.startwave,this.shannon);;){let r=this.nextUnobservedNode(this.rng);if(!(r>=0))return console.log(`WFC found a good seed ${n} on try#${e} with ${t} observations`),n;if(this.observe(r,this.rng),t++,!this.propagate()){console.warn(`CONTRADICTION on try#${e} with ${t} observations`);break}}}return console.error(`WFC failed to find a good seed in ${this.tries} tries`),null}nextUnobservedNode(e){let{MX:t,MY:n,MZ:r}=this.grid,i=this.N,a=1e4,o=-1;for(let s=0;s<r;s++)for(let l=0;l<n;l++)for(let u=0;u<t;u++){if(!this.periodic&&(u+i>t||l+i>n||s+1>r))continue;let c=u+l*t+s*t*n,f=this.wave.sumsOfOnes[c],d=this.shannon?this.wave.entropies[c]:f;if(f>1&&d<=a){let t=1e-6*e.double();d+t<a&&(a=d+t,o=c)}}return o}observe(e,t){let n=this.wave.data.row(e);for(let e=0;e<this.P;e++)this.distribution[e]=n.get(e)?this.weights[e]:0;let r=an.W.sampleWeights(this.distribution,t.double());for(let t=0;t<this.P;t++)n.get(t)!==(t===r)&&this.ban(e,t)}propagate(){let{N:e,grid:t,periodic:n,propagator:r}=this,{MX:i,MY:a,MZ:o}=t;for(;this.stacksize>0;){let t=this.stack[this.stacksize-2],s=this.stack[this.stacksize-1];this.stacksize-=2;let l=t%i,u=~~(t%(i*a)/i),c=~~(t/(i*a));for(let t=0;t<r.length;t++){let f=l+ur.DX[t],d=u+ur.DY[t],h=c+ur.DZ[t];if(!n&&(f<0||d<0||h<0||f+e>i||d+e>a||h+1>o))continue;f<0?f+=i:f>=i&&(f-=i),d<0?d+=a:d>=a&&(d-=a),h<0?h+=o:h>=o&&(h-=o);let p=f+d*i+h*i*a,m=r[t][s];for(let e=0;e<m.length;e++){let n=m[e],r=this.wave.compatible.get(t,n,p)-1;this.wave.compatible.set(t,n,p,r),0===r&&this.ban(p,n)}}}return this.wave.sumsOfOnes[0]>0}ban(e,t){let n=this.wave;n.data.set(t,e,!1);for(let r=0;r<this.propagator.length;r++)n.compatible.set(r,t,e,0);if(this.stack[this.stacksize+0]=e,this.stack[this.stacksize+1]=t,this.stacksize+=2,n.sumsOfOnes[e]-=1,this.shannon){let r=n.sumsOfWeights[e];n.entropies[e]+=n.sumsOfWeightLogWeights[e]/r-Math.log(r),n.sumsOfWeights[e]-=this.weights[t],n.sumsOfWeightLogWeights[e]-=this.weightLogWeights[t],r=n.sumsOfWeights[e],n.entropies[e]-=n.sumsOfWeightLogWeights[e]/r-Math.log(r)}}constructor(...e){super(...e),this.P=1,this.N=1,this.stacksize=0,this.sumOfWeights=0,this.sumOfWeightLogWeights=0,this.startingEntropy=0,this.map=new Map,this.firstgo=!0}}ur.DX=new Int8Array([1,0,-1,0,0,0]),ur.DY=new Int8Array([0,1,0,-1,0,0]),ur.DZ=new Int8Array([0,0,0,0,1,-1]);class cr{init(e,t,n,r,i){this.data.fill();let a=this.data.COLS;for(let t=0;t<this.data.ROWS;t++)for(let n=0;n<a;n++)for(let r=0;r<e.length;r++)this.compatible.set(r,n,t,e[cr.opposite[r]][n].length);this.sumsOfOnes.fill(a),i&&(this.sumsOfWeights.fill(t),this.sumsOfWeightLogWeights.fill(n),this.entropies.fill(r))}copyFrom(e,t){this.data.copy(e.data),this.compatible.copy(e.compatible),this.sumsOfOnes.set(e.sumsOfOnes),t&&(this.sumsOfWeights.set(e.sumsOfWeights),this.sumsOfWeightLogWeights.set(e.sumsOfWeightLogWeights),this.entropies.set(e.entropies))}constructor(e,t,n,r){this.data=new wn.WN(t,e),this.data.fill(),this.compatible=new wn._6(Int32Array,n,t,e),this.compatible.arr.fill(-1),this.sumsOfOnes=new Int32Array(e),r&&(this.sumsOfWeights=new Float64Array(e),this.sumsOfWeightLogWeights=new Float64Array(e),this.entropies=new Float64Array(e))}}cr.opposite=new Uint8Array([2,3,0,1,5,4]);let fr=e=>!1;class dr extends ur{async load(e,t,n){this.periodic="True"===e.getAttribute("periodic"),this.name=e.getAttribute("tileset");let r=e.getAttribute("tiles")||this.name;this.overlap=parseInt(e.getAttribute("overlap"))||0,this.overlapz=parseInt(e.getAttribute("overlapz"))||0;let i=`resources/tilesets/${this.name}.xml`,a=await un.xml(i),o="True"===a.getAttribute("fullSymmetry"),s=`${r}/${an.W.matchTag(an.W.matchTag(a,"tiles"),"tile").getAttribute("name")}.vox`,[l,u,c,f]=await un.vox(`resources/tilesets/${s}`);if(!l)return console.error(`Failed to load tileset ${s}`),!1;if(u!==c)return console.error(`Tiles should be square shaped: ${u} != ${c}`),!1;if(o&&u!=f)return console.error(`Tiles should be cube shaped for full symmetry option: ${u} != ${f}`),!1;this.S=u,this.SZ=f;let{overlap:d,overlapz:h}=this;if(this.newgrid=cn.build(e,(u-d)*n.MX+d,(u-d)*n.MY+d,(f-h)*n.MZ+h),!this.newgrid)return!1;this.votes=new wn.dX(Uint32Array,this.newgrid.C,u*u*f,0),this.tiledata=[];let p=new Map,m=e=>(0,wn.H)(Uint8Array,u,u,f,e),g=e=>m(((t,n,r)=>e[n+(u-1-t)*u+r*u*u])),v=e=>m(((t,n,r)=>e[r+n*u+(u-1-t)*u*u])),b=e=>m(((t,n,r)=>e[t+r*u+(u-1-n)*u*u])),y=e=>m(((t,n,r)=>e[u-1-t+n*u+r*u*u])),A=e=>m(((t,n,r)=>e[t+(u-1-n)*u+r*u*u])),w=e=>m(((t,n,r)=>e[t+n*u+(u-1-r)*u*u])),_=new Map,x=[],S=[],M=[...an.W.matchTags(an.W.matchTag(a,"tiles"),"tile")],k=0;for(let e of M){let t=e.getAttribute("name"),n=parseFloat(e.getAttribute("weight"))||1,i=`resources/tilesets/${r}/${t}.vox`,[a]=await un.vox(i);if(!a)return console.error(`Failed to load tile ${i}`),!1;let[s,l]=an.W.ords(a,S);if(l>this.newgrid.C)return console.error(`There're more than ${this.newgrid.C} colors in vox files`),!1;let u=o?dn.cubeSymmetries(s,g,v,y,an.W.compareArr):dn.squareSymmetries(s,g,y,an.W.compareArr),c=new Uint8Array(128);for(let e of(_.set(t,u),u))this.tiledata.push(e),x.push(n),c[k]=1,k++;p.set(t,c)}let E=this.P=this.tiledata.length;for(let t of(console.log(`P = ${this.P}`),this.weights=new Float64Array(x),this.map=new Map,an.W.childrenByTag(e,"rule"))){let r=t.getAttribute("in").charCodeAt(0),i=t.getAttribute("out").split("|"),a=new Uint8Array(E);for(let t of i){let n=p.get(t);if(!n)return console.error(e,`unknown tilename ${t}`),!1;for(let e=0;e<E;e++)n[e]&&(a[e]=1)}this.map.set(n.values.get(r),a)}this.map.has(0)||this.map.set(0,new Uint8Array(Array(E).fill(1)));let C=new wn.tH(E,E,6,!1),I=e=>{for(let t=0;t<this.tiledata.length;t++)if(an.W.compareArr(e,this.tiledata[t]))return t;return-1},O=e=>e?.split(" ").slice(-1)[0],T=e=>{let t=e.split(" "),n=2===t.length?t[0]:"",r=_.get(O(e))[0];for(let e=n.length-1;e>=0;e--){let t=n.charAt(e);if("x"===t)r=b(r);else if("y"===t)r=v(r);else{if("z"!==t)return console.error(`unknown symmetry ${t}`),null;r=g(r)}}return r},B=M.map((e=>e.getAttribute("name")));for(let e of(B.push(null),an.W.matchTags(an.W.matchTag(a,"neighbors"),"neighbor")))if(o){let t=e.getAttribute("left"),n=e.getAttribute("right");if(!B.includes(O(t))||!B.includes(O(n)))return console.error(e,`unknown tile "${O(t)}" or "${O(n)}" ("${t}", "${n}")`,B),!1;let r=T(t),i=T(n);if(!r||!i)return!1;let a=dn.squareSymmetries(r,b,A,fr),o=dn.squareSymmetries(i,b,A,fr);for(let e=0;e<a.length;e++)C.set(I(o[e]),I(a[e]),0,!0),C.set(I(y(a[e])),I(y(o[e])),0,!0);let s=g(r),l=g(i);var D=dn.squareSymmetries(s,v,w,fr),P=dn.squareSymmetries(l,v,w,fr);for(let e=0;e<D.length;e++)C.set(I(P[e]),I(D[e]),1,!0),C.set(I(A(D[e])),I(A(P[e])),1,!0);let u=v(r),c=v(i);var z=dn.squareSymmetries(u,g,y,fr),j=dn.squareSymmetries(c,g,y,fr);for(let e=0;e<z.length;e++)C.set(I(j[e]),I(z[e]),4,!0),C.set(I(w(z[e])),I(w(j[e])),4,!0)}else if(e.getAttribute("left")){let t=e.getAttribute("left"),n=e.getAttribute("right");if(!B.includes(O(t))||!B.includes(O(n)))return console.error(e,`unknown tile "${O(t)}" or "${O(n)}" ("${t}", "${n}")`,B),!1;let r=T(t),i=T(n);if(!r||!i)return!1;C.set(I(i),I(r),0,!0),C.set(I(A(i)),I(A(r)),0,!0),C.set(I(y(r)),I(y(i)),0,!0),C.set(I(A(y(r))),I(A(y(i))),0,!0);let a=g(r),o=g(i);C.set(I(o),I(a),1,!0),C.set(I(y(o)),I(y(a)),1,!0),C.set(I(A(a)),I(A(o)),1,!0),C.set(I(y(A(a))),I(y(A(o))),1,!0)}else{let t=e.getAttribute("top"),n=e.getAttribute("bottom");if(!B.includes(O(t))||!B.includes(O(n)))return console.error(e,`unknown tile "${O(t)}" or "${O(n)}" ("${t}", "${n}")`,B),!1;let r=T(t),i=T(n);if(!r||!i)return!1;let a=dn.squareSymmetries(r,g,y,fr),o=dn.squareSymmetries(i,g,y,fr);for(let e=0;e<a.length;e++)C.set(I(a[e]),I(o[e]),4,!0)}for(let e=0;e<E;e++)for(let t=0;t<E;t++)C.set(t,e,2,C.get(e,t,0)),C.set(t,e,3,C.get(e,t,1)),C.set(t,e,5,C.get(e,t,4));let R=Array.from({length:6},(e=>Array.from({length:E},(e=>[]))));return this.propagator=Array.from({length:6},((e,t)=>Array.from({length:E},((e,n)=>{let r=R[t][n];for(let e=0;e<E;e++)C.get(e,n,t)&&r.push(e);return new Int32Array(r)})))),await super.load(e,t,n)}updateState(){let{newgrid:e,grid:t,wave:n,S:r,SZ:i,P:a,tiledata:o,overlap:s,overlapz:l,votes:u}=this,c=dr.state_rng;for(let f=0;f<t.MZ;f++)for(let d=0;d<t.MY;d++)for(let h=0;h<t.MX;h++){let p=n.data.row(h+d*t.MX+f*t.MX*t.MY);u.fill(0);for(let e=0;e<a;e++)if(p.get(e)){let t=o[e];for(let e=0;e<i;e++)for(let n=0;n<r;n++)for(let i=0;i<r;i++){let a=i+n*r+e*r*r;u.incre(t[a],a)}}for(let t=0;t<i;t++)for(let n=0;n<r;n++)for(let a=0;a<r;a++){let o=u.row(a+n*r+t*r*r),p=-1,m=255;for(let e=0;e<o.length;e++){let t=o[e]+.1*c.double();t>p&&(m=e,p=t)}let g=h*(r-s)+a,v=d*(r-s)+n,b=f*(i-l)+t;e.state[g+v*e.MX+b*e.MX*e.MY]=m}}}}dr.state_rng=(0,tn.alea)("",{entropy:!0});class hr extends ur{async load(e,t,n){if(1!==n.MZ)return console.error("overlapping model currently works only for 2d"),!1;let r=this.N=parseInt(e.getAttribute("n"))||3,i=e.getAttribute("symmetry"),a=dn.getSymmetry(!0,i,t);if(!a)return console.error(e,`unknown symmetry ${i}`),!1;let o="False"!==e.getAttribute("periodicInput");if(this.newgrid=cn.build(e,n.MX,n.MY,n.MZ),!this.newgrid)return!1;this.periodic=!0,this.name=e.getAttribute("sample");let[s,l,u]=await un.bitmap(`resources/samples/${this.name}.png`);if(!s)return console.error(`Failed to read sample ${this.name}`),!1;let[c,f]=an.W.ords(s);if(f>this.newgrid.C)return console.error(`There're more than ${this.newgrid.C} colors in the sample`),!1;let d=an.W.intPower(f,r*r),h=e=>{let t=new Uint8Array(r*r);for(let n=0;n<r;n++)for(let i=0;i<r;i++)t[i+n*r]=e(i,n);return t},p=(e,t)=>h(((n,r)=>c[(e+n)%l+(t+r)%u*l])),m=e=>h(((t,n)=>e[r-1-n+t*r])),g=e=>h(((t,n)=>e[r-1-t+n*r])),v=BigInt(f),b=(e,t=new Uint8Array(r*r))=>{let n=e,i=BigInt(d);for(let e=0;e<t.length;e++){i/=v;let r=0;for(;n>=i;)n-=i,r++;t[e]=r}return t},y=new Map,A=[],w=o?n.MY:n.MY-r+1,_=o?n.MX:n.MX-r+1,x=Array.from({length:8});for(let e=0;e<w;e++)for(let t=0;t<_;t++){x[0]=p(t,e),x[1]=g(x[0]),x[2]=m(x[0]),x[3]=g(x[2]),x[4]=m(x[2]),x[5]=g(x[4]),x[6]=m(x[4]),x[7]=g(x[6]);for(let e=0;e<8;e++)if(a[e]){let t=an.W.indexByteArr(x[e],v),n=y.get(t);void 0!==n?y.set(t,n+1):(y.set(t,1),A.push(t))}}let S=this.P=y.size;console.log(`number of patterns P = ${S}`),this.patterns=new wn.dX(Uint8Array,r*r,S),this.weights=new Float64Array(S);let M=0;for(let e of A)b(e,this.patterns.row(M)),this.weights[M]=y.get(e),M++;let k=(e,t,n,i)=>{let a=n<0?0:n,o=n<0?n+r:r,s=i<0?i+r:r;for(let l=i<0?0:i;l<s;l++)for(let s=a;s<o;s++)if(e[s+r*l]!=t[s-n+r*(l-i)])return!1;return!0};this.propagator=[,,,,];for(let e=0;e<4;e++){this.propagator[e]=Array(S);for(let t=0;t<S;t++){let n=[];for(let r=0;r<S;r++)k(this.patterns.row(t),this.patterns.row(r),hr.DX[e],hr.DY[e])&&n.push(r);this.propagator[e][t]=new Int32Array(n)}}for(let t of(this.map=new Map,an.W.childrenByTag(e,"rule"))){let e=t.getAttribute("in").charCodeAt(0),r=t.getAttribute("out").split("|").map((e=>this.newgrid.values.get(e.charCodeAt(0)))),i=new Uint8Array(Array.from({length:S},((e,t)=>r.includes(this.patterns.get(0,t))?1:0)));this.map.set(n.values.get(e),i)}return this.map.has(0)||this.map.set(0,new Uint8Array(Array(S).fill(1))),this.votes=new wn.dX(Uint32Array,this.newgrid.C,this.newgrid.state.length,0),await super.load(e,t,n)}updateState(){let{newgrid:e,wave:t,patterns:n,P:r,N:i,votes:a}=this,{MX:o,MY:s}=e,l=hr.state_rng,u=a.arr,c=a.ROWS,f=a.COLS;u.fill(0);let d=t.data.ROWS;for(let e=0;e<r;e++){let r=n.row(e);for(let n=0;n<d;n++){let a=n%o,l=~~(n/o);if(t.data.get(e,n))for(let e=0;e<i;e++){let t=l+e;t>=s&&(t-=s);for(let n=0;n<i;n++){let s=a+n;s>=o&&(s-=o),u[r[n+e*i]+(s+t*o)*f]++}}}}for(let t=0;t<c;t++){let n=-1,r=255,i=t*f;for(let e=0;e<f;e++){let t=u[i+e]+.1*l.double();t>n&&(r=e,n=t)}e.state[t]=r}}}var pr;hr.state_rng=(0,tn.alea)("",{entropy:!0}),function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAIL=1]="FAIL",e[e.HALT=2]="HALT"}(pr||(pr={}));class mr{static async load(e,t,n,r){let i=new mr;if(i.origin="True"===e.getAttribute("origin"),i.grid=cn.build(e,t,n,r),!i.grid)return console.error("Failed to load grid"),null;i.startgrid=i.grid;let a=e.getAttribute("symmetry"),o=new Uint8Array(1===i.grid.MZ?8:48);o.fill(1);let s=dn.getSymmetry(1===i.grid.MZ,a,o);if(!s)return console.error(e,`unknown symmetry ${a}`),null;let l=await hn.factory(e,s,i,i.grid);return l?(i.root=l instanceof pn?l:new gn(l,i),i):null}*run(e,t){if(this.rng=nn()(e.toString()),this.grid=this.startgrid,this.grid.clear(),this.origin){let e=~~(this.grid.MX/2)+~~(this.grid.MY/2)*this.grid.MX+~~(this.grid.MZ/2)*this.grid.MX*this.grid.MY;this.grid.state[e]=1}for(this.changes.splice(0,this.changes.length),this.first.splice(0,this.first.length),this.first.push(0),this.root.reset(),this.current=this.root,this.counter=0;this.current&&(t<=0||this.counter<t);)yield[this.grid.state,this.grid.characters,this.grid.MX,this.grid.MY,this.grid.MZ],this.current.run(),this.counter++,this.first.push(this.changes.length);yield[this.grid.state,this.grid.characters,this.grid.MX,this.grid.MY,this.grid.MZ]}onRender(){this.current instanceof ur&&this.current.n<0&&this.current.updateState()}state(){let e=this.grid;return[e.state,e.characters,e.MX,e.MY,e.MZ]}constructor(){this.changes=[],this.first=[],this.counter=0}}var gr=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};class vr{static traverse(e){let t=[],n=[{node:e.root,depth:0,index:0,parent:null}];for(;n.length;){let{node:e,depth:r,parent:i,index:a}=n.pop(),o=this.factory(e);if(t.push({state:o,depth:r,index:a,parent:i,breakpoint:!1}),e instanceof pn)for(let t=e.children.length-1;t>=0;t--)n.push({node:e.children[t],depth:r+1,index:t,parent:o})}return t}static factory(e){if(e instanceof mn)return new yr(e);if(e instanceof gn)return new Ar(e);if(e instanceof _n)return new _r(e);if(e instanceof vn)return new wr(e);if(e instanceof En)return new xr(e);if(e instanceof Cn)return new Sr(e);if(e instanceof ar)return new kr(e);if(e instanceof sr)return new Er(e);if(e instanceof lr)return new Cr(e);if(e instanceof dr)return new Or(e);if(e instanceof hr)return new Tr(e);throw console.error(e),Error("unknown node")}sync(){}constructor(e){this.source=e,(0,t.rC)(this)}}gr([t.aD],vr.prototype,"sync",null);class br extends vr{sync(){}constructor(e){super(e),(0,t.rC)(this)}}gr([t.LO],br.prototype,"index",void 0),gr([t.KG],br.prototype,"sync",null);class yr extends br{get name(){return"sequence"}}class Ar extends br{get name(){return"markov"}}class wr extends vr{get name(){return"convchain"}sync(){this.source.steps=this.steps,this.source.c0=this.c0,this.source.c1=this.c1,this.counter=this.source.counter||0}constructor(e){super(e),this.steps=-1,this.counter=0,this.steps=this.source.steps||-1,this.c0=this.source.c0,this.c1=this.source.c1,this.SMX=this.source.SMX,this.SMY=this.source.SMY,this.sample=new Uint8Array(this.source.sample.length),this.sample.set(this.source.sample),(0,t.rC)(this)}}gr([t.LO],wr.prototype,"steps",void 0),gr([t.LO],wr.prototype,"counter",void 0),gr([t.LO],wr.prototype,"c0",void 0),gr([t.LO],wr.prototype,"c1",void 0),gr([t.LO],wr.prototype,"SMX",void 0),gr([t.LO],wr.prototype,"SMY",void 0),gr([t.KG],wr.prototype,"sync",null);class _r extends vr{get name(){return`convolution-${this.source.neighborhood.toLowerCase()}`}sync(){this.source.steps=this.steps,this.counter=this.source.counter||0}constructor(e){super(e),this.steps=-1,this.counter=0,this.steps=this.source.steps||-1,(0,t.rC)(this)}}gr([t.LO],_r.prototype,"steps",void 0),gr([t.LO],_r.prototype,"counter",void 0),gr([t.KG],_r.prototype,"sync",null);class xr extends br{get name(){return"map"}}class Sr extends vr{get name(){return"path"}sync(){}constructor(e){super(e),this.from=an.W.nonZeroPositions(e.start),this.to=an.W.nonZeroPositions(e.finish),this.on=an.W.nonZeroPositions(e.substrate),this.colored=e.value,(0,t.rC)(this)}}gr([t.LO],Sr.prototype,"from",void 0),gr([t.LO],Sr.prototype,"to",void 0),gr([t.LO],Sr.prototype,"on",void 0),gr([t.LO],Sr.prototype,"colored",void 0),gr([t.KG],Sr.prototype,"sync",null);class Mr extends vr{sync(){this.source.steps=this.steps,this.counter=this.source.counter||0,this.search&&(this.searchedState=this.source.visited)}constructor(e){super(e),this.steps=-1,this.counter=0,this.temperature=this.source.temperature,this.search=this.source.search,this.searchedState=this.source.visited,this.steps=this.source.steps||-1,(0,t.rC)(this)}}gr([t.LO],Mr.prototype,"steps",void 0),gr([t.LO],Mr.prototype,"counter",void 0),gr([t.LO],Mr.prototype,"temperature",void 0),gr([t.LO],Mr.prototype,"search",void 0),gr([t.LO],Mr.prototype,"searchedState",void 0),gr([t.KG],Mr.prototype,"sync",null);class kr extends Mr{get name(){return"all"}}class Er extends Mr{get name(){return"one"}}class Cr extends Mr{get name(){return"prl"}}class Ir extends vr{sync(){}constructor(e){super(e),(0,t.rC)(this)}}gr([t.KG],Ir.prototype,"sync",null);class Or extends Ir{get name(){return`wfc-tile: ${this.source.name.toLowerCase()}`}}class Tr extends Ir{get name(){return`wfc-overlap: ${this.source.name.toLowerCase()}`}}var Br=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let Dr={isometric:rn.uD,voxel:rn.j};class Pr{static loadPalette(){let e=un.xmlParse('\ufeff<colors>\n  <color symbol="B" value="000000" comment="Black"/>\n  <color symbol="I" value="1D2B53" comment="Indigo"/>\n  <color symbol="P" value="7E2553" comment="Purple"/>\n  <color symbol="E" value="008751" comment="Emerald"/>\n  <color symbol="N" value="AB5236" comment="browN"/>\n  <color symbol="D" value="5F574F" comment="Dead, Dark"/>\n  <color symbol="A" value="C2C3C7" comment="Alive, grAy"/>\n  <color symbol="W" value="FFF1E8" comment="White"/>\n  <color symbol="R" value="FF004D" comment="Red"/>\n  <color symbol="O" value="FFA300" comment="Orange"/>\n  <color symbol="Y" value="FFEC27" comment="Yellow"/>\n  <color symbol="G" value="00E436" comment="Green"/>\n  <color symbol="U" value="29ADFF" comment="blUe"/>\n  <color symbol="S" value="83769C" comment="Slate"/>\n  <color symbol="K" value="FF77A8" comment="pinK"/>\n  <color symbol="F" value="FFCCAA" comment="Fawn"/>\n  \n  <color symbol="b" value="291814" comment="black"/>\n  <color symbol="i" value="111d35" comment="indigo"/>\n  <color symbol="p" value="422136" comment="purple"/>\n  <color symbol="e" value="125359" comment="emerald"/>\n  <color symbol="n" value="742f29" comment="brown"/>\n  <color symbol="d" value="49333b" comment="dead, dark"/>\n  <color symbol="a" value="a28879" comment="alive, gray"/>\n  <color symbol="w" value="f3ef7d" comment="white"/>\n  <color symbol="r" value="be1250" comment="red"/>\n  <color symbol="o" value="ff6c24" comment="orange"/>\n  <color symbol="y" value="a8e72e" comment="yellow"/>\n  <color symbol="g" value="00b543" comment="green"/>\n  <color symbol="u" value="065ab5" comment="blue"/>\n  <color symbol="s" value="754665" comment="slate"/>\n  <color symbol="k" value="ff6e59" comment="pink"/>\n  <color symbol="f" value="ff9d81" comment="fawn"/>\n  \n  <color symbol="C" value="00ffff" comment="Cyan"/>\n  <color symbol="c" value="5fcde4" comment="cyan"/>\n  <color symbol="H" value="e4bb40" comment="Honey"/>\n  <color symbol="h" value="8a6f30" comment="honey"/>\n  <color symbol="J" value="4b692f" comment="Jungle"/>\n  <color symbol="j" value="45107e" comment="jungle"/>\n  <color symbol="L" value="847e87" comment="Light"/>\n  <color symbol="l" value="696a6a" comment="light"/>\n  <color symbol="M" value="ff00ff" comment="Magenta"/>\n  <color symbol="m" value="9c09cc" comment="magenta"/>\n  <color symbol="Q" value="9badb7" comment="aQua"/>\n  <color symbol="q" value="3f3f74" comment="aqua"/>\n  <color symbol="T" value="37946e" comment="Teal"/>\n  <color symbol="t" value="323c39" comment="teal"/>\n  <color symbol="V" value="8f974a" comment="oliVe"/>\n  <color symbol="v" value="524b24" comment="olive"/>\n  <color symbol="X" value="ff0000" comment="X"/>\n  <color symbol="x" value="d95763" comment="x"/>\n  <color symbol="Z" value="ffffff" comment="Z"/>\n  <color symbol="z" value="cbdbfc" comment="z"/>\n</colors>'),t=[...an.W.childrenByTag(e,"color")];this.palette=new Map(t.map((e=>[e.getAttribute("symbol").charAt(0),an.W.hex2rgba(e.getAttribute("value"))])))}static listModels(){let e=un.xmlParse('<models>\r\n  <model name="Apartemazements" size="8" d="3" />\r\n  <model name="CarmaTower" length="12" width="12" height="18"/>\r\n  <model name="ModernHouse" length="9" width="9" height="4" />\r\n  <model name="SeaVilla" length="10" width="10" height="4" />\r\n  \r\n  <model name="Island" size="400" steps="-1" pixelsize="1">\r\n    <color symbol="I" value="abcbe8" comment="sea"/>\r\n    <color symbol="U" value="cee6f9" comment="coast and lakes"/>\r\n    <color symbol="T" value="2b8aa9" comment="rivers"/>\r\n    <color symbol="Y" value="f1ebc2" comment="sand"/>\r\n    <color symbol="G" value="a8d1a5" comment="grass"/>\r\n    <color symbol="E" value="93c08d" comment="forest"/>\r\n    <color symbol="S" value="d0d8ac" comment="slopes"/>\r\n    <color symbol="s" value="e9e0b2" comment="hills"/>\r\n  </model>\r\n  <model name="Backtracker" size="89"/>\r\n  <model name="BacktrackerCycle" size="59"/>\r\n  <model name="Basic" size="60" steps="3600"/>\r\n  <model name="BasicBrickWall" size="30"/>\r\n  <model name="BasicDijkstraDungeon" size="60"/>\r\n  <model name="BasicDijkstraFill" size="60"/>\r\n  <model name="BasicDungeonGrowth" size="59"/>\r\n  <model name="BasicPartitioning" size="60" steps="1000"/>\r\n  <model name="BernoulliPercolation" size="359"/>\r\n  <model name="BiasedGrowth" size="120" steps="1000"/>\r\n  <model name="BiasedGrowthContraction" size="120" steps="5000"/>\r\n  <model name="BiasedMazeGrowth" size="117" steps="400"/>\r\n  <model name="BiasedVoronoi" size="80" steps="1000"/>\r\n  <model name="BishopParity" size="60"/>\r\n  <model name="BlueNoise" size="80" steps="500"/>\r\n  <model name="Cave" size="60"/>\r\n  <model name="CaveContour" size="80"/>\r\n  <model name="CentralCrawlers" size="60" steps="300"/>\r\n  <model name="CentralSAW" size="59"/>\r\n  <model name="ChainDungeon" size="60"/>\r\n  <model name="ChainDungeonMaze" size="60"/>\r\n  <model name="ChainMaze" size="60"/>\r\n  <model name="Circuit" size="59" steps="1200"/>\r\n  <model name="ClosedSurface" size="12" d="3"/>\r\n  <model name="ColoredKnots" size="12" d="3"/>\r\n  <model name="CompleteSAW" size="19"/>\r\n  <model name="CompleteSAWSmart" size="23"/>\r\n  <model name="ConnectedCaves" size="60"/>\r\n  <model name="ConstrainedCaves" size="60"/>\r\n  <model name="Counting" size="8" d="3"/>\r\n  <model name="Coupling" size="80"/>\r\n  <model name="CrawlersChase" size="60" steps="200"/>\r\n  <model name="CrossCountry" size="80"/>\r\n  <model name="Cycles" size="59"/>\r\n  <model name="DenseSAW" size="59" />\r\n  <model name="DiagonalPath" size="80"/>\r\n  <model name="Digger" size="359" steps="50000"/>\r\n  <model name="DijkstraDungeon" size="40" />\r\n  <model name="DualRetraction" size="59"/>\r\n  <model name="DualRetraction3D" size="27" d="3"/>\r\n  <model name="DungeonGrowth" size="79" />\r\n  <model name="Dwarves" size="20" steps="85"/>\r\n  <model name="Escher" size="8" d="3"/>\r\n  <model name="EscherSurface" size="8" d="3"/>\r\n  <model name="EuclideanPath" size="80"/>\r\n  <model name="FindLongCycle" size="27" pixelsize="10"/>\r\n  <model name="FireNoise" size="300"/>\r\n  <model name="Flowers" size="60"/>\r\n  <model name="Forest" size="240"/>\r\n  <model name="ForestFire" size="600" steps="1000" pixelsize="1"/>\r\n  <model name="ForestFireCA" size="600" steps="80" pixelsize="1"/>\r\n  <model name="GameOfLife" size="120" steps="100"/>\r\n  <model name="Growth" size="359" steps="128880" pixelsize="2" />\r\n  <model name="Growth" size="29" d="3" steps="3000"/>\r\n  <model name="GrowthCompetition" size="80" steps="30000"/>\r\n  <model name="GrowthContraction" size="79" steps="10000"/>\r\n  <model name="GrowthWalk" size="79" steps="5000"/>\r\n  <model name="GrowTo" size="120" steps="2000"/>\r\n  <model name="HamiltonianPath" size="39" steps="150000"/>\r\n  <model name="HamiltonianPaths" size="39" steps="1000"/>\r\n  <model name="Hills" length="40" width="40" height="12" d="3"/>\r\n  <model name="IrregularMazeGrowth" size="79"/>\r\n  <model name="IrregularSAW" size="79"/>\r\n  <model name="Keys" size="33"/>\r\n  <model name="Keys" size="23" d="3"/>\r\n  <model name="KnightPatrol" size="60" steps="200"/>\r\n  <model name="Knots2D" size="12"/>\r\n  <model name="Knots3D" size="8" d="3"/>\r\n  <model name="Laplace" size="60" steps="1000"/>\r\n  <model name="LoopGrowth" size="37"/>\r\n  <model name="LostCity" size="256" pixelsize="3"/>\r\n  <model name="MarchingSquares" size="20"/>\r\n  <model name="MazeBacktracker" size="359" steps="20000"/>\r\n  <model name="MazeBacktracker" size="967" pixelsize="1" steps="200000"/>\r\n  <model name="MazeGrowth" size="359"/>\r\n  <model name="MazeGrowth" size="27" d="3"/>\r\n  <model name="MazeMap" size="30"/>\r\n  <model name="MazeTrail" size="59" steps="1000"/>\r\n  <model name="MazeTrail" size="27" d="3" steps="1000"/>\r\n  <model name="MultiHeadedDungeon" size="55"/>\r\n  <model name="MultiHeadedWalk" size="99"/>\r\n  <model name="MultiHeadedWalkDungeon" size="59"/>\r\n  <model name="NestedGrowth" size="80" steps="100"/>\r\n  <model name="NoDeadEnds" size="39"/>\r\n  <model name="NoDeadEnds" size="19" d="3"/>\r\n  <model name="Noise" size="80"/>\r\n  <model name="Noise" size="24" d="3"/>\r\n  <model name="NystromDungeon" size="39"  pixelsize="8" gui="150"/>\r\n  <model name="OddScale" size="8"/>\r\n  <model name="OddScale3D" size="8" d="3"/>\r\n  <model name="OpenCave" size="80"/>\r\n  <model name="OpenCave3D" size="40" d="3"/>\r\n  <model name="OrganicMechanic" size="30" steps="200"/>\r\n  <model name="OrientedEscher" size="6" d="3"/>\r\n  <model name="PaintCompetition" size="48" steps="400"/>\r\n  <model name="ParallelGrowth" size="29" d="3" steps="24"/>\r\n  <model name="ParallelMazeGrowth" size="179"/>\r\n  <model name="Partitioning" length="11" width="11" height="3"/>\r\n  <model name="Percolation" size="360"/>\r\n  <model name="PeriodicEscher" size="8" d="3"/>\r\n  <model name="PillarsOfEternity" size="9" d="3"/>\r\n  <model name="Push" size="40" steps="8000"/>\r\n  <model name="PutColoredLs" size="30"/>\r\n  <model name="PutLs" size="50"/>\r\n  <model name="RainbowGrowth" size="59" steps="3481"/>\r\n  <model name="RegularPath" size="79"/>\r\n  <model name="RegularSAW" size="39"/>\r\n  <model name="RegularSAW" size="19" d="3"/>\r\n  <model name="RegularSAWRestart" size="39"/>\r\n  <model name="RegularSAWRestart" size="19" d="3"/>\r\n  <model name="River" size="80" />\r\n  <model name="River" size="20" d="3" />\r\n  <model name="SAWRestart" size="79" steps="2000"/>\r\n  <model name="SelectLargeCaves" size="60"/>\r\n  <model name="SelectLongKnots" size="10" d="3"/>\r\n  <model name="SelfAvoidingWalk" size="39"/>\r\n  <model name="Sewers" size="40"/>\r\n  <model name="SmarterDigger" size="40" steps="800"/>\r\n  <model name="SmartSAW" size="19"/>\r\n  <model name="SmoothTrail" size="59"/>\r\n  <model name="SnellLaw" size="80"/>\r\n  <model name="SoftPath" size="180"/>\r\n  <model name="SoftPath" size="80" d="3"/>\r\n  <model name="StairsPath" size="33" d="3"/>\r\n  <model name="StochasticVoronoi" size="200"/>\r\n  <model name="StochasticVoronoi" size="50" d="3" steps="-1"/>\r\n  <model name="StormySnellLaw" size="120"/>\r\n  <model name="StrangeNoise" size="60" steps="500"/>  \r\n  <model name="StrangeDungeon" size="59"/>\r\n  <model name="StrangeDungeon" size="29" d="3"/>\r\n  <model name="StrangeGrowth" size="59" steps="700"/>\r\n  <model name="SubmergedKnots" size="12" d="3"/>\r\n  <model name="Surface" size="10" d="3"/>\r\n  <model name="Tetris" size="30" steps="1500"/>\r\n  <model name="Texture" size="240"/>\r\n  <model name="TileDungeon" size="12" />\r\n  <model name="Trail" size="59" steps="3000"/>\r\n  <model name="Voronoi" size="240"/>\r\n  <model name="Voronoi" size="60" d="3"/>\r\n  <model name="WaveBrickWall" size="50"/>\r\n  <model name="WaveDungeon" size="50"/>\r\n  <model name="WaveFlowers" size="60"/>\r\n  <model name="WolfBasedApproach" size="70" steps="300"/>\r\n  \r\n  gifs\r\n  \x3c!--<model name="Wilson" size="59" steps="1000" gui="150" gif="True"/>--\x3e\r\n  <model name="BasicSnake" size="50" steps="1000" pixelsize="10" />\r\n  \x3c!--<model name="Chase" size="60" steps="200" gif="True"/>--\x3e\r\n\r\n  <model name="MultiSokoban8" size="8"  />\r\n  <model name="MultiSokoban9" size="9"  />\r\n  <model name="SokobanLevel1" length="14" width="9"  pixelsize="21" />\r\n  <model name="SokobanLevel2" length="5" width="4"  pixelsize="21" gif="True"/>\r\n  <model name="SequentialSokoban" size="20" />\r\n\r\n  benchmarks\r\n  \x3c!--<model name="MazeGrowth" size="967"  pixelsize="1" steps="200000"/> 1.7--\x3e\r\n  \x3c!--<model name="ParallelMazeGrowth" size="967"  pixelsize="1"/> 2.0--\x3e\r\n  \x3c!--<model name="MazeBacktracker" size="967"  pixelsize="1" steps="200000"/> 2.3--\x3e\r\n</models>\r\n\r\n\x3c!--\r\n\r\n--\x3e\r\n');for(let n of(this.models.clear(),an.W.childrenByTag(e,"model"))){let e=n.getAttribute("name")?.toUpperCase()||"MODEL",r=(t=null)=>{let i=null===t?e:`${e}_${t}`;this.models.has(i)?r(t?t+1:1):this.models.set(i,n)};(0,t.z)(r)}}static load(e){let n=new zr(e);return n?((0,t.z)((()=>{this.instance&&this.instance.stop(),this.instance=n})),n):null}}Pr.instance=null,Pr.models=new Map,Pr.palette=new Map,Pr.meta=nn()(),Br([t.LO.ref],Pr,"instance",void 0),Br([t.LO],Pr,"models",void 0),Br([t.LO],Pr,"palette",void 0),Br([t.aD],Pr,"loadPalette",null),Br([t.aD],Pr,"listModels",null),Br([t.aD],Pr,"load",null);class zr{debug(){}load(){return this._loadPromise}get paused(){return this._paused}set speed(e){e<=0?(this._speed=0,this._delay=Math.abs(e)):(this._speed=~~e,this._delay=0)}get speed(){return this._delay?-this._delay:this._speed}get running(){return!!this._curr}get seed(){return this._seed}start(e){return this._curr&&this._curr.throw(Error("Interrupt")),this._curr=null,this.output=null,this.loading?Promise.resolve(!1):(this.loading=!0,this._loadPromise.then((async n=>!!n&&(this._steps=e?.steps||-1,(0,t.z)((()=>{this.loading=!1,this._timer=0,this._paused=!1,this.loop()})),!0))))}pause(){this._paused=!0}resume(){this._paused=!1,this.loop()}step(){this._paused=!0,this.loop(!0)}randomize(){this._seed=Pr.meta.int32()}loop(e=!1,n=!0){if(!e&&this._paused)return;let r=performance.now();if(this._curr||(this._curr=this.ip?.run(this._seed,this._steps)),!this._curr)return;let i=()=>(0,t.z)((()=>{if(e)return!1;let t=this.ip.current;return!(!t||t.n<0||t.n>=t.children.length||!this.breakpoints.has(t)&&!this.breakpoints.has(t.children[t.n])||(this._paused=!0,0))})),a=this._curr.next();if(!i()&&this._speed>0)for(let e=0;e<this._speed&&(a=this._curr.next(),!(i()||performance.now()-r>20));e++);for(let{state:e}of(this.curr_node_index=this.nodes.findIndex((({state:e})=>{let t=this.ip.current;return!!t&&(t.n<0||t.n>=t.children.length?e.source===t:e.source===t.children[t.n])})),this.nodes))e.sync();let o=performance.now();if(this._timer+=o-r,a.done){this._curr=null;let[e,t,n,r,i]=this.ip.state();if(this.ip.onRender(),this.renderer.setCharacters(t),this.renderer.update(n,r,i),this.renderer.render(e),this.rendered++,i>1){let a=this.renderer.palette,o=t.split("").map((e=>a.get(e)));this.output={name:`${this.name}_${this._seed}.vox`,buffer:ln.serialize(e,n,r,i,o)}}console.log(`Time: ${this._timer.toFixed(2)}ms`)}else if(e||(this._delay?setTimeout((()=>(0,t.z)((()=>this.loop()))),this._delay):requestAnimationFrame((()=>(0,t.z)((()=>this.loop()))))),n){let[e,t,n,r,i]=a.value;this.ip.onRender(),this.renderer.setCharacters(t),this.renderer.update(n,r,i),this.renderer.render(e),this.rendered++}}get MX(){return this.DIM[0]}get MY(){return this.DIM[1]}get MZ(){return this.DIM[2]}get renderType(){let e=this.renderer;return e instanceof rn.TT?"bitmap":e instanceof rn.uD?"isometric":e instanceof rn.j?"voxel":null}toggleBreakpoint(e){let t=this.nodes[e];t&&(t.breakpoint=!t.breakpoint,t.breakpoint?this.breakpoints.add(t.state.source):this.breakpoints.delete(t.state.source))}toggleRender(e){let t=this.renderer.palette,n=this.renderer.canvas;if(this.renderer.dispose(),this.rendered=0,this.renderer=new Dr[e],this.renderer.palette=t,this.renderer.clear(),n.replaceWith(this.renderer.canvas),this.renderer.canvas.id=n.id,!this.ip)return;let[r,i,a,o,s]=this.ip.state();this.ip.onRender(),this.renderer.setCharacters(i),this.renderer.update(a,o,s),this.renderer.render(r),this.rendered++}stop(){this.pause(),this.renderer.dispose()}constructor(e){this.breakpoints=new Set,this._timer=0,this._steps=-1,this.default3DrenderType=rn.j.supported?"voxel":"isometric",this.rendered=0,this.DIM=new Int32Array([-1,-1,-1]),this._curr=null,this._seed=null,this._speed=0,this._delay=0,this._paused=!1,this.loading=!1,this.output=null,this.nodes=[],this.curr_node_index=-1,this.key=e,Pr.palette||console.error("Load palette first before running any model");let n=this.modelDescriptor=Pr.models.get(e?.toUpperCase());if(!this.modelDescriptor)return;let r=this.name=n.getAttribute("name"),i=parseInt(n.getAttribute("size"))||-1,a=parseInt(n.getAttribute("d"))||2;this.DIM[0]=parseInt(n.getAttribute("length"))||i,this.DIM[1]=parseInt(n.getAttribute("width"))||i,this.DIM[2]=parseInt(n.getAttribute("height"))||(2===a?1:i),this.renderer=1===this.DIM[2]?new rn.TT:new Dr[this.default3DrenderType],this.renderer.clear(),document.getElementById("model-canvas").replaceWith(this.renderer.canvas),this.renderer.canvas.id="model-canvas",this._loadPromise=(async()=>{await Yn.loadPromise;let e=`models/${r}.xml`;if(!(this.modelDoc=await un.xml(e)))return console.error(`Failed to load ${e}`),!1;let i=n.getAttribute("seeds")?.split(" ").map((e=>parseInt(e))),a=new Map(Pr.palette.entries());for(let e of an.W.childrenByTag(n,"color"))a.set(e.getAttribute("symbol").charAt(0),an.W.hex2rgba(e.getAttribute("value")));this.ip=await mr.load(this.modelDoc,this.DIM[0],this.DIM[1],this.DIM[2]),(0,t.z)((()=>{for(let{state:e}of(this.nodes=vr.traverse(this.ip),this.nodes))e.sync();this.renderer.palette=a;let e=new URLSearchParams(location.search),t=parseInt(e.get("seed"));this._seed=isNaN(t)?i?.[0]||Pr.meta.int32():t}));let[o,s,l,u,c]=this.ip.state();return this.renderer.setCharacters(s),this.renderer.update(l,u,c),this.renderer.render(o),!0})(),(0,t.rC)(this)}}Br([t.LO],zr.prototype,"renderer",void 0),Br([t.LO],zr.prototype,"_curr",void 0),Br([t.LO],zr.prototype,"_seed",void 0),Br([t.LO],zr.prototype,"_speed",void 0),Br([t.LO],zr.prototype,"_delay",void 0),Br([t.LO],zr.prototype,"_paused",void 0),Br([t.LO],zr.prototype,"loading",void 0),Br([t.LO],zr.prototype,"output",void 0),Br([t.LO.deep],zr.prototype,"nodes",void 0),Br([t.LO],zr.prototype,"curr_node_index",void 0),Br([t.aD],zr.prototype,"debug",null),Br([t.aD],zr.prototype,"load",null),Br([t.Fl],zr.prototype,"paused",null),Br([t.Fl],zr.prototype,"speed",null),Br([t.Fl],zr.prototype,"running",null),Br([t.Fl],zr.prototype,"seed",null),Br([t.aD],zr.prototype,"start",null),Br([t.aD],zr.prototype,"pause",null),Br([t.aD],zr.prototype,"resume",null),Br([t.aD],zr.prototype,"step",null),Br([t.aD],zr.prototype,"randomize",null),Br([t.Fl],zr.prototype,"MX",null),Br([t.Fl],zr.prototype,"MY",null),Br([t.Fl],zr.prototype,"MZ",null),Br([t.Fl],zr.prototype,"renderType",null),Br([t.aD],zr.prototype,"toggleBreakpoint",null),Br([t.aD],zr.prototype,"toggleRender",null),Br([t.aD],zr.prototype,"stop",null);var jr=__webpack_require__(162);if(!n.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!t.rC)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Rr=__webpack_require__(935);function Lr(e){return(0,t.Gf)(e)}var Nr="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry;function Fr(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+Qr}}var Qr=1e4,Ur=Nr?function(e){var t=new Map,n=1,r=new e((function(e){var n=t.get(e);n&&(n.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,i,a){var o=n++;return r.register(a,o,e),e.current=Fr(i),e.current.finalizationRegistryCleanupToken=o,t.set(o,e.current),e.current},recordReactionAsCommitted:function(e){r.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(Nr):function(){var e,t=new Set;function n(){void 0===e&&(e=setTimeout(r,1e4))}function r(){e=void 0;var r=Date.now();t.forEach((function(e){var n=e.current;n&&r>=n.cleanAt&&(n.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&n()}return{addReactionToTrack:function(e,r,i){var a;return e.current=Fr(r),a=e,t.add(a),n(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),r())},resetCleanupScheduleForTests:function(){var n,r;if(t.size>0){try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=i.next();!a.done;a=i.next()){var o=a.value,s=o.current;s&&(s.reaction.dispose(),o.current=null)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}(),Vr=Ur.addReactionToTrack,Wr=Ur.recordReactionAsCommitted,qr=(Ur.resetCleanupScheduleForTests,Ur.forceCleanupTimerToRunNowForTests,!1);function Yr(){return qr}var Xr=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function Hr(e){return"observer".concat(e)}var Gr=function(){};function $r(){return new Gr}var Zr="function"==typeof Symbol&&Symbol.for,Kr=Zr?Symbol.for("react.forward_ref"):"function"==typeof n.forwardRef&&(0,n.forwardRef)((function(e){return null})).$$typeof,Jr=Zr?Symbol.for("react.memo"):"function"==typeof n.memo&&(0,n.memo)((function(e){return null})).$$typeof;function ei(e,r){var i;if(Jr&&e.$$typeof===Jr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Yr())return e;var a=null!==(i=null==r?void 0:r.forwardRef)&&void 0!==i&&i,o=e,s=e.displayName||e.name;if(Kr&&e.$$typeof===Kr&&(a=!0,"function"!=typeof(o=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var l=function(e,r){return function(e,r){if(void 0===r&&(r="observed"),Yr())return e();var i=Xr(n.useState($r),1)[0],a=Xr(n.useState(),2)[1],o=function(){return a([])},s=n.useRef(null);if(!s.current)var l=new t.le(Hr(r),(function(){u.mounted?o():u.changedBeforeMount=!0})),u=Vr(s,l,i);var c,f,d=s.current.reaction;if(n.useDebugValue(d,Lr),n.useEffect((function(){return Wr(s),s.current?(s.current.mounted=!0,s.current.changedBeforeMount&&(s.current.changedBeforeMount=!1,o())):(s.current={reaction:new t.le(Hr(r),(function(){o()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},o()),function(){s.current.reaction.dispose(),s.current=null}}),[]),d.track((function(){try{c=e()}catch(e){f=e}})),f)throw f;return c}((function(){return o(e,r)}),s)};return""!==s&&(l.displayName=s),e.contextTypes&&(l.contextTypes=e.contextTypes),a&&(l=(0,n.forwardRef)(l)),function(e,t){Object.keys(e).forEach((function(n){ni[n]||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}(e,l=(0,n.memo)(l)),l}var ti,ni={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};(ti=Rr.unstable_batchedUpdates)||(ti=function(e){e()}),(0,t.jQ)({reactionScheduler:ti});let ri="localhost"===location.hostname,ii=rn.j.supported;const ai=ei((()=>{let t=(0,n.useContext)(ji).instance;return(0,n.useEffect)((()=>{Jt.hide(),Jt.rebuild()}),[t?.running,t?.paused,t?.renderType]),(0,e.jsxs)("div",{id:"center-column",children:[(0,e.jsxs)("div",{id:"controls",children:[(0,e.jsx)("h3",{id:"model-select",children:t?.name}),t&&(0,e.jsxs)(e.Fragment,{children:[" ",(0,e.jsxs)("p",{children:["size:"," ",t.MZ>1?`${t.MX}x${t.MY}x${t.MZ}`:`${t.MX}x${t.MY}`,"  ","seed: ",t.seed]}),t.loading?(0,e.jsx)("p",{children:"loading..."}):(0,e.jsxs)("div",{id:"control-buttons",children:[t.running?(0,e.jsx)("button",{onClick(){t.paused?t.resume():t.pause()},"data-tip":t.paused?"Resume":"Pause",children:t.paused?(0,e.jsx)("i",{className:"fa-solid fa-play"}):(0,e.jsx)("i",{className:"fa-solid fa-pause"})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("button",{onClick:()=>t.start(),"data-tip":"Play",children:(0,e.jsx)("i",{className:"fa-solid fa-play"})})}),(0,e.jsx)("button",{onClick:()=>t.step(),"data-tip":"Step",children:(0,e.jsx)("i",{className:"fa-solid fa-forward-step"})}),(0,e.jsx)("button",{onClick:()=>t.randomize(),disabled:t.running,"data-tip":"Randomize Seed",children:(0,e.jsx)("i",{className:"fa-solid fa-dice"})}),t.output&&(0,e.jsx)("button",{id:"vox-download",onClick:()=>(0,jr.saveAs)(new Blob([t.output.buffer]),t.output.name),"data-tip":"Download Output (.vox)",children:(0,e.jsx)("i",{className:"fa-solid fa-download"})}),ii&&"bitmap"!==t.renderType&&t.MZ>1&&(0,e.jsx)("button",{onClick:()=>t.toggleRender("voxel"===t.renderType?"isometric":"voxel"),"data-tip":"voxel"===t.renderType?"Isometric View":"3D View",children:"voxel"===t.renderType?(0,e.jsx)("i",{className:"fa-solid fa-cubes"}):(0,e.jsx)("i",{className:"fa-solid fa-video"})}),ri&&(0,e.jsx)("button",{id:"debug",onClick:()=>t.debug(),children:(0,e.jsx)("i",{className:"fa-solid fa-bug","data-tip":"Debug "})})]})]})]}),(0,e.jsx)("canvas",{id:"model-canvas"}),t&&(0,e.jsxs)("div",{id:"speed",children:[(0,e.jsx)("label",{style:{left:(t.speed+200)/400*100+"%"},children:t.speed>=0?`x${t.speed||1}`:-t.speed+"ms"}),(0,e.jsx)("input",{id:"speed-bar",type:"range",min:-200,max:200,step:1,value:t.speed,onChange:e=>t.speed=e.target.valueAsNumber})]})]})})),oi=ei((()=>{let t=(0,n.useContext)(ji),r=t.instance,[i,a]=(0,n.useState)("");(0,n.useEffect)((()=>{t.loadPalette(),t.listModels();let e=localStorage.getItem("last-mj-model");e&&t.load(e)}),[]);let o=[...t.models.keys()];return(0,e.jsxs)("div",{id:"left-column",children:[(0,e.jsxs)("h1",{id:"title",children:["MarkovJunior"," ",(0,e.jsx)("i",{className:"fa-brands fa-github",onClick:()=>window.open("https://github.com/Yuu6883/MarkovJuniorWeb")})]}),(0,e.jsx)("div",{id:"search-model",children:(0,e.jsxs)("div",{id:"input-holder",children:[(0,e.jsx)("input",{type:"text",defaultValue:i,onChange:e=>a(e.target.value.trim()),placeholder:"Filter model by name"}),(0,e.jsx)("i",{className:"fa-solid fa-magnifying-glass"})]})}),(0,e.jsx)("div",{id:"model-list",children:o.filter((e=>e.toLowerCase().includes(i.toLowerCase()))).map((n=>(0,e.jsx)("div",{"data-selected":r?.key===n,onClick(){t.load(n),localStorage.setItem("last-mj-model",n)},children:n},n)))})]})})),si=ei((()=>{let t=(0,n.useContext)(ji);return(0,e.jsx)("div",{id:"mobile-select",children:(0,e.jsxs)("select",{defaultValue:"disabled",onChange:e=>t.load(e.target.value),children:[(0,e.jsx)("option",{value:"disabled",disabled:!0,children:"SELECT MODEL"}),[...t.models.keys()].map((t=>(0,e.jsx)("option",{value:t,children:t},t)))]})})}));let li=ei((()=>{let t=(0,n.useContext)(ji).instance,r=t.renderer.colorHex,i=t.renderer.characters,[a,o]=(0,n.useState)(0);return(0,e.jsxs)("div",{id:"palette-container",children:[(0,e.jsx)("h4",{children:"Palette"}),(0,e.jsx)("div",{children:r.map(((n,r)=>(0,e.jsx)("input",{type:"color",defaultValue:n,onChange(e){a&&cancelAnimationFrame(a),o(requestAnimationFrame((()=>{let n=an.W.hex2rgba(e.target.value);t.renderer.updateSymbol(i.charAt(r),n),t.renderer.updateColors(),o(0)})))},"data-tip":i.charAt(r)},r)))})]})}));const ui=ei((()=>{let t=(0,n.useContext)(ji).instance;return(0,e.jsx)("div",{id:"right-column",children:t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(li,{}),(0,e.jsx)(wi,{})]})})}));let ci=ei((({value:t})=>{let r=(0,n.useContext)(ji).instance.renderer.colorHex;return(0,e.jsx)("td",{"data-transparent":255===t,style:{backgroundColor:r[t]}})})),fi=ei((({value:t,wildcard:r})=>{let i,a=(0,n.useContext)(ji).instance.renderer.colorHex,o=t===r;if(t&t-1){if(!o){let e=[];for(let n=1,i=0;n<r;n<<=1,i++)t&n&&e.push(a[i]);i=`linear-gradient(135deg, ${e.map(((t,n)=>`${t} ${100/e.length*n}%, ${t} ${100/e.length*(n+1)}%`)).join(", ")})`}}else i=a[Math.log2(t)];return(0,e.jsx)("td",{"data-transparent":o,style:{background:i}})})),di=ei((({rule:t,children:r})=>{let[i,a,o,s,l,u]=t.IO_DIM,c=(0,n.useMemo)((()=>Array.from({length:o},((n,r)=>(0,e.jsx)("table",{style:{top:5*r+"px",left:5*r+"px",zIndex:o-r,opacity:r?(o-r)/o/2+.25:1},children:(0,e.jsx)("tbody",{children:Array.from({length:a},((n,o)=>(0,e.jsx)("tr",{children:Array.from({length:i},((n,s)=>(0,e.jsx)(fi,{wildcard:t.wildcard,value:t.input[s+o*i+r*i*a]},s)))},o)))})},r)))),[i,a,o]),f=(0,n.useMemo)((()=>Array.from({length:u},((n,r)=>(0,e.jsx)("table",{style:{top:5*r+"px",left:5*r+"px",zIndex:u-r,opacity:r?(u-r)/u/2+.25:1},children:(0,e.jsx)("tbody",{children:Array.from({length:l},((n,i)=>(0,e.jsx)("tr",{children:Array.from({length:s},((n,a)=>(0,e.jsx)(ci,{value:t.output[a+i*s+r*s*l]},a)))},i)))})},r)))),[s,l,u]);return(0,e.jsxs)("div",{className:"rule","data-size":i>5||a>5||s>5||l>5?"small":"normal",children:[(0,e.jsx)("div",{className:"grid",style:{width:`calc((var(--size) + 1px) * ${i} + ${5*o}px)`,height:`calc((var(--size) + 1px) * ${a} + ${5*o}px)`},children:c}),(0,e.jsx)("i",{className:"fa-solid fa-arrow-right"}),(0,e.jsx)("div",{className:"grid",style:{width:`calc((var(--size) + 1px) * ${s} + ${5*u}px)`,height:`calc((var(--size) + 1px) * ${l} + ${5*u}px)`},children:f}),r]})})),hi=({field:t,c:n})=>(0,e.jsxs)("div",{className:"field",children:[(0,e.jsx)("label",{children:"field"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(ci,{value:n})})})}),(0,e.jsx)("label",{children:t.inversed?"from":"to"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:an.W.nonZeroPositions(t.zero).map(((t,n)=>(0,e.jsx)(ci,{value:t},n)))})})}),(0,e.jsx)("label",{children:"on"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:an.W.nonZeroPositions(t.substrate).map(((t,n)=>(0,e.jsx)(ci,{value:t},n)))})})}),(0,e.jsxs)("label",{children:["Recompute: ",String(t.recompute)]}),(0,e.jsxs)("label",{children:["Essential: ",String(t.essential)]})]}),pi=({c:t,obs:n})=>(0,e.jsxs)("div",{className:"field",children:[(0,e.jsx)("label",{children:"observe"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(ci,{value:t})})})}),(0,e.jsx)("label",{children:"from"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(ci,{value:n.from})})})}),(0,e.jsx)("label",{children:"to"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(fi,{value:n.to,wildcard:1073741823})})})})]}),mi=ei((({state:t})=>(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"rule-list",children:t.source.rules.map(((n,r)=>n.original&&(0,e.jsxs)(di,{rule:n,children:[n.p<1&&(0,e.jsxs)("label",{children:["p = ",n.p.toFixed(4)]}),!r&&t instanceof Mr&&(0,e.jsxs)(e.Fragment,{children:[t.steps>0&&(0,e.jsxs)("label",{children:[t.counter,"/",t.steps]}),t.temperature>0&&(0,e.jsxs)("label",{children:["temperature:"," ",t.temperature]}),t.searchedState>0&&(0,e.jsxs)("label",{children:["Searched"," ",t.searchedState," states"]})]})]},r)))}),t instanceof Mr&&t.source.fields&&(0,e.jsx)("div",{className:"field-list",children:t.source.fields.map(((t,n)=>t&&(0,e.jsx)(hi,{c:n,field:t},n)))}),t instanceof Mr&&t.source.observations&&(0,e.jsx)("div",{className:"field-list",children:t.source.observations.map(((t,n)=>t&&(0,e.jsx)(pi,{c:n,obs:t},n)))})]}))),gi=ei((({state:t})=>{let{SMX:r,SMY:i,c0:a,c1:o,sample:s}=t,l=(0,n.useMemo)((()=>Array.from({length:i},((t,n)=>(0,e.jsx)("tr",{children:Array.from({length:r},((t,i)=>(0,e.jsx)(ci,{value:s[i+n*r]?o:a})))},n)))),[r,i]);return(0,e.jsx)("table",{className:"convchain-sample","data-size":r>5||i>5?"small":"normal",children:(0,e.jsx)("tbody",{children:l})})})),vi=ei((({state:t})=>(0,e.jsxs)("div",{className:"path-state",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"from"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:t.from.map(((t,n)=>(0,e.jsx)(ci,{value:t},n)))})})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"to"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:t.to.map(((t,n)=>(0,e.jsx)(ci,{value:t},n)))})})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"on"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:t.on.map(((t,n)=>(0,e.jsx)(ci,{value:t},n)))})})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{children:"colored"}),(0,e.jsx)("table",{children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(ci,{value:t.colored})})})})]})]}))),bi=ei((({rule:t})=>(0,e.jsxs)("div",{className:"convo-rule",children:[(0,e.jsx)("table",{"data-size":"normal",children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(ci,{value:t.input})})})}),(0,e.jsx)("i",{className:"fa-solid fa-arrow-right"}),(0,e.jsx)("table",{"data-size":"normal",children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:(0,e.jsx)(ci,{value:t.output})})})}),t.values&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("label",{children:"values:"}),(0,e.jsx)("table",{"data-size":"normal",children:(0,e.jsx)("tbody",{children:(0,e.jsx)("tr",{children:[...t.values].map(((t,n)=>(0,e.jsx)(ci,{value:t},n)))})})})]}),t.sums&&(0,e.jsxs)("label",{children:["sums:"," ",t.sums.reduceRight(((e,t,n)=>t?e?`${n},${e}`:n:e),"")]}),t.p<1&&(0,e.jsxs)("label",{children:["p = ",t.p]})]}))),yi=ei((({state:t})=>(0,e.jsxs)(e.Fragment,{children:[t.steps>0&&(0,e.jsx)("div",{style:{marginLeft:"20px"},children:(0,e.jsxs)("label",{children:[t.counter,"/",t.steps]})}),(0,e.jsx)("div",{className:"convo-rule-list",children:t.source.rules.map(((t,n)=>(0,e.jsx)(bi,{rule:t},n)))})]}))),Ai=ei((({state:t})=>t instanceof Mr||t instanceof xr?(0,e.jsx)(mi,{state:t}):t instanceof wr?(0,e.jsx)(gi,{state:t}):t instanceof Sr?(0,e.jsx)(vi,{state:t}):t instanceof _r?(0,e.jsx)(yi,{state:t}):(0,e.jsx)(e.Fragment,{}))),wi=ei((()=>{let t=(0,n.useContext)(ji).instance,r=(0,n.useRef)();return(0,n.useEffect)((()=>{let e=r.current;if(!e)return;let n=e.children[t.curr_node_index];n&&n.scrollIntoView({behavior:Math.abs(e.scrollTop-n.offsetTop)>800?"auto":"smooth"})}),[t.curr_node_index]),(0,n.useEffect)((()=>{Jt.hide(),Jt.rebuild()}),[t.nodes.length]),!!t.nodes.length&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h4",{children:"Node Tree"}),(0,e.jsx)("div",{id:"state-viz",ref:r,children:t.nodes.map((({state:n,depth:r,index:i,breakpoint:a},o)=>(0,e.jsxs)("div",{style:{marginLeft:2*r+"em"},className:"node-state","data-level-index":i,"data-highlight":t.curr_node_index===o,"data-breakpoint":a,children:[(0,e.jsx)("pre",{className:"breakpoint",onClick:()=>t.toggleBreakpoint(o)}),(0,e.jsxs)("label",{children:[(0,e.jsx)("span",{onClick:()=>t.toggleBreakpoint(o),children:n.name}),n.source.comment&&(0,e.jsx)("i",{className:"fa-solid fa-comment-dots","data-tip":n.source.comment})]}),(0,e.jsx)(Ai,{state:n})]},o)))})]})}));var _i=__webpack_require__(379),xi=__webpack_require__.n(_i),Si=__webpack_require__(795),Mi=__webpack_require__.n(Si),ki=__webpack_require__(569),Ei=__webpack_require__.n(ki),Ci=__webpack_require__(565),Ii=__webpack_require__.n(Ci),Oi=__webpack_require__(216),Ti=__webpack_require__.n(Oi),Bi=__webpack_require__(589),Di=__webpack_require__.n(Bi),Pi=__webpack_require__(998),zi={};zi.styleTagTransform=Di(),zi.setAttributes=Ii(),zi.insert=Ei().bind(null,"head"),zi.domAPI=Mi(),zi.insertStyleElement=Ti(),xi()(Pi.Z,zi),Pi.Z&&Pi.Z.locals&&Pi.Z.locals,(0,t.rC)(Pr);const ji=(0,n.createContext)(null);(0,en.s)(document.getElementById("app")).render((0,e.jsx)((()=>(0,e.jsxs)(ji.Provider,{value:Pr,children:[(0,e.jsx)(oi,{}),(0,e.jsx)(ai,{}),(0,e.jsx)(ui,{}),(0,e.jsx)(si,{}),(0,e.jsx)(Jt,{className:"tooltip"})]})),{}))})()})();